{"version":3,"file":"static/js/507.81a58085.chunk.js","mappings":"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","sources":["components/auth/CompleteReset.js","components/tools/NavBar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { useLocation, useNavigate } from 'react-router-dom'\nimport NavBar from '../tools/NavBar'\n\nconst CompleteReset = () => {\n  const [passwordValue, setPassword] = useState('')\n  const [confirmPassword, setConfirmPassword] = useState('')\n  const [message, setMessage] = useState('')\n  const location = useLocation()\n  const navigate = useNavigate()\n\n  // State to hold uid and token\n  const [uid, setUid] = useState(null)\n  const [token, setToken] = useState(null)\n\n  useEffect(() => {\n    // Extract the uid and token from the URL\n    const params = new URLSearchParams(location.search)\n    const uidFromParams = (params.get('uid'))\n    const tokenFromParams = (params.get('token'))\n\n    setUid(uidFromParams)\n    setToken(tokenFromParams)\n\n    if (!uidFromParams || !tokenFromParams) {\n      navigate('/')\n    } \n\n  }, [location])\n\n  const handlePasswordResetConfirm = async (event) => {\n    event.preventDefault()\n\n    // Ensure the passwords match\n    if (passwordValue !== confirmPassword) {\n      setMessage('Passwords do not match.')\n      return\n    }\n\n    // Now uid and token are available for the POST request\n    try {\n      console.log({ uid, token, passwordValue })\n      const response = await axios.post('api/auth/password-reset/', { uid, token, password: passwordValue })\n      setMessage(response.data.message)\n      navigate('/login')\n    } catch (error) {\n      console.error(error)\n    }\n  }\n\n  // setting password\n  const changePassword = (e) => {\n    setPassword(e.target.value)\n    console.log(e.target.value)\n  }\n\n  // setting password confirmation\n  const changePasswordConfirmation = (e) => {\n    setConfirmPassword(e.target.value)\n    console.log(e.target.value)\n  }\n\n  return (\n    <>\n      <NavBar navbarColour='#051885' />\n      <div className='login-page'>\n        <div className='login-content'>\n          <div className='form-section'>\n            <form className='form-detail' onSubmit={handlePasswordResetConfirm}>\n              <h2>Reset Password</h2>\n              <p>New Password</p>\n\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={passwordValue}\n                onChange={changePassword}\n                required\n              />\n              <p>Confirm New Password</p>\n              <input\n                type=\"password\"\n                name=\"confirmPassword\"\n                value={confirmPassword}\n                onChange={changePasswordConfirmation}\n                required\n              />\n              <button className='sign-up' type=\"submit\">Set New Password</button>\n              {message && <p className='error1'>*{message}</p>}\n\n            </form>\n          </div>\n        </div>\n      </div>  \n    </>\n  )\n}\n\nexport default CompleteReset\n","import { useNavigate, Link } from 'react-router-dom'\nimport React, { useState, useEffect, useRef } from 'react'\nimport axios from 'axios'\nimport { isUserAuth, getUserToken, getAccessToken } from '../auth/Auth'\nimport Select from 'react-select'\nimport { Modal } from 'react-bootstrap'\nimport { GoogleLogin } from '@react-oauth/google'\nimport { isEmail, isLength, matches } from 'validator'\nimport MenuModal from '../helpers/modals/MenuModal'\n\n\nconst NavBar = ({ navbarColour }) => {\n\n  // remove login token from storage\n  const removeItemFromStorage = (token) => {\n    localStorage.removeItem('wittle-user-token')\n    localStorage.removeItem('wittle-username')\n    window.location.reload()\n    setIsActive(false)\n  }\n\n  // state to enable navigation between pages\n  const navigate = useNavigate()\n\n  // state to manage navbar colour depending on page\n  // const [navbarColour, setNavBarColour] = useState('#051885')\n\n  const dropdownRef = useRef(null)\n  // const [isActive, setIsActive] = useDetectOutsideClick(dropdownRef, false)\n  const [isActive, setIsActive] = useState(false)\n  const openDropdown = () => setIsActive(!isActive)\n\n\n  // ? Section for login form detail within navbar\n  // set form data required for login\n\n  const [errors, setErrors] = useState({\n    email: '',\n    // username: '',\n    password: '',\n    passwordConfirmation: '',\n    // first_name: '',\n    // last_name: '',\n  })\n\n  // function for setting user to local storage when log in is successful\n  const setUserTokenToLocalStorage = (token) => {\n    window.localStorage.setItem('wittle-user-token', token)\n  }\n\n  // send form to back end to log in\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    try {\n      const { data } = await axios.post('/api/auth/login/', registerData)\n      console.log(registerData)\n      setUserTokenToLocalStorage(data.token)\n      //console.log(data.token)\n      console.log({ data })\n      window.localStorage.setItem('wittle-username', data.username)\n      console.log('username ->', data.username)\n      navigate('/')\n    } catch (error) {\n      setErrors(true)\n    }\n  }\n\n  // update form dtail when logging in\n  const handleChange = (e) => {\n    setRegisterData({ ...registerData, [e.target.name]: e.target.value })\n    setErrors(false)\n  }\n\n  // state for determining password state type\n  const [loginPasswordType, setLoginPasswordType] = useState('password')\n  const [registerPasswordType, setRegisterPasswordType] = useState('password')\n\n  // password reveal button\n  const passwordReveal = () => {\n    if (loginPasswordType === 'password') {\n      setLoginPasswordType('text')\n    } else {\n      setLoginPasswordType('password')\n    }\n  }\n\n  // password reveal button\n  const passwordRegisterReveal = () => {\n    if (registerPasswordType === 'password') {\n      setRegisterPasswordType('text')\n    } else {\n      setRegisterPasswordType('password')\n    }\n  }\n\n  // ? Menu modal\n  // state for the menu modal\n  const [menuShow, setMenuShow] = useState(false)\n\n  // close modal\n  const handleMenuClose = () => {\n    setMenuShow(false)\n  }\n\n  // open modal\n  const handleMenuShow = () => {\n    setMenuShow(true)\n  }\n\n  // ? Registration modal\n  // set state for showing insights modal\n  const [registerShow, setRegisterShow] = useState(false)\n\n  // close modal\n  const handleRegisterClose = () => {\n    setRegisterShow(false)\n  }\n\n  // show the modal\n  const handleRegisterShow = () => {\n    setRegisterShow(true)\n  }\n\n  // register data\n  const [registerData, setRegisterData] = useState({\n    email: '',\n    username: '',\n    password: '',\n    password_confirmation: '',\n    first_name: '',\n    last_name: '',\n  })\n\n  // register data erros\n  const [registerError, setRegisterError] = useState({\n    email: '',\n    username: '',\n    password: '',\n    password_confirmation: '',\n    first_name: '',\n    last_name: '',\n    post: '',\n  })\n\n  // function to validate the password\n  const validatePassword = (password) => {\n    const minLength = 8\n    const hasUppercase = matches(password, /[A-Z]/)\n    const hasLowercase = matches(password, /[a-z]/)\n    const hasDigit = matches(password, /\\d/)\n    const hasSpecialChar = matches(password, /[^A-Za-z0-9]/)\n\n    if (!isLength(password, { min: minLength })) {\n      return 'Password must be at least 8 characters long'\n    }\n    if (!hasUppercase) {\n      return 'Password must contain at least one uppercase letter'\n    }\n    if (!hasLowercase) {\n      return 'Password must contain at least one lowercase letter'\n    }\n    if (!hasDigit) {\n      return 'Password must contain at least one digit'\n    }\n    if (!hasSpecialChar) {\n      return 'Password must contain at least one special character'\n    }\n    return ''\n  }\n\n  // update registration data and enter errors where relevant\n  const registerChange = (e) => {\n    setRegisterData({ ...registerData, [e.target.name]: e.target.value })\n    if (!isEmail(registerData.email)) {\n      setRegisterError({ ...registerError, email: 'Invalid email address' })\n\n    } else if (e.target.name === 'first_name') {\n      if (e.target.value.length < 1) {\n        setRegisterError({ ...registerError, first_name: 'Add first name' })\n      } else {\n        setRegisterError({ ...registerError, first_name: '' })\n      }\n\n    } else if (e.target.name === 'last_name') {\n      if (e.target.value.length < 1) {\n        setRegisterError({ ...registerError, last_name: 'Add last name' })\n      } else {\n        setRegisterError({ ...registerError, last_name: '' })\n      }\n\n    } else if (e.target.name === 'username') {\n      if (e.target.value.length < 1) {\n        setRegisterError({ ...registerError, username: 'Add username' })\n      } else {\n        setRegisterError({ ...registerError, username: '' })\n      }\n\n    } else if (e.target.name === 'password') {\n      const passwordError = validatePassword(e.target.value)\n      setRegisterError({ ...registerError, password: passwordError })\n\n    } else if (e.target.name === 'password_confirmation') {\n      if (e.target.value !== registerData.password) {\n        setRegisterError({ ...registerError, password_confirmation: 'Passwords don\\'t match' })\n      } else {\n        setRegisterError({ ...registerError, password_confirmation: '' })\n      }\n    }\n  }\n\n  // submit registration form\n  const registerSubmit = async (e) => {\n    e.preventDefault()\n    try {\n      await axios.post('/api/auth/register/', registerData)\n      const { data } = await axios.post('/api/auth/login/', registerData)\n      setUserTokenToLocalStorage(data.token)\n      window.localStorage.setItem('wittle-username', data.username)\n      console.log('username ->', data.username)\n      handleRegisterClose()\n      setRegisterData()\n    } catch (err) {\n      console.log(err)\n      setRegisterError({ ...registerError, post: 'Wittle account with this email already exists' })\n    }\n  }\n\n\n  const responseMessage = (response) => {\n    console.log(response)\n  }\n\n  const errorMessage = (error) => {\n    console.log(error)\n  }\n\n\n  // post google information for authentication\n  const googleLogin = async (response) => {\n    try {\n      // await axios.post('/api/auth/google/', registerData)\n      const auth = { 'auth_token': response.credential }\n      console.log(auth)\n      const { data } = await axios.post('/api/auth/google/', {\n        body: JSON.stringify(auth),\n      })\n      console.log(data)\n    } catch (err) {\n      setErrors(err)\n      console.log(err)\n      console.log(err.response.data)\n    }\n  }\n\n  return (\n    <>\n      <section className='nav-section' style={{ backgroundColor: navbarColour }}>\n        <div className='left-section'>\n          <div className='logo'>\n            <h2 onClick={() => navigate('/')}>Wittle</h2>\n            {/* <div className='logo-image'></div> */}\n          </div>\n          <h4 onClick={() => navigate('/agents')} className='agent-button'>For agents</h4>\n          <h4 onClick={() => navigate('/blogs/school-search-simplified')} className='agent-button'>Insights</h4>\n        </div>\n        <div className='menu-container' onClick={handleMenuShow}>\n          <div className=\"menu-trigger\">\n            <span>\n              <div className='burger-icon'>\n                <hr className='burger-icon-line' />\n                <hr className='burger-icon-line' />\n                <hr className='burger-icon-line' />\n              </div>\n            </span>\n          </div>\n        </div>\n        <button onClick={() => navigate('/login')} className='agent-login'>Agent login</button>\n      </section>\n      <MenuModal\n        menuShow={menuShow}\n        setMenuShow={setMenuShow}\n        handleMenuClose={handleMenuClose}\n        removeItemFromStorage={removeItemFromStorage}\n      />\n    </>\n  )\n\n}\n\nexport default NavBar"],"names":["passwordValue","setPassword","useState","confirmPassword","setConfirmPassword","message","setMessage","location","useLocation","navigate","useNavigate","uid","setUid","token","setToken","useEffect","params","URLSearchParams","search","uidFromParams","get","tokenFromParams","navbarColour","className","onSubmit","async","event","preventDefault","console","log","response","axios","password","data","error","type","name","value","onChange","e","target","required","isActive","setIsActive","useRef","errors","setErrors","email","passwordConfirmation","loginPasswordType","setLoginPasswordType","registerPasswordType","setRegisterPasswordType","menuShow","setMenuShow","registerShow","setRegisterShow","registerData","setRegisterData","username","password_confirmation","first_name","last_name","registerError","setRegisterError","post","style","backgroundColor","onClick","handleMenuClose","removeItemFromStorage","localStorage","removeItem","window","reload"],"sourceRoot":""}