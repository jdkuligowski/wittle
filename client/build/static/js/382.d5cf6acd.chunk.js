"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[382],{49382:function(e,s,i){i.r(s),i.d(s,{default:function(){return v}});var l=i(72791),t=i(31243),n=i(57689),c=i(97165),a=i(52094),d=i(60764),r=i(78084),o=i(98472);const h=l.createContext({}),m=!0;function u(e){let{baseColor:s,highlightColor:i,width:l,height:t,borderRadius:n,circle:c,direction:a,duration:d,enableAnimation:r=m}=e;const o={};return"rtl"===a&&(o["--animation-direction"]="reverse"),"number"===typeof d&&(o["--animation-duration"]=`${d}s`),r||(o["--pseudo-element-display"]="none"),"string"!==typeof l&&"number"!==typeof l||(o.width=l),"string"!==typeof t&&"number"!==typeof t||(o.height=t),"string"!==typeof n&&"number"!==typeof n||(o.borderRadius=n),c&&(o.borderRadius="50%"),"undefined"!==typeof s&&(o["--base-color"]=s),"undefined"!==typeof i&&(o["--highlight-color"]=i),o}function x(e){let{count:s=1,wrapper:i,className:t,containerClassName:n,containerTestId:c,circle:a=!1,style:d,...r}=e;var o,x,j;const v=l.useContext(h),p={...r};for(const[l,h]of Object.entries(r))"undefined"===typeof h&&delete p[l];const g={...v,...p,circle:a},N={...d,...u(g)};let f="react-loading-skeleton";t&&(f+=` ${t}`);const y=null!==(o=g.inline)&&void 0!==o&&o,b=[],w=Math.ceil(s);for(let h=0;h<w;h++){let e=N;if(w>s&&h===w-1){const i=null!==(x=e.width)&&void 0!==x?x:"100%",l=s%1,t="number"===typeof i?i*l:`calc(${i} * ${l})`;e={...e,width:t}}const i=l.createElement("span",{className:f,style:e,key:h},"\u200c");y?b.push(i):b.push(l.createElement(l.Fragment,{key:h},i,l.createElement("br",null)))}return l.createElement("span",{className:n,"data-testid":c,"aria-live":"polite","aria-busy":null!==(j=g.enableAnimation)&&void 0!==j?j:m},i?b.map(((e,s)=>l.createElement(i,{key:s},e))):b)}var j=i(80184);var v=()=>{const e=(0,n.s0)(),[s,i]=((0,n.TH)(),(0,l.useState)([])),[h,m]=(0,l.useState)(),[u,v]=(0,l.useState)(),[p,g]=(0,l.useState)(),[N,f]=(0,l.useState)("My saved items"),[y,b]=(0,l.useState)("My saved items"),[w,S]=(0,l.useState)(!1),[C,k]=(0,l.useState)(""),[P,_]=(0,l.useState)(""),[F,D]=(0,l.useState)(null),[E,A]=(0,l.useState)(),[L,$]=(0,l.useState)(0),[B,H]=(0,l.useState)(),[O,Z]=(0,l.useState)("Property prospects"),[I,Y]=(0,l.useState)(),[z,M]=(0,l.useState)("Search"),R=()=>{if((0,c.Hb)()){(async()=>{try{const{data:e}=await t.Z.get(`/api/auth/profile/${(0,c.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log("user data ->",e),m(e);const s=e.epc_favourites.map(((e,s)=>({number:s+1,postcode:e.postcode||"",address:e.address||"",dateSaved:e.date_added?new Date(e.date_added).toLocaleDateString():""})));Y(s)}catch(e){g(!0),console.log(e)}})()}else e("/access-denied"),console.log("no account")};(0,l.useEffect)((()=>{R()}),[]);const W=s=>{console.log("postcode ->",s.postcode),window.localStorage.setItem("listing-postcode",JSON.stringify(s.postcode)),window.localStorage.setItem("listing-route",JSON.stringify("On")),e("/agents/listing-generator")};return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("section",{className:"agent-profile-page",children:[(0,j.jsx)("div",{className:"desktop-nav",children:(0,j.jsx)(d.Z,{navbarColour:"#FDF7F0"})}),(0,j.jsx)("div",{className:"mobile-nav",children:(0,j.jsx)(r.Z,{setProfileContent:f,profileContent:N,profileDetail:y,setProfileDetail:b})}),(0,j.jsx)(a.Z,{setProfileDetail:b,variableSide:w,setProfileContent:f,setVariableSide:S,userData:h}),(0,j.jsx)("section",{className:"main-body",children:(0,j.jsx)("section",{className:"main-body-details",children:(0,j.jsxs)("section",{className:"favourites-section",children:[(0,j.jsxs)("div",{className:"listing-options",children:[(0,j.jsxs)("div",{className:"listing-buttons",children:[(0,j.jsx)("h5",{onClick:()=>Z("Listings"),style:{borderBottom:"Listings"===O?"3px solid #ED6B86":"none",textUnderlineOffset:"Listings"===O?"0.5em":"initial",fontWeight:"Listings"===O?"700":"400"},children:"Listings"}),(0,j.jsx)("h5",{onClick:()=>Z("Property prospects"),style:{borderBottom:"Property prospects"===O?"3px solid #ED6B86":"none",textUnderlineOffset:"Property prospects"===O?"0.5em":"initial",fontWeight:"Property prospects"===O?"700":"400"},children:"Property prospects"})]}),(0,j.jsx)("div",{className:"logout-button",onClick:s=>{localStorage.removeItem("wittle-user-token"),localStorage.removeItem("wittle-username"),e("/login")},children:(0,j.jsx)("div",{className:"logout-icon"})})]}),(0,j.jsx)("hr",{className:"title-line"}),(0,j.jsx)("div",{className:"favourites-body",children:"Property prospects"===O&&h&&h.epc_favourites.length>0?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"favourite-count",children:[(0,j.jsxs)("h3",{children:["You have ",h?h.epc_favourites.length:""," prospective properties saved"]}),h&&h.epc_favourites&&(0,j.jsx)(o.CSVLink,{data:I,className:"export",filename:"Wittle property list.csv",children:(0,j.jsx)("div",{className:"header-cta",children:(0,j.jsxs)("div",{className:"copy-button",children:[(0,j.jsx)("div",{className:"export-icon"}),(0,j.jsx)("h3",{children:"Export"})]})})})]}),(0,j.jsxs)("div",{className:"table-section",children:[(0,j.jsxs)("div",{className:"table-headers",children:[(0,j.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,j.jsx)("div",{id:"column2",className:"column",children:(0,j.jsx)("h5",{children:"Address"})}),(0,j.jsx)("div",{id:"column3",className:"column",children:(0,j.jsx)("h5",{children:"Postcode"})}),(0,j.jsx)("div",{id:"column4",className:"column",children:(0,j.jsx)("h5",{children:"Date saved"})}),(0,j.jsx)("div",{id:"column5",className:"column",children:(0,j.jsx)("h5",{children:"Search category"})}),(0,j.jsx)("div",{id:"column6",className:"column",children:(0,j.jsx)("h5",{children:"Action"})})]}),(0,j.jsx)("hr",{className:"property-divider"}),(0,j.jsx)("div",{className:"table-details",children:h?h.epc_favourites.map(((s,i)=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"results-content",children:[(0,j.jsx)("div",{className:"column",id:"column1",children:(0,j.jsx)("h5",{children:i+1})}),(0,j.jsx)("div",{className:"column",id:"column2",onClick:()=>W(s),children:(0,j.jsx)("h5",{children:null===s.address?"N/a":s.address})}),(0,j.jsx)("div",{className:"column",id:"column3",children:(0,j.jsx)("h5",{children:s.postcode})}),(0,j.jsx)("div",{className:"column",id:"column4",children:(0,j.jsx)("h5",{children:s.date_added})}),(0,j.jsx)("div",{className:"column",id:"column5",children:(0,j.jsx)("h5",{children:s.category})}),(0,j.jsx)("div",{className:"column",id:"column6",onClick:()=>(async s=>{if((0,c.Hb)())try{const{data:e}=await t.Z.delete("/api/epc_favourite/",{data:{postcode:s.postcode,address:s.address},headers:{Authorization:`Bearer ${(0,c.hP)()}`}});R()}catch(i){console.error("Error deleting favourite:",i)}else e("/access-denied"),console.log("logged out")})(s),children:(0,j.jsx)("h5",{className:"remove",children:"\ud83d\uddd1"})})]},i),(0,j.jsx)("hr",{className:"property-divider"})]}))):""})]})]}):"Property prospects"===O&&h&&0===h.epc_favourites.length?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"favourite-count",children:(0,j.jsx)("h3",{children:"\ud83d\ude15 You don't have any properties saved here. Head to the property finder tab to get started!"})})}):"Listings"===O&&h&&h.listing_favourites.length>0?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"favourite-count",children:(0,j.jsxs)("h3",{children:["You have ",h?h.listing_favourites.length:""," ",h&&1===h.listing_favourites.length?"listing":"listings"," saved"]})}),(0,j.jsxs)("div",{className:"table-section",children:[(0,j.jsxs)("div",{className:"table-headers",children:[(0,j.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,j.jsx)("div",{id:"column2",className:"column",children:(0,j.jsx)("h5",{children:"Address"})}),(0,j.jsx)("div",{id:"column3",className:"column",children:(0,j.jsx)("h5",{children:"Postcode"})}),(0,j.jsx)("div",{id:"column4",className:"column",children:(0,j.jsx)("h5",{children:"Channel"})}),(0,j.jsx)("div",{id:"column5",className:"column",children:(0,j.jsx)("h5",{children:"Date saved"})}),(0,j.jsx)("div",{id:"column6",className:"column",children:(0,j.jsx)("h5",{children:"Action"})})]}),(0,j.jsx)("hr",{className:"property-divider"}),(0,j.jsx)("div",{className:"table-details",children:h?h.listing_favourites.map(((s,i)=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"results-content",children:[(0,j.jsx)("div",{className:"column",id:"column1",children:(0,j.jsx)("h5",{children:i+1})}),(0,j.jsx)("div",{className:"column",id:"column2",onClick:()=>W(s),children:(0,j.jsx)("h5",{children:""===s.address?"N/a":s.address})}),(0,j.jsx)("div",{className:"column",id:"column3",children:(0,j.jsx)("h5",{children:""===s.postcode?"N/a":s.postcode})}),(0,j.jsx)("div",{className:"column",id:"column4",children:(0,j.jsx)("h5",{children:s.channel})}),(0,j.jsx)("div",{className:"column",id:"column5",children:(0,j.jsx)("h5",{children:s.date_added})}),(0,j.jsx)("div",{className:"column",id:"column6",onClick:()=>(async s=>{if((0,c.Hb)())try{const{data:e}=await t.Z.delete(`/api/listing_favourites/${s.id}/`,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});R()}catch(i){console.error("Error deleting favourite:",i)}else e("/access-denied"),console.log("logged out")})(s),children:(0,j.jsx)("h5",{className:"remove",children:"\ud83d\uddd1"})})]},i),(0,j.jsx)("hr",{className:"property-divider"})]}))):""})]})]}):"Listings"===O&&h&&0===h.listing_favourites.length?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"favourite-count",children:(0,j.jsx)("h3",{children:"\ud83d\ude15 You don't have any properties saved here. Head to the listing generator tab to get started!"})})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"favourite-count",children:[(0,j.jsx)("h3",{children:(0,j.jsx)(x,{style:{backgroundColor:"grey"}})}),(0,j.jsx)(x,{})]}),(0,j.jsxs)("div",{className:"table-section",children:[(0,j.jsxs)("div",{className:"table-headers",children:[(0,j.jsx)("h5",{id:"column1",className:"column",children:(0,j.jsx)(x,{width:30,height:20})}),(0,j.jsx)("div",{id:"column2",className:"column",children:(0,j.jsx)("h5",{children:(0,j.jsx)(x,{width:100,height:20})})}),(0,j.jsx)("div",{id:"column3",className:"column",children:(0,j.jsx)("h5",{children:(0,j.jsx)(x,{width:100,height:20})})}),(0,j.jsx)("div",{id:"column4",className:"column",children:(0,j.jsx)("h5",{children:(0,j.jsx)(x,{width:100,height:20})})}),(0,j.jsx)("div",{id:"column5",className:"column",children:(0,j.jsx)("h5",{children:(0,j.jsx)(x,{width:150,height:20})})}),(0,j.jsx)("div",{id:"column6",className:"column",children:(0,j.jsx)("h5",{children:(0,j.jsx)(x,{width:100,height:20})})})]}),(0,j.jsx)("hr",{className:"property-divider"}),(0,j.jsx)("div",{className:"table-details",children:[...Array(5)].map(((e,s)=>(0,j.jsxs)("div",{className:"results-content",children:[(0,j.jsx)("div",{className:"column",id:"column1",children:(0,j.jsx)("h5",{children:(0,j.jsx)(x,{width:30,height:20})})}),(0,j.jsx)("div",{className:"column",id:"column2",children:(0,j.jsx)("h5",{children:(0,j.jsx)(x,{width:150,height:20})})}),(0,j.jsx)("div",{className:"column",id:"column3",children:(0,j.jsx)("h5",{children:(0,j.jsx)(x,{width:100,height:20})})}),(0,j.jsx)("div",{className:"column",id:"column4",children:(0,j.jsx)("h5",{children:(0,j.jsx)(x,{width:100,height:20})})}),(0,j.jsx)("div",{className:"column",id:"column5",children:(0,j.jsx)("h5",{children:(0,j.jsx)(x,{width:150,height:20})})}),(0,j.jsx)("div",{className:"column",id:"column6",children:(0,j.jsx)("h5",{children:(0,j.jsx)(x,{width:40,height:20})})}),(0,j.jsx)("hr",{className:"property-divider"})]},s)))})]})]})})]})})})]})})}}}]);
//# sourceMappingURL=382.d5cf6acd.chunk.js.map