"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[719],{80719:function(e,s,t){t.r(s),t.d(s,{default:function(){return P}});var a=t(72791),i=t(55294),l=t(57689),n=t(97165),c=(t(99696),t(24604),t(60764)),r=t(52094),o=t(78084),d=t(67842),h=t(82077),m=t(16409),u=t(59394),p=t(25423),x=t(84487),g=t(53300),j=t(7122),k=t(71213),v=t(39577),y=t(38040),N=t(20264),b=t(82213),_=t(92514),w=t(32767),f=t(19832),M=t(80184);var S=e=>{let{addressSubstring:s,postcodeSubstring:t,listingFields:i,postcodeData:l,topPrimaries:n,topSecondaries:c,restaurants1:r,cuisines:o,topRestaurants:d,gyms1:h,mainGyms:S,supermarkets1:F,mainSupermarkets:D,pubs1:C,topPubs:T,tubes1:P,trains1:E,setInsightView:Z,primaryData1:I,setPrimaryData1:B,secondaryData1:R,setSecondaryData1:L,setTubes1:V,setRestaurants1:q,setPubs1:O,setSupermarkets1:A,setGyms1:$,ev1:U,setEv1:G,secondaryDetail:Y,setSecondaryDetail:z,primaryDetail:W,setPrimaryDetail:H}=e;const[J,X]=(0,a.useState)("Overview"),[K,Q]=(0,a.useState)(),[ee,se]=(0,a.useState)(!1),[te,ae]=(0,a.useState)(!1),[ie,le]=(0,a.useState)(!1),[ne,ce]=(0,a.useState)(!1),[re,oe]=(0,a.useState)("Primary schools"),[de,he]=(0,a.useState)("Table");(0,a.useEffect)((()=>{l&&(()=>{const e=Math.ceil((1-l[0].crime[0].percentile+l[0].ev.percentile+l[0].fitness.percentile+(1-l[0].parks_postcode_summary.play_area_percentile)+l[0].restaurants.normal_percentile+l[0].supermarkets.percentile+l[0].tubes.percentile)/7*100);Q(e)})()}));return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("section",{className:"insights-results-wrapper remove-margin",children:[(0,M.jsxs)("section",{className:"insights-navigation remove-some-margin",children:[(0,M.jsx)("div",{className:"direction-arrow no-print",onClick:()=>Z("Search")}),(0,M.jsxs)("div",{className:"navigation-input",children:[(0,M.jsx)("h3",{className:"title",children:"Postcode"}),(0,M.jsx)("h3",{className:"result",children:t})]}),(0,M.jsxs)("div",{className:"navigation-input",children:[(0,M.jsx)("h3",{className:"title",children:"Address"}),(0,M.jsx)("h3",{className:"result",children:s})]}),(0,M.jsxs)("div",{className:"navigation-input no-print",children:[(0,M.jsx)("h3",{className:"title",children:"Channel"}),(0,M.jsx)("h3",{className:"result",children:i.channel})]})]}),(0,M.jsxs)("section",{className:"property-insights-wrapper",children:[(0,M.jsxs)("div",{className:"property-insight-nav no-print remove-margin",children:[(0,M.jsxs)("div",{className:"property-insight-buttons no-print remove-margin",children:[(0,M.jsx)("h3",{className:"insight-button "+("Overview"===J?"active":"inactive"),id:"left",onClick:()=>(X("Overview"),H("Table"),void z("Table")),children:"Property overview"}),(0,M.jsx)("h3",{className:"insight-button "+("Details"===J?"active":"inactive"),id:"right",onClick:()=>X("Details"),children:"Property details"})]}),(0,M.jsxs)("div",{className:"print-section",onClick:()=>window.print(),children:[(0,M.jsx)("div",{className:"print-icon"}),(0,M.jsx)("h3",{children:"Print"})]})]}),"Overview"===J?(0,M.jsxs)("div",{className:"insight-dropdowns",children:[(0,M.jsxs)("div",{className:"summary-header",children:[(0,M.jsx)("h3",{children:"Property Summary"}),(0,M.jsx)("hr",{className:"header-line"})]}),(0,M.jsx)(m.Z,{neighbourhoodScore:K,postcodeData:l}),(0,M.jsxs)("div",{className:"summary-header",onClick:()=>se(!ee),children:[(0,M.jsx)("h3",{children:"School highlights"}),(0,M.jsx)("hr",{className:"header-line"})]}),ee?(0,M.jsx)(u.Z,{topPrimaries:n,topSecondaries:c,setPropertyView:X,setSecondaryDetail:z,setPrimaryDetail:H,setSliderSelection:oe}):"",(0,M.jsxs)("div",{className:"summary-header",onClick:()=>ae(!te),children:[(0,M.jsx)("h3",{children:"Lifestyle highlights"}),(0,M.jsx)("hr",{className:"header-line"})]}),te?(0,M.jsx)(p.Z,{restaurants1:r,cuisines:o,topRestaurants:d,gyms1:h,mainGyms:S,supermarkets1:F,mainSupermarkets:D,pubs1:C,topPubs:T}):"",(0,M.jsxs)("div",{className:"summary-header",onClick:()=>le(!ie),children:[(0,M.jsx)("h3",{children:"Transport highlights"}),(0,M.jsx)("hr",{className:"header-line"})]}),ie?(0,M.jsx)(x.Z,{postcodeData:l,tubes1:P,trains1:E}):"",(0,M.jsxs)("div",{className:"summary-header",onClick:()=>ce(!ne),children:[(0,M.jsx)("h3",{children:"Neighbourhoood highlights"}),(0,M.jsx)("hr",{className:"header-line"})]}),ne?(0,M.jsx)(g.Z,{postcodeData:l}):""]}):"Details"===J?(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("div",{className:"property-details-wrapper",children:[(0,M.jsx)(j.Z,{sliderSelection:re,setSliderSelection:oe,setSecondaryDetail:z,setPrimaryDetail:H}),"School"===Y?(0,M.jsx)("h3",{className:"go-back",onClick:()=>z("Table"),children:"<- Back to secondary school long list"}):"School"===W?(0,M.jsx)("h3",{className:"go-back",onClick:()=>H("Table"),children:"<- Back to primary school long list"}):(0,M.jsxs)("div",{className:"detail-table-title",children:[(0,M.jsxs)("h3",{children:[re," list"]}),(0,M.jsx)("hr",{className:"table-title-line"}),(0,M.jsx)("input",{placeholder:"Explore the data"}),(0,M.jsx)("div",{className:"icon-box "+("Table"===de?"active":"inactive"),onClick:()=>he("Table"),children:(0,M.jsx)("div",{className:"icon",id:"table"})}),(0,M.jsx)("div",{className:"icon-box "+("Map"===de?"active":"inactive"),onClick:()=>he("Map"),children:(0,M.jsx)("div",{className:"icon",id:"map"})})]}),(0,M.jsx)("div",{className:"insight-tables",children:"Primary schools"===re?(0,M.jsx)(k.Z,{primaryData1:I,setPrimaryData1:B,postcodeData:l,tableMapView:de,listType:"short list",primaryDetail:W,setPrimaryDetail:H,setSliderSelection:oe,setPropertyView:X}):"Secondary schools"===re?(0,M.jsx)(v.Z,{secondaryData1:R,setSecondaryData1:L,postcodeData:l,tableMapView:de,listType:"short list",secondaryDetail:Y,setSecondaryDetail:z,setSliderSelection:oe,setPropertyView:X}):"Tubes"===re?(0,M.jsx)(y.Z,{tubes1:P,setTubes1:V,listType:"short list",postcodeData:l,tableMapView:de}):"Restaurants"===re?(0,M.jsx)(N.Z,{restaurants1:r,setRestaurants1:q,listType:"short list",postcodeData:l,tableMapView:de}):"Pubs"===re?(0,M.jsx)(b.Z,{pubs1:C,setPubs1:O,listType:"short list",postcodeData:l,tableMapView:de}):"Supermarkets"===re?(0,M.jsx)(_.Z,{supermarkets1:F,setSupermarkets1:A,listType:"short list",postcodeData:l,tableMapView:de}):"Fitness"===re?(0,M.jsx)(w.Z,{gyms1:h,setGyms1:$,listType:"short list",postcodeData:l,tableMapView:de}):"EVs"===re?(0,M.jsx)(f.Z,{ev1:U,setEv1:G,listType:"short list",postcodeData:l,tableMapView:de}):""})]})}):""]})]})})};var F=e=>{let{userData:s,loadUserData:t,setListingSelection:c}=e;const r=(0,l.s0)(),[o,d]=((0,l.TH)(),(0,a.useState)("Property prospects"));return(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("section",{className:"saved-listings",children:s&&s.listing_favourites.length>0?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:"favourite-count",children:(0,M.jsxs)("h3",{children:["You have ",s?s.listing_favourites.length:""," ",s&&1===s.listing_favourites.length?"listing":"listings"," saved"]})}),(0,M.jsxs)("div",{className:"table-section",children:[(0,M.jsxs)("div",{className:"table-headers",children:[(0,M.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,M.jsx)("div",{id:"column2",className:"column",children:(0,M.jsx)("h5",{children:"Address"})}),(0,M.jsx)("div",{id:"column3",className:"column",children:(0,M.jsx)("h5",{children:"Postcode"})}),(0,M.jsx)("div",{id:"column4",className:"column",children:(0,M.jsx)("h5",{children:"Channel"})}),(0,M.jsx)("div",{id:"column5",className:"column",children:(0,M.jsx)("h5",{children:"Date saved"})}),(0,M.jsx)("div",{id:"column6",className:"column",children:(0,M.jsx)("h5",{children:"Action"})})]}),(0,M.jsx)("hr",{className:"property-divider"}),(0,M.jsx)("div",{className:"table-details",children:s?s.listing_favourites.map(((e,s)=>(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-content",children:[(0,M.jsx)("div",{className:"column",id:"column1",children:(0,M.jsx)("h5",{children:s+1})}),(0,M.jsx)("div",{className:"column",id:"column2",onClick:()=>(e=>{console.log("postcode ->",e.postcode),window.localStorage.setItem("listing-postcode",JSON.stringify(e.postcode)),window.localStorage.setItem("listing-route",JSON.stringify("On")),c("Property insights"),r("/agents/listing-generator")})(e),children:(0,M.jsx)("h5",{children:""===e.address?"N/a":e.address})}),(0,M.jsx)("div",{className:"column",id:"column3",children:(0,M.jsx)("h5",{children:""===e.postcode?"N/a":e.postcode})}),(0,M.jsx)("div",{className:"column",id:"column4",children:(0,M.jsx)("h5",{children:e.channel})}),(0,M.jsx)("div",{className:"column",id:"column5",children:(0,M.jsx)("h5",{children:e.date_added})}),(0,M.jsx)("div",{className:"column",id:"column6",onClick:()=>(async e=>{if((0,n.Hb)())try{const{data:s}=await i.Z.delete(`/api/listing_favourites/${e.id}/`,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});t()}catch(s){console.error("Error deleting favourite:",s)}else r("/access-denied"),console.log("logged out")})(e),children:(0,M.jsx)("h5",{className:"remove",children:"\ud83d\uddd1"})})]},s),(0,M.jsx)("hr",{className:"property-divider"})]}))):""})]})]}):"Listings"===o&&s&&0===s.listing_favourites.length?(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("div",{className:"favourite-count",children:(0,M.jsx)("h3",{children:"\ud83d\ude15 You don't have any properties saved here. Head to the listing generator tab to get started!"})})}):""})})},D=t(3685),C=t(21830),T=t.n(C);i.Z.defaults.xsrfCookieName="csrftoken",i.Z.defaults.xsrfHeaderName="X-CSRFToken";var P=()=>{const e=(0,l.s0)(),[s,t]=(0,a.useState)(),[m,u]=(0,a.useState)(),[p,x]=(0,a.useState)(),g=(0,a.useRef)(null),[j,k]=(0,a.useState)(!1),[v,y]=(0,a.useState)("Listing generator"),[N,b]=(0,a.useState)("Listing generator"),[_,w]=(0,a.useState)("Search"),[f,C]=(0,a.useState)("Property insights"),[P,E]=(0,a.useState)(""),[Z,I]=(0,a.useState)(""),[B,R]=(0,a.useState)("Off"),[L,V]=(0,a.useState)({postcode:"",address:"",description:"",channel:"",bedrooms:"",bathrooms:"",property_type:"",tenure:"",size:"",on_road_parking:"",off_road_parking:"",balcony:"",primary_schools:0,secondary_schools:0,tubes:0,trains:0,restaurants:0,pubs:0,supermarkets:0,gyms:0,parks:0,evs:0,crime:0}),[q,O]=(0,a.useState)({location:"",size:"",property_type:"",bedrooms:"",bathrooms:"",en_suites:"",amenities:[],channel:"",additional_info:"",price:"",restaurants:"",pubs:"",supermarkets:"",tube:"",trains:"",parks:"",evs:"",primary_schools:"",secondary_schools:"",gyms:""}),[A,$]=(0,a.useState)(),[U,G]=(0,a.useState)(),[Y,z]=(0,a.useState)(),[W,H]=(0,a.useState)(),[J,X]=(0,a.useState)(),[K,Q]=(0,a.useState)(),[ee,se]=(0,a.useState)(),[te,ae]=(0,a.useState)(),[ie,le]=(0,a.useState)(),[ne,ce]=(0,a.useState)(),[re,oe]=(0,a.useState)(),[de,he]=(0,a.useState)(),[me,ue]=(0,a.useState)(),[pe,xe]=(0,a.useState)(),[ge,je]=(0,a.useState)(),[ke,ve]=(0,a.useState)(),[ye,Ne]=(0,a.useState)(),[be,_e]=(0,a.useState)(),[we,fe]=(0,a.useState)([]),[Me,Se]=(0,a.useState)([]),[Fe,De]=(0,a.useState)([]),[Ce,Te]=(0,a.useState)([]),[Pe,Ee]=(0,a.useState)(),[Ze,Ie]=(0,a.useState)(),[Be,Re]=(0,a.useState)(),[Le,Ve]=(0,a.useState)(),[qe,Oe]=(0,a.useState)(),[Ae,$e]=(0,a.useState)(!1),[Ue,Ge]=(0,a.useState)(!1),[Ye,ze]=(0,a.useState)("Table"),[We,He]=(0,a.useState)("Table"),Je=()=>{if((0,n.Hb)()){(async()=>{try{const{data:e}=await i.Z.get(`/api/auth/profile/${(0,n.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("user data ->",e),u(e)}catch(e){t(!0),console.log(e)}})()}else e("/access-denied"),console.log("no account")};(0,a.useEffect)((()=>{Je()}),[]);const Xe=async e=>{try{"listing_ai_total"===e&&$e(!1);const{data:s}=await i.Z.post("/api/postcodes/",{postcode:P});if(console.log("postcode data ->",s),$(s),ls(e),"listing_ai_total"===e&&Ge(!0),"listing_insight_total"===e){const e={...L,postcode:P,request_type:"Insights"};await i.Z.post("/api/listing_favourites/",e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});Ke()}if("listing_normal_total"===e){const e={...L,postcode:P,request_type:"Listing"};await i.Z.post("/api/listing_favourites/",e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}})}}catch(s){t(!0),console.log(s)}},Ke=e=>{window.localStorage.setItem("listing-postcode",JSON.stringify(P))};(0,a.useEffect)((()=>{A&&(()=>{try{(async()=>{const{data:e}=await i.Z.get("/api/primaries/");G(e)})()}catch(e){t(!0),console.log(e)}})()}),[A]);const Qe=20/60*5,es=6371,ss=e=>e*Math.PI/180,ts=5/60;(0,a.useEffect)((()=>{U&&(()=>{const e=U.filter((e=>{const s=ss(parseFloat(e.latitude)-parseFloat(A[0].longitude)),t=ss(parseFloat(e.longitude)-parseFloat(A[0].latitude)),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(ss(parseFloat(A[0].longitude)))*Math.cos(ss(parseFloat(e.latitude)))*Math.sin(t/2)*Math.sin(t/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),l=es*i;e.distance_between=l,e.walkTimeMin=Math.round(l/ts);const n=l/e.max_distance;return"Independent school"===e.school_type||"Special school"===e.school_type||"On request"===e.max_distance?e.within_catchment="N/a":"Based on map"===e.additional_status?e.within_catchment="Check catchment map":"Religion"===e.max_distance&e.distance_between<.6?e.within_catchment="Very likely if religious critera met":"Religion"===e.max_distance&e.distance_between<.8?e.within_catchment="Likely if religious critera met":"Religion"===e.max_distance&e.distance_between<1?e.within_catchment="Probably if religious critera met":"Religion"===e.max_distance&e.distance_between<1.5?e.within_catchment="Unlikely, even if religious critera met":"Religion"===e.max_distance&e.distance_between>1.5?e.within_catchment="Very unlikely, even if religious critera met":"Not specified"===e.max_distance&e.distance_between<.4?e.within_catchment="Very likely but no distance specified":"Not specified"===e.max_distance&e.distance_between<.7?e.within_catchment="Likely but no distance specified":"Not specified"===e.max_distance&e.distance_between<1?e.within_catchment="Probably but no distance specified":"Not specified"===e.max_distance&e.distance_between>1?e.within_catchment="Unlikely, but no distance specified":null===e.max_distance&e.distance_between<.6?e.within_catchment="Very likely, but no distance data available":null===e.max_distance&e.distance_between<.8?e.within_catchment="Likely, but no distance data available":null===e.max_distance&e.distance_between<1?e.within_catchment="Probably, but no distance data available":null===e.max_distance&e.distance_between<1.5?e.within_catchment="Unlikely, but no distance data available":null===e.max_distance&e.distance_between>1.5?e.within_catchment="Very unlikely, but no distance data available":n<=.6?e.within_catchment="Yes":n<=.8?e.within_catchment="Very likely":n<=1?e.within_catchment="Probably":n<=1.2?e.within_catchment="Probably not":"Does not apply"===e.max_distance?e.within_catchment="Yes":e.within_catchment="No",l<=Qe})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin)),s=e.slice(0,8);Q(s),z(e),console.log("nearby primaries ->",e)})()}),[U]);(0,a.useEffect)((()=>{A&&(()=>{try{(async()=>{const{data:e}=await i.Z.get("/api/secondaries/");H(e)})()}catch(e){t(!0),console.log(e)}})()}),[A]);(0,a.useEffect)((()=>{W&&(()=>{const e=W.filter((e=>{const s=ss(parseFloat(e.latitude)-parseFloat(A[0].longitude)),t=ss(parseFloat(e.longitude)-parseFloat(A[0].latitude)),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(ss(parseFloat(A[0].longitude)))*Math.cos(ss(parseFloat(e.latitude)))*Math.sin(t/2)*Math.sin(t/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),l=es*i;e.distance_between=l,e.walkTimeMin=Math.round(l/ts);const n=l/e.max_distance,c=l/e.min_distance;return e.school_type.includes("independent")||e.school_type.includes("special")?e.within_catchment="N/a":"Exam"===e.max_distance||"Test score"===e.max_distance?e.within_catchment="Dependent on test results":"Random"===e.max_distance?e.within_catchment="Random selection based on performance":"Catchment score"===e.max_distance?e.within_catchment="School uses catchment score - check":"Based on map"===e.max_distance?e.within_catchment="Check catchment map":"Religion"===e.max_distance&e.distance_between<.7?e.within_catchment="Very likely if religious critera met":"Religion"===e.max_distance&e.distance_between<.9?e.within_catchment="Likely if religious critera met":"Religion"===e.max_distance&e.distance_between<1.5?e.within_catchment="Probably if religious critera met":"Religion"===e.max_distance&e.distance_between>1.5?e.within_catchment="Unlikely, even if religious critera met":"Does not apply"===e.max_distance||null!==e.min_distance&c<=1?e.within_catchment="Yes":null!==e.min_distance&n<=.5?e.within_catchment="Very likely":null!==e.min_distance&n<=.7?e.within_catchment="Probably":e.within_catchment=n<=.6?"Yes":n<=.8?"Very likely":n<=1?"Probably":n<=1.2?"Probably not":"No",l<=2.5})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin)),s=e.slice(0,8);se(s),X(e)})()}),[W]);(0,a.useEffect)((()=>{A&&(()=>{try{(async()=>{const{data:e}=await i.Z.get("/api/restaurants/");ae(e)})()}catch(e){t(!0),console.log(e)}})()}),[A]);const as=1.25;(0,a.useEffect)((()=>{te&&(()=>{const e=te.filter((e=>{const s=ss(parseFloat(e.latitude)-parseFloat(A[0].longitude)),t=ss(parseFloat(e.longitude)-parseFloat(A[0].latitude)),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(ss(parseFloat(A[0].longitude)))*Math.cos(ss(parseFloat(e.latitude)))*Math.sin(t/2)*Math.sin(t/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),l=es*i;return e.distance_between=l,e.walkTimeMin=Math.round(l/ts),l<=as})).sort(((e,s)=>s.rating-e.rating)),s=e.filter((e=>"No Cuisine Data"!==e.cuisine)).slice(0,3).map((e=>e.restaurant_name));_e((e=>new Set(e.map((e=>e.cuisine))).size)(e)),ue(e),fe(s),1===L.restaurants&&O((s=>({...s,restaurants:`${e.length} restaurants within 15 min walk, with more than ${be} cuisines available`})))})()}),[te]);(0,a.useEffect)((()=>{A&&(()=>{try{(async()=>{const{data:e}=await i.Z.get("/api/gyms/");le(e)})()}catch(e){t(!0),console.log(e)}})()}),[A]);(0,a.useEffect)((()=>{ie&&(()=>{const e=["third space","pure gym","1 rebel","virgin","barry's","the gym group"],s=new Set,t=ie.filter((e=>{const s=ss(parseFloat(e.Lat)-parseFloat(A[0].longitude)),t=ss(parseFloat(e.long)-parseFloat(A[0].latitude)),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(ss(parseFloat(A[0].longitude)))*Math.cos(ss(parseFloat(e.Lat)))*Math.sin(t/2)*Math.sin(t/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),l=es*i;return e.distance_between=l,e.walkTimeMin=Math.round(l/ts),l<=as})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin)),a=[];for(let i=0;i<t.length;i++){const l=t[i];if(l.gym_group&&e.includes(l.gym_group.toLowerCase())&&!s.has(l.gym_group)&&(a.push(l.gym_group),s.add(l.gym_group),3===a.length))break}xe(t),De(a),1===L.gyms&&O((e=>({...e,gyms:`${t.length} gyms within 15 min walk, including ${a[0]} and  ${a[1]}`})))})()}),[ie]);(0,a.useEffect)((()=>{A&&(()=>{try{(async()=>{const{data:e}=await i.Z.get("/api/supermarkets/");oe(e)})()}catch(e){t(!0),console.log(e)}})()}),[A]);(0,a.useEffect)((()=>{re&&(()=>{const e=["m&s","waitrose","aldi","lidl","sainsburys","tesco","asda"],s=new Set,t=re.map((e=>{const s=ss(parseFloat(e.latitude)-parseFloat(A[0].longitude)),t=ss(parseFloat(e.longitude)-parseFloat(A[0].latitude)),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(ss(parseFloat(A[0].longitude)))*Math.cos(ss(parseFloat(e.latitude)))*Math.sin(t/2)*Math.sin(t/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),l=es*i;return e.distance_between=l,e.walkTimeMin=Math.round(l/ts),{...e,distance:l}})).filter((e=>e.distance<=as)),a=[];for(let i=0;i<t.length;i++){const l=t[i];if(e.includes(l.supermarket_brand.toLowerCase())&&!s.has(l.supermarket_brand)&&(a.push(l.supermarket_brand),s.add(l.supermarket_brand),3===a.length))break}ve(t),Te(a),1===L.supermarkets&&O((e=>({...e,supermarkets:`${t.length} supermarkets within 15 min walk, including ${a[0]} and ${a[1]}`})))})()}),[re]);(0,a.useEffect)((()=>{A&&(()=>{try{(async()=>{const{data:e}=await i.Z.get("/api/tubes/");Ee(e)})()}catch(e){t(!0),console.log(e)}})()}),[A]);(0,a.useEffect)((()=>{Pe&&(()=>{const e=Pe.filter((e=>{const s=ss(parseFloat(e.lat)-parseFloat(A[0].longitude)),t=ss(parseFloat(e.long)-parseFloat(A[0].latitude)),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(ss(parseFloat(A[0].longitude)))*Math.cos(ss(parseFloat(e.lat)))*Math.sin(t/2)*Math.sin(t/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),l=es*i;return e.distance_between=l,e.walkTimeMin=Math.round(l/ts),l<=Qe})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin));Re(e),console.log("Nearby tubes ->",e),1===L.tubes&&O((s=>({...s,tubes:`${e.length} within 15 min walk, including ${e[0].station_name} and ${e[1].station_name}`})))})()}),[Pe]);(0,a.useEffect)((()=>{A&&(()=>{try{(async()=>{const{data:e}=await i.Z.get("/api/evs/");he(e);const s=e.filter((e=>{const s=ss(parseFloat(e.latitude)-parseFloat(A[0].longitude)),t=ss(parseFloat(e.longitude)-parseFloat(A[0].latitude)),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(ss(parseFloat(A[0].longitude)))*Math.cos(ss(parseFloat(e.latitude)))*Math.sin(t/2)*Math.sin(t/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),l=es*i;return e.distance_between=l,e.walkTimeMin=Math.round(l/ts),l<=.8333333333333333})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin));Ne(s)})()}catch(e){t(!0),console.log(e)}})()}),[A]);(0,a.useEffect)((()=>{A&&(()=>{try{(async()=>{const{data:e}=await i.Z.get("/api/pubs/");ce(e)})()}catch(e){t(!0),console.log(e)}})()}),[A]);(0,a.useEffect)((()=>{ne&&(()=>{const e=ne.filter((e=>{const s=ss(parseFloat(e.latitude)-parseFloat(A[0].longitude)),t=ss(parseFloat(e.longitude)-parseFloat(A[0].latitude)),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(ss(parseFloat(A[0].longitude)))*Math.cos(ss(parseFloat(e.latitude)))*Math.sin(t/2)*Math.sin(t/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),l=es*i;return e.distance_between=l,e.walkTimeMin=Math.round(l/ts),l<=as})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin)),s=e.slice(0,3).map((e=>e.name));je(e),Se(s)})()}),[ne]);(0,a.useEffect)((()=>{A&&(()=>{try{(async()=>{const{data:e}=await i.Z.get("/api/trains/");Ie(e)})()}catch(e){t(!0),console.log(e)}})()}),[A]);(0,a.useEffect)((()=>{Ze&&(()=>{const e=Ze.filter((e=>{const s=ss(parseFloat(e.latitude)-parseFloat(A[0].longitude)),t=ss(parseFloat(e.longitude)-parseFloat(A[0].latitude)),a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(ss(parseFloat(A[0].longitude)))*Math.cos(ss(parseFloat(e.latitude)))*Math.sin(t/2)*Math.sin(t/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),l=es*i;return e.distance_between=l,e.walkTimeMin=Math.round(l/ts),l<=Qe})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin));Ve(e)})()}),[Ze]);const is=e=>{V((s=>({...s,[e]:1===s[e]?0:1})))},ls=async e=>{try{const{data:s}=await i.Z.post("/api/usage/listing/",{column:e},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log(s),s.status}catch(s){console.error("Error:",s)}},ns=s=>{localStorage.removeItem("wittle-user-token"),localStorage.removeItem("wittle-username"),e("/login")};return(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("section",{className:"agent-profile-page",children:[(0,M.jsx)("div",{className:"desktop-nav",children:(0,M.jsx)(c.Z,{navbarColour:"#FDF7F0"})}),(0,M.jsx)("div",{className:"mobile-nav",children:(0,M.jsx)(o.Z,{setProfileContent:y,profileContent:v,profileDetail:N,setProfileDetail:b})}),(0,M.jsx)(r.Z,{setProfileDetail:b,setProfileContent:y,userData:m}),m&&"Trial expired"===m.usage_stats[0].package?(0,M.jsx)("section",{className:"main-body remove-margin",style:{height:"Results"===_?"auto":"none",marginTop:"Results"===_?"3%":"none"},children:(0,M.jsx)("section",{className:"main-body-details",children:(0,M.jsxs)("section",{className:"listing-generator",children:[(0,M.jsxs)("div",{className:"listing-options",children:[(0,M.jsx)("div",{className:"listing-buttons"}),(0,M.jsx)("div",{className:"logout-button",onClick:ns,children:(0,M.jsx)("div",{className:"logout-icon"})})]}),(0,M.jsxs)("div",{className:"no-access-body",children:[(0,M.jsx)("div",{className:"no-access-image"}),(0,M.jsx)("h1",{className:"no-access-title",children:"Oops! Dead end"}),(0,M.jsx)("h3",{className:"no-access-message",children:"You no longer have access to this content. Get in touch to upgrade your account and access the Wittle magic."})]})]})})}):(0,M.jsx)("section",{className:"main-body remove-margin",style:{height:"Results"===_?"auto":"none",marginTop:"Results"===_?"3%":"none"},children:(0,M.jsx)("section",{className:"main-body-details",children:(0,M.jsxs)("section",{className:"listing-generator",children:[(0,M.jsxs)("div",{className:"listing-options",children:[(0,M.jsxs)("div",{className:"listing-buttons",children:[(0,M.jsx)("h5",{className:"no-print",onClick:()=>C("Property insights"),style:{borderBottom:"Property insights"===f?"3px solid #ED6B86":"none",textUnderlineOffset:"Property insights"===f?"0.5em":"initial",fontWeight:"Property insights"===f?"700":"400"},children:"Property insights"}),(0,M.jsx)("h5",{className:"no-print",onClick:()=>C("Listing generator"),style:{borderBottom:"Listing generator"===f?"3px solid #ED6B86":"none",textUnderlineOffset:"Listing generator"===f?"0.5em":"initial",fontWeight:"Listing generator"===f?"700":"400"},children:"Listing generator"}),(0,M.jsx)("h5",{className:"no-print",onClick:()=>C("AI listing generator"),style:{borderBottom:"AI listing generator"===f?"3px solid #ED6B86":"none",textUnderlineOffset:"AI listing generator"===f?"0.5em":"initial",fontWeight:"AI listing generator"===f?"700":"400"},children:"AI listing generator"}),(0,M.jsx)("h5",{className:"no-print",onClick:()=>C("Saved searches"),style:{borderBottom:"Saved searches"===f?"3px solid #ED6B86":"none",textUnderlineOffset:"Saved searches"===f?"0.5em":"initial",fontWeight:"Saved searches"===f?"700":"400"},children:"Saved searches"})]}),(0,M.jsx)("div",{className:"logout-button",onClick:ns,children:(0,M.jsx)("div",{className:"logout-icon"})})]}),(0,M.jsx)("hr",{className:"title-line"}),"Property insights"===f&&m&&("Basic"===m.usage_stats[0].package&&m.usage_stats[0].listing_monthly_count<11||"Unlimited"===m.usage_stats[0].package||"Advanced Pilot"===m.usage_stats[0].package&&m.usage_stats[0].listing_monthly_count<101||"Boost"===m.usage_stats[0].package||"Free"===m.usage_stats[0].package)?(0,M.jsx)(M.Fragment,{children:"Search"===_?(0,M.jsx)("div",{className:"basic-listing-wrapper",children:(0,M.jsxs)("div",{className:"property-insight-inputs",children:[(0,M.jsx)("h3",{className:"insight-title",children:"Insert full postcode to extract details about property"}),(0,M.jsxs)("div",{className:"double-input-block",children:[(0,M.jsxs)("div",{className:"input-block small",children:[(0,M.jsx)("h3",{children:"Postcode"}),(0,M.jsx)("input",{type:"text",value:P,onChange:e=>E(e.target.value.toUpperCase().replace(/\s+/g,"")),placeholder:"Enter postcode"})]}),(0,M.jsxs)("div",{className:"input-block medium",children:[(0,M.jsx)("h3",{children:"Address"}),(0,M.jsx)("input",{type:"text",value:Z,onChange:e=>{const s=e.target.value;I(s),V((e=>({...e,address:s})))},placeholder:"Enter address"})]})]}),(0,M.jsxs)("div",{className:"input-block large",children:[(0,M.jsx)("h3",{children:"Channel"}),(0,M.jsxs)("select",{className:"listing-dropdown",onChange:e=>V((s=>({...s,channel:e.target.value}))),children:[(0,M.jsx)("option",{children:"--- Select ---"}),(0,M.jsx)("option",{children:"Sales"}),(0,M.jsx)("option",{children:"Rental"})]})]}),(0,M.jsx)("div",{className:"search-section",children:(0,M.jsx)("button",{className:"load-insights",onClick:()=>{const e=P.replace(/\s+/g,"").length;e<5||e>7?T().fire({title:"\ud83e\udee1 Wittle alerts",text:"You need to add a full postcode to see any results",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}):(Xe("listing_insight_total"),V((e=>({...e,request_type:"insights"}))),w("Results"))},children:"See insights"})})]})}):"Results"===_?(0,M.jsx)(S,{postcodeSubstring:P,addressSubstring:Z,listingFields:L,postcodeData:A,topPrimaries:K,topSecondaries:ee,restaurants1:me,cuisines:be,topRestaurants:we,setRestaurants1:ue,gyms1:pe,setGyms1:xe,mainGyms:Fe,supermarkets1:ke,setSupermarkets1:ve,mainSupermarkets:Ce,pubs1:ge,topPubs:Me,tubes1:Be,setTubes1:Re,trains1:Le,insightView:_,setInsightView:w,primaryData1:Y,setPrimaryData1:z,secondaryData1:J,setSecondaryData1:X,ev1:ye,setEv1:Ne,secondaryDetail:Ye,setSecondaryDetail:ze,primaryDetail:We,setPrimaryDetail:He}):""}):"Listing generator"===f&&m&&("Basic"===m.usage_stats[0].package&&m.usage_stats[0].listing_monthly_count<11||"Unlimited"===m.usage_stats[0].package||"Advanced Pilot"===m.usage_stats[0].package&&m.usage_stats[0].listing_monthly_count<101||"Boost"===m.usage_stats[0].package||"Free"===m.usage_stats[0].package)?(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("div",{className:"full-listing-wrapper",children:[(0,M.jsx)("div",{className:"full-listing-inputs",children:(0,M.jsxs)("div",{className:"property-insight-inputs",children:[(0,M.jsx)("h3",{className:"insight-title",children:"Input details and select features you want to include in your listing"}),(0,M.jsxs)("div",{className:"double-input-block",children:[(0,M.jsxs)("div",{className:"input-block small",children:[(0,M.jsx)("h3",{children:"Postcode"}),(0,M.jsx)("input",{type:"text",value:P,onChange:e=>E(e.target.value.toUpperCase().replace(/\s+/g,"")),placeholder:"Enter postcode..."})]}),(0,M.jsxs)("div",{className:"input-block medium",children:[(0,M.jsx)("h3",{children:"Address"}),(0,M.jsx)("input",{type:"text",value:Z,onChange:e=>{const s=e.target.value;I(s),V((e=>({...e,address:s})))},placeholder:"Enter address"})]})]}),(0,M.jsx)("div",{className:"single-input-block",children:(0,M.jsxs)("div",{className:"input-block large",children:[(0,M.jsx)("h3",{children:"Channel"}),(0,M.jsxs)("select",{className:"listing-dropdown",onChange:e=>V((s=>({...s,channel:e.target.value}))),children:[(0,M.jsx)("option",{children:"--- Select ---"}),(0,M.jsx)("option",{children:"Sales"}),(0,M.jsx)("option",{children:"Rental"})]})]})}),(0,M.jsx)("div",{className:"single-input-block",children:(0,M.jsxs)("div",{className:"input-block large",children:[(0,M.jsx)("h3",{children:"Description"}),(0,M.jsx)("textarea",{id:"description",value:L.description,rows:"4",placeholder:"Enter description",onChange:e=>V((s=>({...s,description:e.target.value})))})]})}),(0,M.jsxs)("div",{className:"lifestyle-input-block",children:[(0,M.jsx)("h3",{className:"insight-title",children:"Lifestyle elements to include"}),(0,M.jsxs)("div",{className:"lifestyle-input-wrap",children:[(0,M.jsxs)("div",{className:"input-block-icons",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"primaries"}),(0,M.jsx)("h3",{children:"Primary schools"}),(0,M.jsx)(d.Z,{checked:1===L.primary_schools,onChange:()=>is("primary_schools"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,M.jsxs)("div",{className:"input-block-icons",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"secondaries"}),(0,M.jsx)("h3",{children:"Secondary schools"}),(0,M.jsx)(d.Z,{checked:1===L.secondary_schools,onChange:()=>is("secondary_schools"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,M.jsxs)("div",{className:"input-block-icons",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"tubes"}),(0,M.jsx)("h3",{children:"Tubes"}),(0,M.jsx)(d.Z,{checked:1===L.tubes,onChange:()=>is("tubes"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,M.jsxs)("div",{className:"input-block-icons",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"trains"}),(0,M.jsx)("h3",{children:"Trains"}),(0,M.jsx)(d.Z,{checked:1===L.trains,onChange:()=>is("trains"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,M.jsxs)("div",{className:"input-block-icons",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"evs"}),(0,M.jsx)("h3",{children:"Electric vehicles"}),(0,M.jsx)(d.Z,{checked:1===L.evs,onChange:()=>is("evs"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,M.jsxs)("div",{className:"input-block-icons",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"restaurants"}),(0,M.jsx)("h3",{children:"Restaurants"}),(0,M.jsx)(d.Z,{checked:1===L.restaurants,onChange:()=>is("restaurants"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,M.jsxs)("div",{className:"input-block-icons",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"pubs"}),(0,M.jsx)("h3",{children:"Pubs"}),(0,M.jsx)(d.Z,{checked:1===L.pubs,onChange:()=>is("pubs"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,M.jsxs)("div",{className:"input-block-icons",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"parks"}),(0,M.jsx)("h3",{children:"Parks"}),(0,M.jsx)(d.Z,{checked:1===L.parks,onChange:()=>is("parks"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,M.jsxs)("div",{className:"input-block-icons",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"gyms"}),(0,M.jsx)("h3",{children:"Gyms"}),(0,M.jsx)(d.Z,{checked:1===L.gyms,onChange:()=>is("gyms"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,M.jsxs)("div",{className:"input-block-icons",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"supermarkets"}),(0,M.jsx)("h3",{children:"Supermarkets"}),(0,M.jsx)(d.Z,{checked:1===L.supermarkets,onChange:()=>is("supermarkets"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,M.jsxs)("div",{className:"input-block-icons",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"crime"}),(0,M.jsx)("h3",{children:"Crime"}),(0,M.jsx)(d.Z,{checked:1===L.crime,onChange:()=>is("crime"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]})]})]}),(0,M.jsx)("div",{className:"listing-search-section",children:(0,M.jsx)("button",{className:"load-insights",onClick:()=>Xe("listing_normal_total"),children:"Load description"})})]})}),(0,M.jsxs)("section",{className:"full-listing-outputs",children:[(0,M.jsxs)("div",{className:"results-header",children:[(0,M.jsx)("div",{className:"header-text",children:(0,M.jsx)("h3",{className:"results-title",children:"Your listing"})}),(0,M.jsx)("div",{className:"header-cta",children:(0,M.jsxs)("div",{className:"copy-button",onClick:()=>{const e=g.current.innerHTML,s=document.createElement("div");s.contentEditable=!0,s.innerHTML=e,document.body.appendChild(s);const t=document.createRange();t.selectNodeContents(s);const a=window.getSelection();a.removeAllRanges(),a.addRange(t),s.focus(),document.execCommand("copy"),document.body.removeChild(s)},children:[(0,M.jsx)("div",{className:"copy-icon"}),(0,M.jsx)("h3",{children:"Copy"})]})})]}),(0,M.jsxs)("div",{className:"results-section",children:[(0,M.jsx)("div",{className:"results-description",children:A&&""!==L.description?(0,M.jsx)("h3",{children:L.description}):""}),A?(0,M.jsx)("h3",{className:"results-sub-title",children:"What you should know about this area"}):"",me&&1===L.restaurants?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"restaurants"}),(0,M.jsx)("h3",{children:"Restaurants"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:[me.length," restaurants within 15 mins walk"]}),(0,M.jsxs)("li",{children:["more than ",be," cuisines available"]}),(0,M.jsxs)("li",{children:[we[0],", ",we[1]," & ",we[2]," are well rated"]})]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",ge&&1===L.pubs?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"pubs"}),(0,M.jsx)("h3",{children:"Pubs"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:[ge.length," pubs within 15 mins walk"]}),(0,M.jsxs)("li",{children:[Me[0],", ",Me[1]," & ",Me[2]," are well rated"]})]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",Y&&1===L.primary_schools?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"primaries"}),(0,M.jsx)("h3",{children:"Primary schools"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("ul",{className:"results-details",children:Y.slice(0,5).map(((e,s)=>(0,M.jsxs)("li",{children:[e.school_name," - ",e.ofsted_results," ofsted - ",e.walkTimeMin," mins walk"]},s)))})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",J&&1===L.secondary_schools?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"secondaries"}),(0,M.jsx)("h3",{children:"Secondary schools"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("ul",{className:"results-details",children:J.slice(0,5).map(((e,s)=>(0,M.jsxs)("li",{children:[e.school_name," - ",e.ofsted_results," ofsted - ",e.walkTimeMin," mins walk"]},s)))})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",pe&&1===L.gyms?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"gyms"}),(0,M.jsx)("h3",{children:"Gyms"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:[pe.length," gyms within 15 mins walk"]}),3===Fe.length?(0,M.jsxs)("li",{children:["includes ",Fe[0],", ",Fe[1]," & ",Fe[2]]}):2===Fe.length?(0,M.jsxs)("li",{children:["includes ",Fe[0]," & ",Fe[1]," "]}):1===Fe.length?(0,M.jsxs)("li",{children:["includes ",Fe[0]]}):""]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",ke&&1===L.supermarkets?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"supermarkets"}),(0,M.jsx)("h3",{children:"Supermarkets"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:["\ud83d\uded2 ",ke.length," supermarkets within 15 mins walk"]}),3===Ce.length?(0,M.jsxs)("li",{children:["\ud83d\uded2 includes ",Ce[0],", ",Ce[1]," & ",Ce[2]]}):2===Ce.length?(0,M.jsxs)("li",{children:["\ud83d\uded2 includes ",Ce[0]," & ",Ce[1]," "]}):1===Ce.length?(0,M.jsxs)("li",{children:["\ud83d\uded2 includes ",Ce[0]]}):""]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",Be&&1===L.tubes?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"tubes"}),(0,M.jsx)("h3",{children:"Tubes"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:[Be.length," stations within 20 mins walk"]}),Be.slice(0,3).map(((e,s)=>(0,M.jsxs)("li",{children:[e.station_name," - ",e.line," - ",e.walkTimeMin," mins walk"]},s)))," "]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",Le&&1===L.trains?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"trains"}),(0,M.jsx)("h3",{children:"Trains"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:[Le.length," stations within 20 mins walk"]}),Le.slice(0,3).map(((e,s)=>(0,M.jsxs)("li",{children:[e.station," - ",e.walkTimeMin," mins walk"]},s)))]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",A&&1===L.parks?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"parks"}),(0,M.jsx)("h3",{children:"Parks"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:["within top ",100-A[0].parks_lsoa[0].london_percentile,"% of areas in london for access to greenspace"]}),(0,M.jsxs)("li",{children:[A[0].parks_postcode.park_name0," - ",Math.ceil(A[0].parks_postcode.distance0/1e3/5*60)," mins walk"]}),(0,M.jsxs)("li",{children:[A[0].parks_postcode.park_name1," - ",Math.ceil(A[0].parks_postcode.distance1/1e3/5*60)," mins walk"]}),(0,M.jsxs)("li",{children:[A[0].parks_postcode.park_name2," - ",Math.ceil(A[0].parks_postcode.distance2/1e3/5*60)," mins walk"]})]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",ye&&1===L.evs?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"evs"}),(0,M.jsx)("h3",{children:"Electric vehicle charging"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:[A[0].ev.ev_10_mins," charging points within 10 mins walk"]}),(0,M.jsxs)("li",{children:["in the top ",Math.round(100*(1-A[0].ev.percentile)),"% of areas in London for ev charging access"]})]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):""]}),(0,M.jsxs)("div",{className:"results-section-icons",ref:g,children:[(0,M.jsx)("div",{className:"results-description",children:A&&""!==L.description?(0,M.jsx)("h3",{children:L.description}):""}),A?(0,M.jsx)("h3",{className:"results-sub-title",children:"What you should know about this area"}):"",me&&1===L.restaurants?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"restaurants"}),(0,M.jsx)("h3",{children:"\ud83e\udd58 Restaurants"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:["more than ",be," cuisines available"]}),(0,M.jsxs)("li",{children:[we[0],", ",we[1]," & ",we[2]," are well rated"]})]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",ge&&1===L.pubs?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"pubs"}),(0,M.jsx)("h3",{children:"\ud83c\udf7a Pubs"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:[ge.length," pubs within 15 mins walk"]}),(0,M.jsxs)("li",{children:[Me[0],", ",Me[1]," & ",Me[2]," are well rated"]})]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",Y&&1===L.primary_schools?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"primaries"}),(0,M.jsx)("h3",{children:"\ud83d\udc76 Primary schools"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("ul",{className:"results-details",children:Y.slice(0,5).map(((e,s)=>(0,M.jsxs)("li",{children:[e.school_name," - ",e.ofsted_results," ofsted - ",e.walkTimeMin," mins walk"]},s)))})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",J&&1===L.secondary_schools?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"secondaries"}),(0,M.jsx)("h3",{children:"\ud83c\udf93 Secondary schools"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsx)("ul",{className:"results-details",children:J.slice(0,5).map(((e,s)=>(0,M.jsxs)("li",{children:[e.school_name," - ",e.ofsted_results," ofsted - ",e.walkTimeMin," mins walk"]},s)))})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",pe&&1===L.gyms?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"gyms"}),(0,M.jsx)("h3",{children:"\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f Gyms"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:[pe.length," gyms within 15 mins walk"]}),3===Fe.length?(0,M.jsxs)("li",{children:["includes ",Fe[0],", ",Fe[1]," & ",Fe[2]]}):2===Fe.length?(0,M.jsxs)("li",{children:["includes ",Fe[0]," & ",Fe[1]," "]}):1===Fe.length?(0,M.jsxs)("li",{children:["includes ",Fe[0]]}):""]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",ke&&1===L.supermarkets?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"supermarkets"}),(0,M.jsx)("h3",{children:"\ud83d\uded2 Supermarkets"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:[ke.length," supermarkets within 15 mins walk"]}),3===Ce.length?(0,M.jsxs)("li",{children:["includes ",Ce[0],", ",Ce[1]," & ",Ce[2]]}):2===Ce.length?(0,M.jsxs)("li",{children:["Includes ",Ce[0]," & ",Ce[1]," "]}):1===Ce.length?(0,M.jsxs)("li",{children:["Iincludes ",Ce[0]]}):""]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",Be&&1===L.tubes?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"tubes"}),(0,M.jsx)("h3",{children:"\ud83d\ude87 Tubes"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:[Be.length," stations within 20 mins walk"]}),Be.slice(0,3).map(((e,s)=>(0,M.jsxs)("li",{children:[e.station_name," - ",e.line," - ",e.walkTimeMin," mins walk"]},s)))," "]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",Le&&1===L.trains?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"trains"}),(0,M.jsx)("h3",{children:"\ud83d\ude88 Trains"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:[Le.length," stations within 20 mins walk"]}),Le.slice(0,3).map(((e,s)=>(0,M.jsxs)("li",{children:[e.station," - ",e.walkTimeMin," mins walk"]},s)))]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",A&&1===L.parks?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"parks"}),(0,M.jsx)("h3",{children:"\ud83c\udf33 Parks"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:["within top ",100-A[0].parks_lsoa[0].london_percentile,"% of areas in london for access to greenspace"]}),(0,M.jsxs)("li",{children:[A[0].parks_postcode.park_name0," - ",Math.ceil(A[0].parks_postcode.distance0/1e3/5*60)," mins walk"]}),(0,M.jsxs)("li",{children:[A[0].parks_postcode.park_name1," - ",Math.ceil(A[0].parks_postcode.distance1/1e3/5*60)," mins walk"]}),(0,M.jsxs)("li",{children:[A[0].parks_postcode.park_name2," - ",Math.ceil(A[0].parks_postcode.distance2/1e3/5*60)," mins walk"]})]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):"",ye&&1===L.evs?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"results-block",children:[(0,M.jsxs)("div",{className:"result-block-header",children:[(0,M.jsx)("div",{className:"lifestyle-icon",id:"evs"}),(0,M.jsx)("h3",{children:"\u26fd\ufe0f Electric vehicle charging"})]}),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("ul",{className:"results-details",children:[(0,M.jsxs)("li",{children:[A[0].ev.ev_10_mins," charging points within 10 mins walk"]}),(0,M.jsxs)("li",{children:["in the top ",Math.round(100*(1-A[0].ev.percentile)),"% of areas in London for ev charging access"]})]})})]}),(0,M.jsx)("hr",{className:"results-divider"})]}):""]})]})]})}):"AI listing generator"===f&&m&&("Basic"===m.usage_stats[0].package&&m.usage_stats[0].listing_monthly_count<11||"Unlimited"===m.usage_stats[0].package||"Advanced Pilot"===m.usage_stats[0].package&&m.usage_stats[0].listing_monthly_count<101||"Boost"===m.usage_stats[0].package||"Free"===m.usage_stats[0].package)?(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(h.default,{})}):"Saved searches"===f&&m&&m.listing_favourites.length>0?(0,M.jsx)(F,{userData:m,loadUserData:Je,setListingSelection:C}):"Top properties"===f&&m?(0,M.jsx)(D.Z,{userData:m,loadUserData:Je,setListingSelection:C,fetchData:async()=>{const e=JSON.parse(localStorage.getItem("listing-route"));if(console.log("listing route ->",e),"On"===e){w("Results");const e=JSON.parse(localStorage.getItem("listing-postcode"));console.log("postcode-route",e);try{const{data:s}=await i.Z.post("/api/postcodes/",{postcode:e});console.log("postcode data ->",s),$(s),window.localStorage.setItem("listing-route",JSON.stringify("Off")),R("Off")}catch(s){console.error("Error fetching postcodes:",s)}}}}):""]})})})]})})}}}]);
//# sourceMappingURL=719.910efc0a.chunk.js.1948e68062ea.map