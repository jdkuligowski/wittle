"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[556],{3980:function(e,s,a){a.r(s),a.d(s,{default:function(){return R}});var i=a(72791),t=a(31243),l=a(57689),n=a(97165),r=(a(99696),a(24604),a(60764)),c=a(52094),o=a(78084),d=a(67842),h=a(82077),m=a(16409),u=a(59394),p=a(25423),x=a(84487),j=a(53300),g=a(7122),v=a(71213),y=a(39577),N=a(38040),k=a(20264),b=a(82213),_=a(92514),f=a(32767),w=a(19832),C=a(80184);var S=e=>{let{addressSubstring:s,postcodeSubstring:a,listingFields:t,postcodeData:l,topPrimaries:n,topSecondaries:r,restaurants1:c,cuisines:o,topRestaurants:d,gyms1:h,mainGyms:S,supermarkets1:D,mainSupermarkets:M,pubs1:F,topPubs:P,tubes1:T,trains1:I,setInsightView:E,primaryData1:Z,setPrimaryData1:B,secondaryData1:R,setSecondaryData1:L,setTubes1:V,setRestaurants1:A,setPubs1:O,setSupermarkets1:$,setGyms1:q,ev1:G,setEv1:H,secondaryDetail:U,setSecondaryDetail:z,primaryDetail:J,setPrimaryDetail:W}=e;const[Y,X]=(0,i.useState)("Overview"),[K,Q]=(0,i.useState)(),[ee,se]=(0,i.useState)(!1),[ae,ie]=(0,i.useState)(!1),[te,le]=(0,i.useState)(!1),[ne,re]=(0,i.useState)(!1),[ce,oe]=(0,i.useState)("Primary schools"),[de,he]=(0,i.useState)("Table");(0,i.useEffect)((()=>{l&&(()=>{const e=Math.ceil((1-l[0].crime[0].percentile+l[0].ev.percentile+l[0].fitness.percentile+(1-l[0].parks_lsoa[0].london_percentile/100)+l[0].restaurants.normal_percentile+l[0].supermarkets.percentile+l[0].tubes.percentile)/7*100);Q(e)})()}));return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("section",{className:"insights-results-wrapper remove-margin",children:[(0,C.jsxs)("section",{className:"insights-navigation remove-some-margin",children:[(0,C.jsx)("div",{className:"direction-arrow no-print",onClick:()=>E("Search")}),(0,C.jsxs)("div",{className:"navigation-input",children:[(0,C.jsx)("h3",{className:"title",children:"Postcode"}),(0,C.jsx)("h3",{className:"result",children:a})]}),(0,C.jsxs)("div",{className:"navigation-input",children:[(0,C.jsx)("h3",{className:"title",children:"Address"}),(0,C.jsx)("h3",{className:"result",children:s})]}),(0,C.jsxs)("div",{className:"navigation-input no-print",children:[(0,C.jsx)("h3",{className:"title",children:"Channel"}),(0,C.jsx)("h3",{className:"result",children:t.channel})]})]}),(0,C.jsxs)("section",{className:"property-insights-wrapper",children:[(0,C.jsxs)("div",{className:"property-insight-nav no-print remove-margin",children:[(0,C.jsxs)("div",{className:"property-insight-buttons no-print remove-margin",children:[(0,C.jsx)("h3",{className:"insight-button "+("Overview"===Y?"active":"inactive"),id:"left",onClick:()=>(X("Overview"),W("Table"),void z("Table")),children:"Property overview"}),(0,C.jsx)("h3",{className:"insight-button "+("Details"===Y?"active":"inactive"),id:"right",onClick:()=>X("Details"),children:"Property details"})]}),(0,C.jsxs)("div",{className:"print-section",onClick:()=>window.print(),children:[(0,C.jsx)("div",{className:"print-icon"}),(0,C.jsx)("h3",{children:"Print"})]})]}),"Overview"===Y?(0,C.jsxs)("div",{className:"insight-dropdowns",children:[(0,C.jsxs)("div",{className:"summary-header",children:[(0,C.jsx)("h3",{children:"Property Summary"}),(0,C.jsx)("hr",{className:"header-line"})]}),(0,C.jsx)(m.Z,{neighbourhoodScore:K,postcodeData:l}),(0,C.jsxs)("div",{className:"summary-header",onClick:()=>se(!ee),children:[(0,C.jsx)("h3",{children:"School highlights"}),(0,C.jsx)("hr",{className:"header-line"})]}),ee?(0,C.jsx)(u.Z,{topPrimaries:n,topSecondaries:r,setPropertyView:X,setSecondaryDetail:z,setPrimaryDetail:W,setSliderSelection:oe}):"",(0,C.jsxs)("div",{className:"summary-header",onClick:()=>ie(!ae),children:[(0,C.jsx)("h3",{children:"Lifestyle highlights"}),(0,C.jsx)("hr",{className:"header-line"})]}),ae?(0,C.jsx)(p.Z,{restaurants1:c,cuisines:o,topRestaurants:d,gyms1:h,mainGyms:S,supermarkets1:D,mainSupermarkets:M,pubs1:F,topPubs:P}):"",(0,C.jsxs)("div",{className:"summary-header",onClick:()=>le(!te),children:[(0,C.jsx)("h3",{children:"Transport highlights"}),(0,C.jsx)("hr",{className:"header-line"})]}),te?(0,C.jsx)(x.Z,{postcodeData:l,tubes1:T,trains1:I}):"",(0,C.jsxs)("div",{className:"summary-header",onClick:()=>re(!ne),children:[(0,C.jsx)("h3",{children:"Neighbourhoood highlights"}),(0,C.jsx)("hr",{className:"header-line"})]}),ne?(0,C.jsx)(j.Z,{postcodeData:l}):""]}):"Details"===Y?(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:"property-details-wrapper",children:[(0,C.jsx)(g.Z,{sliderSelection:ce,setSliderSelection:oe,setSecondaryDetail:z,setPrimaryDetail:W}),"School"===U?(0,C.jsx)("h3",{className:"go-back",onClick:()=>z("Table"),children:"<- Back to secondary school long list"}):"School"===J?(0,C.jsx)("h3",{className:"go-back",onClick:()=>W("Table"),children:"<- Back to primary school long list"}):(0,C.jsxs)("div",{className:"detail-table-title",children:[(0,C.jsxs)("h3",{children:[ce," list"]}),(0,C.jsx)("hr",{className:"table-title-line"}),(0,C.jsx)("input",{placeholder:"Explore the data"}),(0,C.jsx)("div",{className:"icon-box "+("Table"===de?"active":"inactive"),onClick:()=>he("Table"),children:(0,C.jsx)("div",{className:"icon",id:"table"})}),(0,C.jsx)("div",{className:"icon-box "+("Map"===de?"active":"inactive"),onClick:()=>he("Map"),children:(0,C.jsx)("div",{className:"icon",id:"map"})})]}),(0,C.jsx)("div",{className:"insight-tables",children:"Primary schools"===ce?(0,C.jsx)(v.Z,{primaryData1:Z,setPrimaryData1:B,postcodeData:l,tableMapView:de,listType:"short list",primaryDetail:J,setPrimaryDetail:W,setSliderSelection:oe,setPropertyView:X}):"Secondary schools"===ce?(0,C.jsx)(y.Z,{secondaryData1:R,setSecondaryData1:L,postcodeData:l,tableMapView:de,listType:"short list",secondaryDetail:U,setSecondaryDetail:z,setSliderSelection:oe,setPropertyView:X}):"Tubes"===ce?(0,C.jsx)(N.Z,{tubes1:T,setTubes1:V,listType:"short list",postcodeData:l,tableMapView:de}):"Restaurants"===ce?(0,C.jsx)(k.Z,{restaurants1:c,setRestaurants1:A,listType:"short list",postcodeData:l,tableMapView:de}):"Pubs"===ce?(0,C.jsx)(b.Z,{pubs1:F,setPubs1:O,listType:"short list",postcodeData:l,tableMapView:de}):"Supermarkets"===ce?(0,C.jsx)(_.Z,{supermarkets1:D,setSupermarkets1:$,listType:"short list",postcodeData:l,tableMapView:de}):"Fitness"===ce?(0,C.jsx)(f.Z,{gyms1:h,setGyms1:q,listType:"short list",postcodeData:l,tableMapView:de}):"EVs"===ce?(0,C.jsx)(w.Z,{ev1:G,setEv1:H,listType:"short list",postcodeData:l,tableMapView:de}):""})]})}):""]})]})})};var D=e=>{let{userData:s,loadUserData:a,setListingSelection:r}=e;const c=(0,l.s0)(),[o,d]=((0,l.TH)(),(0,i.useState)("Property prospects"));return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("section",{className:"saved-listings",children:s&&s.listing_favourites.length>0?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"favourite-count",children:(0,C.jsxs)("h3",{children:["You have ",s?s.listing_favourites.length:""," ",s&&1===s.listing_favourites.length?"listing":"listings"," saved"]})}),(0,C.jsxs)("div",{className:"table-section",children:[(0,C.jsxs)("div",{className:"table-headers",children:[(0,C.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,C.jsx)("div",{id:"column2",className:"column",children:(0,C.jsx)("h5",{children:"Address"})}),(0,C.jsx)("div",{id:"column3",className:"column",children:(0,C.jsx)("h5",{children:"Postcode"})}),(0,C.jsx)("div",{id:"column4",className:"column",children:(0,C.jsx)("h5",{children:"Channel"})}),(0,C.jsx)("div",{id:"column5",className:"column",children:(0,C.jsx)("h5",{children:"Date saved"})}),(0,C.jsx)("div",{id:"column6",className:"column",children:(0,C.jsx)("h5",{children:"Action"})})]}),(0,C.jsx)("hr",{className:"property-divider"}),(0,C.jsx)("div",{className:"table-details",children:s?s.listing_favourites.map(((e,s)=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-content",children:[(0,C.jsx)("div",{className:"column",id:"column1",children:(0,C.jsx)("h5",{children:s+1})}),(0,C.jsx)("div",{className:"column",id:"column2",onClick:()=>(e=>{console.log("postcode ->",e.postcode),window.localStorage.setItem("listing-postcode",JSON.stringify(e.postcode)),window.localStorage.setItem("listing-route",JSON.stringify("On")),r("Property insights"),c("/agents/listing-generator")})(e),children:(0,C.jsx)("h5",{children:""===e.address?"N/a":e.address})}),(0,C.jsx)("div",{className:"column",id:"column3",children:(0,C.jsx)("h5",{children:""===e.postcode?"N/a":e.postcode})}),(0,C.jsx)("div",{className:"column",id:"column4",children:(0,C.jsx)("h5",{children:e.channel})}),(0,C.jsx)("div",{className:"column",id:"column5",children:(0,C.jsx)("h5",{children:e.date_added})}),(0,C.jsx)("div",{className:"column",id:"column6",onClick:()=>(async e=>{if((0,n.Hb)())try{const{data:s}=await t.Z.delete(`/api/listing_favourites/${e.id}/`,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});a()}catch(s){console.error("Error deleting favourite:",s)}else c("/access-denied"),console.log("logged out")})(e),children:(0,C.jsx)("h5",{className:"remove",children:"\ud83d\uddd1"})})]},s),(0,C.jsx)("hr",{className:"property-divider"})]}))):""})]})]}):"Listings"===o&&s&&0===s.listing_favourites.length?(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{className:"favourite-count",children:(0,C.jsx)("h3",{children:"\ud83d\ude15 You don't have any properties saved here. Head to the listing generator tab to get started!"})})}):""})})},M=a(74177),F=a(30948),P=a(25994);var T=e=>{let{propertyInputShow:s,handlePropertyInputClose:a,propertyFilters:i,setPropertyFilters:t,boroughs:l,rentalPrices:n,salesPrices:r,propertyTypeList:c,loadProperties:o,toggleStatus:h}=e;return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(P.Z,{show:s,onHide:a,backdrop:"static",className:"KYC-input-modal",children:(0,C.jsx)(P.Z.Body,{children:(0,C.jsxs)("section",{className:"overall-body",children:[(0,C.jsx)("section",{className:"input-header",children:(0,C.jsxs)("div",{className:"input-title",children:[(0,C.jsx)("h1",{children:"Find a property based on what matters to you"}),(0,C.jsx)("h1",{className:"close-modal",onClick:a,children:"X"})]})}),(0,C.jsxs)("section",{className:"input-main",children:[(0,C.jsxs)("div",{className:"input-section",children:[(0,C.jsx)("h2",{className:"section-sub-title",children:"Search details"}),(0,C.jsxs)("div",{className:"selection-block-single",children:[(0,C.jsx)("h3",{children:"Channel"}),(0,C.jsxs)("select",{className:"dropdown",value:i.channel||"Sales",onChange:e=>t((s=>({...s,channel:e.target.value}))),children:[(0,C.jsx)("option",{children:"Sales"}),(0,C.jsx)("option",{children:"Rental"})]})]}),(0,C.jsxs)("div",{className:"selection-block-single",children:[(0,C.jsx)("h3",{children:"Area"}),(0,C.jsxs)("select",{className:"dropdown",value:i.area||"",onChange:e=>t((s=>({...s,area:e.target.value}))),children:[(0,C.jsx)("option",{value:"",children:"All"}),l.map(((e,s)=>(0,C.jsx)("option",{value:e,children:e},s)))]})]})]}),(0,C.jsxs)("div",{className:"input-section",children:[(0,C.jsx)("h2",{className:"section-sub-title",children:"Property details"}),(0,C.jsxs)("div",{className:"selection-block-double",children:[(0,C.jsx)("h3",{children:"Price"}),"Rental"===i.channel?(0,C.jsxs)("div",{className:"double-dropdowns",children:[(0,C.jsxs)("select",{className:"dropdown",value:i.rental_price_min||"",onChange:e=>t((s=>({...s,rental_price_min:e.target.value}))),children:[(0,C.jsx)("option",{value:0,children:"No min"}),n.map(((e,s)=>(0,C.jsx)("option",{value:e,children:(0,C.jsx)(F.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,C.jsxs)("select",{className:"dropdown",value:i.rental_price_max||"",onChange:e=>t((s=>({...s,rental_price_max:e.target.value}))),children:[(0,C.jsx)("option",{value:1e7,children:"No max"}),n.map(((e,s)=>(0,C.jsx)("option",{value:e,children:(0,C.jsx)(F.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]}):"Sales"===i.channel?(0,C.jsxs)("div",{className:"double-dropdowns",children:[(0,C.jsxs)("select",{className:"dropdown",value:i.rental_price_min||"",onChange:e=>t((s=>({...s,rental_price_min:e.target.value}))),children:[(0,C.jsx)("option",{value:0,children:"No min"}),r.map(((e,s)=>(0,C.jsx)("option",{value:e,children:(0,C.jsx)(F.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,C.jsxs)("select",{className:"dropdown",value:i.rental_price_max||"",onChange:e=>t((s=>({...s,rental_price_max:e.target.value}))),children:[(0,C.jsx)("option",{value:1e7,children:"No max"}),r.map(((e,s)=>(0,C.jsx)("option",{value:e,children:(0,C.jsx)(F.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]}):""]}),(0,C.jsxs)("div",{className:"selection-block-double",children:[(0,C.jsx)("h3",{children:"Bedrooms"}),(0,C.jsxs)("div",{className:"double-dropdowns",children:[(0,C.jsxs)("select",{className:"dropdown",value:i.bedrooms_min||"",onChange:e=>t((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,C.jsx)("option",{value:"",children:"No min"}),(0,C.jsx)("option",{value:"1",children:"1"}),(0,C.jsx)("option",{value:"2",children:"2"}),(0,C.jsx)("option",{value:"3",children:"3"}),(0,C.jsx)("option",{value:"4",children:"4"}),(0,C.jsx)("option",{value:"5",children:"5"}),(0,C.jsx)("option",{value:"6",children:"6"})]}),(0,C.jsxs)("select",{className:"dropdown",value:i.bedrooms_max||"",onChange:e=>t((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,C.jsx)("option",{value:"",children:"No max"}),(0,C.jsx)("option",{value:"1",children:"1"}),(0,C.jsx)("option",{value:"2",children:"2"}),(0,C.jsx)("option",{value:"3",children:"3"}),(0,C.jsx)("option",{value:"4",children:"4"}),(0,C.jsx)("option",{value:"5",children:"5"}),(0,C.jsx)("option",{value:"6",children:"6"}),(0,C.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,C.jsxs)("div",{className:"selection-block-single",children:[(0,C.jsx)("h3",{children:"Property type"}),(0,C.jsxs)("select",{className:"dropdown",value:i.propertyType||"",onChange:e=>t((s=>({...s,propertyType:e.target.value}))),children:[(0,C.jsx)("option",{value:"",children:"All"}),c.map(((e,s)=>(0,C.jsx)("option",{value:e,children:e},s)))]})]}),(0,C.jsxs)("div",{className:"selection-block-single",children:[(0,C.jsx)("h3",{children:"Features"}),(0,C.jsxs)("div",{className:"select-box",children:[(0,C.jsx)("input",{type:"checkbox",id:"myCheckbox",name:"myCheckbox",checked:i.garden,onChange:e=>t((s=>({...s,garden:e.target.checked})))}),(0,C.jsx)("label",{htmlFor:"myCheckbox",children:"Garden"})]})]}),(0,C.jsxs)("div",{className:"selection-block-single",children:[(0,C.jsx)("h3",{children:"Size"}),(0,C.jsx)("input",{placeholder:"Input min size",className:"dropdown",value:i.size||"",onChange:e=>t((s=>({...s,size:e.target.value})))})]})]}),(0,C.jsxs)("div",{className:"input-section",children:[(0,C.jsx)("h2",{className:"section-sub-title",children:"Lifestyle details"}),(0,C.jsx)("p",{className:"explanation",children:"Select what you want to include as part of your search and how much they matter"}),(0,C.jsxs)("div",{className:"selection-block-single lifestyle",children:[(0,C.jsx)("h3",{children:"Primary schools"}),(0,C.jsx)(d.Z,{checked:!0===i.primaries,onChange:()=>h("primaries"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),!0===i.primaries?(0,C.jsxs)("div",{className:"slider-container",children:[(0,C.jsx)("input",{type:"range",onChange:e=>t((s=>({...s,primaries_score:e.target.value}))),name:i.primaries_score,className:"slider",defaultValue:i.primaries_score?i.primaries_score:0,min:"0",max:"10",step:"1"}),(0,C.jsx)("h3",{children:i.primaries_score})]}):"",(0,C.jsxs)("div",{className:"selection-block-single lifestyle",children:[(0,C.jsx)("h3",{children:"Secondary schools"}),(0,C.jsx)(d.Z,{checked:!0===i.secondaries,onChange:()=>h("secondaries"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),!0===i.secondaries?(0,C.jsxs)("div",{className:"slider-container",children:[(0,C.jsx)("input",{type:"range",onChange:e=>t((s=>({...s,secondaries_score:e.target.value}))),name:i.secondaries_score,className:"slider",defaultValue:i.secondaries_score?i.secondaries_score:0,min:"0",max:"10",step:"1"}),(0,C.jsx)("h3",{children:i.secondaries_score})]}):"",(0,C.jsxs)("div",{className:"selection-block-single lifestyle",children:[(0,C.jsx)("h3",{children:"Parks"}),(0,C.jsx)(d.Z,{checked:!0===i.parks,onChange:()=>h("parks"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),!0===i.parks?(0,C.jsxs)("div",{className:"slider-container",children:[(0,C.jsx)("input",{type:"range",onChange:e=>t((s=>({...s,parks_score:e.target.value}))),name:i.parks_score,className:"slider",defaultValue:i.parks_score?i.parks_score:0,min:"0",max:"10",step:"1"}),(0,C.jsx)("h3",{children:i.parks_score})]}):"",(0,C.jsxs)("div",{className:"selection-block-single lifestyle",children:[(0,C.jsx)("h3",{children:"Playgrounds"}),(0,C.jsx)(d.Z,{checked:!0===i.playgrounds,onChange:()=>h("playgrounds"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),!0===i.playgrounds?(0,C.jsxs)("div",{className:"slider-container",children:[(0,C.jsx)("input",{type:"range",onChange:e=>t((s=>({...s,playgrounds_score:e.target.value}))),name:i.playgrounds_score,className:"slider",defaultValue:i.playgrounds_score?i.playgrounds_score:0,min:"0",max:"10",step:"1"}),(0,C.jsx)("h3",{children:i.playgrounds_score})]}):"",(0,C.jsxs)("div",{className:"selection-block-single lifestyle",children:[(0,C.jsx)("h3",{children:"Gyms"}),(0,C.jsx)(d.Z,{checked:!0===i.gyms,onChange:()=>h("gyms"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),!0===i.gyms?(0,C.jsxs)("div",{className:"slider-container",children:[(0,C.jsx)("input",{type:"range",onChange:e=>t((s=>({...s,gyms_score:e.target.value}))),name:i.gyms_score,className:"slider",defaultValue:i.gyms_score?i.gyms_score:0,min:"0",max:"10",step:"1"}),(0,C.jsx)("h3",{children:i.gyms_score})]}):"",(0,C.jsxs)("div",{className:"selection-block-single lifestyle",children:[(0,C.jsx)("h3",{children:"Restaurants"}),(0,C.jsx)(d.Z,{checked:!0===i.restaurants,onChange:()=>h("restaurants"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),!0===i.restaurants?(0,C.jsxs)("div",{className:"slider-container",children:[(0,C.jsx)("input",{type:"range",onChange:e=>t((s=>({...s,restaurants_score:e.target.value}))),name:i.restaurants_score,className:"slider",defaultValue:i.restaurants_score?i.restaurants_score:0,min:"0",max:"10",step:"1"}),(0,C.jsx)("h3",{children:i.restaurants_score})]}):"",(0,C.jsxs)("div",{className:"selection-block-single lifestyle",children:[(0,C.jsx)("h3",{children:"Pubs"}),(0,C.jsx)(d.Z,{checked:!0===i.pubs,onChange:()=>h("pubs"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),!0===i.pubs?(0,C.jsxs)("div",{className:"slider-container",children:[(0,C.jsx)("input",{type:"range",onChange:e=>t((s=>({...s,pubs_score:e.target.value}))),name:i.pubs_score,className:"slider",defaultValue:i.pubs_score?i.pubs_score:0,min:"0",max:"10",step:"1"}),(0,C.jsx)("h3",{children:i.pubs_score})]}):"",(0,C.jsxs)("div",{className:"selection-block-single lifestyle",children:[(0,C.jsx)("h3",{children:"Tubes"}),(0,C.jsx)(d.Z,{checked:!0===i.tubes,onChange:()=>h("tubes"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),!0===i.tubes?(0,C.jsxs)("div",{className:"slider-container",children:[(0,C.jsx)("input",{type:"range",onChange:e=>t((s=>({...s,tubes_score:e.target.value}))),name:i.tubes_score,className:"slider",defaultValue:i.tubes_score?i.tubes_score:0,min:"0",max:"10",step:"1"}),(0,C.jsx)("h3",{children:i.tubes_score})]}):"",(0,C.jsxs)("div",{className:"selection-block-single lifestyle",children:[(0,C.jsx)("h3",{children:"Supermarkets"}),(0,C.jsx)(d.Z,{checked:!0===i.supermarkets,onChange:()=>h("supermarkets"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),!0===i.supermarkets?(0,C.jsxs)("div",{className:"slider-container",children:[(0,C.jsx)("input",{type:"range",onChange:e=>t((s=>({...s,supermarkets_score:e.target.value}))),name:i.supermarkets_score,className:"slider",defaultValue:i.supermarkets_score?i.supermarkets_score:0,min:"0",max:"10",step:"1"}),(0,C.jsx)("h3",{children:i.supermarkets_score})]}):"",(0,C.jsxs)("div",{className:"selection-block-single lifestyle",children:[(0,C.jsx)("h3",{children:"EVs"}),(0,C.jsx)(d.Z,{checked:!0===i.ev,onChange:()=>h("ev"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),!0===i.ev?(0,C.jsxs)("div",{className:"slider-container",children:[(0,C.jsx)("input",{type:"range",onChange:e=>t((s=>({...s,ev_score:e.target.value}))),name:i.ev_score,className:"slider",defaultValue:i.ev_score?i.ev_score:0,min:"0",max:"10",step:"1"}),(0,C.jsx)("h3",{children:i.ev_score})]}):"",(0,C.jsxs)("div",{className:"selection-block-single lifestyle",children:[(0,C.jsx)("h3",{children:"Crime"}),(0,C.jsx)(d.Z,{checked:!0===i.crime,onChange:()=>h("crime"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),!0===i.crime?(0,C.jsxs)("div",{className:"slider-container",children:[(0,C.jsx)("input",{type:"range",onChange:e=>t((s=>({...s,crime_score:e.target.value}))),name:i.crime_score,className:"slider",defaultValue:i.crime_score?i.crime_score:0,min:"0",max:"10",step:"1"}),(0,C.jsx)("h3",{children:i.crime_score})]}):""]})]}),(0,C.jsx)("section",{className:"input-footer",children:(0,C.jsx)("button",{className:"load-properties",onClick:o,children:"Load results"})})]})})})})},I=a(96048),E=a.n(I),Z=a(34648);var B=e=>{let{setListingSelection:s,fetchData:a}=e;const r=(0,l.s0)(),[c,o]=(0,i.useState)(!1),[d,h]=(0,i.useState)(),[m,u]=(0,i.useState)(!1),[p,x]=(0,i.useState)("Table"),[j,g]=(0,i.useState)(null),[v,y]=(0,i.useState)(!0),[N,k]=(0,i.useState)(),[b,_]=(0,i.useState)({channel:"Sales",area:"",persona:"Young families",propertyType:"",garden:!1,size:"",bedrooms_min:"",bedrooms_max:"",rental_price_min:"",rental_price_max:"",primaries:!1,primaries_score:null,secondaries:!1,secondaries_score:null,parks:!1,parks_score:null,playgrounds:!1,playgrounds_score:null,gyms:!1,gyms_score:null,restaurants:!1,restaurants_score:null,pubs:!1,pubs_score:null,tubes:!1,tubes_score:null,supermarkets:!1,supermarkets_score:null,ev:!1,ev_score:null,crime:!1,crime_score:null});(0,i.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("top-property-filters")),s=JSON.parse(localStorage.getItem("top-properties"));e&&(_(e),h(s))}),[]);const f=e=>{const s=document.createElement("a");s.href=e,s.target="_blank",s.rel="noreferrer",s.windowFeatures="width=1200,height=800,resizable=yes,scrollbars=yes,status=yes",document.body.appendChild(s),s.click(),document.body.removeChild(s)},w=()=>{u(!0)},S=e=>{u(!1)},[D,F]=(0,i.useState)(0),P=50*D,I=P+50,[B,R]=(0,i.useState)({latitude:51.515419,longitude:-.141099,zoom:10.5}),L=e=>{y(!0),console.log(v),k(parseInt(e.target.id)),console.log(parseInt(e.target.id))},V=e=>{const{selected:s}=e;F(s)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("section",{className:"top-properties",children:[(0,C.jsx)("section",{className:"top-properties-filters",children:(0,C.jsx)("div",{className:"filter-block mobile",children:(0,C.jsx)("button",{onClick:w,children:"Edit search"})})}),c?c?(0,C.jsx)("div",{className:"property-table-loading",children:(0,C.jsx)(M.Z,{})}):"":(0,C.jsxs)("section",{className:"top-property-results",children:[(0,C.jsxs)("div",{className:"top-property-title",children:[(0,C.jsx)("h3",{children:d?`${d.length} matching properties`:""}),(0,C.jsxs)("div",{className:"view-selectors",children:[(0,C.jsx)("button",{className:"edit-search",onClick:w,children:"Edit search"}),(0,C.jsx)("div",{className:"icon-box "+("Table"===p?"active":"inactive"),onClick:()=>x("Table"),children:(0,C.jsx)("div",{className:"icon",id:"table"})}),(0,C.jsx)("div",{className:"icon-box "+("Map"===p?"active":"inactive"),onClick:()=>x("Map"),children:(0,C.jsx)("div",{className:"icon",id:"map"})})]})]}),"Table"===p?(0,C.jsxs)("div",{className:"property-table-view",children:[(0,C.jsxs)("div",{className:"top-property-table",children:[(0,C.jsxs)("div",{className:"table-headers",children:[(0,C.jsx)("div",{id:"column1",className:"column",children:(0,C.jsx)("h5",{children:"#"})}),(0,C.jsx)("div",{id:"column2",className:"column",children:(0,C.jsx)("h5",{children:"Address"})}),(0,C.jsx)("div",{id:"column3",className:"column",children:(0,C.jsx)("h5",{children:"Postcode"})}),(0,C.jsx)("div",{id:"column4",className:"column",children:(0,C.jsx)("h5",{children:"Area"})}),(0,C.jsx)("div",{id:"column5",className:"column",children:(0,C.jsx)("h5",{children:"Added"})}),(0,C.jsx)("div",{id:"column6",className:"column",children:(0,C.jsx)("h5",{children:"Price"})}),(0,C.jsx)("div",{id:"column7",className:"column",children:(0,C.jsx)("h5",{children:"Bedrooms"})}),(0,C.jsx)("div",{id:"column8",className:"column",children:(0,C.jsx)("h5",{children:"Agent"})}),(0,C.jsx)("div",{id:"column9",className:"column",children:(0,C.jsx)("h5",{children:"Score"})})]}),(0,C.jsx)("hr",{className:"property-divider"}),(0,C.jsx)("div",{className:"table-detail",children:d?d.map(((e,i)=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"table-content",children:[(0,C.jsx)("div",{className:"column",id:"column1",onClick:()=>f(e.property_data.url),children:(0,C.jsx)("h5",{children:i+1})}),(0,C.jsx)("div",{className:"column",id:"column2",onClick:()=>f(e.property_data.url),children:(0,C.jsx)("h5",{children:e.property_data.displayAddress})}),(0,C.jsx)("div",{className:"column",id:"column3",onClick:()=>f(e.property_data.url),children:(0,C.jsx)("h5",{children:e.property_data.postcode})}),(0,C.jsx)("div",{className:"column",id:"column4",onClick:()=>f(e.property_data.url),children:(0,C.jsx)("h5",{children:e.persona_data_list[0].district})}),(0,C.jsx)("div",{className:"column",id:"column5",onClick:()=>f(e.property_data.url),children:(0,C.jsx)("h5",{children:null===e.property_data.added_revised?`Reduced ${e.property_data.reduced_revised}`:e.property_data.added_revised})}),(0,C.jsx)("div",{className:"column",id:"column6",onClick:()=>f(e.property_data.url),children:(0,C.jsx)("h5",{children:e.property_data.price})}),(0,C.jsx)("div",{className:"column",id:"column7",onClick:()=>f(e.property_data.url),children:(0,C.jsx)("h5",{children:e.property_data.bedrooms})}),(0,C.jsx)("div",{className:"column",id:"column8",onClick:()=>f(e.property_data.url),children:(0,C.jsx)("h5",{children:e.property_data.agent})}),(0,C.jsx)("div",{className:"column",id:"column9",onClick:()=>f(e.property_data.url),children:(0,C.jsx)("h5",{children:(e.overall_lifestyle_score/10).toFixed(2)})}),(0,C.jsx)("div",{id:"column10",className:"column",children:(0,C.jsx)("button",{onClick:()=>(e=>{console.log("postcode ->",e.property_data.postcode),window.localStorage.setItem("listing-postcode",JSON.stringify(e.property_data.postcode)),window.localStorage.setItem("listing-route",JSON.stringify("On")),a(),s("Property insights"),r("/agents/listing-generator")})(e),children:"Go"})})]}),(0,C.jsx)("hr",{className:"property-divider"})]}))).slice(P,I):""})]}),d?(0,C.jsx)(E(),{pageCount:Math.ceil(d.length/50),onPageChange:V,containerClassName:"pagination",activeClassName:"active",previousLabel:"<",nextLabel:">",pageRangeDisplayed:0,breakLabel:"..."}):""]}):"Map"===p?(0,C.jsxs)("div",{className:"property-map-view",children:[(0,C.jsxs)("div",{className:"map-block",children:[(0,C.jsx)("div",{className:"grid-list",children:d?d.map(((e,s)=>(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"property-content",children:[(0,C.jsx)("div",{className:"grid-left",children:(0,C.jsx)("div",{className:"property-image",onClick:()=>f(e.property_data.url),style:{backgroundImage:`url(${e.property_data.images})`}})}),(0,C.jsxs)("div",{className:"grid-right",id:e.id,onMouseEnter:L,children:[(0,C.jsxs)("h5",{className:"title",onClick:()=>f(e.property_data.url),children:[s+1,". ",e.property_data.displayAddress]}),(0,C.jsxs)("h5",{className:"sub-title",children:["Bedrooms: ",e.property_data.bedrooms]}),(0,C.jsxs)("h5",{className:"sub-title",children:["Price: ",e.property_data.price]}),(0,C.jsxs)("h5",{className:"sub-title",children:["Score: ",(e.overall_lifestyle_score/10).toFixed(2)]})]})]}),(0,C.jsx)("hr",{className:"dividing-line"})]}))).slice(P,I):""}),(0,C.jsx)("div",{className:"map-section",children:(0,C.jsxs)(Z.ZP,{...B,mapboxApiAccessToken:"pk.eyJ1IjoiamRrdWxpZ293c2tpaSIsImEiOiJjbGF2NGdvdDYwMXplM3FsdGQzNXA1cWk1In0.XoVVFsT3TaaiBEdJt98h7w",mapStyle:"mapbox://styles/jdkuligowskii/clo8fop0l004b01pq000y65pb",onViewportChange:e=>{R(e)},center:B,onMove:e=>R(e.viewport),className:"profile-map",children:[d&&d.map(((e,s)=>(0,C.jsx)(Z.Jx,{id:e.id,longitude:e.property_data.longitude,latitude:e.property_data.latitude,onClick:()=>{return s=e,console.log("selectd property ->",s),void g(s);var s},children:(0,C.jsx)("div",{className:"poi-background",children:s+1})},s))).slice(P,I),j?(0,C.jsx)(Z.GI,{longitude:j.property_data.longitude,latitude:j.property_data.latitude,closeOnClick:!1,className:"item-popup",onClose:()=>g(null),children:(0,C.jsx)("div",{className:"popup-content",children:(0,C.jsx)("div",{className:"popup-border",children:(0,C.jsx)("h5",{className:"title",children:j.property_data.displayAddress})})})}):""]})})]}),d?(0,C.jsx)(E(),{pageCount:Math.ceil(d.length/50),onPageChange:V,containerClassName:"pagination",activeClassName:"active",previousLabel:"<",nextLabel:">",pageRangeDisplayed:0,breakLabel:"..."}):""]}):""]})]}),(0,C.jsx)(T,{propertyInputShow:m,handlePropertyInputClose:S,propertyFilters:b,setPropertyFilters:_,boroughs:["Barking and Dagenham","Barnet","Bexley","Brent","Camden","Croydon","Ealing","Enfield","Greenwich","Havering","Kensington and Chelsea","Hertfordshire","Hillingdon","Hounslow","Islington","Lambeth","Lewisham","Merton","Southwark","Sutton","Waltham Forest","Westminster","Hackney","City of London","Hammersmith and Fulham","Wandsworth","Tower Hamlets","Bromley","Haringey","Kingston upon Thames","Newham","Redbridge","Richmond upon Thames"],salesPrices:["200000","300000","400000","500000","600000","700000","800000","900000","1000000","1250000","1500000","1750000","2000000","2250000","2500000","2750000","3000000","3500000","4000000","5000000","7500000","10000000","12500000","15000000","20000000","30000000","40000000","50000000"],rentalPrices:["500","600","700","800","900","1000","1100","1200","1300","1400","1500","1600","1700","1800","1900","2000","2250","2500","2750","3000","3250","3500","4000","4500","5000","5500","6000","7000","8000","9000","10000","12500","15000","20000","25000","30000","40000","50000","60000"],propertyTypeList:["Flat","Apartment","Terraced","Semi-Detached","Detached","House","End of Terrace","Maisonette","Studio","Retirement Property","Ground Flat","Penthouse","Bungalow","Town House","Detached Bungalow","Duplex"],loadProperties:async()=>{o(!0),S();const e=new URLSearchParams;Object.entries(b).forEach((s=>{let[a,i]=s;null!==i&&void 0!==i&&"channel"!==a&&e.append(a,i)}));try{let s="";"Rental"===b.channel?s=`/api/personas/rental/?${e.toString()}`:"Sales"===b.channel&&(s=`/api/personas/sales/?${e.toString()}`);const{data:a}=await t.Z.get(s,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});a.sort(((e,s)=>s.overall_lifestyle_score-e.overall_lifestyle_score)),console.log("combined data ->",a),h(a),window.localStorage.setItem("top-properties",JSON.stringify(a)),window.localStorage.setItem("top-property-filters",JSON.stringify(b)),o(!1)}catch(s){console.error("can't access combined data ->",s)}},toggleStatus:e=>{_((s=>({...s,[e]:!0!==s[e]})))}})]})};t.Z.defaults.xsrfCookieName="csrftoken",t.Z.defaults.xsrfHeaderName="X-CSRFToken";var R=()=>{const e=(0,l.s0)(),[s,a]=(0,i.useState)(),[m,u]=(0,i.useState)(),[p,x]=(0,i.useState)(),j=(0,i.useRef)(null),[g,v]=(0,i.useState)(!1),[y,N]=(0,i.useState)("Listing generator"),[k,b]=(0,i.useState)("Listing generator"),[_,f]=(0,i.useState)("Search"),[w,M]=(0,i.useState)("Property insights"),[F,P]=(0,i.useState)(""),[T,I]=(0,i.useState)(""),[E,Z]=(0,i.useState)("Off"),[R,L]=(0,i.useState)({postcode:"",address:"",description:"",channel:"",bedrooms:"",bathrooms:"",property_type:"",tenure:"",size:"",on_road_parking:"",off_road_parking:"",balcony:"",primary_schools:0,secondary_schools:0,tubes:0,trains:0,restaurants:0,pubs:0,supermarkets:0,gyms:0,parks:0,evs:0,crime:0}),[V,A]=(0,i.useState)({location:"",size:"",property_type:"",bedrooms:"",bathrooms:"",en_suites:"",amenities:[],channel:"",additional_info:"",price:"",restaurants:"",pubs:"",supermarkets:"",tube:"",trains:"",parks:"",evs:"",primary_schools:"",secondary_schools:"",gyms:""}),[O,$]=(0,i.useState)(),[q,G]=(0,i.useState)(),[H,U]=(0,i.useState)(),[z,J]=(0,i.useState)(),[W,Y]=(0,i.useState)(),[X,K]=(0,i.useState)(),[Q,ee]=(0,i.useState)(),[se,ae]=(0,i.useState)(),[ie,te]=(0,i.useState)(),[le,ne]=(0,i.useState)(),[re,ce]=(0,i.useState)(),[oe,de]=(0,i.useState)(),[he,me]=(0,i.useState)(),[ue,pe]=(0,i.useState)(),[xe,je]=(0,i.useState)(),[ge,ve]=(0,i.useState)(),[ye,Ne]=(0,i.useState)(),[ke,be]=(0,i.useState)(),[_e,fe]=(0,i.useState)([]),[we,Ce]=(0,i.useState)([]),[Se,De]=(0,i.useState)([]),[Me,Fe]=(0,i.useState)([]),[Pe,Te]=(0,i.useState)(),[Ie,Ee]=(0,i.useState)(),[Ze,Be]=(0,i.useState)(),[Re,Le]=(0,i.useState)(),[Ve,Ae]=(0,i.useState)(),[Oe,$e]=(0,i.useState)(!1),[qe,Ge]=(0,i.useState)(!1),[He,Ue]=(0,i.useState)("Table"),[ze,Je]=(0,i.useState)("Table"),We=()=>{if((0,n.Hb)()){(async()=>{try{const{data:e}=await t.Z.get(`/api/auth/profile/${(0,n.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("user data ->",e),u(e)}catch(e){a(!0),console.log(e)}})()}else e("/access-denied"),console.log("no account")};(0,i.useEffect)((()=>{We()}),[]);const Ye=async e=>{try{"listing_ai_total"===e&&$e(!1);const{data:s}=await t.Z.post("/api/postcodes/",{postcode:F});if(console.log("postcode data ->",s),$(s),ts(e),"listing_ai_total"===e&&Ge(!0),"listing_insight_total"===e){const e={...R,postcode:F,request_type:"Insights"};await t.Z.post("/api/listing_favourites/",e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});Xe()}if("listing_normal_total"===e){const e={...R,postcode:F,request_type:"Listing"};await t.Z.post("/api/listing_favourites/",e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}})}}catch(s){a(!0),console.log(s)}},Xe=e=>{window.localStorage.setItem("listing-postcode",JSON.stringify(F))};(0,i.useEffect)((()=>{O&&(()=>{try{(async()=>{const{data:e}=await t.Z.get("/api/primaries/");G(e)})()}catch(e){a(!0),console.log(e)}})()}),[O]);const Ke=20/60*5,Qe=6371,es=e=>e*Math.PI/180,ss=5/60;(0,i.useEffect)((()=>{q&&(()=>{const e=q.filter((e=>{const s=es(parseFloat(e.latitude)-parseFloat(O[0].longitude)),a=es(parseFloat(e.longitude)-parseFloat(O[0].latitude)),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(es(parseFloat(O[0].longitude)))*Math.cos(es(parseFloat(e.latitude)))*Math.sin(a/2)*Math.sin(a/2),t=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),l=Qe*t;e.distance_between=l,e.walkTimeMin=Math.round(l/ss);const n=l/e.max_distance;return"Independent school"===e.school_type||"Special school"===e.school_type||"On request"===e.max_distance?e.within_catchment="N/a":"Based on map"===e.additional_status?e.within_catchment="Check catchment map":"Religion"===e.max_distance&e.distance_between<.6?e.within_catchment="Very likely if religious critera met":"Religion"===e.max_distance&e.distance_between<.8?e.within_catchment="Likely if religious critera met":"Religion"===e.max_distance&e.distance_between<1?e.within_catchment="Probably if religious critera met":"Religion"===e.max_distance&e.distance_between<1.5?e.within_catchment="Unlikely, even if religious critera met":"Religion"===e.max_distance&e.distance_between>1.5?e.within_catchment="Very unlikely, even if religious critera met":"Not specified"===e.max_distance&e.distance_between<.4?e.within_catchment="Very likely but no distance specified":"Not specified"===e.max_distance&e.distance_between<.7?e.within_catchment="Likely but no distance specified":"Not specified"===e.max_distance&e.distance_between<1?e.within_catchment="Probably but no distance specified":"Not specified"===e.max_distance&e.distance_between>1?e.within_catchment="Unlikely, but no distance specified":null===e.max_distance&e.distance_between<.6?e.within_catchment="Very likely, but no distance data available":null===e.max_distance&e.distance_between<.8?e.within_catchment="Likely, but no distance data available":null===e.max_distance&e.distance_between<1?e.within_catchment="Probably, but no distance data available":null===e.max_distance&e.distance_between<1.5?e.within_catchment="Unlikely, but no distance data available":null===e.max_distance&e.distance_between>1.5?e.within_catchment="Very unlikely, but no distance data available":n<=.6?e.within_catchment="Yes":n<=.8?e.within_catchment="Very likely":n<=1?e.within_catchment="Probably":n<=1.2?e.within_catchment="Probably not":"Does not apply"===e.max_distance?e.within_catchment="Yes":e.within_catchment="No",l<=Ke})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin)),s=e.slice(0,8);K(s),U(e),console.log("nearby primaries ->",e)})()}),[q]);(0,i.useEffect)((()=>{O&&(()=>{try{(async()=>{const{data:e}=await t.Z.get("/api/secondaries/");J(e)})()}catch(e){a(!0),console.log(e)}})()}),[O]);(0,i.useEffect)((()=>{z&&(()=>{const e=z.filter((e=>{const s=es(parseFloat(e.latitude)-parseFloat(O[0].longitude)),a=es(parseFloat(e.longitude)-parseFloat(O[0].latitude)),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(es(parseFloat(O[0].longitude)))*Math.cos(es(parseFloat(e.latitude)))*Math.sin(a/2)*Math.sin(a/2),t=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),l=Qe*t;e.distance_between=l,e.walkTimeMin=Math.round(l/ss);const n=l/e.max_distance,r=l/e.min_distance;return e.school_type.includes("independent")||e.school_type.includes("special")?e.within_catchment="N/a":"Exam"===e.max_distance||"Test score"===e.max_distance?e.within_catchment="Dependent on test results":"Random"===e.max_distance?e.within_catchment="Random selection based on performance":"Catchment score"===e.max_distance?e.within_catchment="School uses catchment score - check":"Based on map"===e.max_distance?e.within_catchment="Check catchment map":"Religion"===e.max_distance&e.distance_between<.7?e.within_catchment="Very likely if religious critera met":"Religion"===e.max_distance&e.distance_between<.9?e.within_catchment="Likely if religious critera met":"Religion"===e.max_distance&e.distance_between<1.5?e.within_catchment="Probably if religious critera met":"Religion"===e.max_distance&e.distance_between>1.5?e.within_catchment="Unlikely, even if religious critera met":"Does not apply"===e.max_distance||null!==e.min_distance&r<=1?e.within_catchment="Yes":null!==e.min_distance&n<=.5?e.within_catchment="Very likely":null!==e.min_distance&n<=.7?e.within_catchment="Probably":e.within_catchment=n<=.6?"Yes":n<=.8?"Very likely":n<=1?"Probably":n<=1.2?"Probably not":"No",l<=2.5})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin)),s=e.slice(0,8);ee(s),Y(e)})()}),[z]);(0,i.useEffect)((()=>{O&&(()=>{try{(async()=>{const{data:e}=await t.Z.get("/api/restaurants/");ae(e)})()}catch(e){a(!0),console.log(e)}})()}),[O]);const as=1.25;(0,i.useEffect)((()=>{se&&(()=>{const e=se.filter((e=>{const s=es(parseFloat(e.latitude)-parseFloat(O[0].longitude)),a=es(parseFloat(e.longitude)-parseFloat(O[0].latitude)),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(es(parseFloat(O[0].longitude)))*Math.cos(es(parseFloat(e.latitude)))*Math.sin(a/2)*Math.sin(a/2),t=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),l=Qe*t;return e.distance_between=l,e.walkTimeMin=Math.round(l/ss),l<=as})).sort(((e,s)=>s.rating-e.rating)),s=e.filter((e=>"No Cuisine Data"!==e.cuisine)).slice(0,3).map((e=>e.restaurant_name));be((e=>new Set(e.map((e=>e.cuisine))).size)(e)),me(e),fe(s),1===R.restaurants&&A((s=>({...s,restaurants:`${e.length} restaurants within 15 min walk, with more than ${ke} cuisines available`})))})()}),[se]);(0,i.useEffect)((()=>{O&&(()=>{try{(async()=>{const{data:e}=await t.Z.get("/api/gyms/");te(e)})()}catch(e){a(!0),console.log(e)}})()}),[O]);(0,i.useEffect)((()=>{ie&&(()=>{const e=["third space","pure gym","1 rebel","virgin","barry's","the gym group"],s=new Set,a=ie.filter((e=>{const s=es(parseFloat(e.Lat)-parseFloat(O[0].longitude)),a=es(parseFloat(e.long)-parseFloat(O[0].latitude)),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(es(parseFloat(O[0].longitude)))*Math.cos(es(parseFloat(e.Lat)))*Math.sin(a/2)*Math.sin(a/2),t=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),l=Qe*t;return e.distance_between=l,e.walkTimeMin=Math.round(l/ss),l<=as})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin)),i=[];for(let t=0;t<a.length;t++){const l=a[t];if(l.gym_group&&e.includes(l.gym_group.toLowerCase())&&!s.has(l.gym_group)&&(i.push(l.gym_group),s.add(l.gym_group),3===i.length))break}pe(a),De(i),1===R.gyms&&A((e=>({...e,gyms:`${a.length} gyms within 15 min walk, including ${i[0]} and  ${i[1]}`})))})()}),[ie]);(0,i.useEffect)((()=>{O&&(()=>{try{(async()=>{const{data:e}=await t.Z.get("/api/supermarkets/");ce(e)})()}catch(e){a(!0),console.log(e)}})()}),[O]);(0,i.useEffect)((()=>{re&&(()=>{const e=["m&s","waitrose","aldi","lidl","sainsburys","tesco","asda"],s=new Set,a=re.map((e=>{const s=es(parseFloat(e.latitude)-parseFloat(O[0].longitude)),a=es(parseFloat(e.longitude)-parseFloat(O[0].latitude)),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(es(parseFloat(O[0].longitude)))*Math.cos(es(parseFloat(e.latitude)))*Math.sin(a/2)*Math.sin(a/2),t=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),l=Qe*t;return e.distance_between=l,e.walkTimeMin=Math.round(l/ss),{...e,distance:l}})).filter((e=>e.distance<=as)),i=[];for(let t=0;t<a.length;t++){const l=a[t];if(e.includes(l.supermarket_brand.toLowerCase())&&!s.has(l.supermarket_brand)&&(i.push(l.supermarket_brand),s.add(l.supermarket_brand),3===i.length))break}ve(a),Fe(i),1===R.supermarkets&&A((e=>({...e,supermarkets:`${a.length} supermarkets within 15 min walk, including ${i[0]} and ${i[1]}`})))})()}),[re]);(0,i.useEffect)((()=>{O&&(()=>{try{(async()=>{const{data:e}=await t.Z.get("/api/tubes/");Te(e)})()}catch(e){a(!0),console.log(e)}})()}),[O]);(0,i.useEffect)((()=>{Pe&&(()=>{const e=Pe.filter((e=>{const s=es(parseFloat(e.lat)-parseFloat(O[0].longitude)),a=es(parseFloat(e.long)-parseFloat(O[0].latitude)),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(es(parseFloat(O[0].longitude)))*Math.cos(es(parseFloat(e.lat)))*Math.sin(a/2)*Math.sin(a/2),t=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),l=Qe*t;return e.distance_between=l,e.walkTimeMin=Math.round(l/ss),l<=Ke})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin));Be(e),console.log("Nearby tubes ->",e),1===R.tubes&&A((s=>({...s,tubes:`${e.length} within 15 min walk, including ${e[0].station_name} and ${e[1].station_name}`})))})()}),[Pe]);(0,i.useEffect)((()=>{O&&(()=>{try{(async()=>{const{data:e}=await t.Z.get("/api/evs/");de(e);const s=e.filter((e=>{const s=es(parseFloat(e.latitude)-parseFloat(O[0].longitude)),a=es(parseFloat(e.longitude)-parseFloat(O[0].latitude)),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(es(parseFloat(O[0].longitude)))*Math.cos(es(parseFloat(e.latitude)))*Math.sin(a/2)*Math.sin(a/2),t=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),l=Qe*t;return e.distance_between=l,e.walkTimeMin=Math.round(l/ss),l<=.8333333333333333})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin));Ne(s)})()}catch(e){a(!0),console.log(e)}})()}),[O]);(0,i.useEffect)((()=>{O&&(()=>{try{(async()=>{const{data:e}=await t.Z.get("/api/pubs/");ne(e)})()}catch(e){a(!0),console.log(e)}})()}),[O]);(0,i.useEffect)((()=>{le&&(()=>{const e=le.filter((e=>{const s=es(parseFloat(e.latitude)-parseFloat(O[0].longitude)),a=es(parseFloat(e.longitude)-parseFloat(O[0].latitude)),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(es(parseFloat(O[0].longitude)))*Math.cos(es(parseFloat(e.latitude)))*Math.sin(a/2)*Math.sin(a/2),t=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),l=Qe*t;return e.distance_between=l,e.walkTimeMin=Math.round(l/ss),l<=as})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin)),s=e.slice(0,3).map((e=>e.name));je(e),Ce(s)})()}),[le]);(0,i.useEffect)((()=>{O&&(()=>{try{(async()=>{const{data:e}=await t.Z.get("/api/trains/");Ee(e)})()}catch(e){a(!0),console.log(e)}})()}),[O]);(0,i.useEffect)((()=>{Ie&&(()=>{const e=Ie.filter((e=>{const s=es(parseFloat(e.latitude)-parseFloat(O[0].longitude)),a=es(parseFloat(e.longitude)-parseFloat(O[0].latitude)),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(es(parseFloat(O[0].longitude)))*Math.cos(es(parseFloat(e.latitude)))*Math.sin(a/2)*Math.sin(a/2),t=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),l=Qe*t;return e.distance_between=l,e.walkTimeMin=Math.round(l/ss),l<=Ke})).sort(((e,s)=>e.walkTimeMin-s.walkTimeMin));Le(e)})()}),[Ie]);const is=e=>{L((s=>({...s,[e]:1===s[e]?0:1})))},ts=async e=>{try{const{data:s}=await t.Z.post("/api/usage/listing/",{column:e},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log(s),s.status}catch(s){console.error("Error:",s)}},ls=s=>{localStorage.removeItem("wittle-user-token"),localStorage.removeItem("wittle-username"),e("/login")};return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("section",{className:"agent-profile-page",children:[(0,C.jsx)("div",{className:"desktop-nav",children:(0,C.jsx)(r.Z,{navbarColour:"#FDF7F0"})}),(0,C.jsx)("div",{className:"mobile-nav",children:(0,C.jsx)(o.Z,{setProfileContent:N,profileContent:y,profileDetail:k,setProfileDetail:b})}),(0,C.jsx)(c.Z,{setProfileDetail:b,setProfileContent:N,userData:m}),m&&"Trial expired"===m.usage_stats[0].package?(0,C.jsx)("section",{className:"main-body remove-margin",style:{height:"Results"===_?"auto":"none",marginTop:"Results"===_?"3%":"none"},children:(0,C.jsx)("section",{className:"main-body-details",children:(0,C.jsxs)("section",{className:"listing-generator",children:[(0,C.jsxs)("div",{className:"listing-options",children:[(0,C.jsx)("div",{className:"listing-buttons"}),(0,C.jsx)("div",{className:"logout-button",onClick:ls,children:(0,C.jsx)("div",{className:"logout-icon"})})]}),(0,C.jsxs)("div",{className:"no-access-body",children:[(0,C.jsx)("div",{className:"no-access-image"}),(0,C.jsx)("h1",{className:"no-access-title",children:"Oops! Dead end"}),(0,C.jsx)("h3",{className:"no-access-message",children:"You no longer have access to this content. Get in touch to upgrade your account and access the Wittle magic."})]})]})})}):(0,C.jsx)("section",{className:"main-body remove-margin",style:{height:"Results"===_?"auto":"none",marginTop:"Results"===_?"3%":"none"},children:(0,C.jsx)("section",{className:"main-body-details",children:(0,C.jsxs)("section",{className:"listing-generator",children:[(0,C.jsxs)("div",{className:"listing-options",children:[(0,C.jsxs)("div",{className:"listing-buttons",children:[(0,C.jsx)("h5",{className:"no-print",onClick:()=>M("Property insights"),style:{borderBottom:"Property insights"===w?"3px solid #ED6B86":"none",textUnderlineOffset:"Property insights"===w?"0.5em":"initial",fontWeight:"Property insights"===w?"700":"400"},children:"Property insights"}),(0,C.jsx)("h5",{className:"no-print",onClick:()=>M("Listing generator"),style:{borderBottom:"Listing generator"===w?"3px solid #ED6B86":"none",textUnderlineOffset:"Listing generator"===w?"0.5em":"initial",fontWeight:"Listing generator"===w?"700":"400"},children:"Listing generator"}),(0,C.jsx)("h5",{className:"no-print",onClick:()=>M("AI listing generator"),style:{borderBottom:"AI listing generator"===w?"3px solid #ED6B86":"none",textUnderlineOffset:"AI listing generator"===w?"0.5em":"initial",fontWeight:"AI listing generator"===w?"700":"400"},children:"AI listing generator"}),(0,C.jsx)("h5",{className:"no-print",onClick:()=>M("Saved searches"),style:{borderBottom:"Saved searches"===w?"3px solid #ED6B86":"none",textUnderlineOffset:"Saved searches"===w?"0.5em":"initial",fontWeight:"Saved searches"===w?"700":"400"},children:"Saved searches"}),!m||1!==m.id&&62!==m.id?"":(0,C.jsx)("h5",{className:"no-print",onClick:()=>M("Top properties"),style:{borderBottom:"Top properties"===w?"3px solid #ED6B86":"none",textUnderlineOffset:"Top properties"===w?"0.5em":"initial",fontWeight:"Top properties"===w?"700":"400"},children:"Top properties"})]}),(0,C.jsx)("div",{className:"logout-button",onClick:ls,children:(0,C.jsx)("div",{className:"logout-icon"})})]}),(0,C.jsx)("hr",{className:"title-line"}),"Property insights"===w&&m&&("Basic"===m.usage_stats[0].package&&m.usage_stats[0].listing_monthly_count<11||"Unlimited"===m.usage_stats[0].package||"Advanced Pilot"===m.usage_stats[0].package&&m.usage_stats[0].listing_monthly_count<101)?(0,C.jsx)(C.Fragment,{children:"Search"===_?(0,C.jsx)("div",{className:"basic-listing-wrapper",children:(0,C.jsxs)("div",{className:"property-insight-inputs",children:[(0,C.jsx)("h3",{className:"insight-title",children:"Insert full postcode to extract details about property"}),(0,C.jsxs)("div",{className:"double-input-block",children:[(0,C.jsxs)("div",{className:"input-block small",children:[(0,C.jsx)("h3",{children:"Postcode"}),(0,C.jsx)("input",{type:"text",value:F,onChange:e=>P(e.target.value.toUpperCase().replace(/\s+/g,"")),placeholder:"Enter postcode"})]}),(0,C.jsxs)("div",{className:"input-block medium",children:[(0,C.jsx)("h3",{children:"Address"}),(0,C.jsx)("input",{type:"text",value:T,onChange:e=>{const s=e.target.value;I(s),L((e=>({...e,address:s})))},placeholder:"Enter address"})]})]}),(0,C.jsxs)("div",{className:"input-block large",children:[(0,C.jsx)("h3",{children:"Channel"}),(0,C.jsxs)("select",{className:"listing-dropdown",onChange:e=>L((s=>({...s,channel:e.target.value}))),children:[(0,C.jsx)("option",{children:"--- Select ---"}),(0,C.jsx)("option",{children:"Sales"}),(0,C.jsx)("option",{children:"Rental"})]})]}),(0,C.jsx)("div",{className:"search-section",children:(0,C.jsx)("button",{className:"load-insights",onClick:()=>{Ye("listing_insight_total"),L((e=>({...e,request_type:"insights"}))),f("Results")},children:"See insights"})})]})}):"Results"===_?(0,C.jsx)(S,{postcodeSubstring:F,addressSubstring:T,listingFields:R,postcodeData:O,topPrimaries:X,topSecondaries:Q,restaurants1:he,cuisines:ke,topRestaurants:_e,setRestaurants1:me,gyms1:ue,setGyms1:pe,mainGyms:Se,supermarkets1:ge,setSupermarkets1:ve,mainSupermarkets:Me,pubs1:xe,topPubs:we,tubes1:Ze,setTubes1:Be,trains1:Re,insightView:_,setInsightView:f,primaryData1:H,setPrimaryData1:U,secondaryData1:W,setSecondaryData1:Y,ev1:ye,setEv1:Ne,secondaryDetail:He,setSecondaryDetail:Ue,primaryDetail:ze,setPrimaryDetail:Je}):""}):"Listing generator"===w&&m&&("Basic"===m.usage_stats[0].package&&m.usage_stats[0].listing_monthly_count<11||"Unlimited"===m.usage_stats[0].package||"Advanced Pilot"===m.usage_stats[0].package&&m.usage_stats[0].listing_monthly_count<101)?(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:"full-listing-wrapper",children:[(0,C.jsx)("div",{className:"full-listing-inputs",children:(0,C.jsxs)("div",{className:"property-insight-inputs",children:[(0,C.jsx)("h3",{className:"insight-title",children:"Input details and select features you want to include in your listing"}),(0,C.jsxs)("div",{className:"double-input-block",children:[(0,C.jsxs)("div",{className:"input-block small",children:[(0,C.jsx)("h3",{children:"Postcode"}),(0,C.jsx)("input",{type:"text",value:F,onChange:e=>P(e.target.value.toUpperCase().replace(/\s+/g,"")),placeholder:"Enter postcode..."})]}),(0,C.jsxs)("div",{className:"input-block medium",children:[(0,C.jsx)("h3",{children:"Address"}),(0,C.jsx)("input",{type:"text",value:T,onChange:e=>{const s=e.target.value;I(s),L((e=>({...e,address:s})))},placeholder:"Enter address"})]})]}),(0,C.jsx)("div",{className:"single-input-block",children:(0,C.jsxs)("div",{className:"input-block large",children:[(0,C.jsx)("h3",{children:"Channel"}),(0,C.jsxs)("select",{className:"listing-dropdown",onChange:e=>L((s=>({...s,channel:e.target.value}))),children:[(0,C.jsx)("option",{children:"--- Select ---"}),(0,C.jsx)("option",{children:"Sales"}),(0,C.jsx)("option",{children:"Rental"})]})]})}),(0,C.jsx)("div",{className:"single-input-block",children:(0,C.jsxs)("div",{className:"input-block large",children:[(0,C.jsx)("h3",{children:"Description"}),(0,C.jsx)("textarea",{id:"description",value:R.description,rows:"4",placeholder:"Enter description",onChange:e=>L((s=>({...s,description:e.target.value})))})]})}),(0,C.jsxs)("div",{className:"lifestyle-input-block",children:[(0,C.jsx)("h3",{className:"insight-title",children:"Lifestyle elements to include"}),(0,C.jsxs)("div",{className:"lifestyle-input-wrap",children:[(0,C.jsxs)("div",{className:"input-block-icons",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"primaries"}),(0,C.jsx)("h3",{children:"Primary schools"}),(0,C.jsx)(d.Z,{checked:1===R.primary_schools,onChange:()=>is("primary_schools"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,C.jsxs)("div",{className:"input-block-icons",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"secondaries"}),(0,C.jsx)("h3",{children:"Secondary schools"}),(0,C.jsx)(d.Z,{checked:1===R.secondary_schools,onChange:()=>is("secondary_schools"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,C.jsxs)("div",{className:"input-block-icons",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"tubes"}),(0,C.jsx)("h3",{children:"Tubes"}),(0,C.jsx)(d.Z,{checked:1===R.tubes,onChange:()=>is("tubes"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,C.jsxs)("div",{className:"input-block-icons",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"trains"}),(0,C.jsx)("h3",{children:"Trains"}),(0,C.jsx)(d.Z,{checked:1===R.trains,onChange:()=>is("trains"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,C.jsxs)("div",{className:"input-block-icons",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"evs"}),(0,C.jsx)("h3",{children:"Electric vehicles"}),(0,C.jsx)(d.Z,{checked:1===R.evs,onChange:()=>is("evs"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,C.jsxs)("div",{className:"input-block-icons",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"restaurants"}),(0,C.jsx)("h3",{children:"Restaurants"}),(0,C.jsx)(d.Z,{checked:1===R.restaurants,onChange:()=>is("restaurants"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,C.jsxs)("div",{className:"input-block-icons",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"pubs"}),(0,C.jsx)("h3",{children:"Pubs"}),(0,C.jsx)(d.Z,{checked:1===R.pubs,onChange:()=>is("pubs"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,C.jsxs)("div",{className:"input-block-icons",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"parks"}),(0,C.jsx)("h3",{children:"Parks"}),(0,C.jsx)(d.Z,{checked:1===R.parks,onChange:()=>is("parks"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,C.jsxs)("div",{className:"input-block-icons",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"gyms"}),(0,C.jsx)("h3",{children:"Gyms"}),(0,C.jsx)(d.Z,{checked:1===R.gyms,onChange:()=>is("gyms"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,C.jsxs)("div",{className:"input-block-icons",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"supermarkets"}),(0,C.jsx)("h3",{children:"Supermarkets"}),(0,C.jsx)(d.Z,{checked:1===R.supermarkets,onChange:()=>is("supermarkets"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,C.jsxs)("div",{className:"input-block-icons",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"crime"}),(0,C.jsx)("h3",{children:"Crime"}),(0,C.jsx)(d.Z,{checked:1===R.crime,onChange:()=>is("crime"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]})]})]}),(0,C.jsx)("div",{className:"listing-search-section",children:(0,C.jsx)("button",{className:"load-insights",onClick:()=>Ye("listing_normal_total"),children:"Load description"})})]})}),(0,C.jsxs)("section",{className:"full-listing-outputs",children:[(0,C.jsxs)("div",{className:"results-header",children:[(0,C.jsx)("div",{className:"header-text",children:(0,C.jsx)("h3",{className:"results-title",children:"Your listing"})}),(0,C.jsx)("div",{className:"header-cta",children:(0,C.jsxs)("div",{className:"copy-button",onClick:()=>{const e=j.current.innerHTML,s=document.createElement("div");s.contentEditable=!0,s.innerHTML=e,document.body.appendChild(s);const a=document.createRange();a.selectNodeContents(s);const i=window.getSelection();i.removeAllRanges(),i.addRange(a),s.focus(),document.execCommand("copy"),document.body.removeChild(s)},children:[(0,C.jsx)("div",{className:"copy-icon"}),(0,C.jsx)("h3",{children:"Copy"})]})})]}),(0,C.jsxs)("div",{className:"results-section",children:[(0,C.jsx)("div",{className:"results-description",children:O&&""!==R.description?(0,C.jsx)("h3",{children:R.description}):""}),O?(0,C.jsx)("h3",{className:"results-sub-title",children:"What you should know about this area"}):"",he&&1===R.restaurants?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"restaurants"}),(0,C.jsx)("h3",{children:"Restaurants"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:[he.length," restaurants within 15 mins walk"]}),(0,C.jsxs)("li",{children:["more than ",ke," cuisines available"]}),(0,C.jsxs)("li",{children:[_e[0],", ",_e[1]," & ",_e[2]," are well rated"]})]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",xe&&1===R.pubs?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"pubs"}),(0,C.jsx)("h3",{children:"Pubs"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:[xe.length," pubs within 15 mins walk"]}),(0,C.jsxs)("li",{children:[we[0],", ",we[1]," & ",we[2]," are well rated"]})]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",H&&1===R.primary_schools?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"primaries"}),(0,C.jsx)("h3",{children:"Primary schools"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("ul",{className:"results-details",children:H.slice(0,5).map(((e,s)=>(0,C.jsxs)("li",{children:[e.school_name," - ",e.ofsted_results," ofsted - ",e.walkTimeMin," mins walk"]},s)))})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",W&&1===R.secondary_schools?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"secondaries"}),(0,C.jsx)("h3",{children:"Secondary schools"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("ul",{className:"results-details",children:W.slice(0,5).map(((e,s)=>(0,C.jsxs)("li",{children:[e.school_name," - ",e.ofsted_results," ofsted - ",e.walkTimeMin," mins walk"]},s)))})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",ue&&1===R.gyms?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"gyms"}),(0,C.jsx)("h3",{children:"Gyms"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:[ue.length," gyms within 15 mins walk"]}),3===Se.length?(0,C.jsxs)("li",{children:["includes ",Se[0],", ",Se[1]," & ",Se[2]]}):2===Se.length?(0,C.jsxs)("li",{children:["includes ",Se[0]," & ",Se[1]," "]}):1===Se.length?(0,C.jsxs)("li",{children:["includes ",Se[0]]}):""]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",ge&&1===R.supermarkets?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"supermarkets"}),(0,C.jsx)("h3",{children:"Supermarkets"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:["\ud83d\uded2 ",ge.length," supermarkets within 15 mins walk"]}),3===Me.length?(0,C.jsxs)("li",{children:["\ud83d\uded2 includes ",Me[0],", ",Me[1]," & ",Me[2]]}):2===Me.length?(0,C.jsxs)("li",{children:["\ud83d\uded2 includes ",Me[0]," & ",Me[1]," "]}):1===Me.length?(0,C.jsxs)("li",{children:["\ud83d\uded2 includes ",Me[0]]}):""]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",Ze&&1===R.tubes?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"tubes"}),(0,C.jsx)("h3",{children:"Tubes"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:[Ze.length," stations within 20 mins walk"]}),Ze.slice(0,3).map(((e,s)=>(0,C.jsxs)("li",{children:[e.station_name," - ",e.line," - ",e.walkTimeMin," mins walk"]},s)))," "]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",Re&&1===R.trains?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"trains"}),(0,C.jsx)("h3",{children:"Trains"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:[Re.length," stations within 20 mins walk"]}),Re.slice(0,3).map(((e,s)=>(0,C.jsxs)("li",{children:[e.station," - ",e.walkTimeMin," mins walk"]},s)))]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",O&&1===R.parks?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"parks"}),(0,C.jsx)("h3",{children:"Parks"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:["within top ",100-O[0].parks_lsoa[0].london_percentile,"% of areas in london for access to greenspace"]}),(0,C.jsxs)("li",{children:[O[0].parks_postcode.park_name0," - ",Math.ceil(O[0].parks_postcode.distance0/1e3/5*60)," mins walk"]}),(0,C.jsxs)("li",{children:[O[0].parks_postcode.park_name1," - ",Math.ceil(O[0].parks_postcode.distance1/1e3/5*60)," mins walk"]}),(0,C.jsxs)("li",{children:[O[0].parks_postcode.park_name2," - ",Math.ceil(O[0].parks_postcode.distance2/1e3/5*60)," mins walk"]})]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",ye&&1===R.evs?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"evs"}),(0,C.jsx)("h3",{children:"Electric vehicle charging"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:[O[0].ev.ev_10_mins," charging points within 10 mins walk"]}),(0,C.jsxs)("li",{children:["in the top ",Math.round(100*(1-O[0].ev.percentile)),"% of areas in London for ev charging access"]})]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):""]}),(0,C.jsxs)("div",{className:"results-section-icons",ref:j,children:[(0,C.jsx)("div",{className:"results-description",children:O&&""!==R.description?(0,C.jsx)("h3",{children:R.description}):""}),O?(0,C.jsx)("h3",{className:"results-sub-title",children:"What you should know about this area"}):"",he&&1===R.restaurants?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"restaurants"}),(0,C.jsx)("h3",{children:"\ud83e\udd58 Restaurants"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:["more than ",ke," cuisines available"]}),(0,C.jsxs)("li",{children:[_e[0],", ",_e[1]," & ",_e[2]," are well rated"]})]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",xe&&1===R.pubs?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"pubs"}),(0,C.jsx)("h3",{children:"\ud83c\udf7a Pubs"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:[xe.length," pubs within 15 mins walk"]}),(0,C.jsxs)("li",{children:[we[0],", ",we[1]," & ",we[2]," are well rated"]})]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",H&&1===R.primary_schools?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"primaries"}),(0,C.jsx)("h3",{children:"\ud83d\udc76 Primary schools"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("ul",{className:"results-details",children:H.slice(0,5).map(((e,s)=>(0,C.jsxs)("li",{children:[e.school_name," - ",e.ofsted_results," ofsted - ",e.walkTimeMin," mins walk"]},s)))})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",W&&1===R.secondary_schools?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"secondaries"}),(0,C.jsx)("h3",{children:"\ud83c\udf93 Secondary schools"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("ul",{className:"results-details",children:W.slice(0,5).map(((e,s)=>(0,C.jsxs)("li",{children:[e.school_name," - ",e.ofsted_results," ofsted - ",e.walkTimeMin," mins walk"]},s)))})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",ue&&1===R.gyms?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"gyms"}),(0,C.jsx)("h3",{children:"\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f Gyms"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:[ue.length," gyms within 15 mins walk"]}),3===Se.length?(0,C.jsxs)("li",{children:["includes ",Se[0],", ",Se[1]," & ",Se[2]]}):2===Se.length?(0,C.jsxs)("li",{children:["includes ",Se[0]," & ",Se[1]," "]}):1===Se.length?(0,C.jsxs)("li",{children:["includes ",Se[0]]}):""]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",ge&&1===R.supermarkets?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"supermarkets"}),(0,C.jsx)("h3",{children:"\ud83d\uded2 Supermarkets"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:[ge.length," supermarkets within 15 mins walk"]}),3===Me.length?(0,C.jsxs)("li",{children:["includes ",Me[0],", ",Me[1]," & ",Me[2]]}):2===Me.length?(0,C.jsxs)("li",{children:["Includes ",Me[0]," & ",Me[1]," "]}):1===Me.length?(0,C.jsxs)("li",{children:["Iincludes ",Me[0]]}):""]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",Ze&&1===R.tubes?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"tubes"}),(0,C.jsx)("h3",{children:"\ud83d\ude87 Tubes"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:[Ze.length," stations within 20 mins walk"]}),Ze.slice(0,3).map(((e,s)=>(0,C.jsxs)("li",{children:[e.station_name," - ",e.line," - ",e.walkTimeMin," mins walk"]},s)))," "]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",Re&&1===R.trains?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"trains"}),(0,C.jsx)("h3",{children:"\ud83d\ude88 Trains"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:[Re.length," stations within 20 mins walk"]}),Re.slice(0,3).map(((e,s)=>(0,C.jsxs)("li",{children:[e.station," - ",e.walkTimeMin," mins walk"]},s)))]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",O&&1===R.parks?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"parks"}),(0,C.jsx)("h3",{children:"\ud83c\udf33 Parks"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:["within top ",100-O[0].parks_lsoa[0].london_percentile,"% of areas in london for access to greenspace"]}),(0,C.jsxs)("li",{children:[O[0].parks_postcode.park_name0," - ",Math.ceil(O[0].parks_postcode.distance0/1e3/5*60)," mins walk"]}),(0,C.jsxs)("li",{children:[O[0].parks_postcode.park_name1," - ",Math.ceil(O[0].parks_postcode.distance1/1e3/5*60)," mins walk"]}),(0,C.jsxs)("li",{children:[O[0].parks_postcode.park_name2," - ",Math.ceil(O[0].parks_postcode.distance2/1e3/5*60)," mins walk"]})]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):"",ye&&1===R.evs?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"results-block",children:[(0,C.jsxs)("div",{className:"result-block-header",children:[(0,C.jsx)("div",{className:"lifestyle-icon",id:"evs"}),(0,C.jsx)("h3",{children:"\u26fd\ufe0f Electric vehicle charging"})]}),(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("ul",{className:"results-details",children:[(0,C.jsxs)("li",{children:[O[0].ev.ev_10_mins," charging points within 10 mins walk"]}),(0,C.jsxs)("li",{children:["in the top ",Math.round(100*(1-O[0].ev.percentile)),"% of areas in London for ev charging access"]})]})})]}),(0,C.jsx)("hr",{className:"results-divider"})]}):""]})]})]})}):"AI listing generator"===w&&m&&("Basic"===m.usage_stats[0].package&&m.usage_stats[0].listing_monthly_count<11||"Unlimited"===m.usage_stats[0].package||"Advanced Pilot"===m.usage_stats[0].package&&m.usage_stats[0].listing_monthly_count<101)?(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(h.default,{})}):"Saved searches"===w&&m&&m.listing_favourites.length>0?(0,C.jsx)(D,{userData:m,loadUserData:We,setListingSelection:M}):"Top properties"===w&&m?(0,C.jsx)(B,{userData:m,loadUserData:We,setListingSelection:M,fetchData:async()=>{const e=JSON.parse(localStorage.getItem("listing-route"));if(console.log("listing route ->",e),"On"===e){f("Results");const e=JSON.parse(localStorage.getItem("listing-postcode"));console.log("postcode-route",e);try{const{data:s}=await t.Z.post("/api/postcodes/",{postcode:e});console.log("postcode data ->",s),$(s),window.localStorage.setItem("listing-route",JSON.stringify("Off")),Z("Off")}catch(s){console.error("Error fetching postcodes:",s)}}}}):""]})})})]})})}}}]);
//# sourceMappingURL=556.9867e727.chunk.js.map