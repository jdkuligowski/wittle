"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[250],{78250:function(e,s,a){a.r(s);var i=a(28381),r=a(65293),l=a(42524),t=(a(95325),a(15211)),c=(a(61505),a(47142)),n=a(59693),o=a(8772),d=(a(9663),a(9738),a(37336)),h=a(29343);s.default=()=>{const e=(0,l.s0)(),[s,a]=((0,l.TH)(),(0,i.useState)([])),[m,p]=(0,i.useState)(),[u,x]=(0,i.useState)(),[j,v]=(0,i.useState)("My properties"),[N,g]=(0,i.useState)("My properties"),[y,f]=(0,i.useState)(!1),[S,b]=(0,i.useState)(""),[w,C]=(0,i.useState)(""),[k,F]=(0,i.useState)(null),[P,D]=(0,i.useState)(),[_,T]=(0,i.useState)(0),[Z,$]=(0,i.useState)();(0,i.useEffect)((()=>{(()=>{if((0,t.Hb)())try{(async()=>{const{data:e}=await r.ZP.get(`/api/auth/profile/${(0,t.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,t.hP)()}`}});console.log("user data ->",e),p(e),D(e.white_properties);const s=e.white_properties.reduce(((e,s)=>e+s.price),0);T(s.toFixed(1)),"Let"===e.white_properties[0].status?$("Rent"):$("Sale")})()}catch(s){x(!0),console.log(s)}else e("/access-denied"),console.log("no account")})(),console.log("carrying out userData load")}),[]);const A=e=>{F(e)};return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("section",{className:"agent-profile-page",children:[(0,h.jsx)("div",{className:"desktop-nav",children:(0,h.jsx)(o.Z,{navbarColour:"#FDF7F0"})}),(0,h.jsx)("div",{className:"mobile-nav",children:(0,h.jsx)(d.Z,{setProfileContent:v,profileContent:j,profileDetail:N,setProfileDetail:g})}),(0,h.jsx)(n.Z,{setProfileDetail:g,variableSide:y,setProfileContent:v,setVariableSide:f}),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("section",{className:"profile-summary",children:[(0,h.jsx)("div",{className:"welcome",children:m?(0,h.jsxs)("h1",{children:["\ud83d\udc4b Welcome back ",m.first_name,"!"]}):""}),(0,h.jsxs)("div",{className:"summary-boxes",children:[(0,h.jsx)("div",{className:"summary-box",children:m?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h1",{children:m.white_properties.length}),(0,h.jsx)("h5",{children:"Properties under management"})]}):""}),(0,h.jsx)("div",{className:"summary-box",children:m?(0,h.jsxs)(h.Fragment,{children:["Sale"===Z?(0,h.jsxs)("h1",{children:["\xa3",(0,h.jsx)(c.h3,{value:_/1e6,displayType:"text",thousandSeparator:!0,prefix:""}),"m"]}):"Rent"===Z?(0,h.jsxs)("h1",{children:["\xa3",(0,h.jsx)(c.h3,{value:_/1e3,displayType:"text",thousandSeparator:!0,prefix:""}),"k"]}):"",(0,h.jsx)("h5",{children:"Properties under management"})]}):""})]})]}),(0,h.jsxs)("section",{className:"profile-property-list",children:[(0,h.jsxs)("div",{className:"search-section",children:[(0,h.jsxs)("div",{className:"search-section-left",children:[(0,h.jsx)("h3",{children:"Search"}),(0,h.jsx)("input",{value:S,onChange:e=>b(e.target.value),placeholder:"Type property name"})]}),(0,h.jsxs)("div",{className:"search-section-right",children:[(0,h.jsx)("h3",{children:"Status"}),(0,h.jsx)("input",{value:w,onChange:e=>C(e.target.value),placeholder:"All"})]})]}),(0,h.jsx)("div",{className:"agent-property-list",children:(0,h.jsxs)("div",{className:"property-block",children:[(0,h.jsxs)("div",{className:"property-table-headers",children:[(0,h.jsx)("h5",{id:"column1"}),(0,h.jsxs)("div",{id:"column2",className:"sort-section",children:[(0,h.jsx)("h5",{children:"Street name"}),(0,h.jsx)("h5",{className:"sort",onClick:()=>A("name"),children:"\u2195\ufe0f"})]}),(0,h.jsxs)("div",{id:"column3",className:"sort-section",children:[(0,h.jsx)("h5",{children:"Price"}),(0,h.jsx)("h5",{className:"sort",onClick:()=>A("price"),children:"\u2195\ufe0f"})]}),(0,h.jsx)("h5",{id:"column4",children:"Status"}),(0,h.jsxs)("div",{id:"column5",className:"sort-section",children:[(0,h.jsx)("h5",{children:"Date added"}),(0,h.jsx)("h5",{className:"sort",onClick:()=>A("date"),children:"\u2195\ufe0f"})]}),(0,h.jsx)("h5",{id:"column5",children:"Action"})]}),(0,h.jsx)("div",{className:"property-table-details",children:m&&m.white_properties?m.white_properties.filter((e=>e.name.toLowerCase().includes(S.toLowerCase()))).sort(((e,s)=>"name"===k?e.name.localeCompare(s.name):"price"===k?e.price-s.price:"date"===k?new Date(e.date)-new Date(s.date):0)).map(((s,a)=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"property-content",children:[(0,h.jsx)("div",{className:"column",id:"column1",children:(0,h.jsx)("div",{className:"property-image",style:{backgroundImage:`url(${s.image})`}})}),(0,h.jsx)("div",{className:"column",id:"column2",children:(0,h.jsx)("h5",{children:s.name})}),(0,h.jsx)("div",{className:"column",id:"column3",children:(0,h.jsx)("h5",{children:(0,h.jsx)(c.h3,{value:s.price,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})})}),(0,h.jsx)("div",{className:"column",id:"column4",children:(0,h.jsx)("h5",{children:s.status})}),(0,h.jsx)("div",{className:"column",id:"column5",children:(0,h.jsx)("h5",{children:"2023/06/18"})}),(0,h.jsx)("div",{className:"column",id:"column6",children:(0,h.jsx)("button",{onClick:()=>e(`/agents/property/${s.postcode}`),children:"View"})})]},a),(0,h.jsx)("hr",{className:"property-divider"})]}))):""})]})})]})]})]})})}}}]);
//# sourceMappingURL=250.0432e6b1.chunk.js.03f52398d417.map