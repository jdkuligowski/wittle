"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[533],{5533:function(e,a,s){s.r(a),s.d(a,{default:function(){return j}});var t=s(72791),n=s(55294),o=s(57689),i=s(82570),r=(s(99696),s(87462)),l=s(50241),c=s(8003),m=s(1413),d=s(42982),p=s(45987),u=s(22723),g=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],h=function(){var e=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,s=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),t=String(a.getOptionValue(e)).toLowerCase(),n=String(a.getOptionLabel(e)).toLowerCase();return t===s||n===s},f={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,a,s,t){return!(!e||a.some((function(a){return h(e,a,t)}))||s.some((function(a){return h(e,a,t)})))},getNewOptionData:function(e,a){return{label:a,value:e,__isNew__:!0}}};s(54164),s(51672);var w=(0,t.forwardRef)((function(e,a){var s=function(e){var a=e.allowCreateWhileLoading,s=void 0!==a&&a,n=e.createOptionPosition,o=void 0===n?"last":n,i=e.formatCreateLabel,r=void 0===i?f.formatCreateLabel:i,c=e.isValidNewOption,h=void 0===c?f.isValidNewOption:c,w=e.getNewOptionData,x=void 0===w?f.getNewOptionData:w,v=e.onCreateOption,j=e.options,_=void 0===j?[]:j,C=e.onChange,N=(0,p.Z)(e,g),b=N.getOptionValue,y=void 0===b?l.g:b,S=N.getOptionLabel,O=void 0===S?l.b:S,F=N.inputValue,L=N.isLoading,Z=N.isMulti,k=N.value,P=N.name,D=(0,t.useMemo)((function(){return h(F,(0,u.H)(k),_,{getOptionValue:y,getOptionLabel:O})?x(F,r(F)):void 0}),[r,x,O,y,F,h,_,k]),A=(0,t.useMemo)((function(){return!s&&L||!D?_:"first"===o?[D].concat((0,d.Z)(_)):[].concat((0,d.Z)(_),[D])}),[s,o,L,D,_]),V=(0,t.useCallback)((function(e,a){if("select-option"!==a.action)return C(e,a);var s=Array.isArray(e)?e:[e];if(s[s.length-1]!==D)C(e,a);else if(v)v(F);else{var t=x(F,F),n={action:"create-option",name:P,option:t};C((0,u.D)(Z,[].concat((0,d.Z)((0,u.H)(k)),[t]),t),n)}}),[x,F,Z,P,D,v,C,k]);return(0,m.Z)((0,m.Z)({},N),{},{options:A,onChange:V})}((0,c.u)(e));return t.createElement(l.S,(0,r.Z)({ref:a},s))})),x=s(74177),v=s(80184);var j=()=>{const e=(0,o.s0)(),[a,s]=(0,t.useState)(!1),[r,l]=(0,t.useState)(),[c,m]=(0,t.useState)(null),[d,p]=(0,t.useState)([]);(0,t.useEffect)((()=>{(async()=>{try{const e="/api/branch_list/",{data:a}=await n.Z.get(e);console.log("agent list ->",a),l(a);const s=a.map((e=>({value:e.id,label:e.branch_name})));p(s),console.log("company list ->",s)}catch(e){console.log(e)}})()}),[]);const[u,g]=(0,t.useState)("password"),[h,f]=(0,t.useState)("password"),[j,_]=(0,t.useState)(!1),[C,N]=(0,t.useState)(!1),[b,y]=(0,t.useState)({email:"",company_name:"",password:"",password_confirmation:"",first_name:"",last_name:""}),[S,O]=(0,t.useState)({email:"",company_name:"",password:"",password_confirmation:"",first_name:"",last_name:"",post:""}),F=e=>{const{name:a,value:s}=e.target;if(y("email"===a?{...b,[a]:s.toLowerCase()}:{...b,[a]:s}),"password"===a){const e=(e=>{const a=(0,i.matches)(e,/[A-Z]/),s=(0,i.matches)(e,/[a-z]/),t=(0,i.matches)(e,/\d/),n=(0,i.matches)(e,/[^A-Za-z0-9]/);return(0,i.isLength)(e,{min:8})?a?s?t?n?"":"Password must contain at least one special character":"Password must contain at least one digit":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter":"Password must be at least 8 characters long"})(s);O({...S,password:e})}else if("password_confirmation"===a){const e=s!==b.password?"Passwords don't match":"";O({...S,password_confirmation:e})}};return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("section",{className:"login-page",id:"register",children:a?(0,v.jsx)(x.Z,{}):(0,v.jsxs)("section",{className:"login-content",children:[(0,v.jsx)("div",{className:"logo-section",children:(0,v.jsx)("div",{className:"wittle-logo",onClick:()=>e("/")})}),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"register-title",children:(0,v.jsx)("h1",{children:"Unlock the benefits of Wittle"})}),(0,v.jsxs)("div",{className:"register-section",children:[(0,v.jsxs)("div",{className:"login-double-input",children:[(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"First name"}),(0,v.jsx)("input",{type:"text",name:"first_name",className:"input",value:b.first_name,onChange:F}),S.first_name&&(0,v.jsxs)("p",{className:"error",children:["* ",S.first_name]})]}),(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"Last name"}),(0,v.jsx)("input",{type:"text",name:"last_name",className:"input",value:b.last_name,onChange:F}),S.last_name&&(0,v.jsxs)("p",{className:"error",children:["* ",S.last_name]})]})]}),(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"Company"}),(0,v.jsx)(w,{isClearable:!0,onChange:(e,a)=>{m(e);const s=e?e.label:"";y({...b,company_name:s})},options:d,value:c,styles:{control:e=>({...e,fontSize:"0.8rem",fontFamily:"Poppins",color:"#FDF7F0",borderColor:"#FDF7F0",borderRadius:"10px",backgroundColor:"#1A276C",padding:"0px 0px",minHeight:"35px"}),option:(e,a)=>({...e,color:a.isSelected?"white":"#333",backgroundColor:a.isSelected?"#1A276C":"white",fontSize:"0.8rem"}),singleValue:(e,a)=>({...e,color:"#FDF7F0",fontSize:"0.8rem",fontFamily:"Poppins",padding:"0px 0px"}),input:e=>({...e,color:"#FDF7F0"})},placeholder:"Select or add a company...",name:"company_name"}),S.company_name&&(0,v.jsxs)("p",{className:"error",children:["* ",S.company_name]})]}),(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"Email"}),(0,v.jsx)("input",{type:"email",name:"email",className:"input",value:b.email,onChange:F}),S.email&&(0,v.jsxs)("p",{className:"error",children:["* ",S.email]})]}),(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"Password"}),(0,v.jsx)("input",{type:h,name:"password",className:"password-input-register",value:b.password,onChange:F}),S.password&&(0,v.jsxs)("p",{className:"error",children:["* ",S.password]})]}),(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"Confirm password"}),(0,v.jsx)("input",{type:"password",name:"password_confirmation",className:"input",value:b.password_confirmation,onChange:F}),S.password_confirmation&&(0,v.jsxs)("p",{className:"error",children:["* ",S.password_confirmation]})]})]}),(0,v.jsx)("button",{type:"submit",onClick:async a=>{a.preventDefault(),s(!0),O({}),console.log("start register");const t={...S,first_name:b.first_name.length<1?"Add first name":"",last_name:b.last_name.length<1?"Add last name":"",company_name:b.company_name.length<1?"Add company":"",email:(0,i.isEmail)(b.email)?"":"Invalid email address"};O(t),console.log("checked register errors");if(Object.values(t).some((e=>""!==e)))s(!1);else{console.log("post register");try{await n.Z.post("/api/auth/register/",b);const{data:a}=await n.Z.post("/api/auth/login/",{email:b.email,password:b.password});o=a.token,window.localStorage.setItem("wittle-user-token",o),window.localStorage.setItem("wittle-username",a.email),console.log("username ->",a.email),y({}),e("/agents/profile"),s(!1)}catch(r){console.log(r),s(!1),O({...S,post:"Error registering account. Username or email may already exist."})}var o}},children:"Register"}),S.post&&(0,v.jsxs)("p",{className:"error",children:["* ",S.post]})]})]})})})}},74177:function(e,a,s){s(72791);var t=s(80184);a.Z=()=>(0,t.jsx)("div",{className:"loading-gif",children:(0,t.jsx)("img",{src:s(29193),alt:"loading gif"})})},29193:function(e,a,s){e.exports=s.p+"static/media/transparent-spinner.f3eb62caffaa8568ecbe.gif"}}]);
//# sourceMappingURL=533.64fbf66a.chunk.js.map