(self.webpackChunkclient=self.webpackChunkclient||[]).push([[443,177],{74177:function(e,s,t){"use strict";t(72791);var r=t(80184);s.Z=()=>(0,r.jsx)("div",{className:"loading-gif",children:(0,r.jsx)("img",{src:t(57837),alt:"loading gif"})})},24604:function(e,s,t){"use strict";t(72791);var r=t(80184);s.Z=e=>{let{setProfileContent:s,profileContent:t,profileDetail:n,setProfileDetail:a}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"mobile-selector-section",children:(0,r.jsx)("div",{className:"mobile-title-slider",children:"Search"===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"pills",onClick:()=>a("Wittle search"),style:{fontWeight:"Wittle search"===n?"700":"500",backgroundColor:"Wittle search"===n?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Wittle search"}),(0,r.jsx)("h2",{className:"pills",onClick:()=>a("Property search"),style:{fontWeight:"Property search"===n?"700":"500",backgroundColor:"Property search"===n?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Property search"}),(0,r.jsx)("h2",{className:"pills",onClick:()=>a("Saved properties"),style:{fontWeight:"Saved properties"===n?"700":"500",backgroundColor:"Saved properties"===n?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Saved properties"}),(0,r.jsx)("h2",{className:"pills",onClick:()=>a("Saved searches"),style:{fontWeight:"Saved searches"===n?"700":"500",backgroundColor:"Saved searches"===n?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Saved searches"}),(0,r.jsx)("h2",{className:"pills",onClick:()=>a("Property comparison"),style:{fontWeight:"Property comparison"===n?"700":"500",backgroundColor:"Property comparison"===n?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Property comparison"})]}):"Lifestyle"===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"pills",onClick:()=>a("Lifestyle search"),style:{fontWeight:"Lifestyle search"===n?"700":"500",backgroundColor:"Lifestyle search"===n?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Search"}),(0,r.jsx)("h2",{className:"pills",onClick:()=>a("List"),style:{fontWeight:"List"===n?"700":"500",backgroundColor:"List"===n?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Saved places"}),(0,r.jsx)("h2",{className:"pills",onClick:()=>a("Lifestyle insights"),style:{fontWeight:"Lifestyle insights"===n?"700":"500",backgroundColor:"Lifestyle insights"===n?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Insights"})]}):"Admin"===t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"pills",onClick:()=>a("Admin dashboard"),style:{fontWeight:"Admin dashboard"===n?"700":"500",backgroundColor:"Admin dashboard"===n?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Dashboard"}),(0,r.jsx)("h2",{className:"pills",onClick:()=>a("Admin opportunities"),style:{fontWeight:"Admin opportunities"===n?"700":"500",backgroundColor:"Admin opportunities"===n?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Opportunity"})]}):""})})})}},9443:function(e,s,t){"use strict";t.r(s);var r=t(72791),n=t(31243),a=t(57689),l=t(97165),i=t(30948),o=(t(99696),t(24604),t(60764)),c=t(52094),d=t(78084),u=t(74177),h=t(98472),p=t(80184);n.Z.defaults.xsrfCookieName="csrftoken",n.Z.defaults.xsrfHeaderName="X-CSRFToken";s.default=()=>{const e=(0,a.s0)(),[s,t]=(0,r.useState)(),[m,x]=(0,r.useState)(),[v,j]=(0,r.useState)(),[f,y]=(0,r.useState)(!1),[g,_]=(0,r.useState)("Comparison"),[b,N]=(0,r.useState)("Comparison"),[k,C]=(0,r.useState)(!1),[S,w]=(0,r.useState)(""),[F,A]=(0,r.useState)(""),[P,O]=(0,r.useState)(),[E,L]=(0,r.useState)(),[D,B]=(0,r.useState)([]),[U,W]=(0,r.useState)([]),[R,$]=(0,r.useState)(""),[T,Z]=(0,r.useState)("Efficiency"),[H,I]=(0,r.useState)([]),[M,z]=(0,r.useState)(),[V,Y]=(0,r.useState)(),[q,G]=(0,r.useState)(sessionStorage.getItem("sessionName")||""),[J,X]=(0,r.useState)(["SW8"]),[K,Q]=(0,r.useState)(),[ee,se]=(0,r.useState)("Home"),[te,re]=(0,r.useState)([]),[ne,ae]=(0,r.useState)([]),[le,ie]=(0,r.useState)([]),[oe,ce]=(0,r.useState)("Lettings"),[de,ue]=(0,r.useState)(!1),[he,pe]=(0,r.useState)({postcode:"",bathrooms_min:null,bathrooms_max:null,bedrooms_min:null,bedrooms_max:null,price_min:null,price_max:null,channel:"",rental_additional:""}),[me,xe]=(0,r.useState)([]),[ve,je]=(0,r.useState)(),[fe,ye]=(0,r.useState)({latitude:51.515419,longitude:-.141099,zoom:11.5}),[ge,_e]=(0,r.useState)([]),[be,Ne]=(0,r.useState)(ne.map((()=>!1))),[ke,Ce]=(0,r.useState)("2days"),[Se,we]=(0,r.useState)([]),[Fe,Ae]=(0,r.useState)([]),Pe=()=>{if((0,l.Hb)()){(async()=>{try{const{data:e}=await n.Z.get(`/api/auth/profile/${(0,l.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}});if(console.log("user data ->",e),x(e),e.lead_gen_details.length>0){pe(e.lead_gen_details[0]);const s=e.epc_favourites.filter((e=>null!==e.rightmove_id&&"Saved"===e.action)),t=e.epc_favourites.filter((e=>null!==e.rightmove_id&&"Extracted"===e.action)),r=[...s,...t].map((e=>e.rightmove_id));we(r);const n=Ee(e.epc_favourites);Le(e,r,ke),z(s),Y(t),je(n),console.log("existing dtails ->",e.lead_gen_details[0])}else{Le(e,[],ke),console.log("date -> ",ke)}}catch(e){t(!0),console.log(e)}})()}else e("/access-denied"),console.log("no account")};(0,r.useEffect)((()=>{Pe()}),[]);const Oe=()=>{Ne(ne.map((()=>!1))),xe([])},Ee=e=>e.filter((e=>null!==e.rightmove_id&&"Saved"===e.action)).map(((e,s)=>({item:s+1,url:e.url,address:e.address,postcode:e.postcode,addedOn:e.added_revised,property_type:e.property_type,price:e.price,bedrooms:e.bedrooms,bathrooms:e.bathrooms,let_available_date:e.let_available_date,date_added:e.date_added_db,agent:e.agent,channel:e.channel}))),Le=async(e,s,t)=>{j(!0);const r=e.lead_gen_details[0].postcode,a=e.lead_gen_details[0].bedrooms_min,i=e.lead_gen_details[0].bedrooms_max,o=e.lead_gen_details[0].price_min,c=e.lead_gen_details[0].price_max,d=e.lead_gen_details[0].rental_additional;try{let e=`/api/epc_properties_rental/combined-epc-results/?postcode=${r}&min_bedrooms=${a}&max_bedrooms=${i}&min_price=${o}&max_price=${c}&rental_additional=${d}`;t&&(e+=`&date_filter=${t}`),s&&s.length>0&&(e+=`&exclude_ids=${s.join(",")}`);const{data:u}=await n.Z.get(e,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}});console.log("combined data ->",u);const h=u.filter((e=>0===e.epc_data_list.length)),p=u.filter((e=>1===e.epc_data_list.length)),m=u.filter((e=>e.epc_data_list.length>1));console.log("sngle matches ->",p),re(h),ae(p),ie(m),j(!1)}catch(u){console.error("can't access combined data ->",u)}},De=e=>{window.open(e,"_blank","width=1200,height=800,resizable=yes,scrollbars=yes,status=yes")},Be=["200000","300000","400000","500000","600000","700000","800000","900000","1000000","1250000","1500000","1750000","2000000","2250000","2500000","2750000","3000000","3500000","4000000","5000000","7500000","10000000","12500000","15000000","20000000","30000000","40000000","50000000"],Ue=["500","600","700","800","900","1000","1100","1200","1300","1400","1500","1600","1700","1800","1900","2000","2250","2500","2750","3000","3250","3500","4000","4500","5000","5500","6000","7000","8000","9000","10000","12500","15000","20000","25000","30000","40000","50000","60000"];(0,r.useEffect)((()=>{const e=((e,s)=>{if(!s||"all"===s)return e;const t="2days"===s?2:"7days"===s?7:"1month"===s?30:"1to3months"===s?90:"3to6months"===s?180:0;return e.filter((e=>{const s=We(e.property_data.added_revised),r=We(e.property_data.reduced_revised);let n;return n=s&&r?s>r?s:r:s||r,!!n&&Re(n,t)}))})(ne,ke);Ae(e)}),[ne,ke]);const We=e=>{if(!e)return null;const[s,t,r]=e.split("/");return new Date(r,t-1,s)},Re=(e,s)=>{const t=new Date,r=new Date;return r.setDate(t.getDate()-s),e>=r};return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("section",{className:"agent-profile-page",children:[(0,p.jsx)("div",{className:"desktop-nav",children:(0,p.jsx)(o.Z,{navbarColour:"#FDF7F0"})}),(0,p.jsx)("div",{className:"mobile-nav",children:(0,p.jsx)(d.Z,{setProfileContent:_,profileContent:g,profileDetail:b,setProfileDetail:N})}),(0,p.jsx)(c.Z,{setProfileDetail:N,variableSide:k,setProfileContent:_,setVariableSide:C,userData:m}),(0,p.jsx)("section",{className:"main-body",children:(0,p.jsx)("section",{className:"main-body-details",children:(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("section",{className:"property-finder",children:[(0,p.jsxs)("div",{className:"listing-options",children:[(0,p.jsxs)("div",{className:"listing-buttons",children:[(0,p.jsx)("h5",{className:"no-print",onClick:()=>se("Home"),style:{borderBottom:"Home"===ee?"3px solid #ED6B86":"none",textUnderlineOffset:"Home"===ee?"0.5em":"initial",fontWeight:"Home"===ee?"700":"400"},children:"Home"}),(0,p.jsx)("h5",{className:"no-print",onClick:()=>se("Explore properties"),style:{borderBottom:"Explore properties"===ee?"3px solid #ED6B86":"none",textUnderlineOffset:"Explore properties"===ee?"0.5em":"initial",fontWeight:"Explore properties"===ee?"700":"400"},children:"Explore properties"}),(0,p.jsx)("h5",{className:"no-print",onClick:()=>se("Saved properties"),style:{borderBottom:"Saved properties"===ee?"3px solid #ED6B86":"none",textUnderlineOffset:"Saved properties"===ee?"0.5em":"initial",fontWeight:"Saved properties"===ee?"700":"400"},children:"Saved properties"}),(0,p.jsx)("h5",{className:"no-print",onClick:()=>se("Archived properties"),style:{borderBottom:"Archived properties"===ee?"3px solid #ED6B86":"none",textUnderlineOffset:"Archived properties"===ee?"0.5em":"initial",fontWeight:"Archived properties"===ee?"700":"400"},children:"Archived properties"})]}),(0,p.jsx)("div",{className:"logout-button",onClick:s=>{localStorage.removeItem("wittle-user-token"),localStorage.removeItem("wittle-username"),e("/login")},children:(0,p.jsx)("div",{className:"logout-icon"})})]}),(0,p.jsx)("hr",{className:"title-line"}),(0,p.jsx)("div",{className:"lead-generator",children:(0,p.jsx)("div",{className:"property-results",children:"Home"===ee?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"lead-gen-inputs",children:[(0,p.jsx)("h3",{className:"sub-title",children:"Set your search criteria"}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Postcode(s)"}),(0,p.jsx)("p",{children:"Add multiple postcodes by separating with a comma, and include any part of the postcode, e.g. \u201cSW4,SW5\u201d"}),(0,p.jsx)("input",{type:"text",value:he.postcode,onChange:e=>{w(e.target.value.toUpperCase().replace(/\s+/g,"")),pe((s=>({...s,postcode:e.target.value.toUpperCase().replace(/\s+/g,"")})))},placeholder:"Enter postcode..."})]})}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Channel"}),(0,p.jsx)("select",{className:"dropdown",value:he.channel||"Lettings",onChange:e=>pe((s=>({...s,channel:e.target.value}))),children:(0,p.jsx)("option",{children:"Lettings"})})]})}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"see-more-section",onClick:()=>ue(!de),children:[(0,p.jsx)("h3",{className:"sub-title",children:"Add some more detail"}),de?(0,p.jsx)("h3",{className:"sub-title",children:"^"}):(0,p.jsx)("h3",{className:"sub-title",children:"v"})]}),de?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Bedrooms"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:he.bedrooms_min||"",onChange:e=>pe((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,p.jsx)("option",{value:"",children:"No min"}),(0,p.jsx)("option",{value:"1",children:"1"}),(0,p.jsx)("option",{value:"2",children:"2"}),(0,p.jsx)("option",{value:"3",children:"3"}),(0,p.jsx)("option",{value:"4",children:"4"}),(0,p.jsx)("option",{value:"5",children:"5"}),(0,p.jsx)("option",{value:"6",children:"6"})]}),(0,p.jsxs)("select",{className:"dropdown",value:he.bedrooms_max||"",onChange:e=>pe((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,p.jsx)("option",{value:"",children:"No max"}),(0,p.jsx)("option",{value:"1",children:"1"}),(0,p.jsx)("option",{value:"2",children:"2"}),(0,p.jsx)("option",{value:"3",children:"3"}),(0,p.jsx)("option",{value:"4",children:"4"}),(0,p.jsx)("option",{value:"5",children:"5"}),(0,p.jsx)("option",{value:"6",children:"6"}),(0,p.jsx)("option",{value:"7",children:"7"})]})]})]}),"Sales"===he.channel?(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Price"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:he.price_min||null,onChange:e=>pe((s=>({...s,price_min:e.target.value}))),children:[(0,p.jsx)("option",{value:null,children:"No min"}),Be.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(i.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,p.jsxs)("select",{className:"dropdown",value:he.price_max||null,onChange:e=>pe((s=>({...s,price_max:e.target.value}))),children:[(0,p.jsx)("option",{value:null,children:"No max"}),Be.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(i.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]}):"Lettings"===he.channel?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Price"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:he.price_min||"",onChange:e=>pe((s=>({...s,price_min:e.target.value}))),children:[(0,p.jsx)("option",{value:0,children:"No min"}),Ue.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(i.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,p.jsxs)("select",{className:"dropdown",value:he.price_max||"",onChange:e=>pe((s=>({...s,price_max:e.target.value}))),children:[(0,p.jsx)("option",{value:1e7,children:"No max"}),Ue.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(i.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Furnishing status"}),(0,p.jsxs)("select",{className:"dropdown",value:he.rental_additional||"Either furnished or unfurnished",onChange:e=>pe((s=>({...s,rental_additional:e.target.value}))),children:[(0,p.jsx)("option",{children:"Either furnished or unfurnished"}),(0,p.jsx)("option",{children:"Furnished"}),(0,p.jsx)("option",{children:"Unfurnished"})]})]})})]}):""]}):""]}),(0,p.jsx)("div",{className:"lead-gen-save",children:(0,p.jsx)("button",{className:"save-details",onClick:async()=>{let e;m&&m.lead_gen_details&&m.lead_gen_details.length>0?(e=await n.Z.put(`/api/lead_gen_details/${m.id}/`,he,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}}),se("Explore properties")):(e=await n.Z.post("/api/lead_gen_details/",he,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}}),se("Explore properties")),j(!0),Pe()},children:"Save details"})})]})}):"Explore properties"!==ee||v?"Explore properties"===ee&&v?(0,p.jsx)("div",{className:"property-table-loading",children:(0,p.jsx)(u.Z,{})}):"Saved properties"===ee?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"results-block",children:M&&M.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"title-section",children:[(0,p.jsxs)("h3",{className:"sub-title",children:["You have ",M.length," properties ready to be extracted"]}),m&&m.epc_favourites&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(h.CSVLink,{data:ve,className:"export",filename:`Wittle Lead Generator Extract - ${(()=>{const e=new Date,s=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}-${t}-${s}`})()}.csv`,style:{textDecoration:"none"},children:(0,p.jsx)("div",{className:"header-cta",onClick:()=>(async s=>{if((0,l.Hb)())try{const e=await n.Z.put("/api/epc_favourite/update_favourites/",{favourite_ids:s},{headers:{Authorization:`Bearer ${(0,l.hP)()}`}});console.log("Response:",e.data),Pe()}catch(t){console.error("Error updating favorite:",t)}else e("/access-denied"),console.log("logged out")})(m.epc_favourites.map((e=>e.rightmove_id))),children:(0,p.jsxs)("div",{className:"copy-button",children:[(0,p.jsx)("div",{className:"export-icon"}),(0,p.jsx)("h3",{style:{textDecoration:"none"},children:"Export"})]})})})})]}),(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Address"})}),(0,p.jsx)("div",{id:"column3",className:"column",children:(0,p.jsx)("h5",{children:"Postcode"})}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Price"})}),(0,p.jsx)("div",{id:"column7",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Channel"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details",children:M?M.map(((e,s)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:s+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.address})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.market_status})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_type})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.price})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.agent})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.channel})})]}),(0,p.jsx)("hr",{className:"property-divider"})]}))):" "})]}):(0,p.jsx)("h3",{className:"sub-title",children:"You haven't saved any properties yet! Once you've saved some properties, you'll be able to extract them."})})}):"Archived properties"===ee?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"results-block",children:V&&V.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"title-section",children:(0,p.jsxs)("h3",{className:"sub-title",children:["You have archived ",V.length," properties"]})}),(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Address"})}),(0,p.jsx)("div",{id:"column3",className:"column",children:(0,p.jsx)("h5",{children:"Postcode"})}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Price"})}),(0,p.jsx)("div",{id:"column7",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Channel"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details",children:V?V.map(((e,s)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:s+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.address})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.market_status})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_type})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.price})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.agent})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.channel})})]}),(0,p.jsx)("hr",{className:"property-divider"})]}))):" "})]}):(0,p.jsx)("h3",{className:"sub-title",children:"You haven't archived any properties yet! Once you've extracted properties to your files, you&apo;ll see them here."})})}):"":(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"results-block",children:[(0,p.jsxs)("div",{className:"property-insight-nav",children:[(0,p.jsxs)("div",{className:"property-insight-buttons",children:[(0,p.jsx)("h3",{className:"insight-button "+("Lettings"===oe?"active":"inactive"),id:"left",onClick:()=>ce("Lettings"),children:"Lettings"}),(0,p.jsx)("h3",{className:"insight-button "+("Sales"===oe?"active":"inactive"),id:"right",onClick:()=>ce("Sales"),children:"Sales"})]}),(0,p.jsxs)("div",{className:"save-section",children:[(0,p.jsx)("div",{className:"print-icon"}),(0,p.jsx)("h3",{onClick:async()=>{if((0,l.Hb)()){const e=new Set(m.epc_favourites.map((e=>e.rightmove_id))),t=me.filter((s=>!e.has(s.rightmove_id)));if(console.log(t),0===t.length)return void console.log("No new favourites to add");try{const e=await n.Z.post("/api/epc_favourite/",t,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}});console.log("Response:",e.data),Pe(),se("Saved properties")}catch(s){console.error("Error saving favourite:",s)}}else e("/access-denied"),console.log("logged out")},children:"Save selection"})]})]}),"Lettings"===oe?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"filter-section",children:[(0,p.jsx)("h3",{children:"Filter properties"}),(0,p.jsxs)("select",{className:"dropdown",onChange:e=>Ce(e.target.value),children:[(0,p.jsx)("option",{value:"2days",children:"Updated in the last 2 days"}),(0,p.jsx)("option",{value:"7days",children:"Updated in the last 7 days"}),(0,p.jsx)("option",{value:"1month",children:"Updated in the last month"}),(0,p.jsx)("option",{value:"1to3months",children:"On the market for 3 months"}),(0,p.jsx)("option",{value:"3to6months",children:"On the market for 6 months"}),(0,p.jsx)("option",{value:"all",children:"All matching properties"})]})]}),v?(0,p.jsx)("div",{className:"property-table-loading",children:(0,p.jsx)(u.Z,{})}):v?"":(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"title-section",children:[(0,p.jsxs)("h3",{className:"sub-title",children:["There are ",Fe.length," rental properties that match your criteria"]}),(0,p.jsxs)("div",{className:"select-all-box",children:[(0,p.jsx)("h5",{children:"Select all"}),(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:be.length>0&&be.every(Boolean),onChange:e=>{e.target.checked?(()=>{const e=new Set(m.epc_favourites.map((e=>e.rightmove_id))),s=ne.map((e=>({...e.property_data,address:e.epc_data_list[0].address}))).filter((s=>!e.has(s.rightmove_id)));Ne(ne.map((()=>!0))),xe(s)})():Oe()}}),(0,p.jsx)("label",{className:"label"})]})]})]}),(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Address"})}),(0,p.jsx)("div",{id:"column3",className:"column",children:(0,p.jsx)("h5",{children:"Postcode"})}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Reduced"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsx)("div",{id:"column7",className:"column",children:(0,p.jsx)("h5",{children:"Price"})}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column10",className:"column",children:(0,p.jsx)("h5",{children:"Select"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details",children:Fe?Fe.map(((e,s)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:s+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.epc_data_list[0].address})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.propertyType})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.agent})}),(0,p.jsx)("div",{className:"column",id:"column10",children:(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:be[s],onChange:e=>((e,s)=>{const t=[...be];t[s]=e.target.checked,Ne(t);const r={...ne[s].property_data,address:ne[s].epc_data_list[0].address};console.log(r),e.target.checked?xe((e=>[...e,r])):xe((e=>e.filter((e=>e.rightmove_id!==r.rightmove_id))))})(e,s)}),(0,p.jsx)("label",{className:"label"})]})})]}),(0,p.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):""]})})})})]})})})})]})})}},98472:function(e,s,t){e.exports=t(23561)},98015:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r,n=function(){function e(e,s){for(var t=0;t<s.length;t++){var r=s[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(s,t,r){return t&&e(s.prototype,t),r&&e(s,r),s}}(),a=t(72791),l=(r=a)&&r.__esModule?r:{default:r},i=t(51509),o=t(58333);var c=function(e){function s(e){!function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,s){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!==typeof s&&"function"!==typeof s?e:s}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.state={},t}return function(e,s){if("function"!==typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s)}(s,e),n(s,[{key:"buildURI",value:function(){return i.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var e=this.props,s=e.data,t=e.headers,r=e.separator,n=e.enclosingCharacter,a=e.uFEFF,l=e.target,i=e.specs,o=e.replace;this.state.page=window.open(this.buildURI(s,a,t,r,n),l,i,o)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),s}(l.default.Component);c.defaultProps=Object.assign(o.defaultProps,{target:"_blank"}),c.propTypes=o.propTypes,s.default=c},39088:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r,n=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},a=function(){function e(e,s){for(var t=0;t<s.length;t++){var r=s[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(s,t,r){return t&&e(s.prototype,t),r&&e(s,r),s}}(),l=t(72791),i=(r=l)&&r.__esModule?r:{default:r},o=t(51509),c=t(58333);var d=function(e){function s(e){!function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,s){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!==typeof s&&"function"!==typeof s?e:s}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.buildURI=t.buildURI.bind(t),t}return function(e,s){if("function"!==typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s)}(s,e),a(s,[{key:"buildURI",value:function(){return o.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.navigator.msSaveOrOpenBlob){e.preventDefault();var t=this.props,r=t.data,n=t.headers,a=t.separator,l=t.filename,i=t.enclosingCharacter,c=t.uFEFF,d=s&&"function"===typeof r?r():r,u=new Blob([c?"\ufeff":"",(0,o.toCSV)(d,n,a,i)]);return window.navigator.msSaveBlob(u,l),!1}}},{key:"handleAsyncClick",value:function(e){var s=this;this.props.onClick(e,(function(t){!1!==t?s.handleLegacy(e,!0):e.preventDefault()}))}},{key:"handleSyncClick",value:function(e){!1===this.props.onClick(e)?e.preventDefault():this.handleLegacy(e)}},{key:"handleClick",value:function(){var e=this;return function(s){if("function"===typeof e.props.onClick)return e.props.asyncOnClick?e.handleAsyncClick(s):e.handleSyncClick(s);e.handleLegacy(s)}}},{key:"render",value:function(){var e=this,s=this.props,t=s.data,r=s.headers,a=s.separator,l=s.filename,o=s.uFEFF,c=s.children,d=(s.onClick,s.asyncOnClick,s.enclosingCharacter),u=function(e,s){var t={};for(var r in e)s.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}(s,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]),h="undefined"===typeof window?"":this.buildURI(t,o,r,a,d);return i.default.createElement("a",n({download:l},u,{ref:function(s){return e.link=s},target:"_self",href:h,onClick:this.handleClick()}),c)}}]),s}(i.default.Component);d.defaultProps=c.defaultProps,d.propTypes=c.propTypes,s.default=d},51509:function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(Array.isArray(e)){for(var s=0,t=Array(e.length);s<e.length;s++)t[s]=e[s];return t}return Array.from(e)}var n=s.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},a=s.isJsons=function(e){return Array.isArray(e)&&e.every((function(e){return"object"===("undefined"===typeof e?"undefined":t(e))&&!(e instanceof Array)}))},l=s.isArrays=function(e){return Array.isArray(e)&&e.every((function(e){return Array.isArray(e)}))},i=s.jsonsHeaders=function(e){return Array.from(e.map((function(e){return Object.keys(e)})).reduce((function(e,s){return new Set([].concat(r(e),r(s)))}),[]))},o=s.jsons2arrays=function(e,s){var t=s=s||i(e),n=s;a(s)&&(t=s.map((function(e){return e.label})),n=s.map((function(e){return e.key})));var l=e.map((function(e){return n.map((function(s){return c(s,e)}))}));return[t].concat(r(l))},c=s.getHeaderValue=function(e,s){var t=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce((function(e,s,t,r){var n=e[s];if(void 0!==n&&null!==n)return n;r.splice(1)}),s);return void 0===t?e in s?s[e]:"":t},d=s.elementOrEmpty=function(e){return"undefined"===typeof e||null===e?"":e},u=s.joiner=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'"';return e.filter((function(e){return e})).map((function(e){return e.map((function(e){return d(e)})).map((function(e){return""+t+e+t})).join(s)})).join("\n")},h=s.arrays2csv=function(e,s,t,n){return u(s?[s].concat(r(e)):e,t,n)},p=s.jsons2csv=function(e,s,t,r){return u(o(e,s),t,r)},m=s.string2csv=function(e,s,t,r){return s?s.join(t)+"\n"+e:e.replace(/"/g,'""')},x=s.toCSV=function(e,s,t,r){if(a(e))return p(e,s,t,r);if(l(e))return h(e,s,t,r);if("string"===typeof e)return m(e,s,t);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};s.buildURI=function(e,s,t,r,a){var l=x(e,t,r,a),i=n()?"application/csv":"text/csv",o=new Blob([s?"\ufeff":"",l],{type:i}),c="data:"+i+";charset=utf-8,"+(s?"\ufeff":"")+l,d=window.URL||window.webkitURL;return"undefined"===typeof d.createObjectURL?c:d.createObjectURL(o)}},23561:function(e,s,t){"use strict";s.CSVLink=void 0;var r=a(t(98015)),n=a(t(39088));function a(e){return e&&e.__esModule?e:{default:e}}r.default,s.CSVLink=n.default},58333:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.PropsNotForwarded=s.defaultProps=s.propTypes=void 0;var r,n=t(72791),a=((r=n)&&r.__esModule,t(52007));s.propTypes={data:(0,a.oneOfType)([a.string,a.array,a.func]).isRequired,headers:a.array,target:a.string,separator:a.string,filename:a.string,uFEFF:a.bool,onClick:a.func,asyncOnClick:a.bool,enclosingCharacter:a.string},s.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},s.PropsNotForwarded=["data","headers"]},57837:function(e,s,t){"use strict";e.exports=t.p+"static/media/new-loading.a788dadda3b120785a81.gif"}}]);
//# sourceMappingURL=443.6bdb6ad2.chunk.js.map