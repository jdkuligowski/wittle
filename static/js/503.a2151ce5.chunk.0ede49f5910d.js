"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[503,968],{8503:function(e,s,a){a.r(s);var t=a(2791),l=a(5294),i=a(7689),c=(a(9696),a(7165)),r=(a(8465),a(948)),n=a(2094),o=a(764),d=(a(6968),a(3964),a(8084)),h=a(184);s.default=()=>{const e=(0,i.s0)(),[s,a]=((0,i.TH)(),(0,t.useState)([])),[u,p]=(0,t.useState)(),[m,x]=(0,t.useState)(),[j,v]=(0,t.useState)(),[g,y]=(0,t.useState)("My properties"),[f,N]=(0,t.useState)("My properties"),[b,S]=(0,t.useState)(!1),[k,C]=(0,t.useState)(""),[Z,P]=(0,t.useState)(""),[w,D]=(0,t.useState)(null),[E,F]=(0,t.useState)(),[T,_]=(0,t.useState)(0),[V,$]=(0,t.useState)();(0,t.useEffect)((()=>{(0,c.Hb)()?(async()=>{try{const{data:e}=await l.Z.get(`/api/auth/profile/${(0,c.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log("user data ->",e),p(e),x(e.company),console.log("company ->",e.company)}catch(e){v(!0),console.log(e)}})():(e("/access-denied"),console.log("no account"))}),[]);(0,t.useEffect)((()=>{u&&(async()=>{try{const{data:e}=await l.Z.get(`/api/white_properties/${m}`,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});if(console.log("agent property data ->",e),e&&Array.isArray(e)&&e.length>0){F(e);const s=e.reduce(((e,s)=>e+(s.price||0)),0);_(s.toFixed(1)),$("Let"===e[0].status?"Rent":"Sale")}else console.log("No property data available")}catch(e){v(!0),console.log(e)}})()}),[u]);const A=e=>{D(e)};return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("section",{className:"agent-profile-page",children:[(0,h.jsx)("div",{className:"desktop-nav",children:(0,h.jsx)(o.Z,{navbarColour:"#FDF7F0"})}),(0,h.jsx)("div",{className:"mobile-nav",children:(0,h.jsx)(d.Z,{setProfileContent:y,profileContent:g,profileDetail:f,setProfileDetail:N})}),(0,h.jsx)(n.Z,{setProfileDetail:N,variableSide:b,setProfileContent:y,setVariableSide:S,userData:u}),E?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("section",{className:"profile-summary",children:(0,h.jsx)("div",{className:"welcome",children:(0,h.jsxs)("h1",{children:["You have ",E?E.length:""," properties saved"]})})}),(0,h.jsxs)("section",{className:"profile-property-list",children:[(0,h.jsx)("div",{className:"search-section",children:(0,h.jsxs)("div",{className:"search-section-left",children:[(0,h.jsx)("h3",{children:"Search"}),(0,h.jsx)("input",{value:k,onChange:e=>C(e.target.value),placeholder:"Type property name"})]})}),(0,h.jsx)("div",{className:"agent-property-list",children:(0,h.jsxs)("div",{className:"property-block",children:[(0,h.jsxs)("div",{className:"property-table-headers",children:[(0,h.jsx)("h5",{id:"column1",children:"Property"}),(0,h.jsxs)("div",{id:"column2",className:"sort-section",children:[(0,h.jsx)("h5",{children:"Street name"}),(0,h.jsx)("h5",{className:"sort",onClick:()=>A("name"),children:"\u2195\ufe0f"})]}),(0,h.jsxs)("div",{id:"column3",className:"sort-section",children:[(0,h.jsx)("h5",{children:"Price"}),(0,h.jsx)("h5",{className:"sort",onClick:()=>A("price"),children:"\u2195\ufe0f"})]}),(0,h.jsx)("h5",{id:"column5",children:"Action"})]}),(0,h.jsx)("div",{className:"property-table-details",children:E?E.filter((e=>e.name.toLowerCase().includes(k.toLowerCase()))).sort(((e,s)=>"name"===w?e.name.localeCompare(s.name):"price"===w?e.price-s.price:"date"===w?new Date(e.date)-new Date(s.date):0)).map(((s,a)=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"property-content",children:[(0,h.jsx)("div",{className:"column",id:"column1",children:(0,h.jsx)("div",{className:"property-image",style:{backgroundImage:`url(${s.image})`}})}),(0,h.jsx)("div",{className:"column",id:"column2",children:(0,h.jsx)("h5",{children:s.name})}),(0,h.jsx)("div",{className:"column",id:"column3",children:(0,h.jsx)("h5",{children:(0,h.jsx)(r.h3,{value:s.price,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})})}),(0,h.jsx)("div",{className:"column",id:"column6",children:(0,h.jsx)("button",{onClick:()=>e(`/agents/property/${s.postcode}`),children:"View"})})]},a),(0,h.jsx)("hr",{className:"property-divider"})]}))):""})]})})]})]}):(0,h.jsx)("section",{className:"profile-summary",children:(0,h.jsx)("div",{className:"welcome",children:(0,h.jsx)("h1",{children:"You don't have any properties saved yet"})})})]})})}},6968:function(e,s,a){a.r(s);var t=a(2791),l=a(5294),i=a(7689),c=a(7165),r=a(1213),n=a(9577),o=a(264),d=a(2767),h=a(2514),u=a(764),p=a(2094),m=a(8084),x=a(9832),j=a(2213),v=a(184);s.default=()=>{const e=(0,i.s0)(),[s,a]=(0,t.useState)(),[g,y]=(0,t.useState)(),[f,N]=(0,t.useState)(),[b,S]=(0,t.useState)(),[k,C]=(0,t.useState)(),[Z,P]=(0,t.useState)(),[w,D]=(0,t.useState)(),[E,F]=(0,t.useState)(),[T,_]=(0,t.useState)(),[V,$]=(0,t.useState)(),[A,R]=(0,t.useState)(),[z,B]=(0,t.useState)(),[H,L]=(0,t.useState)(),[G,M]=(0,t.useState)(),[Y,I]=(0,t.useState)("Variables"),[q,J]=(0,t.useState)("Variables"),[K,O]=(0,t.useState)(!0);(0,t.useEffect)((()=>{(()=>{if((0,c.Hb)())try{(async()=>{const{data:e}=await l.Z.get(`/api/auth/profile/${(0,c.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log("user data ->",e),y(e),S(e.company)})()}catch(s){a(!0),console.log(s)}else e("/access-denied"),console.log("no account")})()}),[]);(0,t.useEffect)((()=>{(()=>{try{(async()=>{const{data:e}=await l.Z.get("/api/primaries/"),s=e.sort(((e,s)=>s.pupils_at_standard-e.pupils_at_standard));C(s),console.log("all primaries ->",s)})()}catch(e){a(!0),console.log(e)}})()}),[]);(0,t.useEffect)((()=>{(()=>{try{(async()=>{const{data:e}=await l.Z.get("/api/secondaries/"),s=e.sort(((e,s)=>s.total_pass_rate-e.total_pass_rate));D(s),console.log("all secondaries ->",s)})()}catch(e){a(!0),console.log(e)}})()}),[]);(0,t.useEffect)((()=>{(()=>{try{(async()=>{const{data:e}=await l.Z.get("/api/restaurants/"),s=e.sort(((e,s)=>s.rating-e.rating));_(s),console.log("all restaurants ->",s)})()}catch(e){a(!0),console.log(e)}})()}),[]);(0,t.useEffect)((()=>{(()=>{try{(async()=>{const{data:e}=await l.Z.get("/api/gyms/");$(e)})()}catch(e){a(!0),console.log(e)}})()}),[]);(0,t.useEffect)((()=>{(()=>{try{(async()=>{const{data:e}=await l.Z.get("/api/supermarkets/");console.log("supermarkets data ->",e),B(e)})()}catch(e){a(!0),console.log(e)}})()}),[]);(0,t.useEffect)((()=>{(()=>{try{(async()=>{const{data:e}=await l.Z.get("/api/evs/");console.log("ev data ->",e),M(e)})()}catch(e){a(!0),console.log(e)}})()}),[]);return(0,t.useEffect)((()=>{(()=>{try{(async()=>{const{data:e}=await l.Z.get("/api/pubs/");console.log("pubs data ->",e),R(e)})()}catch(e){a(!0),console.log(e)}})()}),[]),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("section",{className:"agent-profile-page",children:[(0,v.jsx)("div",{className:"desktop-nav",children:(0,v.jsx)(u.Z,{navbarColour:"#FDF7F0"})}),(0,v.jsx)("div",{className:"mobile-nav",children:(0,v.jsx)(m.Z,{setProfileContent:I,profileContent:Y,profileDetail:q,setProfileDetail:J})}),(0,v.jsx)(p.Z,{setProfileDetail:J,variableSide:K,setProfileContent:I,setVariableSide:O,userData:g}),"Variables"===q?(0,v.jsxs)("section",{className:"variables-section",children:[(0,v.jsx)("h1",{children:"Explore the different variables"}),(0,v.jsxs)("div",{className:"variables-list",children:[(0,v.jsxs)("div",{className:"variable",onClick:()=>J("Primary schools"),children:[(0,v.jsx)("h1",{children:"\ud83c\udfeb"}),(0,v.jsx)("h3",{children:"Primary schools"})]}),(0,v.jsxs)("div",{className:"variable",onClick:()=>J("Secondary schools"),children:[(0,v.jsx)("h1",{children:"\ud83d\udc68\u200d\ud83c\udfeb"}),(0,v.jsx)("h3",{children:"Secondary schools"})]}),(0,v.jsxs)("div",{className:"variable",children:[(0,v.jsx)("h1",{children:"\ud83c\udf93"}),(0,v.jsx)("h3",{children:"6th form colleges"})]}),(0,v.jsxs)("div",{className:"variable",children:[(0,v.jsx)("h1",{children:"\ud83c\udf33"}),(0,v.jsx)("h3",{children:"Green space"})]}),(0,v.jsxs)("div",{className:"variable",onClick:()=>J("Restaurants"),children:[(0,v.jsx)("h1",{children:"\ud83c\udf7d"}),(0,v.jsx)("h3",{children:"Restaurants"})]}),(0,v.jsxs)("div",{className:"variable",children:[(0,v.jsx)("h1",{children:"\ud83d\ude87"}),(0,v.jsx)("h3",{children:"Tube stations"})]}),(0,v.jsxs)("div",{className:"variable",onClick:()=>J("EVs"),children:[(0,v.jsx)("h1",{children:"\u26fd\ufe0f"}),(0,v.jsx)("h3",{children:"Electric vehicles"})]}),(0,v.jsxs)("div",{className:"variable",onClick:()=>J("Pubs"),children:[(0,v.jsx)("h1",{children:"\ud83c\udf7b"}),(0,v.jsx)("h3",{children:"Pubs"})]}),(0,v.jsxs)("div",{className:"variable",onClick:()=>J("Fitness"),children:[(0,v.jsx)("h1",{children:"\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f"}),(0,v.jsx)("h3",{children:"Fitness"})]}),(0,v.jsxs)("div",{className:"variable",onClick:()=>J("Supermarkets"),children:[(0,v.jsx)("h1",{children:"\ud83d\uded2"}),(0,v.jsx)("h3",{children:"Supermarkets"})]})]})]}):"Primary schools"===q?(0,v.jsx)("section",{className:"variables-single-section",children:(0,v.jsx)(r.Z,{primaryData1:k,setPrimaryData1:C,listType:"long list",setProfileDetail:J})}):"Secondary schools"===q?(0,v.jsx)("section",{className:"variables-single-section",children:(0,v.jsx)(n.Z,{secondaryData1:w,setSecondaryData1:D,listType:"long list"})}):"Restaurants"===q?(0,v.jsx)("section",{className:"variables-single-section",children:(0,v.jsx)(o.Z,{restaurants1:T,setRestaurants1:_,listType:"long list"})}):"Fitness"===q?(0,v.jsx)("section",{className:"variables-single-section",children:(0,v.jsx)(d.Z,{gyms1:V,setGyms1:$,listType:"long list"})}):"Supermarkets"===q?(0,v.jsx)("section",{className:"variables-single-section",children:(0,v.jsx)(h.Z,{supermarkets1:z,setSupermarkets1:B,listType:"long list"})}):"EVs"===q?(0,v.jsx)("section",{className:"variables-single-section",children:(0,v.jsx)(x.Z,{ev1:G,setEv1:M,listType:"long list"})}):"Pubs"===q?(0,v.jsx)("section",{className:"variables-single-section",children:(0,v.jsx)(j.Z,{pubs1:A,setPubs1:R,listType:"long list"})}):""]})})}}}]);
//# sourceMappingURL=503.a2151ce5.chunk.js.7d3614fe1762.map