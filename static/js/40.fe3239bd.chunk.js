(self.webpackChunkclient=self.webpackChunkclient||[]).push([[40,177],{4177:function(e,s,a){"use strict";a(2791);var l=a(184);s.Z=()=>(0,l.jsx)("div",{className:"loading-gif",children:(0,l.jsx)("img",{src:a(7837),alt:"loading gif"})})},4604:function(e,s,a){"use strict";a(2791),a(184)},1040:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return f}});var l=a(2791),r=a(5294),n=a(7689),i=a(7165),t=a(948),c=(a(9696),a(4604),a(764)),d=a(2094),o=a(8084),h=a(4177),u=a(8472),m=a(936),p=a(184);var x=e=>{let{savedActionShow:s,handleSavedActionClose:a,setLeadGenSection:l,latestFavourites:r}=e;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(m.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,p.jsx)(m.Z.Body,{children:(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"inner-wrapper",children:[(0,p.jsx)("div",{className:"header-section",children:(0,p.jsx)("h1",{onClick:a,children:"X"})}),(0,p.jsx)("div",{className:"core-body",children:(0,p.jsxs)("h3",{className:"message",children:["We've added ",1===r?`${r} property`:`${r} properties`," to your saved list!"]})}),(0,p.jsxs)("div",{className:"cta-section",children:[(0,p.jsx)("button",{className:"saved",onClick:()=>{l("Saved properties"),a()},children:"Go to saved"}),(0,p.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})};var j=e=>{let{increaseUsageCount:s,setErrors:a,userData:t,loadUserData:c,savedProperties:d,archivedProperties:o,handleVisitUrl:u,savedActionShow:m,handleSavedActionClose:j,setLeadGenSection:v,latestFavourites:g,handleSavedActionShow:_,setLatestFavourites:N,setSavedActionShow:y}=e;const[f,b]=(0,l.useState)(),k=(0,n.s0)(),[C,w]=(0,l.useState)(""),[S,A]=(0,l.useState)(""),[P,F]=(0,l.useState)(),[E,U]=(0,l.useState)(),[B,O]=(0,l.useState)([]),[D,R]=(0,l.useState)([]),[M,$]=(0,l.useState)(!1),[L,T]=(0,l.useState)("Lettings"),[Z,H]=(0,l.useState)("Efficiency"),[z,I]=(0,l.useState)(new Set),[V,W]=(0,l.useState)({}),Y=async e=>{try{console.log(e);const{data:s}=await r.Z.get(`/api/epc_properties_rental/${e}`);return s}catch(s){return console.log(s),[]}},G=async e=>{try{console.log(e);const{data:s}=await r.Z.get(`/api/epc_properties/${e}`);return s}catch(s){return console.log(s),[]}};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"epc-matcher",children:[(0,p.jsxs)("div",{className:"input-section",children:[(0,p.jsx)("h3",{className:"sub-title",children:"Input property details to find  details about live listings"}),f?(0,p.jsx)(h.Z,{}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"double-input-block",children:[(0,p.jsxs)("div",{className:"input-block half",children:[(0,p.jsx)("h3",{children:"Postcode"}),(0,p.jsx)("input",{type:"text",value:C,onChange:e=>w(e.target.value),placeholder:"Enter postcode..."})]}),(0,p.jsxs)("div",{className:"input-block half",children:[(0,p.jsx)("h3",{children:"Road name"}),(0,p.jsx)("input",{type:"text",value:S,onChange:e=>A(e.target.value)})]})]}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Efficiency (numbers) or Rating (letters)"}),(0,p.jsxs)("select",{onChange:e=>H(e.target.value),children:[(0,p.jsx)("option",{children:"Efficiency"}),(0,p.jsx)("option",{children:"Rating"})]})]})}),"Efficiency"===Z?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"double-input-block",children:[(0,p.jsxs)("div",{className:"input-block half",children:[(0,p.jsx)("h3",{children:"Current Energy Efficiency"}),(0,p.jsx)("input",{type:"number",value:P,onChange:e=>F(e.target.value)})]}),(0,p.jsxs)("div",{className:"input-block half",children:[(0,p.jsx)("h3",{children:"Potential Energy Efficiency"}),(0,p.jsx)("input",{type:"number",value:E,onChange:e=>U(e.target.value)})]})]})}):(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"double-input-block",children:[(0,p.jsxs)("div",{className:"input-block half",children:[(0,p.jsx)("h3",{children:"Current Energy Rating"}),(0,p.jsx)("input",{type:"text",value:P,onChange:e=>F(e.target.value)})]}),(0,p.jsxs)("div",{className:"input-block half",children:[(0,p.jsx)("h3",{children:"Potential Energy Rating"}),(0,p.jsx)("input",{type:"text",value:E,onChange:e=>U(e.target.value)})]})]})}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Property category"}),(0,p.jsxs)("select",{className:"dropdown",value:L||"Lettings",onChange:e=>T(e.target.value),children:[(0,p.jsx)("option",{children:"Lettings"}),(0,p.jsx)("option",{children:"Sales"})]})]})}),(0,p.jsx)("div",{className:"search-section",children:(0,p.jsx)("button",{className:"load-insights",onClick:async()=>{W({}),I(new Set),b(!0),$(!1);const e=C.replace(/\s+/g,"");try{const{data:a}=await r.Z.get(`/api/epc/${e}`);if(console.log("Postcode data ->",a),O(a),a&&Array.isArray(a)&&a.length>0){let e=a;"Efficiency"===Z?e=e.filter((e=>(!S||e.address.toLowerCase().includes(S.toLowerCase()))&&(!P||e.current_energy_efficiency===Number(P))&&(!E||e.potential_energy_efficiency===Number(E)))):"Rating"===Z&&(e=e.filter((e=>(!S||e.address.toLowerCase().includes(S.toLowerCase()))&&(!P||e.current_energy_rating===P.toUpperCase())&&(!E||e.potential_energy_rating===E.toUpperCase())))),e=e.sort(((e,s)=>new Date(s.inspection_date)-new Date(e.inspection_date))),e.length>0?(R(e),console.log("filtered data->",e),s()):0===e.length&&R(""),b(!1)}else console.log("No postcode data available"),b(!1)}catch(l){R(""),a(!0),console.log(l),b(!1)}$(!0)},children:"Load Properties"})})]})]}),(0,p.jsx)("div",{className:"manual-property-results",children:(0,p.jsx)("div",{className:"results-block",children:0!==B.length||M?M&&0===D.length?(0,p.jsx)("h3",{className:"sub-title",children:"We couldn't find anything that matched your search"}):M&&D.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("h3",{className:"sub-title",children:["You have ",D.length," matching results"]}),(0,p.jsx)("div",{className:"results-details",children:D?D.map(((e,s)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("h5",{className:"row-value",children:s+1}),(0,p.jsxs)("div",{className:"results-items",children:[(0,p.jsxs)("div",{className:"results-line",children:[(0,p.jsx)("div",{className:"result-icon",id:"catchment"}),(0,p.jsxs)("div",{className:"results-text",children:[(0,p.jsx)("h5",{className:"text-title",children:"Address: "}),(0,p.jsx)("h5",{className:"text-result",children:e.address})]})]}),(0,p.jsxs)("div",{className:"results-line",children:[(0,p.jsx)("div",{className:"result-icon",id:"house"}),(0,p.jsxs)("div",{className:"results-text",children:[(0,p.jsx)("h5",{className:"text-title",children:"Floor area: "}),(0,p.jsxs)("h5",{className:"text-result",children:[e.floor_area," sq.m"]})]})]}),(0,p.jsxs)("div",{className:"results-line",children:[(0,p.jsx)("div",{className:"result-icon",id:"location"}),(0,p.jsxs)("div",{className:"results-text",children:[(0,p.jsx)("h5",{className:"text-title",children:"Postcode: "}),(0,p.jsx)("h5",{className:"text-result",children:e.postcode})]})]}),(0,p.jsxs)("div",{className:"results-line",children:[(0,p.jsx)("div",{className:"result-icon",id:"building"}),(0,p.jsxs)("div",{className:"results-text",children:[(0,p.jsx)("h5",{className:"text-title",children:"Floor level: "}),(0,p.jsx)("h5",{className:"text-result",children:e.final_floor_level})]})]}),(0,p.jsxs)("div",{className:"results-line",children:[(0,p.jsx)("div",{className:"result-icon",id:"search"}),(0,p.jsxs)("div",{className:"results-text",children:[(0,p.jsx)("h5",{className:"text-title",children:"last inspection: "}),(0,p.jsx)("h5",{className:"text-result",children:e.inspection_date})]})]})]}),(0,p.jsx)("div",{className:"buttons",children:d.some((s=>s.address===e.address&&s.postcode===e.postcode))?(0,p.jsx)("div",{className:"saved-message",children:(0,p.jsx)("h3",{children:"Saved"})}):o.some((s=>s.address===e.address&&s.postcode===e.postcode))?(0,p.jsx)("div",{className:"saved-message",children:(0,p.jsx)("h3",{children:"Archived"})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"heart-icon",onClick:()=>(async e=>{if((0,i.Hb)()){const a=[{rightmove_id:Math.floor(1e12*Math.random()).toString(),postcode:e.postcode,address:e.address,agent:"",type:"",addedOn:"",propertyType:"",price:null,bathrooms:null,bedrooms:null,let_available_date:null,date_added_db:null,url:"",current_epc:e.current_energy_efficiency,potential_epc:e.potential_energy_efficiency,action:"Saved",added_revised:null,reduced_revised:null}];try{const e=await r.Z.post("/api/epc_favourite/",a,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});console.log("Response:",e.data),I(new Set),N(1),_(),c()}catch(s){console.error("Error saving favourite:",s)}}else k("/access-denied"),console.log("logged out")})(e)}),(0,p.jsx)("button",{className:"expansion",style:{backgroundColor:(z.has(s),"#1A276C")},onClick:()=>(async e=>{const s=new Set(z),a=D[e];if(s.has(e))s.delete(e);else if(s.add(e),V[e]||"Lettings"!==L){if(!V[e]&&"Sales"===L){const s=await G(a.postcode);console.log("matches ->",s),W({...V,[e]:s})}}else{const s=await Y(a.postcode);console.log("matches ->",s),W({...V,[e]:s})}I(s)})(s),children:z.has(s)?"-":"+"})]})})]},s),z.has(s)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("hr",{className:"property-divider"}),V[s]&&V[s].length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h3",{className:"matching-title",children:"Matching properties"}),(0,p.jsxs)("div",{className:"expanded-section-titles",children:[(0,p.jsx)("p",{className:"column",id:"column1",children:"#"}),(0,p.jsx)("p",{className:"column",id:"column2",children:"Address"}),(0,p.jsx)("p",{className:"column",id:"column3",children:"Postcode"}),(0,p.jsx)("p",{className:"column",id:"column4",children:"Price"}),(0,p.jsx)("p",{className:"column",id:"column5",children:"Bedrooms"}),(0,p.jsx)("p",{className:"column",id:"column6"})]})]}):"",(0,p.jsx)("div",{className:"expanded-section",children:V[s]&&V[s].length>0?V[s].map(((s,a)=>(0,p.jsxs)("div",{className:"expanded-content",children:[(0,p.jsxs)("p",{className:"column",id:"column1",onClick:()=>u(s.url),children:[a+1," "]}),(0,p.jsx)("p",{className:"column",id:"column2",onClick:()=>u(s.url),children:s.displayAddress}),(0,p.jsx)("p",{className:"column",id:"column3",onClick:()=>u(s.url),children:s.postcode}),(0,p.jsx)("p",{className:"column",id:"column4",onClick:()=>u(s.url),children:s.price}),(0,p.jsx)("p",{className:"column",id:"column5",onClick:()=>u(s.url),children:s.bedrooms}),(0,p.jsx)("div",{className:"column",id:"column6",children:d.some((e=>e.rightmove_id===s.rightmove_id))?(0,p.jsx)("div",{className:"saved-message",children:(0,p.jsx)("h3",{children:"Saved"})}):o.some((e=>e.rightmove_id===s.rightmove_id))?(0,p.jsx)("div",{className:"saved-message",children:(0,p.jsx)("h3",{children:"Archived"})}):(0,p.jsx)("div",{className:"heart-icon",onClick:()=>(async(e,s)=>{if((0,i.Hb)()){const l=[{rightmove_id:e.rightmove_id,postcode:e.postcode,address:s.address,agent:e.agent,type:e.type,addedOn:e.addedOn,propertyType:e.propertyType,price:e.price,bathrooms:e.bathrooms,bedrooms:e.bedrooms,let_available_date:e.let_available_date,date_added_db:e.date_added_db,url:e.url,current_epc:e.current_epc,potential_epc:e.potential_epc,action:"Saved",added_revised:e.added_revised,reduced_revised:e.reduced_revised}];try{const e=await r.Z.post("/api/epc_favourite/",l,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});console.log("Response:",e.data),N(1),_(),c()}catch(a){console.error("Error saving favourite:",a)}}else k("/access-denied"),console.log("logged out")})(s,e)})})]},a))):(0,p.jsxs)("p",{className:"denied",children:["No matching properties found for ",e.address,"."]})})]}),(0,p.jsx)("hr",{className:"property-divider"})]}))):""})]}):"":(0,p.jsx)("h3",{className:"sub-title",children:"Start new search to see results"})})})]}),(0,p.jsx)(x,{savedActionShow:m,handleSavedActionClose:j,setLeadGenSection:v,latestFavourites:g})]})};var v=e=>{let{propertyRemoveShow:s,handleRemovePropertyClose:a,removeProperty:l}=e;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(m.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,p.jsx)(m.Z.Body,{children:(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"inner-wrapper",children:[(0,p.jsx)("div",{className:"header-section",children:(0,p.jsx)("h1",{onClick:a,children:"X"})}),(0,p.jsxs)("div",{className:"core-body",children:[(0,p.jsx)("h3",{className:"message",children:"Are you sure you don't want to see these properties any more?"}),(0,p.jsx)("h3",{className:"sub-message",children:"Once you do this, they won't appear in your latest or saved properties."})]}),(0,p.jsxs)("div",{className:"cta-section",children:[(0,p.jsx)("button",{className:"saved",onClick:l,children:"Remove"}),(0,p.jsx)("button",{className:"stay",onClick:a,children:"Go back"})]})]})})})})})},g=a(1727);var _=e=>{let{savedProperties:s,userData:a,csvData:t,setCsvData:c,getCurrentDate:d,handleVisitUrl:o,loadUserData:h,setSavedProperties:m}=e;const x=(0,n.s0)(),[j,v]=(0,l.useState)("Grid"),[_,N]=(0,l.useState)({}),[y,f]=(0,l.useState)({}),[b,k]=(0,l.useState)({}),[C,w]=(0,l.useState)([]),[S,A]=(0,l.useState)(!1),P=e=>{f((s=>({...s,[e]:!s[e]})))};return(0,l.useEffect)((()=>{if(C){const e=(e=>e.map(((e,s)=>({item:s+1,url:e.url,address:e.address,postcode:e.postcode,addressPostcode:`${e.address}, ${e.postcode}`,addedOn:e.added_revised,property_type:e.property_type,price:e.price,bedrooms:e.bedrooms,bathrooms:e.bathrooms,let_available_date:e.let_available_date,date_added:e.date_added_db,agent:e.agent,channel:e.channel,owner_name:e.owner_name,owner_email:e.owner_email,owner_mobile:e.owner_mobile,emails_sent:e.emails_sent,letters_sent:e.letters_sent,valuation_booked:e.valuation_booked,notes:e.notes}))))(C);c(e)}}),[C]),(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"results-block",children:s&&s.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"title-section",children:[(0,p.jsxs)("h3",{className:"sub-title",children:["You have ",s.length," properties ready to be extracted"]}),a&&a.epc_favourites&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(g.ZP,{className:"select-dropdown",options:[{value:"export",label:"Extract"},{value:"archive",label:"Archive"}],onChange:e=>{"export"===e.value?(document.querySelector(".csv-link").click(),w([])):"archive"===e.value&&(async e=>{if((0,i.Hb)())try{const s=await r.Z.put("/api/epc_favourite/update_favourites/",{favourite_ids:e},{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});console.log("Response:",s.data),h(),w([])}catch(s){console.error("Error updating favorite:",s)}else x("/access-denied"),console.log("logged out")})(C.map((e=>e.rightmove_id)))},isSearchable:!1,placeholder:"Select an action"}),(0,p.jsx)(u.CSVLink,{data:t||[],className:"export csv-link",filename:`Wittle Lead Generator Extract - ${d()}.csv`,style:{display:"none"}})]})]}),(0,p.jsx)("div",{className:"saved-select-row",children:(0,p.jsx)("div",{className:"select-all-box saved",children:(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:C.length===s.length&&s.length>0,onChange:e=>{e.target.checked?(w(s),A(!0)):(w([]),A(!1))}}),(0,p.jsx)("label",{className:"label"})]})})}),(0,p.jsxs)("div",{className:"results-table",children:[(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Address"})}),(0,p.jsx)("div",{id:"column3",className:"column",children:(0,p.jsx)("h5",{children:"Postcode"})}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Reduced"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Channel"})}),(0,p.jsx)("div",{id:"column7",className:"column",children:(0,p.jsx)("h5",{children:"Price"})}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column10",className:"column",children:(0,p.jsx)("h5",{})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"saved-properties",children:(0,p.jsx)("div",{className:"results-details",children:s?s.map(((e,a)=>{const l=_[e.rightmove_id],n=y[e.rightmove_id],t=C.some((s=>s.rightmove_id===e.rightmove_id));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content "+(t?"highlighted-row":""),children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>o(e.url),children:(0,p.jsx)("h5",{children:a+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>o(e.url),children:(0,p.jsx)("h5",{children:e.address})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>o(e.url),children:(0,p.jsx)("h5",{children:e.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>o(e.url),children:(0,p.jsx)("h5",{children:null===e.added_revised?"N/a":e.added_revised})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>o(e.url),children:(0,p.jsx)("h5",{children:null===e.reduced_revised?"N/a":e.reduced_revised})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>o(e.url),children:(0,p.jsx)("h5",{children:e.channel})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>o(e.url),children:(0,p.jsx)("h5",{children:e.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>o(e.url),children:(0,p.jsx)("h5",{children:e.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>o(e.url),children:(0,p.jsx)("h5",{children:e.agent})}),"Grid"===j?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"column",id:"column10",onClick:()=>(e=>{const a=s.find((s=>s.rightmove_id===e));_[e]||k({owner_name:a.owner_name,owner_email:a.owner_email,owner_mobile:a.owner_mobile,emails_sent:a.emails_sent,letters_sent:a.letters_sent,valuation_booked:a.valuation_booked,notes:a.notes||""}),N((s=>({...s,[e]:!s[e]})))})(e.rightmove_id),children:(0,p.jsx)("h5",{className:"expander",children:l?"v":"^"})}),(0,p.jsx)("div",{className:"column",id:"column11",children:(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:C.some((s=>s.rightmove_id===e.rightmove_id)),onChange:a=>((e,a)=>{const l={...a};e.target.checked?w((e=>[...e,l])):w((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id)))),A(s.length===C.length)})(a,e)}),(0,p.jsx)("label",{className:"label"})]})})]}):"Table"===j?(0,p.jsx)(p.Fragment,{}):""]}),l&&(0,p.jsxs)("div",{className:"expanded-tracking-details",children:[(0,p.jsxs)("div",{className:"expanded-tracking-content",children:[(0,p.jsxs)("div",{className:"tracking-left",children:[(0,p.jsxs)("div",{className:"tracking-row",children:[(0,p.jsx)("h3",{className:"row-title",children:"Owner name: "}),n?(0,p.jsx)("input",{type:"text",value:b.owner_name,onChange:e=>k({...b,owner_name:e.target.value}),className:"row-input wide"}):(0,p.jsx)("h3",{className:"row-result",children:e.owner_name})]}),(0,p.jsxs)("div",{className:"tracking-row",children:[(0,p.jsx)("h3",{className:"row-title",children:"Owner email: "}),n?(0,p.jsx)("input",{type:"text",value:b.owner_email,onChange:e=>k({...b,owner_email:e.target.value}),className:"row-input wide"}):(0,p.jsx)("h3",{className:"row-result",children:e.owner_email})]}),(0,p.jsxs)("div",{className:"tracking-row",children:[(0,p.jsx)("h3",{className:"row-title",children:"Owner phone: "}),n?(0,p.jsx)("input",{type:"text",value:b.owner_mobile,onChange:e=>k({...b,owner_mobile:e.target.value}),className:"row-input wide"}):(0,p.jsx)("h3",{className:"row-result",children:e.owner_mobile})]})]}),(0,p.jsxs)("div",{className:"tracking-middle",children:[(0,p.jsxs)("div",{className:"tracking-row",children:[(0,p.jsx)("h3",{className:"row-title",children:"Emails sent: "}),n?(0,p.jsx)("input",{type:"text",value:b.emails_sent,onChange:e=>k({...b,emails_sent:e.target.value}),className:"row-input narrow"}):(0,p.jsx)("h3",{className:"row-result",children:e.emails_sent})]}),(0,p.jsxs)("div",{className:"tracking-row",children:[(0,p.jsx)("h3",{className:"row-title",children:"Letters sent: "}),n?(0,p.jsx)("input",{type:"text",value:b.letters_sent,onChange:e=>k({...b,letters_sent:e.target.value}),className:"row-input narrow"}):(0,p.jsx)("h3",{className:"row-result",children:e.letters_sent})]}),(0,p.jsxs)("div",{className:"tracking-row",children:[(0,p.jsx)("h3",{className:"row-title",children:"Valuation booked: "}),n?(0,p.jsx)("input",{type:"text",value:b.valuation_booked,onChange:e=>k({...b,valuation_booked:e.target.value}),className:"row-input narrow"}):(0,p.jsx)("h3",{className:"row-result",children:e.valuation_booked})]})]}),(0,p.jsx)("div",{className:"tracking-right",children:(0,p.jsx)("div",{className:"tracking-row",children:n?(0,p.jsx)("textarea",{placeholder:"Notes",value:b.notes,onChange:e=>k({...b,notes:e.target.value})}):(0,p.jsx)("h3",{className:"row-result",children:e.notes})})})]}),(0,p.jsxs)("div",{className:"expanded-tracking-actions",children:[(0,p.jsx)("button",{className:"save",onClick:()=>{n?(async e=>{if((0,i.Hb)())try{await r.Z.patch(`/api/epc_favourite/update_favourites/${e}/`,b,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}}),h(),P(e)}catch(s){console.error("Error updating favourite:",s)}else x("/access-denied"),console.log("logged out")})(e.rightmove_id):P(e.rightmove_id)},children:n?"Save":"Edit"}),(0,p.jsx)("button",{className:"delete",onClick:()=>(async e=>{if((0,i.Hb)())try{await r.Z.delete("/api/epc_favourite/delete_favourite/",{headers:{Authorization:`Bearer ${(0,i.hP)()}`},data:{rightmove_id:e}}),h()}catch(s){console.error("Error updating favourite:",s)}else x("/access-denied"),console.log("logged out")})(e.rightmove_id),children:"Delete"})]})]}),(0,p.jsx)("hr",{className:"property-divider"})]})})):" "})})]})]}):(0,p.jsx)("h3",{className:"sub-title",children:"You haven't saved any properties yet! Once you've saved some properties, you'll be able to extract them."})})})};var N=e=>{let{hiddenProperties:s,handleVisitUrl:a,loadUserData:t}=e;const c=(0,n.s0)(),[d,o]=(0,l.useState)([]),[h,u]=(0,l.useState)(!1);return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"results-block",children:s&&s.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"title-section",children:[(0,p.jsxs)("h3",{className:"sub-title",children:["You have hidden ",s.length," properties"]}),(0,p.jsx)("div",{className:"action-section hidden",children:(0,p.jsx)("div",{className:"save-section",children:(0,p.jsx)("h3",{onClick:()=>(async e=>{if((0,i.Hb)()){console.log(e);const a=e.map((e=>e.rightmove_id));try{const e=await r.Z.delete("/api/epc_favourite/delete_favourite/multiple/",{headers:{Authorization:`Bearer ${(0,i.hP)()}`},data:{rightmove_ids:a}});t(),o([]),console.log("Response:",e.data)}catch(s){console.error("Error deleting favourites:",s)}}else c("/access-denied"),console.log("logged out")})(d),children:"Move properties"})})})]}),(0,p.jsx)("div",{className:"saved-select-row hidden",children:(0,p.jsx)("div",{className:"select-all-box hidden",children:(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:d.length===s.length&&s.length>0,onChange:e=>{e.target.checked?(o(s),u(!0)):(o([]),u(!1))}}),(0,p.jsx)("label",{className:"label"})]})})}),(0,p.jsxs)("div",{className:"results-table",children:[(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Address"})}),(0,p.jsx)("div",{id:"column3",className:"column",children:(0,p.jsx)("h5",{children:"Postcode"})}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Reduced"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsx)("div",{id:"column7",className:"column",children:(0,p.jsx)("h5",{children:"Price"})}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column10",className:"column",children:(0,p.jsx)("h5",{children:"Channel"})}),(0,p.jsx)("div",{id:"column11",className:"column",children:(0,p.jsx)("h5",{})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details archive",children:s?s.map(((e,l)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:l+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.address})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.added_revised})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.reduced_revised})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.property_type})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.agent})}),(0,p.jsx)("div",{className:"column",id:"column10",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.channel})}),(0,p.jsx)("div",{className:"column",id:"column11",children:(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:d.some((s=>s.rightmove_id===e.rightmove_id)),onChange:a=>((e,a)=>{const l={...a};e.target.checked?o((e=>[...e,l])):o((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id)))),u(s.length===d.length)})(a,e)}),(0,p.jsx)("label",{className:"label"})]})})]}),(0,p.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):(0,p.jsx)("h3",{className:"sub-title",children:"You don't have any hidden properties. If you're not interested in a property, hide it to remove it from the main results page."})})})};var y=e=>{let{archivedProperties:s,handleVisitUrl:a,loadUserData:t}=e;const c=(0,n.s0)(),[d,o]=(0,l.useState)([]),[h,u]=(0,l.useState)(!1);return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"results-block",children:s&&s.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"title-section",children:[(0,p.jsxs)("h3",{className:"sub-title",children:["You have archived ",s.length," properties"]}),(0,p.jsx)("div",{className:"action-section hidden",children:(0,p.jsx)("div",{className:"save-section",children:(0,p.jsx)("h3",{onClick:()=>(async e=>{if((0,i.Hb)())try{const s=e.map((e=>e.rightmove_id)),a=await r.Z.put("/api/epc_favourite/update_favourites/archive-to-saved/",{favourite_ids:s},{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});console.log("Response:",a.data),t(),o([])}catch(s){console.error("Error saving favourite:",s)}else c("/access-denied"),console.log("logged out")})(d),children:"Move properties"})})})]}),(0,p.jsx)("div",{className:"saved-select-row hidden",children:(0,p.jsx)("div",{className:"select-all-box hidden",children:(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:d.length===s.length&&s.length>0,onChange:e=>{e.target.checked?(o(s),u(!0)):(o([]),u(!1))}}),(0,p.jsx)("label",{className:"label"})]})})}),(0,p.jsxs)("div",{className:"results-table",children:[(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Address"})}),(0,p.jsx)("div",{id:"column3",className:"column",children:(0,p.jsx)("h5",{children:"Postcode"})}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Reduced"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsx)("div",{id:"column7",className:"column",children:(0,p.jsx)("h5",{children:"Price"})}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column10",className:"column",children:(0,p.jsx)("h5",{children:"Channel"})}),(0,p.jsx)("div",{id:"column11",className:"column",children:(0,p.jsx)("h5",{})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details archive",children:s?s.map(((e,l)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:l+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.address})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.added_revised})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.reduced_revised})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.property_type})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.agent})}),(0,p.jsx)("div",{className:"column",id:"column10",onClick:()=>a(e.url),children:(0,p.jsx)("h5",{children:e.channel})}),(0,p.jsx)("div",{className:"column",id:"column11",children:(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:d.some((s=>s.rightmove_id===e.rightmove_id)),onChange:a=>((e,a)=>{const l={...a};e.target.checked?o((e=>[...e,l])):o((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id)))),u(s.length===d.length)})(a,e)}),(0,p.jsx)("label",{className:"label"})]})})]}),(0,p.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):(0,p.jsx)("h3",{className:"sub-title",children:"You haven't archived any properties yet! Once you've extracted properties to your files, you&apo;ll see them here."})})})};r.Z.defaults.xsrfCookieName="csrftoken",r.Z.defaults.xsrfHeaderName="X-CSRFToken";var f=()=>{const e=(0,n.s0)(),[s,a]=(0,l.useState)(),[u,m]=(0,l.useState)(),[g,f]=(0,l.useState)(),[b,k]=(0,l.useState)(),[C,w]=(0,l.useState)(!1),[S,A]=(0,l.useState)("Comparison"),[P,F]=(0,l.useState)("Comparison"),[E,U]=(0,l.useState)(!1),[B,O]=(0,l.useState)(""),[D,R]=(0,l.useState)(""),[M,$]=(0,l.useState)(""),[L,T]=(0,l.useState)(),[Z,H]=(0,l.useState)(),[z,I]=(0,l.useState)([]),[V,W]=(0,l.useState)([]),[Y,G]=(0,l.useState)(""),[q,X]=(0,l.useState)("Efficiency"),[J,K]=(0,l.useState)([]),[Q,ee]=(0,l.useState)(),[se,ae]=(0,l.useState)(),[le,re]=(0,l.useState)(),[ne,ie]=(0,l.useState)(sessionStorage.getItem("sessionName")||""),[te,ce]=(0,l.useState)(["SW8"]),[de,oe]=(0,l.useState)(),[he,ue]=(0,l.useState)("Home"),[me,pe]=(0,l.useState)([]),[xe,je]=(0,l.useState)([]),[ve,ge]=(0,l.useState)([]),[_e,Ne]=(0,l.useState)([]),[ye,fe]=(0,l.useState)([]),[be,ke]=(0,l.useState)([]),[Ce,we]=(0,l.useState)("Lettings"),[Se,Ae]=(0,l.useState)(!1),[Pe,Fe]=(0,l.useState)({postcode:"",subcode:"",bathrooms_min:null,bathrooms_max:null,bedrooms_min:null,bedrooms_max:null,rental_price_min:null,rental_price_max:null,sales_price_min:null,sales_price_max:null,channel:"",rental_additional:""}),[Ee,Ue]=(0,l.useState)([]),[Be,Oe]=(0,l.useState)([]),[De,Re]=(0,l.useState)(),[Me,$e]=(0,l.useState)({latitude:51.515419,longitude:-.141099,zoom:11.5}),[Le,Te]=(0,l.useState)([]),[Ze,He]=(0,l.useState)(xe.map((()=>!1))),[ze,Ie]=(0,l.useState)(ye.map((()=>!1))),[Ve,We]=(0,l.useState)("2days"),[Ye,Ge]=(0,l.useState)([]),[qe,Xe]=(0,l.useState)([]),[Je,Ke]=(0,l.useState)([]),[Qe,es]=(0,l.useState)([]),[ss,as]=(0,l.useState)([]),[ls,rs]=(0,l.useState)([]),[ns,is]=(0,l.useState)([]),[ts,cs]=(0,l.useState)([]),[ds,os]=(0,l.useState)("asc"),[hs,us]=(0,l.useState)("asc"),[ms,ps]=(0,l.useState)(),[xs,js]=(0,l.useState)("Matching"),[vs,gs]=(0,l.useState)("Matching"),[_s,Ns]=(0,l.useState)(new Set),[ys,fs]=(0,l.useState)(new Set),bs=()=>{if((0,i.Hb)()){(async()=>{try{const{data:e}=await r.Z.get(`/api/auth/profile/${(0,i.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});if(console.log("user data ->",e),m(e),e.lead_gen_details.length>0){Fe(e.lead_gen_details[0]);const s=e.epc_favourites.filter((e=>null!==e.rightmove_id&&"Saved"===e.action)),a=e.epc_favourites.filter((e=>null!==e.rightmove_id&&"Extracted"===e.action)),l=e.epc_favourites.filter((e=>null!==e.rightmove_id&&"Removed"===e.action)),r=[...s,...a,...l].map((e=>e.rightmove_id));Ge(r),Xe(l),console.log("removed properties ->",l);ws(e.epc_favourites);"Lettings"===e.lead_gen_details[0].channel?Ss(e,l,Ve):"Sales"===e.lead_gen_details[0].channel?As(e,l,Ve):"Both"===e.lead_gen_details[0].channel&&(As(e,l,Ve),Ss(e,l,Ve)),ee(s),console.log("saved properties ->",Q),ae(a),re(l),console.log("existing dtails ->",e.lead_gen_details[0]),Ws()}else{console.log("date -> ",Ve)}}catch(e){a(!0),console.log(e)}})()}else e("/access-denied"),console.log("no account")};(0,l.useEffect)((()=>{bs()}),[]);const ks=()=>{He(Je.map((()=>!1))),Ue([])},Cs=()=>{Ie(Qe.map((()=>!1))),Oe([])},ws=e=>e.filter((e=>null!==e.rightmove_id&&"Saved"===e.action)).map(((e,s)=>({item:s+1,url:e.url,address:e.address,postcode:e.postcode,addressPostcode:`${e.address}, ${e.postcode}`,addedOn:e.added_revised,property_type:e.property_type,price:e.price,bedrooms:e.bedrooms,bathrooms:e.bathrooms,let_available_date:e.let_available_date,date_added:e.date_added_db,agent:e.agent,channel:e.channel,owner_name:e.owner_name,owner_email:e.owner_email,owner_mobile:e.owner_mobile,emails_sent:e.emails_sent,letters_sent:e.letters_sent,valuation_booked:e.valuation_booked,notes:e.notes}))),Ss=async(e,s,a)=>{f(!0);const l=e.lead_gen_details[0].postcode,n=e.lead_gen_details[0].subcode,t=e.lead_gen_details[0].bedrooms_min,c=e.lead_gen_details[0].bedrooms_max,d=e.lead_gen_details[0].rental_price_min,o=e.lead_gen_details[0].rental_price_max,h=e.lead_gen_details[0].rental_additional;try{const e=`/api/epc_properties_rental/combined-epc-results/?postcode=${l}&subcode=${n}&min_bedrooms=${t}&max_bedrooms=${c}&rental_price_min=${d}&rental_price_max=${o}&rental_additional=${h}`,{data:a}=await r.Z.get(e,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});console.log("combined data ->",a);const u=s.map((e=>e.rightmove_id)),m=a.filter((e=>!u.includes(e.property_data.rightmove_id))),p=m.filter((e=>0===e.epc_data_list.length)),x=m.filter((e=>1===e.epc_data_list.length)),j=m.filter((e=>e.epc_data_list.length>1));console.log("sngle matches ->",x),console.log("no matches ->",p),console.log("multiple matches ->",j),pe(p),je(x),ge(j),f(!1)}catch(u){console.error("can't access combined data ->",u)}},As=async(e,s,a)=>{k(!0);const l=e.lead_gen_details[0].postcode,n=e.lead_gen_details[0].subcode,t=e.lead_gen_details[0].bedrooms_min,c=e.lead_gen_details[0].bedrooms_max,d=e.lead_gen_details[0].sales_price_min,o=e.lead_gen_details[0].sales_price_max;try{const e=`/api/epc_properties/combined-epc-results/?postcode=${l}&subcode=${n}&min_bedrooms=${t}&max_bedrooms=${c}&sales_price_min=${d}&sales_price_max=${o}`,{data:a}=await r.Z.get(e,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});console.log("combined data ->",a);const h=s.map((e=>e.rightmove_id)),u=a.filter((e=>!h.includes(e.property_data.rightmove_id))),m=u.filter((e=>0===e.epc_data_list.length)),p=u.filter((e=>1===e.epc_data_list.length)),x=u.filter((e=>e.epc_data_list.length>1));console.log("sales single matches ->",p),console.log("sales no matches ->",m),console.log("sales multiple matches ->",x),Ne(m),fe(p),ke(x),k(!1)}catch(h){console.error("can't access combined data ->",h)}},Ps=e=>{window.open(e,"_blank","width=1200,height=800,resizable=yes,scrollbars=yes,status=yes")},Fs=s=>{localStorage.removeItem("wittle-user-token"),localStorage.removeItem("wittle-username"),e("/login")},Es=["200000","300000","400000","500000","600000","700000","800000","900000","1000000","1250000","1500000","1750000","2000000","2250000","2500000","2750000","3000000","3500000","4000000","5000000","7500000","10000000","12500000","15000000","20000000","30000000","40000000","50000000"],Us=["500","600","700","800","900","1000","1100","1200","1300","1400","1500","1600","1700","1800","1900","2000","2250","2500","2750","3000","3250","3500","4000","4500","5000","5500","6000","7000","8000","9000","10000","12500","15000","20000","25000","30000","40000","50000","60000"],Bs=(e,s)=>{if(!s||"all"===s)return e;let a,l="within";switch(s){case"1day":a=1;break;case"2days":a=2;break;case"3days":a=3;break;case"7days":a=7;break;case"4weeks":a=28;break;case"8weeks":a=56;break;case"12weeks":a=84;break;case"16weeks":a=112;break;case">8weeks":a=56,l="beyond";break;case">12weeks":a=84,l="beyond";break;case">16weeks":a=112,l="beyond";break;default:return e}return e.filter((e=>{const s=Os(e.property_data.added_revised),r=Os(e.property_data.reduced_revised),n=s||r;return!!n&&("within"===l?Ds(n,a):Rs(n,a))}))};(0,l.useEffect)((()=>{const e=Bs(xe,Ve);Ke(e)}),[xe,Ve]),(0,l.useEffect)((()=>{const e=Bs(ye,Ve);es(e)}),[ye,Ve]),(0,l.useEffect)((()=>{const e=Bs(ve,Ve);as(e)}),[ve,Ve]),(0,l.useEffect)((()=>{const e=Bs(be,Ve);rs(e)}),[be,Ve]),(0,l.useEffect)((()=>{const e=Bs(me,Ve);is(e)}),[me,Ve]),(0,l.useEffect)((()=>{const e=Bs(_e,Ve);cs(e)}),[_e,Ve]);const Os=e=>{if(!e)return null;const[s,a,l]=e.split("/");return new Date(l,a-1,s)},Ds=(e,s)=>{const a=new Date;return e>=new Date(a.getFullYear(),a.getMonth(),a.getDate()-s)},Rs=(e,s)=>{const a=new Date;return e<new Date(a.getFullYear(),a.getMonth(),a.getDate()-s)},Ms=()=>{const e=[...Je].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===ds?a-l:l-a})),s=[...Qe].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===ds?a-l:l-a})),a=[...ss].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===ds?a-l:l-a})),l=[...ls].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===ds?a-l:l-a})),r=[...ns].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===ds?a-l:l-a})),n=[...ts].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===ds?a-l:l-a}));Ke(e),es(s),as(a),rs(l),is(r),cs(n),os("asc"===ds?"desc":"asc")},$s=()=>{const e=[...Je].sort(((e,s)=>"asc"===hs?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),s=[...Qe].sort(((e,s)=>"asc"===hs?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),a=[...ss].sort(((e,s)=>"asc"===hs?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),l=[...ls].sort(((e,s)=>"asc"===hs?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),r=[...ns].sort(((e,s)=>"asc"===hs?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),n=[...ts].sort(((e,s)=>"asc"===hs?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode)));Ke(e),es(s),as(a),rs(l),is(r),cs(n),us("asc"===hs?"desc":"asc")},[Ls,Ts]=(0,l.useState)(!1),Zs=()=>{Ts(!1)},Hs=e=>{Ts(!0),Ue([])},[zs,Is]=(0,l.useState)(!1),Vs=()=>{Is(!1)},Ws=async()=>{if((0,i.Hb)()){console.log("trying to increase");try{const{data:e}=await r.Z.post("/api/usage/",{},{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});console.log(e),"success"===e.status?console.log("Usage count increased successfully"):console.error("Failed to increase usage count:",e.message)}catch(s){console.error("Error:",s)}}else e("/access-denied"),console.log("logged out")},Ys=e=>{Ns((s=>{const a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a}))},Gs=e=>{fs((s=>{const a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a}))},qs=async(s,a,l)=>{if((0,i.Hb)()){const e=[{rightmove_id:s.property_data.rightmove_id,postcode:s.property_data.postcode,address:a.address,agent:s.property_data.agent,type:s.property_data.type,addedOn:s.property_data.addedOn,propertyType:s.property_data.propertyType,price:s.property_data.price,bathrooms:s.property_data.bathrooms,bedrooms:s.property_data.bedrooms,let_available_date:s.property_data.let_available_date,date_added_db:s.property_data.date_added_db,url:s.property_data.url,current_epc:s.property_data.current_epc,potential_epc:s.property_data.potential_epc,action:"Saved",added_revised:s.property_data.added_revised,reduced_revised:s.property_data.reduced_revised}];try{const s=await r.Z.post("/api/epc_favourite/",e,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});console.log("Response:",s.data),Ys(l),Gs(l),ps(1),Hs(),bs()}catch(n){console.error("Error saving favourite:",n)}}else e("/access-denied"),console.log("logged out")};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("section",{className:"agent-profile-page",children:[(0,p.jsx)("div",{className:"desktop-nav",children:(0,p.jsx)(c.Z,{navbarColour:"#FDF7F0"})}),(0,p.jsx)("div",{className:"mobile-nav",children:(0,p.jsx)(o.Z,{setProfileContent:A,profileContent:S,profileDetail:P,setProfileDetail:F})}),(0,p.jsx)(d.Z,{setProfileDetail:F,variableSide:E,setProfileContent:A,setVariableSide:U,userData:u}),u&&"Trial expired"===u.usage_stats[0].package?(0,p.jsx)("section",{className:"main-body remove-margin",children:(0,p.jsx)("section",{className:"main-body-details",children:(0,p.jsxs)("section",{className:"listing-generator",children:[(0,p.jsxs)("div",{className:"listing-options",children:[(0,p.jsx)("div",{className:"listing-buttons"}),(0,p.jsx)("div",{className:"logout-button",onClick:Fs,children:(0,p.jsx)("div",{className:"logout-icon"})})]}),(0,p.jsxs)("div",{className:"no-access-body",children:[(0,p.jsx)("div",{className:"no-access-image"}),(0,p.jsx)("h1",{className:"no-access-title",children:"Oops! Dead end"}),(0,p.jsx)("h3",{className:"no-access-message",children:"You no longer have access to this content. Get in touch to upgrade your account and access the Wittle magic."})]})]})})}):(0,p.jsx)("section",{className:"main-body",children:(0,p.jsx)("section",{className:"main-body-details",children:(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("section",{className:"property-finder",children:[(0,p.jsxs)("div",{className:"listing-options",children:[(0,p.jsxs)("div",{className:"listing-buttons",children:[(0,p.jsx)("h5",{className:"no-print",onClick:()=>ue("Home"),style:{borderBottom:"Home"===he?"3px solid #ED6B86":"none",textUnderlineOffset:"Home"===he?"0.5em":"initial",fontWeight:"Home"===he?"700":"400"},children:"Home"}),(0,p.jsx)("h5",{className:"no-print",onClick:()=>ue("Explore properties"),style:{borderBottom:"Explore properties"===he?"3px solid #ED6B86":"none",textUnderlineOffset:"Explore properties"===he?"0.5em":"initial",fontWeight:"Explore properties"===he?"700":"400"},children:"Explore properties"}),(0,p.jsx)("h5",{className:"no-print",onClick:()=>ue("Saved properties"),style:{borderBottom:"Saved properties"===he?"3px solid #ED6B86":"none",textUnderlineOffset:"Saved properties"===he?"0.5em":"initial",fontWeight:"Saved properties"===he?"700":"400"},children:"Saved properties"}),(0,p.jsx)("h5",{className:"no-print",onClick:()=>ue("Archived properties"),style:{borderBottom:"Archived properties"===he?"3px solid #ED6B86":"none",textUnderlineOffset:"Archived properties"===he?"0.5em":"initial",fontWeight:"Archived properties"===he?"700":"400"},children:"Archived properties"}),(0,p.jsx)("h5",{className:"no-print",id:"manual-matcher",onClick:()=>ue("Manual matcher"),style:{borderBottom:"Manual matcher"===he?"3px solid #ED6B86":"none",textUnderlineOffset:"Manual matcher"===he?"0.5em":"initial",fontWeight:"Manual matcher"===he?"700":"400"},children:"Manual matcher"}),(0,p.jsx)("h5",{className:"no-print",onClick:()=>ue("Hidden properties"),style:{borderBottom:"Hidden properties"===he?"3px solid #ED6B86":"none",textUnderlineOffset:"Hidden properties"===he?"0.5em":"initial",fontWeight:"Hidden properties"===he?"700":"400"},children:"Hidden properties"})]}),(0,p.jsx)("div",{className:"logout-button",onClick:Fs,children:(0,p.jsx)("div",{className:"logout-icon"})})]}),(0,p.jsx)("hr",{className:"title-line"}),(0,p.jsx)("div",{className:"lead-generator",children:(0,p.jsx)("div",{className:"property-results",children:"Home"===he?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"lead-gen-inputs",children:[(0,p.jsx)("h3",{className:"sub-title",children:"Set your search criteria"}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Postcode(s)"}),(0,p.jsx)("p",{children:"Add multiple postcodes by separating with a comma, and include any part of the postcode, e.g. \u201cSW4,SW5\u201d"}),(0,p.jsx)("input",{type:"text",value:Pe.postcode,onChange:e=>{O(e.target.value.toUpperCase().replace(/\s+/g,"")),Fe((s=>({...s,postcode:e.target.value.toUpperCase().replace(/\s+/g,"")})))},placeholder:"Enter postcode..."})]})}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Sub postcode(s)"}),(0,p.jsx)("p",{children:"Add sub postcodes, e.g. \u201cSW4 0,SW5 0\u201d. You can also chain these."}),(0,p.jsx)("input",{type:"text",value:Pe.subcode,onChange:e=>{R(e.target.value.toUpperCase().replace(/\s+/g,"")),Fe((s=>({...s,subcode:e.target.value.toUpperCase().replace(/\s+/g,"")})))},placeholder:"Enter subcode..."})]})}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Channel"}),(0,p.jsxs)("select",{className:"dropdown",value:Pe.channel||"Lettings",onChange:e=>Fe((s=>({...s,channel:e.target.value}))),children:[(0,p.jsx)("option",{children:"Lettings"}),(0,p.jsx)("option",{children:"Sales"}),(0,p.jsx)("option",{children:"Both"})]})]})}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"see-more-section",onClick:()=>Ae(!Se),children:[(0,p.jsx)("h3",{className:"sub-title",children:"Add some more detail"}),Se?(0,p.jsx)("h3",{className:"sub-title",children:"^"}):(0,p.jsx)("h3",{className:"sub-title",children:"v"})]}),Se?(0,p.jsx)(p.Fragment,{children:"Lettings"===Pe.channel?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Bedrooms"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:Pe.bedrooms_min||"",onChange:e=>Fe((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,p.jsx)("option",{value:"",children:"No min"}),(0,p.jsx)("option",{value:"1",children:"1"}),(0,p.jsx)("option",{value:"2",children:"2"}),(0,p.jsx)("option",{value:"3",children:"3"}),(0,p.jsx)("option",{value:"4",children:"4"}),(0,p.jsx)("option",{value:"5",children:"5"}),(0,p.jsx)("option",{value:"6",children:"6"})]}),(0,p.jsxs)("select",{className:"dropdown",value:Pe.bedrooms_max||"",onChange:e=>Fe((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,p.jsx)("option",{value:"",children:"No max"}),(0,p.jsx)("option",{value:"1",children:"1"}),(0,p.jsx)("option",{value:"2",children:"2"}),(0,p.jsx)("option",{value:"3",children:"3"}),(0,p.jsx)("option",{value:"4",children:"4"}),(0,p.jsx)("option",{value:"5",children:"5"}),(0,p.jsx)("option",{value:"6",children:"6"}),(0,p.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Price"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:Pe.rental_price_min||"",onChange:e=>Fe((s=>({...s,rental_price_min:e.target.value}))),children:[(0,p.jsx)("option",{value:0,children:"No min"}),Us.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(t.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,p.jsxs)("select",{className:"dropdown",value:Pe.rental_price_max||"",onChange:e=>Fe((s=>({...s,rental_price_max:e.target.value}))),children:[(0,p.jsx)("option",{value:1e7,children:"No max"}),Us.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(t.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Furnishing status"}),(0,p.jsxs)("select",{className:"dropdown",value:Pe.rental_additional||"Either furnished or unfurnished",onChange:e=>Fe((s=>({...s,rental_additional:e.target.value}))),children:[(0,p.jsx)("option",{children:"Either furnished or unfurnished"}),(0,p.jsx)("option",{children:"Furnished"}),(0,p.jsx)("option",{children:"Unfurnished"})]})]})})]}):"Sales"===Pe.channel?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Bedrooms"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:Pe.bedrooms_min||"",onChange:e=>Fe((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,p.jsx)("option",{value:"",children:"No min"}),(0,p.jsx)("option",{value:"1",children:"1"}),(0,p.jsx)("option",{value:"2",children:"2"}),(0,p.jsx)("option",{value:"3",children:"3"}),(0,p.jsx)("option",{value:"4",children:"4"}),(0,p.jsx)("option",{value:"5",children:"5"}),(0,p.jsx)("option",{value:"6",children:"6"})]}),(0,p.jsxs)("select",{className:"dropdown",value:Pe.bedrooms_max||"",onChange:e=>Fe((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,p.jsx)("option",{value:"",children:"No max"}),(0,p.jsx)("option",{value:"1",children:"1"}),(0,p.jsx)("option",{value:"2",children:"2"}),(0,p.jsx)("option",{value:"3",children:"3"}),(0,p.jsx)("option",{value:"4",children:"4"}),(0,p.jsx)("option",{value:"5",children:"5"}),(0,p.jsx)("option",{value:"6",children:"6"}),(0,p.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Price"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:Pe.sales_price_min||"",onChange:e=>Fe((s=>({...s,sales_price_min:e.target.value}))),children:[(0,p.jsx)("option",{value:0,children:"No min"}),Es.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(t.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,p.jsxs)("select",{className:"dropdown",value:Pe.sales_price_max||"",onChange:e=>Fe((s=>({...s,sales_price_max:e.target.value}))),children:[(0,p.jsx)("option",{value:1e8,children:"No max"}),Es.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(t.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]})]}):"Both"===Pe.channel?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Bedrooms"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:Pe.bedrooms_min||"",onChange:e=>Fe((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,p.jsx)("option",{value:"",children:"No min"}),(0,p.jsx)("option",{value:"1",children:"1"}),(0,p.jsx)("option",{value:"2",children:"2"}),(0,p.jsx)("option",{value:"3",children:"3"}),(0,p.jsx)("option",{value:"4",children:"4"}),(0,p.jsx)("option",{value:"5",children:"5"}),(0,p.jsx)("option",{value:"6",children:"6"})]}),(0,p.jsxs)("select",{className:"dropdown",value:Pe.bedrooms_max||"",onChange:e=>Fe((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,p.jsx)("option",{value:"",children:"No max"}),(0,p.jsx)("option",{value:"1",children:"1"}),(0,p.jsx)("option",{value:"2",children:"2"}),(0,p.jsx)("option",{value:"3",children:"3"}),(0,p.jsx)("option",{value:"4",children:"4"}),(0,p.jsx)("option",{value:"5",children:"5"}),(0,p.jsx)("option",{value:"6",children:"6"}),(0,p.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Rental price"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:Pe.rental_price_min||"",onChange:e=>Fe((s=>({...s,rental_price_min:e.target.value}))),children:[(0,p.jsx)("option",{value:0,children:"No min"}),Us.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(t.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,p.jsxs)("select",{className:"dropdown",value:Pe.rental_price_max||"",onChange:e=>Fe((s=>({...s,rental_price_max:e.target.value}))),children:[(0,p.jsx)("option",{value:1e7,children:"No max"}),Us.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(t.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Rental furnishing status"}),(0,p.jsxs)("select",{className:"dropdown",value:Pe.rental_additional||"Either furnished or unfurnished",onChange:e=>Fe((s=>({...s,rental_additional:e.target.value}))),children:[(0,p.jsx)("option",{children:"Either furnished or unfurnished"}),(0,p.jsx)("option",{children:"Furnished"}),(0,p.jsx)("option",{children:"Unfurnished"})]})]})}),(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Sales price"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:Pe.sales_price_min||"",onChange:e=>Fe((s=>({...s,sales_price_min:e.target.value}))),children:[(0,p.jsx)("option",{value:0,children:"No min"}),Es.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(t.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,p.jsxs)("select",{className:"dropdown",value:Pe.sales_price_max||"",onChange:e=>Fe((s=>({...s,sales_price_max:e.target.value}))),children:[(0,p.jsx)("option",{value:1e8,children:"No max"}),Es.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(t.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]})]}):""}):""]}),(0,p.jsx)("div",{className:"lead-gen-save",children:(0,p.jsx)("button",{className:"save-details",onClick:async()=>{let e;u&&u.lead_gen_details&&u.lead_gen_details.length>0?(e=await r.Z.put(`/api/lead_gen_details/${u.id}/`,Pe,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}}),"Lettings"===u.lead_gen_details.channel?f(!0):"Sales"===u.lead_gen_details.channel?k(!0):"Both"===u.lead_gen_details.channel&&(f(!0),k(!0)),ue("Explore properties")):(e=await r.Z.post("/api/lead_gen_details/",Pe,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}}),"Lettings"===u.lead_gen_details.channel?f(!0):"Sales"===u.lead_gen_details.channel?k(!0):"Both"===u.lead_gen_details.channel&&(f(!0),k(!0)),ue("Explore properties")),bs()},children:"Save details"})})]})}):"Explore properties"!==he||g?"Explore properties"===he&&g?(0,p.jsx)("div",{className:"property-table-loading",children:(0,p.jsx)(h.Z,{})}):"Saved properties"===he?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(_,{savedProperties:Q,userData:u,csvData:De,setCsvData:Re,getCurrentDate:()=>{const e=new Date,s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}-${a}-${s}`},handleVisitUrl:Ps,loadUserData:bs,setSavedProperties:ee})}):"Archived properties"===he?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(y,{handleVisitUrl:Ps,archivedProperties:se,loadUserData:bs})}):"Manual matcher"===he?(0,p.jsx)(j,{increaseUsageCount:Ws,setErrors:a,userData:u,loadUserData:bs,savedProperties:Q,archivedProperties:se,handleVisitUrl:Ps,savedActionShow:Ls,setSavedActionShow:Ts,handleSavedActionClose:Zs,setLeadGenSection:ue,latestFavourites:ms,handleSavedActionShow:Hs,setLatestFavourites:ps}):"Hidden properties"===he?(0,p.jsx)(N,{hiddenProperties:le,handleVisitUrl:Ps,loadUserData:bs}):"":(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"results-block",children:[(0,p.jsxs)("div",{className:"property-insight-nav",children:[(0,p.jsxs)("div",{className:"property-insight-buttons",children:[(0,p.jsx)("h3",{className:"insight-button "+("Lettings"===Ce?"active":"inactive"),id:"left",onClick:()=>we("Lettings"),children:"Lettings"}),(0,p.jsx)("h3",{className:"insight-button "+("Sales"===Ce?"active":"inactive"),id:"right",onClick:()=>we("Sales"),children:"Sales"})]}),(0,p.jsxs)("div",{className:"action-section",children:[(0,p.jsxs)("div",{className:"save-section",children:[(0,p.jsx)("div",{className:"bin-icon"}),(0,p.jsx)("h3",{onClick:e=>{Is(!0)},children:"Hide selection"})]}),(0,p.jsxs)("div",{className:"save-section",children:[(0,p.jsx)("div",{className:"print-icon"}),(0,p.jsx)("h3",{onClick:async()=>{if((0,i.Hb)()){const e=new Set(u.epc_favourites.map((e=>e.rightmove_id))),a=[...Ee,...Be].filter((s=>!e.has(s.rightmove_id)));if(console.log(a),0===a.length)return void console.log("No new favourites to add");try{const e=await r.Z.post("/api/epc_favourite/",a,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});console.log("Response:",e.data),ps(a.length),bs(),Hs(),Ue([]),Oe([]),He(xe.map((()=>!1))),Ie(ye.map((()=>!1)))}catch(s){console.error("Error saving favourite:",s)}}else e("/access-denied"),console.log("logged out")},children:"Track selection"})]})]})]}),"Lettings"===Ce?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"filter-section",children:[(0,p.jsx)("h3",{children:"Filter properties"}),(0,p.jsxs)("select",{className:"dropdown",value:Ve,onChange:e=>We(e.target.value),children:[(0,p.jsx)("option",{value:"1day",children:"Updated in the last 24 hours"}),(0,p.jsx)("option",{value:"2days",children:"Updated in the last 48 hours"}),(0,p.jsx)("option",{value:"3days",children:"Updated in the last 72 hours"}),(0,p.jsx)("option",{value:"7days",children:"Updated in the last week"}),(0,p.jsx)("option",{value:"4weeks",children:"Updated in the last 4 weeks"}),(0,p.jsx)("option",{value:"8weeks",children:"Updated in the last 8 weeks"}),(0,p.jsx)("option",{value:"12weeks",children:"Updated in the last 12 weeks"}),(0,p.jsx)("option",{value:"16weeks",children:"Updated in the last 16 weeks"}),(0,p.jsx)("option",{value:"all",children:"All properties"}),(0,p.jsx)("option",{value:">8weeks",children:"Added over 8 weeks ago"}),(0,p.jsx)("option",{value:">12weeks",children:"Added over 12 weeks ago"}),(0,p.jsx)("option",{value:">16weeks",children:"Added over 16 weeks ago"})]})]}),(0,p.jsxs)("div",{className:"matching-status",children:[(0,p.jsx)("h3",{className:"matching-pill",onClick:()=>js("Matching"),style:{color:"Matching"===xs?"white":"#1A276C",backgroundColor:"Matching"===xs?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Matching"}),(0,p.jsx)("h3",{className:"matching-pill",onClick:()=>js("Multiple matches"),style:{color:"Multiple matches"===xs?"white":"#1A276C",backgroundColor:"Multiple matches"===xs?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Multiple matches"}),(0,p.jsx)("h3",{className:"matching-pill",onClick:()=>js("No matches"),style:{color:"No matches"===xs?"white":"#1A276C",backgroundColor:"No matches"===xs?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"No matches"})]}),"Matching"===xs?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"title-section",children:[(0,p.jsxs)("h3",{className:"sub-title",children:["There are ",Je.length," rental properties that match your criteria"]}),(0,p.jsx)("div",{className:"select-all-box",children:(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:Ze.length>0&&Ze.every(Boolean),onChange:e=>{e.target.checked?(()=>{const e=new Set(u.epc_favourites.map((e=>e.rightmove_id))),s=Je.map((e=>({...e.property_data,address:e.epc_data_list[0].address}))).filter((s=>!e.has(s.rightmove_id)));He(Je.map((()=>!0))),Ue(s)})():ks()}}),(0,p.jsx)("label",{className:"label"})]})})]}),(0,p.jsxs)("div",{className:"results-table",children:[(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Address"})}),(0,p.jsxs)("div",{id:"column3",className:"column",onClick:$s,children:[(0,p.jsx)("h5",{children:"Postcode"}),(0,p.jsx)("h5",{children:"\u2b07\ufe0f"})]}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Reduced"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsxs)("div",{id:"column7",className:"column",onClick:Ms,children:[(0,p.jsx)("h5",{children:"Price"}),(0,p.jsx)("h5",{children:"\u2b07\ufe0f"})]}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column10",className:"column",children:(0,p.jsx)("h5",{children:"Select"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details",children:Je?Je.map(((e,s)=>{const a=Ee.some((s=>s.rightmove_id===e.property_data.rightmove_id));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content "+(a?"highlighted-row":""),children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:s+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.epc_data_list[0].address})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.propertyType})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.agent})}),(0,p.jsx)("div",{className:"column",id:"column10",children:Q.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,p.jsx)("div",{className:"saved-message",children:(0,p.jsx)("h3",{children:"Saved"})}):se.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,p.jsx)("div",{className:"saved-message",children:(0,p.jsx)("h3",{children:"Archived"})}):(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:Ze[s],onChange:e=>((e,s)=>{const a=[...Ze];a[s]=e.target.checked,He(a);const l={...Je[s].property_data,address:Je[s].epc_data_list[0].address};console.log("selected property->",l),e.target.checked?(console.log("checked"),Ue((e=>[...e,l]))):Ue((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id))))})(e,s)}),(0,p.jsx)("label",{className:"label"})]})})]}),(0,p.jsx)("hr",{className:"property-divider"})]})})):" "})]})]}):"Multiple matches"===xs?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"title-section",children:(0,p.jsxs)("h3",{className:"sub-title",children:["There are ",ss.length," rental properties that we do not have an exact match for"]})}),(0,p.jsxs)("div",{className:"results-table",children:[(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Listed address"})}),(0,p.jsxs)("div",{id:"column3",className:"column",onClick:$s,children:[(0,p.jsx)("h5",{children:"Postcode"}),(0,p.jsx)("h5",{children:"\u2b07\ufe0f"})]}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Size (sq. m)"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsxs)("div",{id:"column7",className:"column",onClick:Ms,children:[(0,p.jsx)("h5",{children:"Price"}),(0,p.jsx)("h5",{children:"\u2b07\ufe0f"})]}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column10",className:"column",children:(0,p.jsx)("h5",{children:"Action"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details",children:ss?ss.map(((e,s)=>{const a=_s.has(s);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:s+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.displayAddress})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.added_revised&&e.property_data.reduced_revised?`Reduced ${e.property_data.reduced_revised}`:e.property_data.added_revised&&null===e.property_data.reduced_revised?e.property_data.added_revised:"N/a"})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:"nan"===e.property_data.size?"":(.092903*e.property_data.size).toFixed(1)})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.propertyType})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.agent})}),(0,p.jsx)("div",{className:"column",id:"column10",children:Q.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,p.jsx)("div",{className:"saved-message",children:(0,p.jsx)("h3",{children:"Saved"})}):se.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,p.jsx)("div",{className:"saved-message",children:(0,p.jsx)("h3",{children:"Archived"})}):(0,p.jsx)("h3",{className:"expansion",onClick:()=>Ys(s),children:_s.has(s)?"^":"v"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),a&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h3",{className:"matching-title",children:"Matching properties"}),(0,p.jsxs)("div",{className:"expanded-section-titles",children:[(0,p.jsx)("p",{className:"column",id:"column1",children:"#"}),(0,p.jsx)("p",{className:"column",id:"column2",children:"Address"}),(0,p.jsx)("p",{className:"column",id:"column3",children:"Postcode"}),(0,p.jsx)("p",{className:"column",id:"column4",children:"Current EPC"}),(0,p.jsx)("p",{className:"column",id:"column5",children:"Potential EPC"}),(0,p.jsx)("p",{className:"column",id:"column6",children:"Floor"}),(0,p.jsx)("p",{className:"column",id:"column7",children:"Size"}),(0,p.jsx)("p",{className:"column",id:"column8"})]}),e.epc_data_list.map(((a,l)=>(0,p.jsxs)("div",{className:"expanded-content",children:[(0,p.jsxs)("p",{className:"column",id:"column1",onClick:()=>Ps(a.url),children:[l+1," "]}),(0,p.jsx)("p",{className:"column",id:"column2",onClick:()=>Ps(a.url),children:a.address}),(0,p.jsx)("p",{className:"column",id:"column3",onClick:()=>Ps(a.url),children:a.postcode}),(0,p.jsx)("p",{className:"column",id:"column4",onClick:()=>Ps(a.url),children:a.current_energy_efficiency}),(0,p.jsx)("p",{className:"column",id:"column5",onClick:()=>Ps(a.url),children:a.potential_energy_efficiency}),(0,p.jsx)("p",{className:"column",id:"column6",onClick:()=>Ps(a.url),children:a.final_floor_level}),(0,p.jsx)("p",{className:"column",id:"column7",onClick:()=>Ps(a.url),children:a.floor_area}),(0,p.jsx)("div",{className:"column",id:"column8",children:(0,p.jsx)("button",{className:"add-property",onClick:()=>qs(e,a,s),children:"+"})})]},l)))]})]})})):" "})]})]}):"No matches"===xs?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"title-section",children:(0,p.jsxs)("h3",{className:"sub-title",children:["There are ",ns.length," rental properties that we do not have any match for"]})}),(0,p.jsxs)("div",{className:"results-table",children:[(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Listed address"})}),(0,p.jsxs)("div",{id:"column3",className:"column",onClick:$s,children:[(0,p.jsx)("h5",{children:"Postcode"}),(0,p.jsx)("h5",{children:"\u2b07\ufe0f"})]}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Reduced"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsxs)("div",{id:"column7",className:"column",onClick:Ms,children:[(0,p.jsx)("h5",{children:"Price"}),(0,p.jsx)("h5",{children:"\u2b07\ufe0f"})]}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details",children:ns?ns.map(((e,s)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:s+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.displayAddress})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.propertyType})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.agent})})]}),(0,p.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):""]}):"Sales"===Ce?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"filter-section",children:[(0,p.jsx)("h3",{children:"Filter properties"}),(0,p.jsxs)("select",{className:"dropdown",value:Ve,onChange:e=>We(e.target.value),children:[(0,p.jsx)("option",{value:"1day",children:"Updated in the last 24 hours"}),(0,p.jsx)("option",{value:"2days",children:"Updated in the last 48 hours"}),(0,p.jsx)("option",{value:"3days",children:"Updated in the last 72 hours"}),(0,p.jsx)("option",{value:"7days",children:"Updated in the last week"}),(0,p.jsx)("option",{value:"4weeks",children:"Updated in the last 4 weeks"}),(0,p.jsx)("option",{value:"8weeks",children:"Updated in the last 8 weeks"}),(0,p.jsx)("option",{value:"12weeks",children:"Updated in the last 12 weeks"}),(0,p.jsx)("option",{value:"16weeks",children:"Updated in the last 16 weeks"}),(0,p.jsx)("option",{value:"all",children:"All properties"}),(0,p.jsx)("option",{value:">8weeks",children:"Added over 8 weeks ago"}),(0,p.jsx)("option",{value:">12weeks",children:"Added over 12 weeks ago"}),(0,p.jsx)("option",{value:">16weeks",children:"Added over 16 weeks ago"})]})]}),(0,p.jsxs)("div",{className:"matching-status",children:[(0,p.jsx)("h3",{className:"matching-pill",onClick:()=>gs("Matching"),style:{color:"Matching"===vs?"white":"#1A276C",backgroundColor:"Matching"===vs?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Matching"}),(0,p.jsx)("h3",{className:"matching-pill",onClick:()=>gs("Multiple matches"),style:{color:"Multiple matches"===vs?"white":"#1A276C",backgroundColor:"Multiple matches"===vs?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Multiple matches"}),(0,p.jsx)("h3",{className:"matching-pill",onClick:()=>gs("No matches"),style:{color:"No matches"===vs?"white":"#1A276C",backgroundColor:"No matches"===vs?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"No matches"})]}),b?(0,p.jsx)("div",{className:"property-table-loading",children:(0,p.jsx)(h.Z,{})}):b?"":(0,p.jsx)(p.Fragment,{children:"Matching"===vs?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"title-section",children:[(0,p.jsxs)("h3",{className:"sub-title",children:["There are ",Qe.length," properties for sale that match your criteria"]}),(0,p.jsx)("div",{className:"select-all-box",children:(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:ze.length>0&&ze.every(Boolean),onChange:e=>{e.target.checked?(()=>{const e=new Set(u.epc_favourites.map((e=>e.rightmove_id))),s=Qe.map((e=>({...e.property_data,address:e.epc_data_list[0].address}))).filter((s=>!e.has(s.rightmove_id)));Ie(Qe.map((()=>!0))),Oe(s)})():Cs()}}),(0,p.jsx)("label",{className:"label"})]})})]}),(0,p.jsxs)("div",{className:"results-table",children:[(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Address"})}),(0,p.jsxs)("div",{id:"column3",className:"column",onClick:$s,children:[(0,p.jsx)("h5",{children:"Postcode"}),(0,p.jsx)("h5",{children:"\u2b07\ufe0f"})]}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Reduced"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsxs)("div",{id:"column7",className:"column",onClick:Ms,children:[(0,p.jsx)("h5",{children:"Price"}),(0,p.jsx)("h5",{children:"\u2b07\ufe0f"})]}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column10",className:"column",children:(0,p.jsx)("h5",{children:"Select"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details",children:Qe?Qe.map(((e,s)=>{const a=Be.some((s=>s.rightmove_id===e.property_data.rightmove_id));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content "+(a?"highlighted-row":""),children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:s+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.epc_data_list[0].address})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.propertyType})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.agent})}),(0,p.jsx)("div",{className:"column",id:"column10",children:Q.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,p.jsx)("div",{className:"saved-message",children:(0,p.jsx)("h3",{children:"Saved"})}):se.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,p.jsx)("div",{className:"saved-message",children:(0,p.jsx)("h3",{children:"Archived"})}):(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:ze[s],onChange:e=>((e,s)=>{const a=[...ze];a[s]=e.target.checked,Ie(a);const l={...Qe[s].property_data,address:Qe[s].epc_data_list[0].address};console.log(l),e.target.checked?Oe((e=>[...e,l])):Oe((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id))))})(e,s)}),(0,p.jsx)("label",{className:"label"})]})})]}),(0,p.jsx)("hr",{className:"property-divider"})]})})):" "})]})]}):"Multiple matches"===vs?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"title-section",children:(0,p.jsxs)("h3",{className:"sub-title",children:["There are ",ls.length," properties for sale that we do not have an exact match for"]})}),(0,p.jsxs)("div",{className:"results-table",children:[(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Listed address"})}),(0,p.jsxs)("div",{id:"column3",className:"column",onClick:$s,children:[(0,p.jsx)("h5",{children:"Postcode"}),(0,p.jsx)("h5",{children:"\u2b07\ufe0f"})]}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Size (sq. m)"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsxs)("div",{id:"column7",className:"column",onClick:Ms,children:[(0,p.jsx)("h5",{children:"Price"}),(0,p.jsx)("h5",{children:"\u2b07\ufe0f"})]}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column10",className:"column",children:(0,p.jsx)("h5",{children:"Action"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details",children:ls?ls.map(((e,s)=>{const a=ys.has(s);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:s+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.displayAddress})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.added_revised&&e.property_data.reduced_revised?`Reduced ${e.property_data.reduced_revised}`:e.property_data.added_revised&&null===e.property_data.reduced_revised?e.property_data.added_revised:"N/a"})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:"nan"===e.property_data.size?"":(.092903*e.property_data.size).toFixed(1)})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.propertyType})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.agent})}),(0,p.jsx)("div",{className:"column",id:"column10",children:Q.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,p.jsx)("div",{className:"saved-message",children:(0,p.jsx)("h3",{children:"Saved"})}):se.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,p.jsx)("div",{className:"saved-message",children:(0,p.jsx)("h3",{children:"Archived"})}):(0,p.jsx)("h3",{className:"expansion",onClick:()=>Gs(s),children:ys.has(s)?"^":"v"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),a&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h3",{className:"matching-title",children:"Matching properties"}),(0,p.jsxs)("div",{className:"expanded-section-titles",children:[(0,p.jsx)("p",{className:"column",id:"column1",children:"#"}),(0,p.jsx)("p",{className:"column",id:"column2",children:"Address"}),(0,p.jsx)("p",{className:"column",id:"column3",children:"Postcode"}),(0,p.jsx)("p",{className:"column",id:"column4",children:"Current EPC"}),(0,p.jsx)("p",{className:"column",id:"column5",children:"Potential EPC"}),(0,p.jsx)("p",{className:"column",id:"column6",children:"Floor"}),(0,p.jsx)("p",{className:"column",id:"column7",children:"Size"}),(0,p.jsx)("p",{className:"column",id:"column8"})]}),e.epc_data_list.map(((a,l)=>(0,p.jsxs)("div",{className:"expanded-content",children:[(0,p.jsxs)("p",{className:"column",id:"column1",onClick:()=>Ps(a.url),children:[l+1," "]}),(0,p.jsx)("p",{className:"column",id:"column2",onClick:()=>Ps(a.url),children:a.address}),(0,p.jsx)("p",{className:"column",id:"column3",onClick:()=>Ps(a.url),children:a.postcode}),(0,p.jsx)("p",{className:"column",id:"column4",onClick:()=>Ps(a.url),children:a.current_energy_efficiency}),(0,p.jsx)("p",{className:"column",id:"column5",onClick:()=>Ps(a.url),children:a.potential_energy_efficiency}),(0,p.jsx)("p",{className:"column",id:"column6",onClick:()=>Ps(a.url),children:a.final_floor_level}),(0,p.jsx)("p",{className:"column",id:"column7",onClick:()=>Ps(a.url),children:a.floor_area}),(0,p.jsx)("div",{className:"column",id:"column8",children:(0,p.jsx)("button",{className:"add-property",onClick:()=>qs(e,a,s),children:"+"})})]},l)))]})]})})):" "})]})]}):"No matches"===vs?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"title-section",children:(0,p.jsxs)("h3",{className:"sub-title",children:["There are ",ts.length," properties for sale that we do not have any match for"]})}),(0,p.jsxs)("div",{className:"results-table",children:[(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Listed address"})}),(0,p.jsxs)("div",{id:"column3",className:"column",onClick:$s,children:[(0,p.jsx)("h5",{children:"Postcode"}),(0,p.jsx)("h5",{children:"\u2b07\ufe0f"})]}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Reduced"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsxs)("div",{id:"column7",className:"column",onClick:Ms,children:[(0,p.jsx)("h5",{children:"Price"}),(0,p.jsx)("h5",{children:"\u2b07\ufe0f"})]}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details",children:ts?ts.map(((e,s)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:s+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.displayAddress})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.propertyType})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>Ps(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.agent})})]}),(0,p.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):""})]}):""]})})})})]})})})})]}),(0,p.jsx)(x,{savedActionShow:Ls,handleSavedActionClose:Zs,setLeadGenSection:ue,latestFavourites:ms}),(0,p.jsx)(v,{propertyRemoveShow:zs,handleRemovePropertyClose:Vs,removeProperty:async()=>{if((0,i.Hb)()){const e=new Set(u.epc_favourites.map((e=>e.rightmove_id))),a=[...Ee,...Be].filter((s=>!e.has(s.rightmove_id)));if(console.log(a),0===a.length)return void console.log("No properties to remove");try{const e=await r.Z.post("/api/epc_favourite/remove_property/",a,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});console.log("Response:",e.data),ps(a.length),bs(),js("Matching"),Ue([]),Oe([]),He(xe.map((()=>!1))),Ie(ye.map((()=>!1))),Vs()}catch(s){console.error("Error saving favourite:",s)}}else e("/access-denied"),console.log("logged out")}})]})}},8472:function(e,s,a){e.exports=a(3561)},8015:function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l,r=function(){function e(e,s){for(var a=0;a<s.length;a++){var l=s[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(s,a,l){return a&&e(s.prototype,a),l&&e(s,l),s}}(),n=a(2791),i=(l=n)&&l.__esModule?l:{default:l},t=a(1509),c=a(8333);var d=function(e){function s(e){!function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,s);var a=function(e,s){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!==typeof s&&"function"!==typeof s?e:s}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return a.state={},a}return function(e,s){if("function"!==typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s)}(s,e),r(s,[{key:"buildURI",value:function(){return t.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var e=this.props,s=e.data,a=e.headers,l=e.separator,r=e.enclosingCharacter,n=e.uFEFF,i=e.target,t=e.specs,c=e.replace;this.state.page=window.open(this.buildURI(s,n,a,l,r),i,t,c)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),s}(i.default.Component);d.defaultProps=Object.assign(c.defaultProps,{target:"_blank"}),d.propTypes=c.propTypes,s.default=d},9088:function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l,r=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},n=function(){function e(e,s){for(var a=0;a<s.length;a++){var l=s[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(s,a,l){return a&&e(s.prototype,a),l&&e(s,l),s}}(),i=a(2791),t=(l=i)&&l.__esModule?l:{default:l},c=a(1509),d=a(8333);var o=function(e){function s(e){!function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,s);var a=function(e,s){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!==typeof s&&"function"!==typeof s?e:s}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return a.buildURI=a.buildURI.bind(a),a}return function(e,s){if("function"!==typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s)}(s,e),n(s,[{key:"buildURI",value:function(){return c.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.navigator.msSaveOrOpenBlob){e.preventDefault();var a=this.props,l=a.data,r=a.headers,n=a.separator,i=a.filename,t=a.enclosingCharacter,d=a.uFEFF,o=s&&"function"===typeof l?l():l,h=new Blob([d?"\ufeff":"",(0,c.toCSV)(o,r,n,t)]);return window.navigator.msSaveBlob(h,i),!1}}},{key:"handleAsyncClick",value:function(e){var s=this;this.props.onClick(e,(function(a){!1!==a?s.handleLegacy(e,!0):e.preventDefault()}))}},{key:"handleSyncClick",value:function(e){!1===this.props.onClick(e)?e.preventDefault():this.handleLegacy(e)}},{key:"handleClick",value:function(){var e=this;return function(s){if("function"===typeof e.props.onClick)return e.props.asyncOnClick?e.handleAsyncClick(s):e.handleSyncClick(s);e.handleLegacy(s)}}},{key:"render",value:function(){var e=this,s=this.props,a=s.data,l=s.headers,n=s.separator,i=s.filename,c=s.uFEFF,d=s.children,o=(s.onClick,s.asyncOnClick,s.enclosingCharacter),h=function(e,s){var a={};for(var l in e)s.indexOf(l)>=0||Object.prototype.hasOwnProperty.call(e,l)&&(a[l]=e[l]);return a}(s,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]),u="undefined"===typeof window?"":this.buildURI(a,c,l,n,o);return t.default.createElement("a",r({download:i},h,{ref:function(s){return e.link=s},target:"_self",href:u,onClick:this.handleClick()}),d)}}]),s}(t.default.Component);o.defaultProps=d.defaultProps,o.propTypes=d.propTypes,s.default=o},1509:function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function l(e){if(Array.isArray(e)){for(var s=0,a=Array(e.length);s<e.length;s++)a[s]=e[s];return a}return Array.from(e)}var r=s.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},n=s.isJsons=function(e){return Array.isArray(e)&&e.every((function(e){return"object"===("undefined"===typeof e?"undefined":a(e))&&!(e instanceof Array)}))},i=s.isArrays=function(e){return Array.isArray(e)&&e.every((function(e){return Array.isArray(e)}))},t=s.jsonsHeaders=function(e){return Array.from(e.map((function(e){return Object.keys(e)})).reduce((function(e,s){return new Set([].concat(l(e),l(s)))}),[]))},c=s.jsons2arrays=function(e,s){var a=s=s||t(e),r=s;n(s)&&(a=s.map((function(e){return e.label})),r=s.map((function(e){return e.key})));var i=e.map((function(e){return r.map((function(s){return d(s,e)}))}));return[a].concat(l(i))},d=s.getHeaderValue=function(e,s){var a=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce((function(e,s,a,l){var r=e[s];if(void 0!==r&&null!==r)return r;l.splice(1)}),s);return void 0===a?e in s?s[e]:"":a},o=s.elementOrEmpty=function(e){return"undefined"===typeof e||null===e?"":e},h=s.joiner=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'"';return e.filter((function(e){return e})).map((function(e){return e.map((function(e){return o(e)})).map((function(e){return""+a+e+a})).join(s)})).join("\n")},u=s.arrays2csv=function(e,s,a,r){return h(s?[s].concat(l(e)):e,a,r)},m=s.jsons2csv=function(e,s,a,l){return h(c(e,s),a,l)},p=s.string2csv=function(e,s,a,l){return s?s.join(a)+"\n"+e:e.replace(/"/g,'""')},x=s.toCSV=function(e,s,a,l){if(n(e))return m(e,s,a,l);if(i(e))return u(e,s,a,l);if("string"===typeof e)return p(e,s,a);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};s.buildURI=function(e,s,a,l,n){var i=x(e,a,l,n),t=r()?"application/csv":"text/csv",c=new Blob([s?"\ufeff":"",i],{type:t}),d="data:"+t+";charset=utf-8,"+(s?"\ufeff":"")+i,o=window.URL||window.webkitURL;return"undefined"===typeof o.createObjectURL?d:o.createObjectURL(c)}},3561:function(e,s,a){"use strict";s.CSVLink=void 0;var l=n(a(8015)),r=n(a(9088));function n(e){return e&&e.__esModule?e:{default:e}}l.default,s.CSVLink=r.default},8333:function(e,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.PropsNotForwarded=s.defaultProps=s.propTypes=void 0;var l,r=a(2791),n=((l=r)&&l.__esModule,a(2007));s.propTypes={data:(0,n.oneOfType)([n.string,n.array,n.func]).isRequired,headers:n.array,target:n.string,separator:n.string,filename:n.string,uFEFF:n.bool,onClick:n.func,asyncOnClick:n.bool,enclosingCharacter:n.string},s.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},s.PropsNotForwarded=["data","headers"]},7837:function(e,s,a){"use strict";e.exports=a.p+"static/media/new-loading.a788dadda3b120785a81.gif"}}]);
//# sourceMappingURL=40.fe3239bd.chunk.js.map