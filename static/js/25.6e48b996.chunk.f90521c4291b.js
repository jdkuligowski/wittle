"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[25,584],{74177:function(e,s,a){a(72791);var t=a(80184);s.Z=()=>(0,t.jsx)("div",{className:"loading-gif",children:(0,t.jsx)("img",{src:a(29193),alt:"loading gif"})})},24604:function(e,s,a){a(72791),a(80184)},25:function(e,s,a){a.r(s),a.d(s,{default:function(){return P}});var t=a(72791),l=a(55294),i=a(57689),n=a(97165),r=a(30948),c=(a(99696),a(24604),a(60764)),o=a(52094),d=a(78084),m=a(74177),h=a(98472),p=a(40936),u=a(80184);var x=e=>{let{savedActionShow:s,handleSavedActionClose:a,setLeadGenSection:t,latestFavourites:l}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsx)("div",{className:"core-body",children:(0,u.jsxs)("h3",{className:"message",children:["We've added ",1===l?`${l} property`:`${l} properties`," to your saved list \ud83e\udd1d"]})}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:()=>{t("Saved properties"),a()},children:"Go to saved"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})};var j=e=>{let{increaseUsageCount:s,setErrors:a,userData:r,loadUserData:c,savedProperties:o,archivedProperties:d,handleVisitUrl:h,savedActionShow:p,handleSavedActionClose:j,setLeadGenSection:g,latestFavourites:v,handleSavedActionShow:N,setLatestFavourites:_,setSavedActionShow:y}=e;const[b,f]=(0,t.useState)(),k=(0,i.s0)(),[C,w]=(0,t.useState)(""),[S,B]=(0,t.useState)(""),[F,A]=(0,t.useState)(),[T,D]=(0,t.useState)(),[E,L]=(0,t.useState)([]),[$,P]=(0,t.useState)([]),[M,U]=(0,t.useState)(!1),[Z,O]=(0,t.useState)("Lettings"),[W,I]=(0,t.useState)("Efficiency"),[z,H]=(0,t.useState)(new Set),[R,Y]=(0,t.useState)({}),G=async e=>{try{console.log(e);const{data:s}=await l.Z.get(`/api/epc_properties_rental/${e}`);return s}catch(s){return console.log(s),[]}},V=async e=>{try{console.log(e);const{data:s}=await l.Z.get(`/api/epc_properties/${e}`);return s}catch(s){return console.log(s),[]}};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"epc-matcher",children:[(0,u.jsxs)("div",{className:"input-section",children:[(0,u.jsx)("h3",{className:"sub-title",children:"Input property details to find  details about live listings"}),b?(0,u.jsx)(m.Z,{}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"double-input-block",children:[(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Postcode"}),(0,u.jsx)("input",{type:"text",value:C,onChange:e=>w(e.target.value),placeholder:"Enter postcode..."})]}),(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Road name"}),(0,u.jsx)("input",{type:"text",value:S,onChange:e=>B(e.target.value)})]})]}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Efficiency (numbers) or Rating (letters)"}),(0,u.jsxs)("select",{onChange:e=>I(e.target.value),children:[(0,u.jsx)("option",{children:"Efficiency"}),(0,u.jsx)("option",{children:"Rating"})]})]})}),"Efficiency"===W?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"double-input-block",children:[(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Current Energy Efficiency"}),(0,u.jsx)("input",{type:"number",value:F,onChange:e=>A(e.target.value)})]}),(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Potential Energy Efficiency"}),(0,u.jsx)("input",{type:"number",value:T,onChange:e=>D(e.target.value)})]})]})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"double-input-block",children:[(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Current Energy Rating"}),(0,u.jsx)("input",{type:"text",value:F,onChange:e=>A(e.target.value)})]}),(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Potential Energy Rating"}),(0,u.jsx)("input",{type:"text",value:T,onChange:e=>D(e.target.value)})]})]})}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Property category"}),(0,u.jsxs)("select",{className:"dropdown",value:Z||"Lettings",onChange:e=>O(e.target.value),children:[(0,u.jsx)("option",{children:"Lettings"}),(0,u.jsx)("option",{children:"Sales"})]})]})}),(0,u.jsx)("div",{className:"search-section",children:(0,u.jsx)("button",{className:"load-insights",onClick:async()=>{Y({}),H(new Set),f(!0),U(!1);const e=C.replace(/\s+/g,"");try{const{data:a}=await l.Z.get(`/api/epc/${e}`);if(console.log("Postcode data ->",a),L(a),a&&Array.isArray(a)&&a.length>0){let e=a;"Efficiency"===W?e=e.filter((e=>(!S||e.address.toLowerCase().includes(S.toLowerCase()))&&(!F||e.current_energy_efficiency===Number(F))&&(!T||e.potential_energy_efficiency===Number(T)))):"Rating"===W&&(e=e.filter((e=>(!S||e.address.toLowerCase().includes(S.toLowerCase()))&&(!F||e.current_energy_rating===F.toUpperCase())&&(!T||e.potential_energy_rating===T.toUpperCase())))),e=e.sort(((e,s)=>new Date(s.inspection_date)-new Date(e.inspection_date))),e.length>0?(P(e),console.log("filtered data->",e),s()):0===e.length&&P(""),f(!1)}else console.log("No postcode data available"),f(!1)}catch(t){P(""),a(!0),console.log(t),f(!1)}U(!0)},children:"Load Properties"})})]})]}),(0,u.jsx)("div",{className:"manual-property-results",children:(0,u.jsx)("div",{className:"results-block",children:0!==E.length||M?M&&0===$.length?(0,u.jsx)("h3",{className:"sub-title",children:"We couldn't find anything that matched your search"}):M&&$.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("h3",{className:"sub-title",children:["You have ",$.length," matching results"]}),(0,u.jsx)("div",{className:"results-details",children:$?$.map(((e,s)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("h5",{className:"row-value",children:s+1}),(0,u.jsxs)("div",{className:"results-items",children:[(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"catchment"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"Address: "}),(0,u.jsx)("h5",{className:"text-result",children:e.address})]})]}),(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"house"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"Floor area: "}),(0,u.jsxs)("h5",{className:"text-result",children:[e.floor_area," sq.m"]})]})]}),(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"location"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"Postcode: "}),(0,u.jsx)("h5",{className:"text-result",children:e.postcode})]})]}),(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"building"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"Floor level: "}),(0,u.jsx)("h5",{className:"text-result",children:e.final_floor_level})]})]}),(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"search"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"last inspection: "}),(0,u.jsx)("h5",{className:"text-result",children:e.inspection_date})]})]})]}),(0,u.jsx)("div",{className:"buttons",children:o.some((s=>s.address===e.address&&s.postcode===e.postcode))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Saved"})}):d.some((s=>s.address===e.address&&s.postcode===e.postcode))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Archived"})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"heart-icon",onClick:()=>(async e=>{if((0,n.Hb)()){const a=[{rightmove_id:Math.floor(1e12*Math.random()).toString(),postcode:e.postcode,address:e.address,agent:"",type:"",addedOn:"",propertyType:"",price:null,bathrooms:null,bedrooms:null,let_available_date:null,date_added_db:null,url:"",current_epc:e.current_energy_efficiency,potential_epc:e.potential_energy_efficiency,action:"Saved",added_revised:null,reduced_revised:null}];try{const e=await l.Z.post("/api/epc_favourite/",a,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",e.data),H(new Set),_(1),N(),c()}catch(s){console.error("Error saving favourite:",s)}}else k("/access-denied"),console.log("logged out")})(e)}),(0,u.jsx)("button",{className:"expansion",style:{backgroundColor:(z.has(s),"#1A276C")},onClick:()=>(async e=>{const s=new Set(z),a=$[e];if(s.has(e))s.delete(e);else if(s.add(e),R[e]||"Lettings"!==Z){if(!R[e]&&"Sales"===Z){const s=await V(a.postcode);console.log("matches ->",s),Y({...R,[e]:s})}}else{const s=await G(a.postcode);console.log("matches ->",s),Y({...R,[e]:s})}H(s)})(s),children:z.has(s)?"-":"+"})]})})]},s),z.has(s)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("hr",{className:"property-divider"}),R[s]&&R[s].length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"matching-title",children:"Matching properties"}),(0,u.jsxs)("div",{className:"expanded-section-titles",children:[(0,u.jsx)("p",{className:"column",id:"column1",children:"#"}),(0,u.jsx)("p",{className:"column",id:"column2",children:"Address"}),(0,u.jsx)("p",{className:"column",id:"column3",children:"Postcode"}),(0,u.jsx)("p",{className:"column",id:"column4",children:"Price"}),(0,u.jsx)("p",{className:"column",id:"column5",children:"Bedrooms"}),(0,u.jsx)("p",{className:"column",id:"column6"})]})]}):"",(0,u.jsx)("div",{className:"expanded-section",children:R[s]&&R[s].length>0?R[s].map(((s,a)=>(0,u.jsxs)("div",{className:"expanded-content",children:[(0,u.jsxs)("p",{className:"column",id:"column1",onClick:()=>h(s.url),children:[a+1," "]}),(0,u.jsx)("p",{className:"column",id:"column2",onClick:()=>h(s.url),children:s.displayAddress}),(0,u.jsx)("p",{className:"column",id:"column3",onClick:()=>h(s.url),children:s.postcode}),(0,u.jsx)("p",{className:"column",id:"column4",onClick:()=>h(s.url),children:s.price}),(0,u.jsx)("p",{className:"column",id:"column5",onClick:()=>h(s.url),children:s.bedrooms}),(0,u.jsx)("div",{className:"column",id:"column6",children:o.some((e=>e.rightmove_id===s.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Saved"})}):d.some((e=>e.rightmove_id===s.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Archived"})}):(0,u.jsx)("div",{className:"heart-icon",onClick:()=>(async(e,s)=>{if((0,n.Hb)()){const t=[{rightmove_id:e.rightmove_id,postcode:e.postcode,address:s.address,agent:e.agent,type:e.type,addedOn:e.addedOn,propertyType:e.propertyType,price:e.price,bathrooms:e.bathrooms,bedrooms:e.bedrooms,let_available_date:e.let_available_date,date_added_db:e.date_added_db,url:e.url,current_epc:e.current_epc,potential_epc:e.potential_epc,action:"Saved",added_revised:e.added_revised,reduced_revised:e.reduced_revised}];try{const e=await l.Z.post("/api/epc_favourite/",t,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",e.data),_(1),N(),c()}catch(a){console.error("Error saving favourite:",a)}}else k("/access-denied"),console.log("logged out")})(s,e)})})]},a))):(0,u.jsxs)("p",{className:"denied",children:["No matching properties found for ",e.address,"."]})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):""})]}):"":(0,u.jsx)("h3",{className:"sub-title",children:"Start new search to see results"})})})]}),(0,u.jsx)(x,{savedActionShow:p,handleSavedActionClose:j,setLeadGenSection:g,latestFavourites:v})]})};var g=e=>{let{propertyRemoveShow:s,handleRemovePropertyClose:a,removeProperty:t}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsxs)("div",{className:"core-body",children:[(0,u.jsx)("h3",{className:"message",children:"Are you sure you don't want to see these properties any more?"}),(0,u.jsx)("h3",{className:"sub-message",children:"Once you do this, they won't appear in your latest or saved properties."})]}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:t,children:"Remove"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Go back"})]})]})})})})})},v=a(18622);var N=e=>{let{archivedActionShow:s,handleArchivedActionClose:a,setLeadGenSection:t,latestFavourites:l}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsx)("div",{className:"core-body",children:(0,u.jsxs)("h3",{className:"message",children:["We've added ",1===l?`${l} property`:`${l} properties`," to your archived list \ud83e\udd1d"]})}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:()=>{t("Archived properties"),a()},children:"Go to archived"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})},_=a(21830),y=a.n(_);var b=e=>{let{savedProperties:s,userData:a,csvData:r,setCsvData:c,getCurrentDate:o,handleVisitUrl:d,loadUserData:p,setSavedProperties:x,setLatestFavourites:j,latestFavourites:g,setLeadGenSection:_}=e;const b=(0,i.s0)(),[f,k]=(0,t.useState)("Grid"),[C,w]=(0,t.useState)({}),[S,B]=(0,t.useState)({}),[F,A]=(0,t.useState)({}),[T,D]=(0,t.useState)([]),[E,L]=(0,t.useState)(!1),[$,P]=(0,t.useState)([]),[M,U]=(0,t.useState)([]),[Z,O]=(0,t.useState)("Live"),[W,I]=(0,t.useState)(!1),[z,H]=(0,t.useState)(""),[R,Y]=(0,t.useState)(""),[G,V]=(0,t.useState)(""),[q,J]=(0,t.useState)(""),[K,X]=(0,t.useState)(""),[Q,ee]=(0,t.useState)(""),[se,ae]=(0,t.useState)(""),[te,le]=(0,t.useState)([]),[ie,ne]=(0,t.useState)([]),[re,ce]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(s){let e=s;z&&(e=e.filter((e=>e.channel===z))),R&&(e=e.filter((e=>e.postcode.toUpperCase().startsWith(R.toUpperCase())))),G&&(e=e.filter((e=>parseInt(e.bedrooms)>=parseInt(G)))),q&&(e=e.filter((e=>parseInt(e.bedrooms)<=parseInt(q)))),K&&(e=e.filter((e=>parseInt(e.price_numeric)>=parseInt(K)))),Q&&(e=e.filter((e=>parseInt(e.price_numeric)<=parseInt(Q)))),se&&(e=e.filter((e=>parseInt(e.live_tracking)===parseInt(se))));const a=e.filter((e=>"Off Market"===e.market_status)),t=e.filter((e=>"Live"===e.market_status));U(a),P(t)}}),[s,z,R,G,q,K,Q,se]),(0,t.useEffect)((()=>{"rent"===z?(le(de),ne(de)):"sale"===z?(le(me),ne(me)):(le([]),ne([]))}),[z]);const oe=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"}],de=[...Array.from({length:9},((e,s)=>({value:""+(100+100*s),label:"\xa3"+(100+100*s)}))),...Array.from({length:5},((e,s)=>({value:""+(1e3+200*s),label:"\xa3"+(1e3+200*s)}))),...Array.from({length:8},((e,s)=>({value:""+(2e3+250*s),label:"\xa3"+(2e3+250*s)}))),...Array.from({length:8},((e,s)=>({value:""+(4e3+500*s),label:"\xa3"+(4e3+500*s)}))),...Array.from({length:4},((e,s)=>({value:""+(8e3+1e3*s),label:"\xa3"+(8e3+1e3*s)}))),...Array.from({length:4},((e,s)=>({value:""+(12e3+2e3*s),label:"\xa3"+(12e3+2e3*s)})))],me=[...Array.from({length:9},((e,s)=>({value:""+(1e5+1e5*s),label:`\xa3${(1e5+1e5*s).toLocaleString()}`}))),...Array.from({length:5},((e,s)=>({value:""+(1e6+2e5*s),label:`\xa3${(1e6+2e5*s).toLocaleString()}`}))),...Array.from({length:8},((e,s)=>({value:""+(2e6+25e4*s),label:`\xa3${(2e6+25e4*s).toLocaleString()}`}))),...Array.from({length:8},((e,s)=>({value:""+(4e6+5e5*s),label:`\xa3${(4e6+5e5*s).toLocaleString()}`}))),...Array.from({length:4},((e,s)=>({value:""+(8e6+1e6*s),label:`\xa3${(8e6+1e6*s).toLocaleString()}`}))),...Array.from({length:6},((e,s)=>({value:""+(12e6+2e6*s),label:`\xa3${(12e6+2e6*s).toLocaleString()}`})))];(0,t.useEffect)((()=>{if(T){const e=(e=>e.map(((e,s)=>({item:s+1,url:e.url,address:e.address,postcode:e.postcode,addressPostcode:`${e.address}, ${e.postcode}`,addedOn:e.added_revised,property_type:e.property_type,price:e.price,bedrooms:e.bedrooms,bathrooms:e.bathrooms,let_available_date:e.let_available_date,date_added:e.date_added_db,agent:e.agent,channel:e.channel,owner_name:e.owner_name,owner_email:e.owner_email,owner_mobile:e.owner_mobile,emails_sent:e.emails_sent,letters_sent:e.letters_sent,hand_cards:e.hand_cards,notes:e.notes}))))(T);c(e)}}),[T]);const[he,pe]=(0,t.useState)(!1),ue=e=>{pe(!0),D([])},xe=e=>{const s=["th","st","nd","rd"],a=new Date(e),t=a.getDate(),l=a.getMonth(),i=a.getFullYear();return`${t}${s[t<10||t>20?t%10:0]||s[0]} ${["January","February","March","April","May","June","July","August","September","October","November","December"][l]} ${i}`};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"results-block",children:s&&s.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"property-insight-nav",children:(0,u.jsxs)("div",{className:"property-insight-buttons",children:[(0,u.jsx)("h3",{className:"insight-button "+("Live"===Z?"active":"inactive"),id:"left",onClick:()=>O("Live"),children:"Live properties"}),(0,u.jsx)("h3",{className:"insight-button "+("Off Market"===Z?"active":"inactive"),id:"right",onClick:()=>O("Off Market"),children:"Withdrawn or sold"})]})}),(0,u.jsxs)("div",{className:"title-section",children:[(0,u.jsxs)("h3",{className:"sub-title",children:["You have ",$&&"Live"===Z?`${$.length} on market`:M&&"Off Market"===Z?`${M.length} off market`:""," properties ready to be extracted"]}),(0,u.jsxs)("div",{className:"tracking-actions",children:[a&&a.company_favourites&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.ZP,{className:"select-dropdown",options:[{value:"export",label:"Extract"},{value:"archive",label:"Archive"},{value:"letter",label:"Letters"}],onChange:e=>{"export"===e.value&&(document.querySelector(".csv-link").click(),D([])),"archive"===e.value?(async e=>{if((0,n.Hb)())try{const s=await l.Z.put("/api/epc_favourite/update_favourites/",{favourite_ids:e},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",s.data),j(e.length),p(),ue(),D([])}catch(s){console.error("Error updating favorite:",s)}else b("/access-denied"),console.log("logged out")})(T.map((e=>e.rightmove_id))):"letter"===e.value&&(async e=>{if((0,n.Hb)())try{const s=await l.Z.put("/api/epc_favourite/move_to_letters/",{favourite_ids:e},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",s.data),y().fire({title:"\ud83d\ude0e action complete",text:`${e.length} properties prepared for outbound letters`,confirmButtonText:"Go to letter hub",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}).then((e=>{e.isConfirmed&&_("Letter campaigns")})),p(),D([])}catch(s){console.error("Error updating favorite:",s)}else b("/access-denied"),console.log("logged out")})(T.map((e=>e.rightmove_id)))},isSearchable:!1,placeholder:"Select an action"}),(0,u.jsx)(h.CSVLink,{data:r||[],className:"export csv-link",filename:`Wittle Lead Generator Extract - ${o()}.csv`,style:{display:"none"}})]}),(0,u.jsx)("div",{className:"filter-icon "+(W?"active":"inactive"),onClick:()=>I(!W),style:{backgroundColor:W?"#1A276C":"inherit"}})]})]}),W?(0,u.jsxs)("div",{className:"filter-row-section "+(W?"active":"inactive"),children:[(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Channel"}),(0,u.jsxs)("select",{onChange:e=>H(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select..."}),(0,u.jsx)("option",{value:"sale",children:"Sale"}),(0,u.jsx)("option",{value:"rent",children:"Rent"})]})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Postcode"}),(0,u.jsx)("input",{className:"filter-input",onChange:e=>Y(e.target.value)})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Bedrooms"}),(0,u.jsxs)("select",{className:"small",value:G,onChange:e=>V(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Min"}),oe.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,u.jsxs)("select",{className:"small",value:q,onChange:e=>J(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Max"}),oe.filter((e=>e.value>=G)).map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Price"}),(0,u.jsxs)("select",{className:"small",value:K,onChange:e=>X(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Min"}),te.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,u.jsxs)("select",{className:"small",value:Q,onChange:e=>ee(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Max"}),ie.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Tracking"}),(0,u.jsxs)("select",{onChange:e=>ae(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"All"}),(0,u.jsx)("option",{value:"1",children:"Yes"}),(0,u.jsx)("option",{value:"0",children:"No"})]})]}),(0,u.jsx)("button",{className:"clear-filters",onClick:()=>{H(""),Y(""),V(""),J(""),ae(""),X(""),ee("")},children:"Clear"})]}):"",(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:"Live"===Z&&T&&$?T.length===$.length&&$.length>0:!("Off Market"!==Z||!T||!M)&&(T.length===M.length&&M.length>0),onChange:e=>{e.target.checked?("Live"===Z?D($):"Off Market"===Z&&D(M),L(!0)):(D([]),L(!1))}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Channel"})}),(0,u.jsx)("div",{id:"column7",className:"column",children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9saved",className:"column",children:(0,u.jsx)("h5",{children:"Date saved"})}),(0,u.jsx)("div",{id:"column10saved",className:"column",children:(0,u.jsx)("h5",{})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details archive "+(W?"active":"inactive"),children:("Live"===Z?$:M).map(((e,a)=>{const t=C[e.rightmove_id],i=S[e.rightmove_id],r=T.some((s=>s.rightmove_id===e.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(r?"highlighted-row":""),children:[(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:T.some((s=>s.rightmove_id===e.rightmove_id)),onChange:a=>((e,a)=>{const t={...a};console.log("selected row ->",a),e.target.checked?D((e=>[...e,t])):D((e=>e.filter((e=>e.rightmove_id!==t.rightmove_id)))),L(s.length===T.length)})(a,e)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:a+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:e.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:null===e.added_revised?"N/a":e.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:null===e.reduced_revised?"N/a":e.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:e.channel})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:e.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:e.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9saved",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:xe(e.date_added)})}),"Grid"===f?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"column",id:"column10saved",onClick:()=>(e=>{const a=s.find((s=>s.rightmove_id===e));w((s=>({...s,[e]:!s[e]}))),C[e]||F[e]||A((s=>({...s,[e]:{owner_name:a.owner_name||"",owner_email:a.owner_email||"",owner_mobile:a.owner_mobile||null,emails_sent:a.emails_sent||null,letters_sent:a.letters_sent||null,hand_cards:a.hand_cards||null,notes:a.notes||"",live_tracking:a.live_tracking||0}})))})(e.rightmove_id),children:(0,u.jsx)("h5",{className:"expander",children:t?"v":"^"})})}):"Table"===f?(0,u.jsx)(u.Fragment,{}):""]}),t&&!re?(0,u.jsxs)("div",{className:"expanded-tracking-details",children:[(0,u.jsxs)("div",{className:"expanded-tracking-content",children:[(0,u.jsxs)("div",{className:"tracking-left",children:[(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Owner name: "}),i?(0,u.jsx)("input",{type:"text",value:F[e.rightmove_id].owner_name||"",onChange:s=>A({...F,[e.rightmove_id]:{...F[e.rightmove_id],owner_name:s.target.value}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.owner_name})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Owner email: "}),i?(0,u.jsx)("input",{type:"text",value:F[e.rightmove_id].owner_email||"",onChange:s=>A({...F,[e.rightmove_id]:{...F[e.rightmove_id],owner_email:s.target.value}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.owner_email})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Owner phone: "}),i?(0,u.jsx)("input",{type:"text",value:F[e.rightmove_id].owner_mobile||null,onChange:s=>A({...F,[e.rightmove_id]:{...F[e.rightmove_id],owner_mobile:s.target.value}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.owner_mobile})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Currently Tracking: "}),i?(0,u.jsx)("input",{type:"checkbox",checked:!!F[e.rightmove_id].live_tracking,onChange:s=>A({...F,[e.rightmove_id]:{...F[e.rightmove_id],live_tracking:s.target.checked?1:0}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:1===e.live_tracking?"Yes":"No"})]})]}),(0,u.jsxs)("div",{className:"tracking-middle",children:[(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Emails sent: "}),i?(0,u.jsx)("input",{type:"text",value:F[e.rightmove_id].emails_sent||null,onChange:s=>A({...F,[e.rightmove_id]:{...F[e.rightmove_id],emails_sent:s.target.value}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.emails_sent})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Letters sent: "}),i?(0,u.jsx)("input",{type:"text",value:F[e.rightmove_id].letters_sent||null,onChange:s=>A({...F,[e.rightmove_id]:{...F[e.rightmove_id],letters_sent:s.target.value}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.letters_sent})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Hand written cards: "}),i?(0,u.jsx)("input",{type:"text",value:F[e.rightmove_id].hand_cards||null,onChange:s=>A({...F,[e.rightmove_id]:{...F[e.rightmove_id],hand_cards:s.target.value}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.hand_cards})]})]}),(0,u.jsx)("div",{className:"tracking-right",children:(0,u.jsx)("div",{className:"tracking-row",children:i?(0,u.jsx)("textarea",{placeholder:"Notes",value:F[e.rightmove_id].notes||"",onChange:s=>A({...F,[e.rightmove_id]:{...F[e.rightmove_id],notes:s.target.value}})}):(0,u.jsx)("h3",{className:"row-result",children:e.notes})})})]}),(0,u.jsxs)("div",{className:"expanded-tracking-actions",children:[(0,u.jsx)("button",{className:"save",onClick:()=>{i?(async e=>{if(ce(!0),(0,n.Hb)())try{await l.Z.patch(`/api/epc_favourite/update_favourites/${e}/`,F[e],{headers:{Authorization:`Bearer ${(0,n.hP)()}`}}),await p(),B((s=>({...s,[e]:!1})))}catch(s){console.error("Error updating favourite:",s)}finally{ce(!1)}else b("/access-denied"),console.log("logged out"),ce(!1)})(e.rightmove_id):((e,s)=>{S[e]||A((a=>({...a,[e]:{owner_name:s.owner_name||"",owner_email:s.owner_email||"",owner_mobile:s.owner_mobile||null,emails_sent:s.emails_sent||null,letters_sent:s.letters_sent||null,hand_cards:s.hand_cards||null,notes:s.notes||"",live_tracking:s.live_tracking||0}}))),B((s=>({...s,[e]:!s[e]})))})(e.rightmove_id,e)},children:i?"Save":"Edit"}),(0,u.jsx)("button",{className:"delete",onClick:()=>(async e=>{if((0,n.Hb)())try{await l.Z.delete("/api/epc_favourite/delete_favourite/",{headers:{Authorization:`Bearer ${(0,n.hP)()}`},data:{rightmove_id:e}}),p()}catch(s){console.error("Error updating favourite:",s)}else b("/access-denied"),console.log("logged out")})(e.rightmove_id),children:"Delete"})]})]}):t&&re?(0,u.jsx)("div",{className:"expanded-tracking-details",children:(0,u.jsx)("div",{className:"expanded-tracking-content",children:(0,u.jsx)("div",{className:"loading-tracking",children:(0,u.jsx)(m.Z,{})})})}):"",(0,u.jsx)("hr",{className:"property-divider"})]})}))})]})]}):(0,u.jsx)("h3",{className:"sub-title",children:"You haven't saved any properties yet! Once you've saved some properties, you'll be able to extract them."})}),(0,u.jsx)(N,{archivedActionShow:he,handleArchivedActionClose:()=>{pe(!1)},setLeadGenSection:_,latestFavourites:g})]})};var f=e=>{let{hiddenSavedShow:s,handleHiddenSavedClose:a,setLeadGenSection:t,latestFavourites:l}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsx)("div",{className:"core-body",children:(0,u.jsxs)("h3",{className:"message",children:["We've moved ",1===l?`${l} property`:`${l} properties`," back to your saved list \ud83e\udd1d"]})}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:()=>{t("Saved properties"),a()},children:"Go to saved"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})};var k=e=>{let{hiddenProperties:s,handleVisitUrl:a,loadUserData:r,setLeadGenSection:c,latestFavourites:o,setLatestFavourites:d}=e;const m=(0,i.s0)(),[h,p]=(0,t.useState)([]),[x,j]=(0,t.useState)(!1),[g,v]=(0,t.useState)(!1),N=e=>{v(!0),p([])};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"results-block",children:s&&s.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"title-section",children:[(0,u.jsxs)("h3",{className:"sub-title",children:["You have hidden ",s.length," properties"]}),(0,u.jsx)("div",{className:"action-section hidden",children:(0,u.jsx)("div",{className:"save-section",children:(0,u.jsx)("h3",{onClick:()=>(async e=>{if((0,n.Hb)()){console.log(e);const a=e.map((e=>e.rightmove_id));try{const e=await l.Z.delete("/api/epc_favourite/delete_favourite/multiple/",{headers:{Authorization:`Bearer ${(0,n.hP)()}`},data:{rightmove_ids:a}});d(a.length),r(),N(),p([]),console.log("Response:",e.data)}catch(s){console.error("Error deleting favourites:",s)}}else m("/access-denied"),console.log("logged out")})(h),children:"Move properties"})})})]}),(0,u.jsx)("div",{className:"saved-select-row hidden",children:(0,u.jsx)("div",{className:"select-all-box hidden",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:h.length===s.length&&s.length>0,onChange:e=>{e.target.checked?(p(s),j(!0)):(p([]),j(!1))}}),(0,u.jsx)("label",{className:"label"})]})})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Channel"})}),(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsx)("h5",{})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details archive",children:s?s.map(((e,t)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:t+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.property_type})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.agent})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.channel})}),(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:h.some((s=>s.rightmove_id===e.rightmove_id)),onChange:a=>((e,a)=>{const t={...a};e.target.checked?p((e=>[...e,t])):p((e=>e.filter((e=>e.rightmove_id!==t.rightmove_id)))),j(s.length===h.length)})(a,e)}),(0,u.jsx)("label",{className:"label"})]})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):(0,u.jsx)("h3",{className:"sub-title",children:"You don't have any hidden properties. If you're not interested in a property, hide it to remove it from the main results page."})}),(0,u.jsx)(f,{hiddenSavedShow:g,handleHiddenSavedClose:()=>{v(!1)},setLeadGenSection:c,latestFavourites:o})]})};var C=e=>{let{archviedSavedShow:s,handleArchivedSavedClose:a,setLeadGenSection:t,latestFavourites:l}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsx)("div",{className:"core-body",children:(0,u.jsxs)("h3",{className:"message",children:["We've moved ",1===l?`${l} property`:`${l} properties`," back to your saved list \ud83e\udd1d"]})}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:()=>{t("Saved properties"),a()},children:"Go to saved"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})};var w=e=>{let{archivedProperties:s,handleVisitUrl:a,loadUserData:r,setLeadGenSection:c,latestFavourites:o,setLatestFavourites:d}=e;const m=(0,i.s0)(),[h,p]=(0,t.useState)([]),[x,j]=(0,t.useState)(!1),[g,v]=(0,t.useState)(!1),N=e=>{v(!0),p([])};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"results-block",children:s&&s.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"title-section",children:[(0,u.jsxs)("h3",{className:"sub-title",children:["You have archived ",s.length," properties"]}),(0,u.jsx)("div",{className:"action-section hidden",children:(0,u.jsx)("div",{className:"save-section",children:(0,u.jsx)("h3",{onClick:()=>(async e=>{if((0,n.Hb)())try{const s=e.map((e=>e.rightmove_id)),a=await l.Z.put("/api/epc_favourite/update_favourites/archive-to-saved/",{favourite_ids:s},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",a.data),d(s.length),r(),N(),p([])}catch(s){console.error("Error saving favourite:",s)}else m("/access-denied"),console.log("logged out")})(h),children:"Move properties"})})})]}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsxs)("div",{id:"column11",className:"column",children:[(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:h.length===s.length&&s.length>0,onChange:e=>{e.target.checked?(p(s),j(!0)):(p([]),j(!1))}}),(0,u.jsx)("label",{className:"label"})]}),"                "]}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Channel"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details archive",children:s?s.map(((e,t)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:h.some((s=>s.rightmove_id===e.rightmove_id)),onChange:a=>((e,a)=>{const t={...a};e.target.checked?p((e=>[...e,t])):p((e=>e.filter((e=>e.rightmove_id!==t.rightmove_id)))),j(s.length===h.length)})(a,e)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:t+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.property_type})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.channel})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):(0,u.jsx)("h3",{className:"sub-title",children:"You haven't archived any properties yet! Once you've extracted properties to your files, you&apo;ll see them here."})}),(0,u.jsx)(C,{archviedSavedShow:g,handleArchivedSavedClose:e=>{v(!1)},setLeadGenSection:c,latestFavourites:o})]})},S=(a(75985),a(75314)),B=(a(67842),a(69584)),F=a(58340);var A=e=>{let{createTemplateShow:s,handleCreateTemplateClose:a,signature:i,loadUserData:r,templateAction:c,currentTemplate:o,exampleData:d,setCampaignLoading:m}=e;const[h,x]=(0,t.useState)(!1),[j,g]=(0,t.useState)({}),v=[{number:1,title:"Top banner",description:"Profile image",pdf:"https://wittle23images.blob.core.windows.net/letter-pdfs/Wittle%20Letter%20Templates%20-%20core%20examples%20(2).pdf"},{number:2,title:"Top banner",description:"No profile image",pdf:"https://wittle23images.blob.core.windows.net/letter-pdfs/Wittle%20Letter%20Templates%20-%20core%20examples%20(3).pdf"},{number:3,title:"Bottom banner",description:"Profile image",pdf:"https://wittle23images.blob.core.windows.net/letter-pdfs/Wittle%20Letter%20Templates%20-%20core%20examples%20(4).pdf"},{number:4,title:"Bottom banner",description:"No profile image",pdf:"https://wittle23images.blob.core.windows.net/letter-pdfs/Wittle%20Letter%20Templates%20-%20core%20examples%20(5).pdf"},{number:5,title:"No banner",description:"Profile image",pdf:"https://wittle23images.blob.core.windows.net/letter-pdfs/Wittle%20Letter%20Templates%20-%20core%20examples%20(6).pdf"},{number:6,title:"No banner",description:"No profile image",pdf:"https://wittle23images.blob.core.windows.net/letter-pdfs/Wittle%20Letter%20Templates%20-%20core%20examples%20(7).pdf"}],[N,_]=(0,t.useState)({template_name:"",template_body_1:"",template_body_2:"",template_body_3:"",template_body_4:"",template_body_5:"",template_type:"Option 1",sender_name:!0,sender_company:!0,sender_role:!0,sender_mobile:!0,sender_landline:!0,sender_email:!0,sender_footer:!0,sender_website:!0,logo_width:250,logo_height:50,logo_position:"Right",opening:"Dear ",closing:"Best wishes"});(0,t.useEffect)((()=>{"edit"===c?_(o):"new"===c&&_({template_name:"",template_body_1:"",template_body_2:"",template_body_3:"",template_body_4:"",template_body_5:"",template_type:"Option 1",sender_name:!0,sender_company:!0,sender_role:!0,sender_mobile:!0,sender_landline:!0,sender_email:!0,sender_footer:!0,sender_website:!0,logo_width:250,logo_height:50,logo_position:"Right",opening:"Dear ",closing:"Best wishes"})}),[c]);const b=e=>{const{name:s,value:a}=e.target;if(N){const e=2200-Object.keys(N).reduce(((e,a)=>a!==s?e+(N[a]&&N[a].length||0):e),0),t=a.slice(0,Math.max(0,e));_((e=>({...e,[s]:t})))}},f=async()=>{if(!(()=>{const e={};let s=!0;return N.template_name||(e.template_name="* Template name is required",s=!1),g(e),s})())return;if(!(e=>["first_name","last_name","company_name","title","role","mobile","landline","address","email","logo","digital_signature"].every((s=>{const a=e[s];return"string"===typeof a?""!==a.trim():Boolean(a)})))(i)){a();await y().fire({title:"\ud83e\udee1 Wittle alerts",text:"You need to populate your signatures before you can submit this template",icon:"warning",confirmButtonText:"OK, thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"No thanks",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}});return}m(!0),console.log("template ->",N);const e={...N};console.log("template body ->",e);try{const s=await l.Z.post("/api/letter_templates/add/",e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Letter template ->",s),await r(),a(),y().fire({title:"\ud83d\ude0e Action complete",text:"New template added successfully",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}catch(s){console.error("Error adding template:",s),y().fire({title:"\ud83e\udee1 Wittle alerts",text:"There was an issue adding your template",confirmButtonText:"Try Again \ud83d\udd04",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}finally{m(!1)}};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"create-template-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"template-wrapper",children:[(0,u.jsxs)("div",{className:"template-header",children:[(0,u.jsx)("h1",{children:"Wittle letter template builder"}),(0,u.jsx)("div",{className:"close",onClick:a,children:"x"})]}),(0,u.jsx)("div",{className:"template-body",children:(0,u.jsxs)("div",{className:"template-inputs",children:[(0,u.jsxs)("div",{className:"input-top",children:[(0,u.jsx)("h3",{className:"template-name",children:"Template name"}),(0,u.jsx)("input",{className:"template-name-input",value:N.template_name,onChange:e=>_({...N,template_name:e.target.value})})]}),j.template_name&&(0,u.jsx)("div",{id:"templateNameError",className:"error-text",children:j.template_name}),(0,u.jsxs)("div",{className:"input-second",children:[(0,u.jsx)("h3",{className:"template-name",children:"Template type"}),(0,u.jsx)("div",{className:"template-array",children:v?v.map((e=>(0,u.jsxs)("div",{className:"template-box",children:[(0,u.jsxs)("div",{className:"template-button",onClick:()=>_({...N,template_type:`Option ${e.number}`}),style:{border:N.template_type===`Option ${e.number}`?"2px solid #ED6B86":"0.5px solid #1A276C"},children:[(0,u.jsx)("h1",{children:e.number}),(0,u.jsx)("h3",{children:e.title}),(0,u.jsx)("h3",{children:e.description})]}),(0,u.jsx)("h3",{style:{cursor:"pointer"},onClick:()=>window.open(e.pdf,"_blank"),children:"See example"})]},e.number))):""})]}),(0,u.jsxs)("div",{className:"input-details",children:[(0,u.jsx)("div",{className:"sub-title",children:(0,u.jsx)("h3",{children:"Details"})}),(0,u.jsxs)("div",{className:"details-array",children:[(0,u.jsxs)("div",{className:"detail-line",children:[(0,u.jsx)("h3",{children:"Intro"}),(0,u.jsx)("input",{className:"detail-inputs",value:N.opening,onChange:e=>_({...N,opening:e.target.value})})]}),(0,u.jsxs)("div",{className:"detail-line",children:[(0,u.jsx)("h3",{children:"Outro"}),(0,u.jsx)("input",{className:"detail-inputs",value:N.closing,onChange:e=>_({...N,closing:e.target.value})})]})]})]}),(0,u.jsxs)("div",{className:"input-body",children:[(0,u.jsxs)("div",{className:"sub-title",children:[(0,u.jsx)("h3",{children:"Template body"}),N?(0,u.jsxs)("div",{className:"characters",children:[2200-((N.template_body_1?N.template_body_1.length:0)+(N.template_body_2?N.template_body_2.length:0)+(N.template_body_3?N.template_body_3.length:0)+(N.template_body_4?N.template_body_4.length:0)+(N.template_body_5?N.template_body_5.length:0))," characters remaining"]}):""]}),(0,u.jsxs)("div",{className:"text-block",children:[(0,u.jsx)("div",{className:"sub-sub-title",children:(0,u.jsx)("h3",{children:"Paragraph 1"})}),(0,u.jsx)("textarea",{name:"template_body_1",value:N.template_body_1,className:"input-text-body",onChange:b}),(0,u.jsx)("div",{className:"sub-sub-title",children:(0,u.jsx)("h3",{children:"Paragraph 2"})}),(0,u.jsx)("textarea",{name:"template_body_2",value:N.template_body_2,className:"input-text-body",onChange:b}),(0,u.jsx)("div",{className:"sub-sub-title",children:(0,u.jsx)("h3",{children:"Paragraph 3"})}),(0,u.jsx)("textarea",{name:"template_body_3",value:N.template_body_3,className:"input-text-body",onChange:b}),(0,u.jsx)("div",{className:"sub-sub-title",children:(0,u.jsx)("h3",{children:"Paragraph 4"})}),(0,u.jsx)("textarea",{name:"template_body_4",value:N.template_body_4,className:"input-text-body",onChange:b}),(0,u.jsx)("div",{className:"sub-sub-title",children:(0,u.jsx)("h3",{children:"Paragraph 5"})}),(0,u.jsx)("textarea",{name:"template_body_5",value:N.template_body_5,className:"input-text-body",onChange:b})]})]}),(0,u.jsx)("div",{className:"save-section",children:"new"===c?(0,u.jsx)("button",{onClick:()=>f(),children:"Save template"}):"edit"===c?(0,u.jsx)("button",{onClick:()=>(async()=>{x(!0);try{const e=await l.Z.put(`/api/letter_templates/edit/${N.id}/`,N,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Letter template ->",e),r(),a(),y().fire({title:"\ud83d\ude0e action complete",text:"Template updated",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}catch(e){console.error("Error updating template:",e)}finally{x(!1)}})(),children:"Save template"}):""})]})})]})})})})})};a(25215);var T=e=>{let{createCampaignShow:s,handleCreateCampaignClose:a,letterTemplates:i,loadUserData:r,editData:c}=e;const[o,d]=(0,t.useState)(1),[m,h]=(0,t.useState)({campaign_name:"",campaign_status:"Not launched",campaign_start_date:null,campaign_type:"1 step",template_names:["","","","",""],template_dates:[null,null,null,null,null]});(0,t.useEffect)((()=>{if("None"!==c){h(c);const e=parseInt(c.campaign_type.split(" ")[0]);d(e)}else if(m){const e=parseInt(m.campaign_type.split(" ")[0]);d(e)}}),[c]);return(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"create-campaign-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsxs)("div",{className:"campaign-wrapper",children:[(0,u.jsxs)("div",{className:"campaign-header",children:[(0,u.jsx)("h2",{children:"Wittle campaign builder"}),(0,u.jsx)("div",{className:"close",onClick:a,children:"x"})]}),(0,u.jsx)("div",{className:"campaign-sub-header",children:(0,u.jsx)("h3",{children:"Set up your campaign sequences. Select your templates and the dates you'd like them to be sent \ud83d\udce9. You can add up to 5 steps."})}),(0,u.jsxs)("div",{className:"campaign-title-section",children:[(0,u.jsx)("h3",{children:"Campaign name"}),(0,u.jsx)("input",{name:"campaign_name",value:m.campaign_name,onChange:e=>{const{name:s,value:a}=e.target;h({...m,[s]:a})}})]}),(0,u.jsxs)("div",{className:"campaign-headers",children:[(0,u.jsx)("h3",{className:"step-header",children:"Step"}),(0,u.jsx)("h3",{className:"template-header",children:"Template"}),(0,u.jsx)("h3",{className:"date-title",children:"Send date"})]}),(0,u.jsxs)("div",{className:"campaign-stages",children:[o&&Array.from({length:o}).map(((e,s)=>(0,u.jsxs)("div",{className:"campaign-step",children:[(0,u.jsxs)("h3",{className:"step-column",children:["Step ",s+1]}),(0,u.jsxs)("select",{className:"template-dropdown",value:m[`template_${s+1}_name`]||"",onChange:e=>((e,s)=>{h({...m,[`template_${e+1}_name`]:s})})(s,e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select Template"}),i?i.map(((e,s)=>(0,u.jsx)("option",{value:e.template_name,children:e.template_name},s))):""]}),0===s?(0,u.jsx)("div",{className:"on-launch",children:"On launch"}):(0,u.jsxs)("div",{className:"date-input-container",children:[(0,u.jsx)("input",{className:"date-input",type:"number",min:"0",value:m[`template_${s+1}_date`]||"",onChange:e=>((e,s)=>{0!==e&&h({...m,[`template_${e+1}_date`]:s})})(s,e.target.value)}),(0,u.jsx)("span",{className:"days-later",children:"days later"})]}),o&&o>1&&s===o-1&&(0,u.jsx)("h3",{className:"remove",onClick:()=>(()=>{const e=o;if(e>1){const s={campaign_type:`${e-1} step${e-1>1?"s":""}`};s[`template_${e}_name`]="",s[`template_${e}_date`]=null,h((e=>({...e,...s}))),d(e-1)}})(),children:"\u274c"})]},s))),(0,u.jsxs)("div",{className:"footer-buttons",children:[o&&o<5&&(0,u.jsx)("button",{className:"add-step",onClick:()=>{const e=o;if(e<5){const s=`${e+1} step${e+1>1?"s":""}`;h((a=>({...a,campaign_type:s,[`template_${e+1}_name`]:"",[`template_${e+1}_date`]:""}))),d(e+1)}},children:"Add Step"}),"None"===c?(0,u.jsx)("button",{className:"save-campaign",onClick:async()=>{if((()=>{let e=!0;return i&&0===i.length?(y().fire({title:"\ud83e\udee1 Wittle alerts",text:"You need to save some templates before you can save a campaign",icon:"warning",confirmButtonText:"OK, thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}}),e=!1):m.campaign_name?m.template_1_name||(y().fire({title:"\ud83e\udee1 Wittle alerts",text:"Template name for step 1 is required.",icon:"warning",confirmButtonText:"OK, thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}}),e=!1):(y().fire({title:"\ud83e\udee1 Wittle alerts",text:"You need a campaign name to save a campaign",icon:"warning",confirmButtonText:"OK, thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}}),e=!1),e})())try{await l.Z.post("/api/letter_campaigns/add/",m,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});r(),a(),y().fire({title:"\ud83d\ude0e action complete",text:"Campaign saved",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}catch(e){console.error("Failed to save the campaign",e),y().fire("Error","There was an issue saving the campaign.","error")}else a()},children:"Save Campaign"}):(0,u.jsx)("button",{className:"save-campaign",onClick:async()=>{console.log("edit campaign id ->",c.id);try{await l.Z.put(`/api/letter_campaigns/edit/${c.id}/`,m,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});r(),a(),y().fire({title:"\ud83d\ude0e action complete",text:"Campaign updated",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}catch(e){console.error("Failed to save the campaign",e),y().fire("Error","There was an issue updating the campaign.","error")}},children:"Update Campaign"})]})]})]})})})};var D=e=>{let{letterTab:s,setLetterTab:a,letterCampaigns:i,loadUserData:r,letterTemplates:c,letterProperties:o,signature:d,editCredts:h,setEditCredits:p,initiateCheckoutSession:x,creditValue:j,addCreditValue:g,availableCredits:v}=e;const[N,_]=(0,t.useState)("Overview"),[b,f]=(0,t.useState)(""),[k,C]=(0,t.useState)("Leads"),[w,S]=(0,t.useState)(!1),[A,D]=(0,t.useState)([]),[E,L]=(0,t.useState)(!1),[$,P]=(0,t.useState)(),[M,U]=(0,t.useState)(),[Z,O]=(0,t.useState)(),[W,I]=(0,t.useState)(!1),[z,H]=(0,t.useState)(0),[R,Y]=(0,t.useState)(""),[G,V]=(0,t.useState)(""),[q,J]=(0,t.useState)([]);(0,t.useEffect)((()=>{if(Z&&o){let e=Z.map((e=>{const s=o.find((s=>s.rightmove_id===e.target_rightmove_id));return{...e,market_status:s?s.market_status:"Unknown",removed_date:s?s.week_removed:"N/a"}}));R&&(e=e.filter((e=>e.market_status===R))),G&&(e=e.filter((e=>e.status===G))),J(e)}}),[Z,o,R,G]);(0,t.useEffect)((()=>{if(o&&b){const e=o.filter((e=>e.letter_campaign===b.campaign_name)),s=o.filter((e=>"None"===e.letter_campaign));P(e),console.log("properties in campaign ->",e),console.log("properties not in campaign ->",s),U(s)}}),[o]);const K=e=>{S(!0)},X=()=>{S(!1)},Q=e=>{_("Specific"),f(e),console.log("selected campaign ->",e);const s=o.filter((s=>s.letter_campaign===e.campaign_name)),a=o.filter((e=>"None"===e.letter_campaign));P(s),U(a),console.log("properties in campaign ->",s),console.log("properties not in campaign ->",a)};(0,t.useEffect)((()=>{b&&"Live"===b.campaign_status&&(async()=>{try{const e=b.campaign_name,s=await l.Z.get("/api/campaign_tracking/",{params:{campaign_name:e},headers:{Authorization:`Bearer ${(0,n.hP)()}`}});O(s.data)}catch(e){console.error("Error fetching campaign analytics:",e)}})()}),[b]);const ee=e=>{const s=["th","st","nd","rd"],a=new Date(e),t=a.getDate(),l=a.getMonth(),i=a.getFullYear();return`${t}${s[t<10||t>20?t%10:0]||s[0]} ${["January","February","March","April","May","June","July","August","September","October","November","December"][l]} ${i}`};return(0,u.jsx)(u.Fragment,{children:N&&"Overview"===N&&!W?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"top-line",children:[(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("My signatures"),style:{color:"My signatures"===s?"white":"#1A276C",backgroundColor:"My signatures"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"My signatures"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("Templates"),style:{color:"Templates"===s?"white":"#1A276C",backgroundColor:"Templates"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Templates"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("Campaigns"),style:{color:"Campaigns"===s?"white":"#1A276C",backgroundColor:"Campaigns"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Campaigns"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("Home"),style:{color:"Home"===s?"white":"#1A276C",backgroundColor:"Home"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Home"})]}),h?(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("input",{type:"number",className:"credit-input",value:j,onChange:g}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>x(j),children:"Add"}),(0,u.jsx)("h3",{className:"close-credits",onClick:()=>p(!1),children:"\u274c"})]}):(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("h3",{className:"credit-balance",children:v?`Current balance \xa3${v}`:""}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>p(!0),children:"Top up"})]})]}),(0,u.jsxs)("div",{className:"action-section letter",children:[i?(0,u.jsxs)("h3",{className:"template-total",children:["You have ",i.length," saved campaigns"]}):(0,u.jsx)("h3",{className:"template-total",children:"Create some campaigns so you can see them here"}),(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:()=>K(),children:"New campaign "})]})]}),(0,u.jsx)(T,{createCampaignShow:w,handleCreateCampaignClose:X,letterTemplates:c,loadUserData:r,editData:"None"}),(0,u.jsx)("div",{className:"template-list",children:(0,u.jsxs)("div",{className:"template-table",children:[(0,u.jsxs)("div",{className:"template-headers",children:[(0,u.jsx)("h3",{id:"column1",children:"#"}),(0,u.jsx)("h3",{id:"column2",children:"Name"}),(0,u.jsx)("h3",{id:"column3",children:"Type"}),(0,u.jsx)("h3",{id:"column4-campaign",children:"Status"}),(0,u.jsx)("h3",{id:"column5-campaign",children:"Launch date"}),(0,u.jsx)("h3",{id:"column6-campaign",children:"Duplicate"}),(0,u.jsx)("h3",{id:"column6-campaign",children:"Delete"})]}),(0,u.jsx)("div",{className:"template-content",children:i?[...i].sort(((e,s)=>e.id-s.id)).map(((e,s)=>(0,u.jsxs)("div",{className:"template-item",children:[(0,u.jsx)("h3",{className:"template-number",id:"column1",onClick:()=>Q(e),children:s+1}),(0,u.jsx)("h3",{className:"template-name",id:"column2",onClick:()=>Q(e),children:e.campaign_name}),(0,u.jsx)("h3",{className:"template-type",id:"column3",onClick:()=>Q(e),children:e.campaign_type}),(0,u.jsx)("h3",{className:"template-status",id:"column4-campaign",onClick:()=>Q(e),children:e.campaign_status}),(0,u.jsx)("h3",{className:"launch-date",id:"column5-campaign",children:e.campaign_start_date?ee(e.campaign_start_date):"N/a"}),(0,u.jsx)("h3",{className:"duplicate",id:"column6-campaign",onClick:()=>(async e=>{console.log("campaign for duplication ->",e);try{if((await y().fire({title:"\ud83e\udee1 Wittle alerts",text:"Are you sure you want to duplicate this campaign?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, duplicate \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"No thanks",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})).isConfirmed){const s=await l.Z.post(`/api/letter_campaigns/duplicate/${e}/`,{},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});r(),y().fire({title:"\ud83d\ude0e Action Complete",text:"Campaign duplicated successfully",icon:"success",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}}),console.log("Duplicate Campaign Response:",s.data)}}catch(s){console.error("Failed to duplicate the campaign:",s),y().fire({title:"\ud83e\udee1 Wittle alerts",text:"There was an issue duplicating the campaign.",icon:"error",confirmButtonText:"Try Again",confirmButtonColor:"#ED6B86",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}})}})(e.id),children:"\ud83d\udcd1"}),(0,u.jsx)("div",{id:"column6-campaign",children:"Live"===e.campaign_status?(0,u.jsx)("h3",{className:"delete"}):(0,u.jsx)("h3",{className:"delete",onClick:()=>(async e=>{try{(await y().fire({title:"\ud83e\udee1 Wittle alerts",text:"Are you sure you want to delete this campaign?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"No thanks",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})).isConfirmed&&(await l.Z.delete(`/api/letter_campaigns/delete/${e.id}/`,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}}),r())}catch(s){console.error("Error deleting template:",s),y().fire({title:"\ud83e\udee1 Wittle alerts",text:"There was an issue deleting the campaign.",icon:"error",confirmButtonText:"Try Again",confirmButtonColor:"#ED6B86",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}})}})(e),children:"\ud83d\uddd1"})})]},s))):""})]})})]}):"Specific"!==N||W?"Specific"===N&&W?(0,u.jsxs)("div",{className:"property-table-loading campaign",children:[(0,u.jsx)(m.Z,{}),(0,u.jsx)("h3",{children:"Hold tight, your campaign is being launched. This may take a few minutes \ud83d\ude80"})]}):"":(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"single-campaign-wrapper",children:(0,u.jsxs)("div",{className:"campaign-detail-header",children:[(0,u.jsxs)("div",{className:"go-back-box",onClick:()=>_("Overview"),children:[(0,u.jsx)("div",{className:"go-back-sign",children:"<"}),(0,u.jsx)("h3",{children:b?b.campaign_name:""})]}),(0,u.jsx)("div",{className:"actions",children:b&&"Live"===b.campaign_status?"":(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:()=>K(),children:"Edit campaign"}),(0,u.jsx)(T,{createCampaignShow:w,handleCreateCampaignClose:X,letterTemplates:c,loadUserData:r,editData:b})]}),(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:()=>(async(e,s,a,t)=>{if(s&&0===s.length)return y().fire({title:"\ud83e\udee1 Wittle alerts",text:"You need to add properties to this campaign before you can launch it",icon:"error",confirmButtonText:"Ok, thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}}),void I(!1);I(!0);const i=parseInt(e.campaign_type.split(" ")[0]),c=i*s.length;if(console.log("funds required for campaign ->",c),c>v)return y().fire({title:"\ud83e\udee1 Wittle alerts",text:`Not enough credit to launch this campaign - you need \xa3${c}`,icon:"error",confirmButtonText:"Ok",confirmButtonColor:"#ED6B86",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}}),void I(!1);const o=[];for(let l=1;l<=i;l++){const s=e[`template_${l}_name`];if(s){const e=a.find((e=>e.template_name===s));e&&o.push({template:e,step:l})}}const d=s.flatMap((e=>o.map((s=>{let{template:a,step:l}=s;const i=e.address.split(",").map((e=>e.trim())).slice(0,4).map((e=>e.toLowerCase().replace(/\b(\w)/g,(e=>e.toUpperCase()))));e.postcode&&i.push(e.postcode);const n=F.renderToStaticMarkup((0,u.jsx)(B.default,{signature:t,selectedTemplate:a,ownerData:e,address:i}));return{step:l,template_name:a.template_name,htmlContent:n,recipient:e}}))));console.log("data for campaign -> ",d);try{const s=await l.Z.post("/api/letter_campaigns/create_campaign/",{campaign:e,sequence_details:d,credits:c},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Campaign processing response ->",s.data),y().fire({title:"\ud83d\ude0e Action complete",text:"Campaign successfully launched! Track progress on the analytics tab \ud83d\udcc8",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}),await r(),I(!1)}catch(m){console.error("Error posting campaign data to Django:",m),y().fire({title:"\ud83e\udee1 Wittle alerts",text:"There was an issue launching your campaign",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}),I(!1)}})(b,$,c,d),children:"Launch campaign"})]})]})})]})}),(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>C("Leads"),style:{color:"Leads"===k?"white":"#1A276C",backgroundColor:"Leads"===k?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Leads"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>C("Analytics"),style:{color:"Analytics"===k?"white":"#1A276C",backgroundColor:"Analytics"===k?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Analytics"})]}),"Leads"===k?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"campaign-lead-section",children:[(0,u.jsxs)("div",{className:"action-section letter",style:{marginTop:"1%",marginRight:"3%"},children:[$&&b&&"Live"===b.campaign_status?(0,u.jsxs)("h3",{className:"lead-message",style:{fontSize:"0.8rem"},children:["You have ",$.length," properties in your campaign"]}):(0,u.jsxs)("h3",{className:"lead-message",style:{fontSize:"0.8rem"},children:["You have ",$.length," properties in your unlaunched campaign"]}),b&&"Live"===b.campaign_status?"":(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:()=>(async(e,s)=>{const a=e.map((e=>e.rightmove_id));0===a.length&&y().fire({title:"\ud83e\udee1 Wittle alerts",text:"You must select the properties you want to remove from your campaign",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}});try{const t=await l.Z.put("/api/epc_favourite/remove_from_campaign/",{property_ids:a,campaign_name:s},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Properties removed to campaign successfully:",t.data),r(),D([]),y().fire({title:"\ud83d\ude0e action complete",text:`${e.length} properties removed from campaign`,confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}catch(t){console.error("Error removing properties to campaign:",t.response.data)}})(A,b),children:"Remove leads "})]})]}),(0,u.jsxs)("div",{className:"results-table",style:{marginTop:"1%"},children:[(0,u.jsxs)("div",{className:"results-headers letter",children:[b&&"Live"===b.campaign_status?"":(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:A&&$?A.length===$.length&&$.length>0:"",onChange:e=>{e.target.checked?(D($),L(!0)):(D([]),L(!1))}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Owner"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details letter campaign",children:$?$.map(((e,s)=>{const a=A.some((s=>s.rightmove_id===e.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(a?"highlighted-row":""),children:[b&&"Live"===b.campaign_status?"":(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:A.some((s=>s.rightmove_id===e.rightmove_id)),onChange:s=>((e,s)=>{const a={...s};console.log("selected row ->",s),e.target.checked?D((e=>[...e,a])):D((e=>e.filter((e=>e.rightmove_id!==a.rightmove_id)))),L(o.length===A.length)})(s,e)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",children:(0,u.jsx)("h5",{children:e.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",children:(0,u.jsx)("h5",{children:e.agent})}),(0,u.jsx)("div",{className:"column",id:"column5",children:(0,u.jsx)("h5",{children:e.owner_name?e.owner_name:"N/a"})})]}),(0,u.jsx)("hr",{className:"property-divider"})]})})):" "})]})]})}):"Analytics"===k?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"campaign-analytics",children:[(0,u.jsx)("div",{className:"action-section letter",style:{marginTop:"1%",marginRight:"3%"},children:b&&"Live"===b.campaign_status?(0,u.jsxs)("h3",{className:"status-title",children:["Status: ",(0,u.jsx)("span",{className:"status-detail",children:"Live"})]}):"Not launched"===b.campaign_status?(0,u.jsxs)("h3",{className:"status-title",children:["Status: ",(0,u.jsx)("span",{className:"status-detail",children:"Not launched"})]}):""}),b&&"Live"===b.campaign_status?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"analytics-overview",children:[(0,u.jsxs)("div",{className:"analytics-box",children:[(0,u.jsx)("h2",{className:"box-title",children:Z?Z.length:""}),(0,u.jsx)("h3",{className:"box-sub-title",children:"In campaign"})]}),(0,u.jsxs)("div",{className:"analytics-box",children:[(0,u.jsx)("h2",{className:"box-title",children:Z?Z.filter((e=>"Sent"===e.status)).length:0}),(0,u.jsx)("h3",{className:"box-sub-title",children:"Sent letters"})]}),(0,u.jsxs)("div",{className:"analytics-box",children:[(0,u.jsx)("h2",{className:"box-title",children:Z?Z.filter((e=>"Scheduled"===e.status||"Sending today"===e.status)).length:0}),(0,u.jsx)("h3",{className:"box-sub-title",children:"Scheduled letters"})]}),(0,u.jsxs)("div",{className:"analytics-box",children:[(0,u.jsx)("h2",{className:"box-title",children:b?ee(b.campaign_start_date):""}),(0,u.jsx)("h3",{className:"box-sub-title",children:"Start date"})]})]}),(0,u.jsxs)("div",{className:"filter-row-section active",children:[(0,u.jsxs)("div",{className:"analytics-filter-wrap",children:[(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Market status"}),(0,u.jsxs)("select",{onChange:e=>Y(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select..."}),(0,u.jsx)("option",{value:"Live",children:"Live"}),(0,u.jsx)("option",{value:"Off market",children:"Off market"})]})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Send status"}),(0,u.jsxs)("select",{onChange:e=>V(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select..."}),(0,u.jsx)("option",{value:"Sent",children:"Sent"}),(0,u.jsx)("option",{value:"Scheduled",children:"Scheduled"})]})]})]}),(0,u.jsx)("button",{className:"clear-filters",onClick:()=>{Y(""),V("")},children:"Clear"})]})]}):"",b&&"Live"===b.campaign_status?(0,u.jsxs)("div",{className:"results-table analytics",children:[(0,u.jsxs)("div",{className:"results-headers analytics",children:[(0,u.jsx)("div",{id:"column1",className:"column",children:(0,u.jsx)("h5",{children:"#"})}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Market status"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Removed date"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Send status"})}),(0,u.jsx)("div",{id:"column7",className:"column",children:(0,u.jsx)("h5",{children:"Action"})})]}),(0,u.jsx)("div",{className:"results-details analytics",children:q?q.map(((e,s)=>(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"results-content analytics",children:[(0,u.jsx)("div",{className:"column",id:"column1",children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",children:(0,u.jsx)("h5",{children:e.target_address})}),(0,u.jsx)("div",{className:"column",id:"column3",children:(0,u.jsx)("h5",{children:e.market_status?e.market_status:"N/a"})}),(0,u.jsx)("div",{className:"column",id:"column4",children:(0,u.jsx)("h5",{children:e.removed_date?ee(e.removed_date):""})}),(0,u.jsx)("div",{className:"column",id:"column5",children:(0,u.jsx)("h5",{children:e.status})}),(0,u.jsx)("div",{className:"column",id:"column7",children:"Sent"!==e.status&&"Cancelled"!==e.status?(0,u.jsx)("h5",{onClick:()=>(async e=>{try{if((await y().fire({title:"\ud83e\udee1 Wittle alerts",text:"Are you sure you want to cancel this letter?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"No thanks",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})).isConfirmed){const s=await l.Z.post(`/api/letter_campaigns/cancel_scheduled_letter/${e}/`,{},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});y().fire({title:"Cancelled!",text:s.data.message,icon:"success",confirmButtonColor:"#ED6B86",confirmButtonText:"OK",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}),r()}}catch(s){console.error("Cancellation failed: ",s.response||s),y().fire({title:"Error!",text:"Failed to cancel the scheduled task.",icon:"error",confirmButtonColor:"#3085d6",confirmButtonText:"OK"})}})(e.id),children:"\u274c"}):""})]},s)}))):""})]}):""]})}):"Sequences"===k?(0,u.jsx)(u.Fragment,{}):""]})})};var E=e=>{let{letterTab:s,setLetterTab:a,signature:i,setSignature:r,loadUserData:c,editCredts:o,setEditCredits:d,initiateCheckoutSession:h,creditValue:p,addCreditValue:x,availableCredits:j}=e;const[g,v]=(0,t.useState)(!1),[N,_]=(0,t.useState)(!1),b=e=>{const{name:s,value:a,type:t,files:l}=e.target;r("file"===t?e=>({...e,[s]:l[0]}):e=>({...e,[s]:a}))};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"top-line",children:[(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("My signatures"),style:{color:"My signatures"===s?"white":"#1A276C",backgroundColor:"My signatures"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"My signatures"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("Templates"),style:{color:"Templates"===s?"white":"#1A276C",backgroundColor:"Templates"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Templates"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("Campaigns"),style:{color:"Campaigns"===s?"white":"#1A276C",backgroundColor:"Campaigns"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Campaigns"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("Home"),style:{color:"Home"===s?"white":"#1A276C",backgroundColor:"Home"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Home"})]}),o?(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("input",{type:"number",value:p,onChange:x}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>h(p),children:"Add"}),(0,u.jsx)("h3",{className:"close-credits",onClick:()=>d(!1),children:"\u274c"})]}):(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("h3",{className:"credit-balance",children:j?`Current balance \xa3${j}`:""}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>d(!0),children:"Top up"})]})]}),(0,u.jsxs)("div",{className:"my-details-section",children:[(0,u.jsx)("h1",{className:"my-details-title",children:"Add or update the details you want to include in your letters"}),i&&!g?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"details-columns",children:[(0,u.jsxs)("div",{className:"my-details-content",children:[(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Title"}),N?(0,u.jsx)("input",{name:"title",type:"text",value:i.title,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.title})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"First name"}),N?(0,u.jsx)("input",{name:"first_name",type:"text",value:i.first_name,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.first_name})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Last name"}),N?(0,u.jsx)("input",{name:"last_name",type:"text",value:i.last_name,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.last_name})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Company"}),N?(0,u.jsx)("input",{name:"company_name",type:"text",value:i.company_name,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.company_name})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Role"}),N?(0,u.jsx)("input",{name:"role",type:"text",value:i.role,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.role})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Mobile"}),N?(0,u.jsx)("input",{name:"mobile",type:"text",pattern:"\\d*",value:i.mobile,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.mobile})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Landline"}),N?(0,u.jsx)("input",{name:"landline",type:"text",pattern:"\\d*",value:i.landline,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.landline})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Email"}),N?(0,u.jsx)("input",{name:"email",type:"text",value:i.email,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.email})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Address"}),N?(0,u.jsx)("input",{name:"address",type:"text",value:i.address,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.address})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Website"}),N?(0,u.jsx)("input",{name:"website",type:"text",value:i.website,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.website})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Logo"}),N?(0,u.jsx)("input",{type:"file",name:"logo",accept:"image/png, image/jpeg",className:"image-input",onChange:b}):i.logo?(0,u.jsx)("div",{className:"logo-box",children:(0,u.jsx)("img",{src:i.logo,alt:"Logo",className:"signature-logo"})}):null]})]}),(0,u.jsxs)("div",{className:"my-details-content",children:[(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"TikTok"}),N?(0,u.jsx)("input",{name:"tiktok",type:"text",value:i.tiktok,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.tiktok})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Instagram"}),N?(0,u.jsx)("input",{name:"instagram",type:"text",value:i.instagram,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.instagram})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"QR code location"}),N?(0,u.jsx)("input",{name:"qr_location",type:"text",value:i.qr_location,onChange:b}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.qr_location})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Digital signature"}),N?(0,u.jsx)("input",{type:"file",name:"digital_signature",accept:"image/png, image/jpeg",className:"image-input",onChange:b}):i.digital_signature?(0,u.jsx)("div",{className:"logo-box",children:(0,u.jsx)("img",{src:i.digital_signature,alt:"Digital signature",className:"signature-logo"})}):null]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Banner image"}),N?(0,u.jsx)("input",{type:"file",name:"banner_image",accept:"image/png, image/jpeg",className:"image-input",onChange:b}):i.banner_image?(0,u.jsx)("div",{className:"logo-box",children:(0,u.jsx)("img",{src:i.banner_image,alt:"Banner",className:"signature-logo"})}):null]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Personal image"}),N?(0,u.jsx)("input",{type:"file",name:"profile_image",accept:"image/png, image/jpeg",className:"image-input",onChange:b}):i.profile_image?(0,u.jsx)("div",{className:"logo-box",children:(0,u.jsx)("img",{src:i.profile_image,alt:"Banner",className:"signature-logo"})}):null]})]})]}),(0,u.jsx)("div",{className:"save",children:N?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{onClick:()=>(async()=>{v(!0);const e=new FormData;Object.entries(i).forEach((s=>{let[a,t]=s;e.append(a,t)}));try{const s=await l.Z.put("/api/letter_signatures/",e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Letter signature ->",s),c()}catch(s){console.error("Error updating letters:",s),s.response&&s.response.data&&s.response.data.detail&&(s.response.data.detail.includes("File size too large")?y().fire({title:"\ud83e\udee1 Wittle alerts",text:"Your image file size needs to be less than 10mb",icon:"warning",confirmButtonText:"OK thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}):y().fire({icon:"error",title:"\ud83e\udee1 Wittle alerts",text:s.response.data.detail}))}finally{v(!1)}})(),children:"Save details"}),(0,u.jsx)("button",{className:"stop-edit",onClick:()=>_(!1),children:"Stop editing"})]}):(0,u.jsx)("button",{onClick:()=>_(!0),children:"Edit details"})})]}):g?(0,u.jsx)("div",{className:"property-table-loading",children:(0,u.jsx)(m.Z,{})}):""]})]})},L=a(27112);var $=e=>{let{letterProperties:s,setLetterProperties:a,userData:r,setUserData:c,signature:o,setSignature:d,loadUserData:h,letterTemplates:p,setLetterTemplates:x,letterCampaigns:j,setLetterCampaigns:g,campaignLoading:v,setCampaignLoading:N,setLeadGenSection:_,availableCredits:b,setAvailableCredits:f}=e;(0,i.s0)();const[k,C]=(0,t.useState)("Home"),[w,S]=(0,t.useState)([]),[B,F]=(0,t.useState)(!1),[T,$]=(0,t.useState)(!1),[P,M]=(0,t.useState)(),[U,Z]=(0,t.useState)(0),[O,W]=(0,t.useState)(null),[I,z]=(0,t.useState)(!1),[H,R]=(0,t.useState)(null),[Y,G]=(0,t.useState)(),[V,q]=(0,t.useState)(""),[J,K]=(0,t.useState)(""),[X,Q]=(0,t.useState)(""),[ee,se]=(0,t.useState)(!1),[ae,te]=(0,t.useState)(!1),[le,ie]=(0,t.useState)(),[ne,re]=(0,t.useState)(!1),[ce,oe]=(0,t.useState)([]),[de,me]=(0,t.useState)(""),[he,pe]=(0,t.useState)(""),[ue,xe]=(0,t.useState)(""),[je,ge]=(0,t.useState)(""),[ve,Ne]=(0,t.useState)(""),[_e,ye]=(0,t.useState)(""),[be,fe]=(0,t.useState)([]),[ke,Ce]=(0,t.useState)([]);(0,t.useEffect)((()=>{if(s&&s.length>0){let e=s;de&&(e=e.filter((e=>e.channel===de))),he&&(e=e.filter((e=>e.postcode.toUpperCase().startsWith(he.toUpperCase())))),ue&&(e=e.filter((e=>parseInt(e.bedrooms)>=parseInt(ue)))),je&&(e=e.filter((e=>parseInt(e.bedrooms)<=parseInt(je)))),ve&&(e=e.filter((e=>parseInt(e.price_numeric)>=parseInt(ve)))),_e&&(e=e.filter((e=>parseInt(e.price_numeric)<=parseInt(_e)))),oe(e)}}),[s,de,he,ue,je,ve,_e]),(0,t.useEffect)((()=>{"rent"===de?(fe(Se),Ce(Se)):"sale"===de?(fe(Be),Ce(Be)):(fe([]),Ce([]))}),[de]);const we=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"}],Se=[...Array.from({length:9},((e,s)=>({value:""+(100+100*s),label:"\xa3"+(100+100*s)}))),...Array.from({length:5},((e,s)=>({value:""+(1e3+200*s),label:"\xa3"+(1e3+200*s)}))),...Array.from({length:8},((e,s)=>({value:""+(2e3+250*s),label:"\xa3"+(2e3+250*s)}))),...Array.from({length:8},((e,s)=>({value:""+(4e3+500*s),label:"\xa3"+(4e3+500*s)}))),...Array.from({length:4},((e,s)=>({value:""+(8e3+1e3*s),label:"\xa3"+(8e3+1e3*s)}))),...Array.from({length:4},((e,s)=>({value:""+(12e3+2e3*s),label:"\xa3"+(12e3+2e3*s)})))],Be=[...Array.from({length:9},((e,s)=>({value:""+(1e5+1e5*s),label:`\xa3${(1e5+1e5*s).toLocaleString()}`}))),...Array.from({length:5},((e,s)=>({value:""+(1e6+2e5*s),label:`\xa3${(1e6+2e5*s).toLocaleString()}`}))),...Array.from({length:8},((e,s)=>({value:""+(2e6+25e4*s),label:`\xa3${(2e6+25e4*s).toLocaleString()}`}))),...Array.from({length:8},((e,s)=>({value:""+(4e6+5e5*s),label:`\xa3${(4e6+5e5*s).toLocaleString()}`}))),...Array.from({length:4},((e,s)=>({value:""+(8e6+1e6*s),label:`\xa3${(8e6+1e6*s).toLocaleString()}`}))),...Array.from({length:6},((e,s)=>({value:""+(12e6+2e6*s),label:`\xa3${(12e6+2e6*s).toLocaleString()}`})))];(0,t.useEffect)((()=>{r&&r.epc_favourites.length>0&&(ie(r.epc_favourites[0]),console.log("example data for template ->",r.epc_favourites[0]))}),[r]);(0,t.useEffect)((()=>{ee&&X&&($(!0),se(!1))}),[X,ee]);const Fe=async(e,s)=>{const a=e.map((e=>e.rightmove_id));try{const t=await l.Z.put("/api/epc_favourite/add_to_campaign/",{property_ids:a,campaign_name:s},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Properties added to campaign successfully:",t.data),h(),S([]),y().fire({title:"\ud83d\ude0e action complete",text:`${e.length} properties added to campaign`,confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}catch(t){console.error("Error adding properties to campaign:",t.response.data)}},Ae=e=>{const s=new Date(e);if(isNaN(s.getTime()))return console.warn("Invalid date:",e),e;return`${s.getDate().toString().padStart(2,"0")}/${(s.getMonth()+1).toString().padStart(2,"0")}/${s.getFullYear()}`},Te=async e=>{const s=Number(e);try{const e=await l.Z.post("/api/usage/add_credit/",{credits_amount:s},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});window.localStorage.setItem("wittle-latest-credits",JSON.stringify("Yes")),window.localStorage.setItem("wittle-credit-value",JSON.stringify(`${U}`));const{sessionId:a}=e.data,t=await(0,L.J)("pk_live_51O02bMBKPXWTORF2v4zeIPMCFzuSvlY6cJaKiStMAVm0cf9LvmMXhobEZ9VPbVVO9kGlfxTPtFkszZAfv10s3oG800dx3kYK7K");await t.redirectToCheckout({sessionId:a})}catch(a){console.error("Error initiating checkout session:",a)}},De=e=>{Z(e.target.value),console.log("credit input ->",e.target.value)};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("section",{className:"letter-section",children:r&&r.lead_gen_details.length>0?(0,u.jsx)("div",{className:"results-block",children:v?(0,u.jsx)("div",{className:"property-table-loading",children:(0,u.jsx)(m.Z,{})}):"Home"!==k||v?"Campaigns"!==k||v?"Templates"!==k||v?"My signatures"!==k||v?"":(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(E,{letterTab:k,setLetterTab:C,signature:o,setSignature:d,loadUserData:h,creditValue:U,editCredts:ae,setEditCredits:te,availableCredits:b,initiateCheckoutSession:Te,addCreditValue:De})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"top-line",children:[(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>C("My signatures"),style:{color:"My signatures"===k?"white":"#1A276C",backgroundColor:"My signatures"===k?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"My signatures"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>C("Templates"),style:{color:"Templates"===k?"white":"#1A276C",backgroundColor:"Templates"===k?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Templates"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>C("Campaigns"),style:{color:"Campaigns"===k?"white":"#1A276C",backgroundColor:"Campaigns"===k?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Campaigns"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>C("Home"),style:{color:"Home"===k?"white":"#1A276C",backgroundColor:"Home"===k?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Home"})]}),ae?(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("h3",{className:"credit-balance",children:"Top up value:"}),(0,u.jsx)("input",{type:"number",value:U,onChange:De}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>Te(U),children:"Add"}),(0,u.jsx)("h3",{className:"close-credits",onClick:()=>te(!1),children:"\u274c"})]}):(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("h3",{className:"credit-balance",children:b?`Current balance \xa3${b}`:""}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>te(!0),children:"Top up"})]})]}),(0,u.jsxs)("div",{className:"action-section letter",children:[p?(0,u.jsxs)("h3",{className:"template-total",children:["You have ",p.length," saved templates"]}):(0,u.jsx)("h3",{className:"template-total",children:"Create some templates so you can see them here"}),(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:()=>(K("new"),Q({}),void $(!0)),children:"New template "})]})]}),(0,u.jsx)(A,{handleCreateTemplateClose:()=>{$(!1),Q({}),K("new")},createTemplateShow:T,signature:o,loadUserData:h,templateAction:J,currentTemplate:X,exampleData:le,setCampaignLoading:N}),(0,u.jsx)("div",{className:"template-list",children:(0,u.jsxs)("div",{className:"template-table",children:[(0,u.jsxs)("div",{className:"template-headers",children:[(0,u.jsx)("h3",{id:"column1",children:"#"}),(0,u.jsx)("h3",{id:"column2",children:"Name"}),(0,u.jsx)("h3",{id:"column3",children:"Type"}),(0,u.jsx)("h3",{id:"column4",children:"Edit"}),(0,u.jsx)("h3",{id:"column6",children:"Delete"})]}),(0,u.jsx)("div",{className:"template-content",children:p?[...p].sort(((e,s)=>e.template_number-s.template_number)).map(((e,s)=>(0,u.jsxs)("div",{className:"template-item",children:[(0,u.jsx)("h3",{className:"template-number",id:"column1",children:s+1}),(0,u.jsx)("h3",{className:"template-name",id:"column2",children:e.template_name}),(0,u.jsx)("h3",{className:"template-type",id:"column3",children:e.template_type}),(0,u.jsx)("div",{id:"column4",children:(0,u.jsx)("h3",{className:"action",onClick:()=>(e=>{K("edit"),Q(e),se(!0)})(e),children:"\u270d\ud83c\udffc"})}),(0,u.jsx)("div",{id:"column6",children:(0,u.jsx)("h3",{className:"action",onClick:()=>(async e=>{N(!0);try{(await y().fire({title:"\ud83e\udee1 Wittle alerts",text:"Are you sure you want to delete this template?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"No thanks",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})).isConfirmed&&(await l.Z.delete(`/api/letter_templates/delete/${e.id}/`,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}}),y().fire({title:"\ud83d\ude0e action complete",text:"The template has been deleted",icon:"success",confirmButtonColor:"#ED6B86"}),await h())}catch(s){console.error("Error deleting template:",s),y().fire({title:"Error!",text:"Failed to delete the template.",icon:"error",confirmButtonText:"OK",customClass:{confirmButton:"popup-swal-confirm"}})}finally{N(!1)}})(e),children:"\ud83d\uddd1"})})]},s))):""})]})})]}):(0,u.jsx)(D,{letterTab:k,setLetterTab:C,letterCampaigns:j,loadUserData:h,letterTemplates:p,letterProperties:s,signature:o,campaignLoading:v,setCampaignLoading:N,creditValue:U,editCredts:ae,setEditCredits:te,availableCredits:b,initiateCheckoutSession:Te,addCreditValue:De}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"top-line",children:[(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>C("My signatures"),style:{color:"My signatures"===k?"white":"#1A276C",backgroundColor:"My signatures"===k?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"My signatures"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>C("Templates"),style:{color:"Templates"===k?"white":"#1A276C",backgroundColor:"Templates"===k?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Templates"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>C("Campaigns"),style:{color:"Campaigns"===k?"white":"#1A276C",backgroundColor:"Campaigns"===k?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Campaigns"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>C("Home"),style:{color:"Home"===k?"white":"#1A276C",backgroundColor:"Home"===k?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Home"})]}),ae?(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("input",{type:"number",value:U,onChange:De}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>Te(U),children:"Add"}),(0,u.jsx)("h3",{className:"close-credits",onClick:()=>te(!1),children:"\u274c"})]}):(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("h3",{className:"credit-balance",children:b?`Current balance \xa3${b}`:""}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>te(!0),children:"Top up"})]})]}),(0,u.jsxs)("div",{className:"action-section letter",children:[ce?(0,u.jsxs)("h3",{className:"template-total",children:["You have ",ce.length," properties prepared for letter campaigns"]}):"",(0,u.jsxs)("div",{className:"letter-selections",children:[(0,u.jsxs)("select",{value:P,onChange:e=>{const s=e.target.value;M(s);const a=w,t=j.find((e=>e.id.toString()===s));a&&a.length>0&&t?Fe(a,t.campaign_name):console.log("No properties selected or campaign not found")},className:"template-select letter",children:[(0,u.jsx)("option",{value:"",children:"Select a campaign"}),j?j.filter((e=>"Live"!==e.campaign_status)).map(((e,s)=>(0,u.jsx)("option",{value:e.id,children:e.campaign_name},s))):""]}),(0,u.jsx)("div",{className:"filter-icon "+(ne?"active":"inactive"),onClick:()=>re(!ne),style:{backgroundColor:ne?"#1A276C":"inherit"}})]})]}),ne?(0,u.jsxs)("div",{className:"filter-row-section "+(ne?"active":"inactive"),children:[(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Channel"}),(0,u.jsxs)("select",{onChange:e=>me(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select..."}),(0,u.jsx)("option",{value:"sale",children:"Sale"}),(0,u.jsx)("option",{value:"rent",children:"Rent"})]})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Postcode"}),(0,u.jsx)("input",{className:"filter-input",onChange:e=>pe(e.target.value)})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Bedrooms"}),(0,u.jsxs)("select",{className:"small",value:ue,onChange:e=>xe(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Min"}),we.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,u.jsxs)("select",{className:"small",value:je,onChange:e=>ge(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Max"}),we.filter((e=>e.value>=ue)).map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),""!==de&&(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Price"}),(0,u.jsxs)("select",{className:"small",value:ve,onChange:e=>Ne(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Min"}),be.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,u.jsxs)("select",{className:"small",value:_e,onChange:e=>ye(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Max"}),ke.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,u.jsx)("button",{className:"clear-filters",onClick:()=>{me(""),pe(""),xe(""),ge(""),Ne(""),ye("")},children:"Clear"})]}):"",(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers letter",children:[(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:ce&&w.length===ce.filter((e=>"None"===e.letter_campaign||null===e.letter_campaign)).length&&w.length>0,onChange:e=>{e.target.checked?(()=>{const e=ce.filter((e=>"None"===e.letter_campaign||null===e.letter_campaign));S(e),F(!0)})():(S([]),F(!1))}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Date added"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Date removed"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Market status"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Channel"})}),(0,u.jsx)("div",{id:"column7",className:"column",children:(0,u.jsx)("h5",{children:"Price"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details letter "+(ne?"active":"inactive"),children:ce?ce.map(((e,s)=>{const a=w.some((s=>s.rightmove_id===e.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(a?"highlighted-row":""),children:["None"===e.letter_campaign?(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:w.some((s=>s.rightmove_id===e.rightmove_id)),onChange:s=>((e,s)=>{const a={...s};console.log("selected row ->",s),e.target.checked?S((e=>[...e,a])):S((e=>e.filter((e=>e.rightmove_id!==a.rightmove_id))));const t=ce.filter((e=>"None"===e.letter_campaign||null===e.letter_campaign)).length;F(w.length===t)})(s,e)}),(0,u.jsx)("label",{className:"label"})]})}):(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsx)("h6",{children:"In campaign"})}),(0,u.jsx)("div",{className:"column",id:"column1",children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",children:(0,u.jsx)("h5",{children:e.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column4",children:(0,u.jsx)("h5",{children:"Live"===e.market_status?"":"Off Market"===e.market_status&&e.week_removed?Ae(e.week_removed):""})}),(0,u.jsx)("div",{className:"column",id:"column5",children:(0,u.jsx)("h5",{children:"Live"===e.market_status?e.market_status:`\ud83d\udea9 ${e.market_status}`})}),(0,u.jsx)("div",{className:"column",id:"column6",children:(0,u.jsx)("h5",{children:e.channel})}),(0,u.jsx)("div",{className:"column",id:"column7",children:(0,u.jsx)("h5",{children:e.price})})]}),(0,u.jsx)("hr",{className:"property-divider"})]})})):" "})]})]})}):(0,u.jsx)("h3",{className:"letter-warning",children:"You haven't saved any properties yet! Once you've done that, you can set up your campaigns."})})})};l.Z.defaults.xsrfCookieName="csrftoken",l.Z.defaults.xsrfHeaderName="X-CSRFToken";var P=()=>{const e=(0,i.s0)(),[s,a]=(0,t.useState)(),[h,p]=(0,t.useState)(),[v,N]=(0,t.useState)(),[_,f]=(0,t.useState)(),[C,B]=(0,t.useState)(),[F,A]=(0,t.useState)(),[T,D]=(0,t.useState)(),[E,L]=(0,t.useState)(!1),[P,M]=(0,t.useState)("Comparison"),[U,Z]=(0,t.useState)("Comparison"),[O,W]=(0,t.useState)(!1),[I,z]=(0,t.useState)(""),[H,R]=(0,t.useState)(""),[Y,G]=(0,t.useState)(""),[V,q]=(0,t.useState)(),[J,K]=(0,t.useState)(),[X,Q]=(0,t.useState)([]),[ee,se]=(0,t.useState)([]),[ae,te]=(0,t.useState)(""),[le,ie]=(0,t.useState)("Efficiency"),[ne,re]=(0,t.useState)([]),[ce,oe]=(0,t.useState)(),[de,me]=(0,t.useState)(),[he,pe]=(0,t.useState)(),[ue,xe]=(0,t.useState)(),[je,ge]=(0,t.useState)(),[ve,Ne]=(0,t.useState)(sessionStorage.getItem("sessionName")||""),[_e,ye]=(0,t.useState)(["SW8"]),[be,fe]=(0,t.useState)(),[ke,Ce]=(0,t.useState)("Inputs"),[we,Se]=(0,t.useState)([]),[Be,Fe]=(0,t.useState)([]),[Ae,Te]=(0,t.useState)([]),[De,Ee]=(0,t.useState)([]),[Le,$e]=(0,t.useState)([]),[Pe,Me]=(0,t.useState)([]),[Ue,Ze]=(0,t.useState)("Lettings"),[Oe,We]=(0,t.useState)(!1),[Ie,ze]=(0,t.useState)(null),[He,Re]=(0,t.useState)({postcode:"",subcode:"",bathrooms_min:null,bathrooms_max:null,bedrooms_min:null,bedrooms_max:null,rental_price_min:null,rental_price_max:null,sales_price_min:null,sales_price_max:null,channel:"",rental_additional:""}),[Ye,Ge]=(0,t.useState)({first_name:"",last_name:"",company_name:"",title:"",role:"",mobile:null,landline:null,address:"",email:"",letter_footer:"",logo:"",digital_signature:"",banner_image:"",instagram:"",tiktok:"",qr_location:""}),[Ve,qe]=(0,t.useState)(),[Je,Ke]=(0,t.useState)(),[Xe,Qe]=(0,t.useState)([]),[es,ss]=(0,t.useState)([]),[as,ts]=(0,t.useState)(),[ls,is]=(0,t.useState)({latitude:51.515419,longitude:-.141099,zoom:11.5}),[ns,rs]=(0,t.useState)([]),[cs,os]=(0,t.useState)(Be.map((()=>!1))),[ds,ms]=(0,t.useState)(Le.map((()=>!1))),[hs,ps]=(0,t.useState)("2days"),[us,xs]=(0,t.useState)([]),[js,gs]=(0,t.useState)([]),[vs,Ns]=(0,t.useState)([]),[_s,ys]=(0,t.useState)([]),[bs,fs]=(0,t.useState)([]),[ks,Cs]=(0,t.useState)([]),[ws,Ss]=(0,t.useState)([]),[Bs,Fs]=(0,t.useState)([]),[As,Ts]=(0,t.useState)("asc"),[Ds,Es]=(0,t.useState)("asc"),[Ls,$s]=(0,t.useState)(),[Ps,Ms]=(0,t.useState)("Matching"),[Us,Zs]=(0,t.useState)("Matching"),[Os,Ws]=(0,t.useState)(new Set),[Is,zs]=(0,t.useState)(new Set),[Hs,Rs]=(0,t.useState)(),Ys=async()=>{if((0,n.Hb)()){const e=async()=>{try{B(!0),A(!0),D(!0);const{data:e}=await l.Z.get(`/api/auth/profile/${(0,n.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});if(console.log("user data ->",e),N(e),f(e.usage_stats[0].package),ze(e.usage_stats[0].credits),Gs(),e.lead_gen_details.length>0){Re(e.lead_gen_details[0]);const s=Array.from(new Set(e.company_favourites.filter((e=>null!==e.rightmove_id&&"Saved"===e.action)).map((e=>e.address)))).map((s=>e.company_favourites.find((e=>e.address===s&&null!==e.rightmove_id&&"Saved"===e.action)))),a=e.company_favourites.filter((e=>null!==e.rightmove_id&&"Saved"===e.action&&1===e.letter_sequence)),t=e.company_favourites.filter((e=>null!==e.rightmove_id&&"Extracted"===e.action)),l=e.company_favourites.filter((e=>null!==e.rightmove_id&&"Removed"===e.action)),i=[...s,...t,...l].map((e=>e.rightmove_id));xs(i),gs(l),console.log("removed properties ->",l);Js(e.company_favourites);"Lettings"===e.lead_gen_details[0].channel?(A(!1),Ks(e,l,hs)):"Sales"===e.lead_gen_details[0].channel?(B(!1),Xs(e,l,hs)):"Both"===e.lead_gen_details[0].channel&&(Xs(e,l,hs),Ks(e,l,hs)),oe(s),ge(a),Ge(e.letter_signatures[0]?e.letter_signatures[0]:Ye),qe(e.letter_templates),Ke(e.letter_campaigns),console.log("letter properties ->",a),console.log("saved properties ->",s),pe(t),xe(l),console.log("existing dtails ->",e.lead_gen_details[0]),ua(),S.Y.emit("userDataUpdated"),D(!1)}else{console.log("date -> ",hs),D(!1)}}catch(e){a(!0),console.log(e),D(!1)}};await e()}else e("/access-denied"),console.log("no account")};(0,t.useEffect)((()=>{const s=JSON.parse(localStorage.getItem("wittle-latest-credits"));console.log("credit path ->",s);const a=JSON.parse(localStorage.getItem("wittle-credit-value"));console.log("credit value ->",a);const t=new URLSearchParams(window.location.search);"Yes"===s&&t.get("success")?(y().fire({title:"\ud83d\ude0e action complete",text:`\xa3${a} added to your letter credits`,confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}),e("/agents/lead-gen"),Ce("Letter campaigns"),Ys(),localStorage.removeItem("wittle-latest-credits"),localStorage.removeItem("wittle-credit-value")):"Yes"===s&&t.get("cancelled")?(e("/agents/lead-gen"),Ce("Letter campaigns"),Ys(),y().fire({title:"\ud83e\udee1 Wittle alerts",text:"There was an error processing your payment",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}),localStorage.removeItem("wittle-latest-credits"),localStorage.removeItem("wittle-credit-value")):Ys()}),[]);const Gs=async()=>{try{const e=await l.Z.get("/api/lead_gen_outcodes/");console.log("lead gen outcodes ->",e.data),Rs(e.data)}catch(e){console.error("Error loading outcodes:",e)}},Vs=()=>{os(vs.map((()=>!1))),Qe([])},qs=()=>{ms(_s.map((()=>!1))),ss([])},Js=e=>e.filter((e=>null!==e.rightmove_id&&"Saved"===e.action)).map(((e,s)=>({item:s+1,url:e.url,address:e.address,postcode:e.postcode,addressPostcode:`${e.address}, ${e.postcode}`,addedOn:e.added_revised,property_type:e.property_type,price:e.price,bedrooms:e.bedrooms,bathrooms:e.bathrooms,let_available_date:e.let_available_date,date_added:e.date_added_db,agent:e.agent,channel:e.channel,owner_name:e.owner_name,owner_email:e.owner_email,owner_mobile:e.owner_mobile,emails_sent:e.emails_sent,letters_sent:e.letters_sent,valuation_booked:e.valuation_booked,notes:e.notes}))),Ks=async(e,s,a)=>{const t=e.lead_gen_details[0].postcode,i=e.lead_gen_details[0].subcode,r=e.lead_gen_details[0].bedrooms_min,c=e.lead_gen_details[0].bedrooms_max,o=e.lead_gen_details[0].rental_price_min,d=e.lead_gen_details[0].rental_price_max,m=e.lead_gen_details[0].rental_additional;try{const e=`/api/epc_properties_rental/combined-epc-results/?postcode=${t}&subcode=${i}&min_bedrooms=${r}&max_bedrooms=${c}&rental_price_min=${o}&rental_price_max=${d}&rental_additional=${m}`,{data:a}=await l.Z.get(e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("combined data ->",a);const h=s.map((e=>e.rightmove_id)),p=a.filter((e=>!h.includes(e.property_data.rightmove_id)&&"Live"===e.property_data.status)),u=p.filter((e=>0===e.epc_data_list.length)),x=p.filter((e=>1===e.epc_data_list.length)),j=p.filter((e=>e.epc_data_list.length>1));console.log("sngle matches ->",x),console.log("no matches ->",u),console.log("multiple matches ->",j),Se(u),Fe(x),Te(j),B(!1)}catch(h){console.error("can't access combined data ->",h)}},Xs=async(e,s,a)=>{const t=e.lead_gen_details[0].postcode,i=e.lead_gen_details[0].subcode,r=e.lead_gen_details[0].bedrooms_min,c=e.lead_gen_details[0].bedrooms_max,o=e.lead_gen_details[0].sales_price_min,d=e.lead_gen_details[0].sales_price_max;try{const e=`/api/epc_properties/combined-epc-results/?postcode=${t}&subcode=${i}&min_bedrooms=${r}&max_bedrooms=${c}&sales_price_min=${o}&sales_price_max=${d}`,{data:a}=await l.Z.get(e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("combined data ->",a);const m=s.map((e=>e.rightmove_id)),h=a.filter((e=>!m.includes(e.property_data.rightmove_id)&&"Live"===e.property_data.status)),p=h.filter((e=>0===e.epc_data_list.length)),u=h.filter((e=>1===e.epc_data_list.length)),x=h.filter((e=>e.epc_data_list.length>1));console.log("sales single matches ->",u),console.log("sales no matches ->",p),console.log("sales multiple matches ->",x),Ee(p),$e(u),Me(x),A(!1)}catch(m){console.error("can't access combined data ->",m)}},Qs=e=>{window.open(e,"_blank","width=1200,height=800,resizable=yes,scrollbars=yes,status=yes")},ea=s=>{localStorage.removeItem("wittle-user-token"),localStorage.removeItem("wittle-username"),e("/login")},sa=["200000","300000","400000","500000","600000","700000","800000","900000","1000000","1250000","1500000","1750000","2000000","2250000","2500000","2750000","3000000","3500000","4000000","5000000","7500000","10000000","12500000","15000000","20000000","30000000","40000000","50000000"],aa=["500","600","700","800","900","1000","1100","1200","1300","1400","1500","1600","1700","1800","1900","2000","2250","2500","2750","3000","3250","3500","4000","4500","5000","5500","6000","7000","8000","9000","10000","12500","15000","20000","25000","30000","40000","50000","60000"],ta=(e,s)=>{if(!s||"all"===s)return e;let a,t="within";switch(s){case"1day":a=1;break;case"2days":a=2;break;case"3days":a=3;break;case"7days":a=7;break;case"4weeks":a=28;break;case"8weeks":a=56;break;case"12weeks":a=84;break;case"16weeks":a=112;break;case">8weeks":a=56,t="beyond";break;case">12weeks":a=84,t="beyond";break;case">16weeks":a=112,t="beyond";break;default:return e}return e.filter((e=>{const s=la(e.property_data.added_revised),l=la(e.property_data.reduced_revised),i=s||l;return!!i&&("within"===t?ia(i,a):na(i,a))}))};(0,t.useEffect)((()=>{const e=ta(Be,hs);Ns(e)}),[Be,hs]),(0,t.useEffect)((()=>{const e=ta(Le,hs);ys(e)}),[Le,hs]),(0,t.useEffect)((()=>{const e=ta(Ae,hs);fs(e)}),[Ae,hs]),(0,t.useEffect)((()=>{const e=ta(Pe,hs);Cs(e)}),[Pe,hs]),(0,t.useEffect)((()=>{const e=ta(we,hs);Ss(e)}),[we,hs]),(0,t.useEffect)((()=>{const e=ta(De,hs);Fs(e)}),[De,hs]);const la=e=>{if(!e)return null;const[s,a,t]=e.split("/");return new Date(t,a-1,s)},ia=(e,s)=>{const a=new Date;return e>=new Date(a.getFullYear(),a.getMonth(),a.getDate()-s)},na=(e,s)=>{const a=new Date;return e<new Date(a.getFullYear(),a.getMonth(),a.getDate()-s)},ra=()=>{const e=[...vs].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),t=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===As?a-t:t-a})),s=[..._s].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),t=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===As?a-t:t-a})),a=[...bs].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),t=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===As?a-t:t-a})),t=[...ks].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),t=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===As?a-t:t-a})),l=[...ws].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),t=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===As?a-t:t-a})),i=[...Bs].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),t=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===As?a-t:t-a}));Ns(e),ys(s),fs(a),Cs(t),Ss(l),Fs(i),Ts("asc"===As?"desc":"asc")},[ca,oa]=(0,t.useState)(!1),da=()=>{oa(!1)},[ma,ha]=(0,t.useState)(!1),pa=()=>{ha(!1)},ua=async()=>{if((0,n.Hb)()){console.log("trying to increase");try{const{data:e}=await l.Z.post("/api/usage/",{},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log(e),"success"===e.status?console.log("Usage count increased successfully"):console.error("Failed to increase usage count:",e.message)}catch(s){console.error("Error:",s)}}else e("/access-denied"),console.log("logged out")},xa=e=>{Ws((s=>{const a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a}))},ja=e=>{zs((s=>{const a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a}))},ga=async(s,a,t)=>{if((0,n.Hb)()){const e=[{rightmove_id:s.property_data.rightmove_id,postcode:s.property_data.postcode,address:a.address,agent:s.property_data.agent,type:s.property_data.type,addedOn:s.property_data.addedOn,propertyType:s.property_data.propertyType,price:s.property_data.price,price_numeric:s.property_data.price_numeric,bathrooms:s.property_data.bathrooms,bedrooms:s.property_data.bedrooms,let_available_date:s.property_data.let_available_date,date_added_db:s.property_data.date_added_db,url:s.property_data.url,current_epc:s.property_data.current_epc,potential_epc:s.property_data.potential_epc,action:"Saved",added_revised:s.property_data.added_revised,reduced_revised:s.property_data.reduced_revised,market_status:s.property_data.market_status}];try{const s=await l.Z.post("/api/epc_favourite/",e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",s.data),xa(t),ja(t),y().fire({title:"\ud83d\ude0e action complete",text:"New property added to your saved properties",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}),Ys()}catch(i){console.error("Error saving favourite:",i)}}else e("/access-denied"),console.log("logged out")};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("section",{className:"agent-profile-page",children:[(0,u.jsx)("div",{className:"desktop-nav",children:(0,u.jsx)(c.Z,{navbarColour:"#FDF7F0"})}),(0,u.jsx)("div",{className:"mobile-nav",children:(0,u.jsx)(d.Z,{setProfileContent:M,profileContent:P,profileDetail:U,setProfileDetail:Z})}),(0,u.jsx)(o.Z,{setProfileDetail:Z,variableSide:O,setProfileContent:M,setVariableSide:W,userData:v}),v&&"Trial expired"===v.usage_stats[0].package?(0,u.jsx)("section",{className:"main-body remove-margin",children:(0,u.jsx)("section",{className:"main-body-details",children:(0,u.jsxs)("section",{className:"listing-generator",children:[(0,u.jsxs)("div",{className:"listing-options",children:[(0,u.jsx)("div",{className:"listing-buttons"}),(0,u.jsx)("div",{className:"logout-button",onClick:ea,children:(0,u.jsx)("div",{className:"logout-icon"})})]}),(0,u.jsxs)("div",{className:"no-access-body",children:[(0,u.jsx)("div",{className:"no-access-image"}),(0,u.jsx)("h1",{className:"no-access-title",children:"Oops! Dead end"}),(0,u.jsx)("h3",{className:"no-access-message",children:"You no longer have access to this content. Get in touch to upgrade your account and access the Wittle magic."})]})]})})}):(0,u.jsx)("section",{className:"main-body",children:(0,u.jsx)("section",{className:"main-body-details",children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("section",{className:"property-finder",children:[(0,u.jsxs)("div",{className:"listing-options",children:[(0,u.jsxs)("div",{className:"listing-buttons",children:[(0,u.jsx)("h5",{className:"no-print",onClick:()=>Ce("Inputs"),style:{borderBottom:"Inputs"===ke?"3px solid #ED6B86":"none",textUnderlineOffset:"Inputs"===ke?"0.5em":"initial",fontWeight:"Inputs"===ke?"700":"400"},children:"Inputs"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>Ce("Explore"),style:{borderBottom:"Explore"===ke?"3px solid #ED6B86":"none",textUnderlineOffset:"Explore"===ke?"0.5em":"initial",fontWeight:"Explore"===ke?"700":"400"},children:"Explore"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>Ce("Tracking"),style:{borderBottom:"Tracking"===ke?"3px solid #ED6B86":"none",textUnderlineOffset:"Tracking"===ke?"0.5em":"initial",fontWeight:"Tracking"===ke?"700":"400"},children:"Tracking"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>Ce("Letter campaigns"),style:{borderBottom:"Letter campaigns"===ke?"3px solid #ED6B86":"none",textUnderlineOffset:"Letter campaigns"===ke?"0.5em":"initial",fontWeight:"Letter campaigns"===ke?"700":"400"},children:"Letter campaigns"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>Ce("Archived"),style:{borderBottom:"Archived"===ke?"3px solid #ED6B86":"none",textUnderlineOffset:"Archived"===ke?"0.5em":"initial",fontWeight:"Archived"===ke?"700":"400"},children:"Archived"}),(0,u.jsx)("h5",{className:"no-print",id:"manual-matcher",onClick:()=>Ce("Manual matcher"),style:{borderBottom:"Manual matcher"===ke?"3px solid #ED6B86":"none",textUnderlineOffset:"Manual matcher"===ke?"0.5em":"initial",fontWeight:"Manual matcher"===ke?"700":"400"},children:"Manual matcher"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>Ce("Hidden properties"),style:{borderBottom:"Hidden properties"===ke?"3px solid #ED6B86":"none",textUnderlineOffset:"Hidden properties"===ke?"0.5em":"initial",fontWeight:"Hidden properties"===ke?"700":"400"},children:"Hidden properties"})]}),(0,u.jsx)("div",{className:"logout-button",onClick:ea,children:(0,u.jsx)("div",{className:"logout-icon"})})]}),(0,u.jsx)("hr",{className:"title-line"}),(0,u.jsx)("div",{className:"lead-generator",children:(0,u.jsx)("div",{className:"property-results",children:"Inputs"===ke?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"lead-gen-inputs",children:[(0,u.jsx)("h3",{className:"sub-title",children:"Set your search criteria"}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Postcode(s)"}),(0,u.jsx)("p",{children:"Add multiple postcodes by separating with a comma, and include any part of the postcode, e.g. \u201cSW4,SW5\u201d. For efficiency, this is limited to 6 postcode areas."}),(0,u.jsx)("input",{type:"text",value:He.postcode,onChange:e=>{let s=e.target.value.toUpperCase().replace(/\s+/g,"");const a=s.split(",");a.length>6&&(y().fire({title:"\ud83e\udee1 Wittle alerts",text:"To optimise your experience, you can only add up to 6 postcode areas.",confirmButtonText:"\ud83e\udd1d thanks",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}}),s=a.slice(0,6).join(",")),z(s),Re((e=>({...e,postcode:s})))},placeholder:"Enter postcode..."})]})}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Sub postcode(s)"}),(0,u.jsx)("p",{children:"Add sub postcodes, e.g. \u201cSW4 0,SW5 0\u201d. You can also chain these."}),(0,u.jsx)("input",{type:"text",value:He.subcode,onChange:e=>{R(e.target.value.toUpperCase().replace(/\s+/g,"")),Re((s=>({...s,subcode:e.target.value.toUpperCase().replace(/\s+/g,"")})))},placeholder:"Enter subcode..."})]})}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Channel"}),(0,u.jsxs)("select",{className:"dropdown",value:He.channel||"Lettings",onChange:e=>Re((s=>({...s,channel:e.target.value}))),children:[(0,u.jsx)("option",{children:"Lettings"}),(0,u.jsx)("option",{children:"Sales"}),(0,u.jsx)("option",{children:"Both"})]})]})}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"see-more-section",onClick:()=>We(!Oe),children:[(0,u.jsx)("h3",{className:"sub-title",children:"Add some more detail"}),Oe?(0,u.jsx)("h3",{className:"sub-title",children:"^"}):(0,u.jsx)("h3",{className:"sub-title",children:"v"})]}),Oe?(0,u.jsx)(u.Fragment,{children:"Lettings"===He.channel?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Bedrooms"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:He.bedrooms_min||"",onChange:e=>Re((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No min"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"})]}),(0,u.jsxs)("select",{className:"dropdown",value:He.bedrooms_max||"",onChange:e=>Re((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No max"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"}),(0,u.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Price"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:He.rental_price_min||"",onChange:e=>Re((s=>({...s,rental_price_min:e.target.value}))),children:[(0,u.jsx)("option",{value:0,children:"No min"}),aa.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(r.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,u.jsxs)("select",{className:"dropdown",value:He.rental_price_max||"",onChange:e=>Re((s=>({...s,rental_price_max:e.target.value}))),children:[(0,u.jsx)("option",{value:1e7,children:"No max"}),aa.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(r.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Furnishing status"}),(0,u.jsxs)("select",{className:"dropdown",value:He.rental_additional||"Either furnished or unfurnished",onChange:e=>Re((s=>({...s,rental_additional:e.target.value}))),children:[(0,u.jsx)("option",{children:"Either furnished or unfurnished"}),(0,u.jsx)("option",{children:"Furnished"}),(0,u.jsx)("option",{children:"Unfurnished"})]})]})})]}):"Sales"===He.channel?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Bedrooms"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:He.bedrooms_min||"",onChange:e=>Re((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No min"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"})]}),(0,u.jsxs)("select",{className:"dropdown",value:He.bedrooms_max||"",onChange:e=>Re((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No max"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"}),(0,u.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Price"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:He.sales_price_min||"",onChange:e=>Re((s=>({...s,sales_price_min:e.target.value}))),children:[(0,u.jsx)("option",{value:0,children:"No min"}),sa.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(r.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,u.jsxs)("select",{className:"dropdown",value:He.sales_price_max||"",onChange:e=>Re((s=>({...s,sales_price_max:e.target.value}))),children:[(0,u.jsx)("option",{value:1e8,children:"No max"}),sa.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(r.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]})]}):"Both"===He.channel?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Bedrooms"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:He.bedrooms_min||"",onChange:e=>Re((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No min"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"})]}),(0,u.jsxs)("select",{className:"dropdown",value:He.bedrooms_max||"",onChange:e=>Re((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No max"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"}),(0,u.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Rental price"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:He.rental_price_min||"",onChange:e=>Re((s=>({...s,rental_price_min:e.target.value}))),children:[(0,u.jsx)("option",{value:0,children:"No min"}),aa.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(r.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,u.jsxs)("select",{className:"dropdown",value:He.rental_price_max||"",onChange:e=>Re((s=>({...s,rental_price_max:e.target.value}))),children:[(0,u.jsx)("option",{value:1e7,children:"No max"}),aa.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(r.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Rental furnishing status"}),(0,u.jsxs)("select",{className:"dropdown",value:He.rental_additional||"Either furnished or unfurnished",onChange:e=>Re((s=>({...s,rental_additional:e.target.value}))),children:[(0,u.jsx)("option",{children:"Either furnished or unfurnished"}),(0,u.jsx)("option",{children:"Furnished"}),(0,u.jsx)("option",{children:"Unfurnished"})]})]})}),(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Sales price"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:He.sales_price_min||"",onChange:e=>Re((s=>({...s,sales_price_min:e.target.value}))),children:[(0,u.jsx)("option",{value:0,children:"No min"}),sa.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(r.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,u.jsxs)("select",{className:"dropdown",value:He.sales_price_max||"",onChange:e=>Re((s=>({...s,sales_price_max:e.target.value}))),children:[(0,u.jsx)("option",{value:1e8,children:"No max"}),sa.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(r.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]})]}):""}):""]}),(0,u.jsx)("div",{className:"lead-gen-save",children:(0,u.jsx)("button",{className:"save-details",onClick:async()=>{let e;const s=(He.postcode||"").split(","),a=new Set(Hs.map((e=>e.outcode)));s.every((e=>a.has(e)))?(v&&v.lead_gen_details&&v.lead_gen_details.length>0?(e=await l.Z.put(`/api/lead_gen_details/${v.id}/`,He,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}}),"Lettings"===v.lead_gen_details.channel?B(!0):"Sales"===v.lead_gen_details.channel?A(!0):"Both"===v.lead_gen_details.channel&&(B(!0),A(!0)),Ce("Explore")):(e=await l.Z.post("/api/lead_gen_details/",He,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}}),"Lettings"===v.lead_gen_details.channel?B(!0):"Sales"===v.lead_gen_details.channel?A(!0):"Both"===v.lead_gen_details.channel&&(B(!0),A(!0)),Ce("Explore")),Ys()):y().fire({icon:"error",title:"\ud83e\udee1 Wittle alerts",text:"One or more postcodes you entered are not available. Please check and try again.",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}})},children:"Save details"})})]})}):"Explore"!==ke||C?"Explore"===ke&&C?(0,u.jsx)("div",{className:"property-table-loading",children:(0,u.jsx)(m.Z,{})}):"Tracking"===ke?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(b,{savedProperties:ce,userData:v,csvData:as,setCsvData:ts,getCurrentDate:()=>{const e=new Date,s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}-${a}-${s}`},handleVisitUrl:Qs,loadUserData:Ys,setSavedProperties:oe,latestFavourites:Ls,setLatestFavourites:$s,setLeadGenSection:Ce})}):"Letter campaigns"===ke?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)($,{letterProperties:je,setLetterProperties:je,userData:v,loadUserData:Ys,setLeadGenSection:Ce,signature:Ye,setSignature:Ge,letterTemplates:Ve,setLetterTemplates:qe,setLetterCampaigns:Ke,letterCampaigns:Je,campaignLoading:T,setCampaignLoading:D,availableCredits:Ie,setAvailableCredits:ze})}):"Archived"===ke?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(w,{handleVisitUrl:Qs,archivedProperties:he,loadUserData:Ys,setLeadGenSection:Ce,latestFavourites:Ls,setLatestFavourites:$s})}):"Manual matcher"===ke?(0,u.jsx)(j,{increaseUsageCount:ua,setErrors:a,userData:v,loadUserData:Ys,savedProperties:ce,archivedProperties:he,handleVisitUrl:Qs,savedActionShow:ca,setSavedActionShow:oa,handleSavedActionClose:da,setLeadGenSection:Ce,latestFavourites:Ls,handleSavedActionShow:e=>{oa(!0),Qe([])},setLatestFavourites:$s}):"Hidden properties"===ke?(0,u.jsx)(k,{hiddenProperties:ue,handleVisitUrl:Qs,loadUserData:Ys,setLeadGenSection:Ce,latestFavourites:Ls,setLatestFavourites:$s}):"":(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"results-block",children:[(0,u.jsxs)("div",{className:"property-insight-nav",children:[(0,u.jsxs)("div",{className:"property-insight-buttons",children:[(0,u.jsx)("h3",{className:"insight-button "+("Lettings"===Ue?"active":"inactive"),id:"left",onClick:()=>Ze("Lettings"),children:"Lettings"}),(0,u.jsx)("h3",{className:"insight-button "+("Sales"===Ue?"active":"inactive"),id:"right",onClick:()=>Ze("Sales"),children:"Sales"})]}),(0,u.jsxs)("div",{className:"action-section",children:[(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"bin-icon"}),(0,u.jsx)("h3",{onClick:e=>{ha(!0)},children:"Hide selection"})]}),(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:async()=>{if((0,n.Hb)()){const e=new Set(v.company_favourites.map((e=>e.rightmove_id))),a=[...Xe,...es].filter((s=>!e.has(s.rightmove_id)));if(console.log(a),0===a.length)return void console.log("No new favourites to add");try{const e=await l.Z.post("/api/epc_favourite/",a,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",e.data),$s(a.length),Ys(),y().fire({title:"\ud83d\ude0e action complete",text:`${a.length} properties added to your saved properties`,confirmButtonText:"Go to saved",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}).then((e=>{e.isConfirmed&&Ce("Tracking")})),Qe([]),ss([]),os(Be.map((()=>!1))),ms(Le.map((()=>!1)))}catch(s){console.error("Error saving favourite:",s),y().fire({icon:"error",title:"\ud83e\udee1 Wittle alerts",text:s.response.data.error||"There was an error processing your request.",footer:s.response.data.remaining_favourites?`You can only save ${s.response.data.remaining_favourites} more properties this month.`:"",confirmButtonColor:"#ED6B86",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}}else e("/access-denied"),console.log("logged out")},children:"Track selection"})]})]})]}),"Lettings"===Ue?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"filter-section",children:[(0,u.jsx)("h3",{children:"Filter properties"}),(0,u.jsxs)("select",{className:"dropdown",value:hs,onChange:e=>ps(e.target.value),children:[(0,u.jsx)("option",{value:"1day",children:"Updated in the last 24 hours"}),(0,u.jsx)("option",{value:"2days",children:"Updated in the last 48 hours"}),(0,u.jsx)("option",{value:"3days",children:"Updated in the last 72 hours"}),(0,u.jsx)("option",{value:"7days",children:"Updated in the last week"}),(0,u.jsx)("option",{value:"4weeks",children:"Updated in the last 4 weeks"}),(0,u.jsx)("option",{value:"8weeks",children:"Updated in the last 8 weeks"}),(0,u.jsx)("option",{value:"12weeks",children:"Updated in the last 12 weeks"}),(0,u.jsx)("option",{value:"16weeks",children:"Updated in the last 16 weeks"}),(0,u.jsx)("option",{value:"all",children:"All properties"}),(0,u.jsx)("option",{value:">8weeks",children:"Added over 8 weeks ago"}),(0,u.jsx)("option",{value:">12weeks",children:"Added over 12 weeks ago"}),(0,u.jsx)("option",{value:">16weeks",children:"Added over 16 weeks ago"})]})]}),(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Ms("Matching"),style:{color:"Matching"===Ps?"white":"#1A276C",backgroundColor:"Matching"===Ps?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Matching"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Ms("Multiple matches"),style:{color:"Multiple matches"===Ps?"white":"#1A276C",backgroundColor:"Multiple matches"===Ps?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Multiple matches"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Ms("No matches"),style:{color:"No matches"===Ps?"white":"#1A276C",backgroundColor:"No matches"===Ps?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"No matches"})]}),"Matching"===Ps?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",vs.length," rental properties that match your criteria"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:cs.length>0&&cs.every(Boolean),onChange:e=>{e.target.checked?(()=>{const e=new Set(v.company_favourites.map((e=>e.rightmove_id))),s=vs.map((e=>({...e.property_data,address:e.epc_data_list[0].address}))).filter((s=>!e.has(s.rightmove_id)));os(vs.map((()=>!0))),Qe(s)})():Vs()}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:ra,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Bathrooms"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:vs?vs.map(((e,s)=>{const a=Xe.some((s=>s.rightmove_id===e.property_data.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(a?"highlighted-row":""),children:[(0,u.jsx)("div",{className:"column",id:"column11",children:ce.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2764\ufe0f"})}):he.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2b50\ufe0f"})}):(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:cs[s],onChange:e=>((e,s)=>{const a=[...cs];a[s]=e.target.checked,os(a);const t={...vs[s].property_data,address:vs[s].epc_data_list[0].address};console.log("selected property->",t),e.target.checked?(console.log("checked"),Qe((e=>[...e,t]))):Qe((e=>e.filter((e=>e.rightmove_id!==t.rightmove_id))))})(e,s)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>Qs(e.property_data.url),children:_&&"Free"===_?(0,u.jsx)("h5",{children:e.property_data.displayAddress}):(0,u.jsx)("h5",{children:e.epc_data_list[0].address})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bathrooms})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]})})):" "})]})]}):"Multiple matches"===Ps?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",bs.length," rental properties that we do not have an exact match for"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("div",{id:"column1",className:"column",children:(0,u.jsx)("h5",{children:"#"})}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Listed address"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Size (sq. m)"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:ra,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Bathrooms"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsx)("h5",{children:"Action"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:bs?bs.map(((e,s)=>{const a=Os.has(s);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.displayAddress})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised&&e.property_data.reduced_revised?`Reduced ${e.property_data.reduced_revised}`:e.property_data.added_revised&&null===e.property_data.reduced_revised?e.property_data.added_revised:"N/a"})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:"nan"===e.property_data.size?"":(.092903*e.property_data.size).toFixed(1)})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bathrooms})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})}),(0,u.jsx)("div",{className:"column",id:"column11",children:ce.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2764\ufe0f"})}):he.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2b50\ufe0f"})}):(0,u.jsx)("h3",{className:"expansion",onClick:()=>xa(s),children:Os.has(s)?"^":"v"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),a&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"matching-title",children:"Matching properties"}),(0,u.jsxs)("div",{className:"expanded-section-titles",children:[(0,u.jsx)("p",{className:"column",id:"column1",children:"#"}),(0,u.jsx)("p",{className:"column",id:"column2",children:"Address"}),(0,u.jsx)("p",{className:"column",id:"column3",children:"Postcode"}),(0,u.jsx)("p",{className:"column",id:"column4",children:"Current EPC"}),(0,u.jsx)("p",{className:"column",id:"column5",children:"Potential EPC"}),(0,u.jsx)("p",{className:"column",id:"column6",children:"Floor"}),(0,u.jsx)("p",{className:"column",id:"column7",children:"Size"}),(0,u.jsx)("p",{className:"column",id:"column8"})]}),e.epc_data_list.map(((a,t)=>(0,u.jsxs)("div",{className:"expanded-content",children:[(0,u.jsxs)("p",{className:"column",id:"column1",onClick:()=>Qs(a.url),children:[t+1," "]}),(0,u.jsx)("p",{className:"column",id:"column2",onClick:()=>Qs(a.url),children:a.address}),(0,u.jsx)("p",{className:"column",id:"column3",onClick:()=>Qs(a.url),children:a.postcode}),(0,u.jsx)("p",{className:"column",id:"column4",onClick:()=>Qs(a.url),children:a.current_energy_efficiency}),(0,u.jsx)("p",{className:"column",id:"column5",onClick:()=>Qs(a.url),children:a.potential_energy_efficiency}),(0,u.jsx)("p",{className:"column",id:"column6",onClick:()=>Qs(a.url),children:a.final_floor_level}),(0,u.jsx)("p",{className:"column",id:"column7",onClick:()=>Qs(a.url),children:a.floor_area}),(0,u.jsx)("div",{className:"column",id:"column8",children:(0,u.jsx)("button",{className:"add-property",onClick:()=>ga(e,a,s),children:"+"})})]},t)))]})]})})):" "})]})]}):"No matches"===Ps?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",ws.length," rental properties that we do not have any match for"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Listed address"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:ra,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:ws?ws.map(((e,s)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.displayAddress})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):""]}):"Sales"===Ue?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"filter-section",children:[(0,u.jsx)("h3",{children:"Filter properties"}),(0,u.jsxs)("select",{className:"dropdown",value:hs,onChange:e=>ps(e.target.value),children:[(0,u.jsx)("option",{value:"1day",children:"Updated in the last 24 hours"}),(0,u.jsx)("option",{value:"2days",children:"Updated in the last 48 hours"}),(0,u.jsx)("option",{value:"3days",children:"Updated in the last 72 hours"}),(0,u.jsx)("option",{value:"7days",children:"Updated in the last week"}),(0,u.jsx)("option",{value:"4weeks",children:"Updated in the last 4 weeks"}),(0,u.jsx)("option",{value:"8weeks",children:"Updated in the last 8 weeks"}),(0,u.jsx)("option",{value:"12weeks",children:"Updated in the last 12 weeks"}),(0,u.jsx)("option",{value:"16weeks",children:"Updated in the last 16 weeks"}),(0,u.jsx)("option",{value:"all",children:"All properties"}),(0,u.jsx)("option",{value:">8weeks",children:"Added over 8 weeks ago"}),(0,u.jsx)("option",{value:">12weeks",children:"Added over 12 weeks ago"}),(0,u.jsx)("option",{value:">16weeks",children:"Added over 16 weeks ago"})]})]}),(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Zs("Matching"),style:{color:"Matching"===Us?"white":"#1A276C",backgroundColor:"Matching"===Us?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Matching"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Zs("Multiple matches"),style:{color:"Multiple matches"===Us?"white":"#1A276C",backgroundColor:"Multiple matches"===Us?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Multiple matches"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Zs("No matches"),style:{color:"No matches"===Us?"white":"#1A276C",backgroundColor:"No matches"===Us?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"No matches"})]}),F?(0,u.jsx)("div",{className:"property-table-loading",children:(0,u.jsx)(m.Z,{})}):F?"":(0,u.jsx)(u.Fragment,{children:"Matching"===Us?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",_s.length," properties for sale that match your criteria"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:ds.length>0&&ds.every(Boolean),onChange:e=>{e.target.checked?(()=>{const e=new Set(v.company_favourites.map((e=>e.rightmove_id))),s=_s.map((e=>({...e.property_data,address:e.epc_data_list[0].address}))).filter((s=>!e.has(s.rightmove_id)));ms(_s.map((()=>!0))),ss(s)})():qs()}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:ra,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Bathrooms"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:_s?_s.map(((e,s)=>{const a=es.some((s=>s.rightmove_id===e.property_data.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(a?"highlighted-row":""),children:[(0,u.jsx)("div",{className:"column",id:"column11",children:ce.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2764\ufe0f"})}):he.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2b50\ufe0f"})}):(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:ds[s],onChange:e=>((e,s)=>{const a=[...ds];a[s]=e.target.checked,ms(a);const t={..._s[s].property_data,address:_s[s].epc_data_list[0].address};console.log(t),e.target.checked?ss((e=>[...e,t])):ss((e=>e.filter((e=>e.rightmove_id!==t.rightmove_id))))})(e,s)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>Qs(e.property_data.url),children:_&&"Free"===_?(0,u.jsx)("h5",{children:e.property_data.displayAddress}):(0,u.jsx)("h5",{children:e.epc_data_list[0].address})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bathrooms})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]})})):" "})]})]}):"Multiple matches"===Us?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",ks.length," properties for sale that we do not have an exact match for"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Listed address"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Size (sq. m)"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:ra,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Bathrooms"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsx)("h5",{children:"Action"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:ks?ks.map(((e,s)=>{const a=Is.has(s);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.displayAddress})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised&&e.property_data.reduced_revised?`Reduced ${e.property_data.reduced_revised}`:e.property_data.added_revised&&null===e.property_data.reduced_revised?e.property_data.added_revised:"N/a"})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:"nan"===e.property_data.size?"":(.092903*e.property_data.size).toFixed(1)})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bathrooms})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})}),(0,u.jsx)("div",{className:"column",id:"column11",children:ce.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Saved"})}):he.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Archived"})}):(0,u.jsx)("h3",{className:"expansion",onClick:()=>ja(s),children:Is.has(s)?"^":"v"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),a&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"matching-title",children:"Matching properties"}),(0,u.jsxs)("div",{className:"expanded-section-titles",children:[(0,u.jsx)("p",{className:"column",id:"column1",children:"#"}),(0,u.jsx)("p",{className:"column",id:"column2",children:"Address"}),(0,u.jsx)("p",{className:"column",id:"column3",children:"Postcode"}),(0,u.jsx)("p",{className:"column",id:"column4",children:"Current EPC"}),(0,u.jsx)("p",{className:"column",id:"column5",children:"Potential EPC"}),(0,u.jsx)("p",{className:"column",id:"column6",children:"Floor"}),(0,u.jsx)("p",{className:"column",id:"column7",children:"Size"}),(0,u.jsx)("p",{className:"column",id:"column8"})]}),e.epc_data_list.map(((a,t)=>(0,u.jsxs)("div",{className:"expanded-content",children:[(0,u.jsxs)("p",{className:"column",id:"column1",onClick:()=>Qs(a.url),children:[t+1," "]}),(0,u.jsx)("p",{className:"column",id:"column2",onClick:()=>Qs(a.url),children:a.address}),(0,u.jsx)("p",{className:"column",id:"column3",onClick:()=>Qs(a.url),children:a.postcode}),(0,u.jsx)("p",{className:"column",id:"column4",onClick:()=>Qs(a.url),children:a.current_energy_efficiency}),(0,u.jsx)("p",{className:"column",id:"column5",onClick:()=>Qs(a.url),children:a.potential_energy_efficiency}),(0,u.jsx)("p",{className:"column",id:"column6",onClick:()=>Qs(a.url),children:a.final_floor_level}),(0,u.jsx)("p",{className:"column",id:"column7",onClick:()=>Qs(a.url),children:a.floor_area}),(0,u.jsx)("div",{className:"column",id:"column8",children:(0,u.jsx)("button",{className:"add-property",onClick:()=>ga(e,a,s),children:"+"})})]},t)))]})]})})):" "})]})]}):"No matches"===Us?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",Bs.length," properties for sale that we do not have any match for"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Listed address"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:ra,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:Bs?Bs.map(((e,s)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.displayAddress})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>Qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):""})]}):""]})})})})]})})})})]}),(0,u.jsx)(x,{savedActionShow:ca,handleSavedActionClose:da,setLeadGenSection:Ce,latestFavourites:Ls}),(0,u.jsx)(g,{propertyRemoveShow:ma,handleRemovePropertyClose:pa,removeProperty:async()=>{if((0,n.Hb)()){const e=new Set(v.company_favourites.map((e=>e.rightmove_id))),a=[...Xe,...es].filter((s=>!e.has(s.rightmove_id)));if(console.log(a),0===a.length)return void console.log("No properties to remove");try{const e=await l.Z.post("/api/epc_favourite/remove_property/",a,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",e.data),$s(a.length),Ys(),Ms("Matching"),Qe([]),ss([]),os(Be.map((()=>!1))),ms(Le.map((()=>!1))),pa()}catch(s){console.error("Error saving favourite:",s)}}else e("/access-denied"),console.log("logged out")}})]})}},69584:function(e,s,a){a.r(s);a(72791);var t=a(80184);s.default=e=>{let{signature:s,selectedTemplate:a,ownerData:l,address:i}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("section",{className:"basic-template",style:{},children:(0,t.jsxs)("div",{className:"template-section",style:{},children:[(0,t.jsxs)("div",{className:"template-content",children:[(0,t.jsx)("div",{className:"logo-section",style:{position:"relative",textAlign:"Left"===a.logo_position?"left":"Centre"===a.logo_position?"center":"right",height:`${a.logo_height}px`},children:(0,t.jsx)("div",{className:"logo-box",style:{display:"inline-block",width:`${a.logo_width}px`,height:`${a.logo_height}px`},children:s&&(0,t.jsx)("img",{src:s.logo,alt:"Logo",style:{maxWidth:`${a.logo_width}px`,maxHeight:`${a.logo_height}px`,width:"auto",height:"auto"}})})}),(0,t.jsx)("div",{className:"address-section",style:{position:"absolute",top:"150px"},children:(0,t.jsxs)("h3",{className:"address-details",style:{fontSize:"16px",fontWeight:"500",marginTop:"2px",padding:"0",lineHeight:"1.2"},children:[l.owner_name?l.owner_name:"The Owner",(0,t.jsx)("br",{}),i?i[0]:"",(0,t.jsx)("br",{}),i?i[1]:"",(0,t.jsx)("br",{}),i?i[2]:"",(0,t.jsx)("br",{}),i?i[3]:"",(0,t.jsx)("br",{}),i?i[4]:"",(0,t.jsx)("br",{})]})}),(0,t.jsxs)("div",{className:"body-section",style:{position:"absolute",top:"230px"},children:[(0,t.jsxs)("div",{className:"letter-intro",style:{display:"flex",flexDirection:"row",marginTop:"50px"},children:[(0,t.jsxs)("h3",{className:"intro",style:{fontSize:"16px",fontWeight:"500",marginRight:"3px"},children:[a.opening," "]}),(0,t.jsx)("h3",{className:"intro",style:{fontSize:"16px",fontWeight:"500"},children:l.owner_name?`${l.owner_name.split(" ")[0]}, `:"Homeowner,"})]}),(0,t.jsx)("h3",{className:"letter-paragraph",style:{marginTop:"15px",fontSize:"16px",fontWeight:"500"},children:a.template_body_1}),(0,t.jsx)("h3",{className:"letter-paragraph",style:{marginTop:"15px",fontSize:"16px",fontWeight:"500"},children:a.template_body_2}),(0,t.jsx)("h3",{className:"letter-paragraph",style:{marginTop:"15px",fontSize:"16px",fontWeight:"500"},children:a.template_body_3}),(0,t.jsx)("h3",{className:"letter-paragraph",style:{marginTop:"15px",fontSize:"16px",fontWeight:"500"},children:a.template_body_4}),(0,t.jsxs)("h3",{className:"sign-off-line",style:{fontSize:"16px",fontWeight:"500",marginTop:"20px",padding:"0",lineHeight:"1.2"},children:[a.closing&&(0,t.jsxs)(t.Fragment,{children:[a.closing,(0,t.jsx)("br",{})]}),a.sender_name&&(0,t.jsxs)(t.Fragment,{children:[s.first_name," ",s.last_name,(0,t.jsx)("br",{})]}),(0,t.jsx)(t.Fragment,{children:a.sender_role&&a.sender_company?(0,t.jsxs)(t.Fragment,{children:[s.role,", ",s.company_name,(0,t.jsx)("br",{})]}):a.sender_role?(0,t.jsxs)(t.Fragment,{children:[s.role,(0,t.jsx)("br",{})]}):a.sender_company?(0,t.jsxs)(t.Fragment,{children:[s.company_name,(0,t.jsx)("br",{})]}):null}),a.sender_mobile&&(0,t.jsxs)(t.Fragment,{children:[s.mobile,(0,t.jsx)("br",{})]}),a.sender_landline&&(0,t.jsxs)(t.Fragment,{children:[s.landline,(0,t.jsx)("br",{})]}),a.sender_email&&(0,t.jsxs)(t.Fragment,{children:[s.email,(0,t.jsx)("br",{})]}),a.sender_email&&(0,t.jsxs)(t.Fragment,{children:[s.website,(0,t.jsx)("br",{})]})]})]})]}),s&&(0,t.jsx)("h3",{className:"letter-footer",style:{position:"absolute",bottom:"-10px",textAlign:"center",fontSize:"16px",fontWeight:"500",left:"0",right:"0",width:"100%"},children:s.letter_footer})]})})})}},29193:function(e,s,a){e.exports=a.p+"static/media/transparent-spinner.f3eb62caffaa8568ecbe.gif"}}]);
//# sourceMappingURL=25.6e48b996.chunk.js.fc7e3e5738b3.map