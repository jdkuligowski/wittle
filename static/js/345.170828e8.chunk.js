"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[345],{3345:function(e,s,a){a.r(s);var t=a(2791),n=a(5294),o=a(7689),r=a(1087),l=a(2570),i=(a(9696),a(7165)),c=a(184);s.default=()=>{const e=(0,o.s0)(),[s,a]=(0,t.useState)({email:"",password:"",account:""}),d=e=>{const{name:t,value:n}=e.target;let o="";"email"!==t||(0,l.isEmail)(n)?"password"===t&&(o=N(n)):o="Invalid email address",x({...j,[t]:n}),a({...s,[t]:o})},[u,m]=(0,t.useState)("password"),[p,h]=(0,t.useState)(!1),[g,w]=(0,t.useState)(!1),[j,x]=(0,t.useState)({email:"",username:"",password:"",password_confirmation:"",first_name:"",last_name:""}),[f,v]=(0,t.useState)({email:"",username:"",password:"",password_confirmation:"",first_name:"",last_name:"",post:""}),N=e=>{const s=(0,l.matches)(e,/[A-Z]/),a=(0,l.matches)(e,/[a-z]/),t=(0,l.matches)(e,/\d/),n=(0,l.matches)(e,/[^A-Za-z0-9]/);return(0,l.isLength)(e,{min:8})?s?a?t?n?"":"Password must contain at least one special character":"Password must contain at least one digit":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter":"Password must be at least 8 characters long"},y=async()=>{if((0,i.Hb)()){console.log("trying to increase");try{const{data:e}=await n.Z.post("/api/usage/overall/",{},{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});console.log(e),"success"===e.status?console.log("Usage count increased successfully"):console.error("Failed to increase usage count:",e.message)}catch(s){console.error("Error:",s)}}else e("/access-denied"),console.log("logged out")};return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("section",{className:"login-page",children:(0,c.jsxs)("section",{className:"login-content",children:[(0,c.jsx)("div",{className:"logo-section",children:(0,c.jsx)("div",{className:"wittle-logo",onClick:()=>e("/")})}),(0,c.jsx)("h1",{children:"Sign in"}),(0,c.jsxs)("div",{className:"input-section",children:[(0,c.jsxs)("div",{className:"login-input",children:[(0,c.jsx)("h3",{children:"Email address"}),(0,c.jsx)("input",{placeholder:"Enter email address",type:"email",name:"email",className:"input",value:j.email,onChange:d}),s.email&&(0,c.jsxs)("p",{className:"error",children:["* ",s.email]})]}),(0,c.jsxs)("div",{className:"login-input",children:[(0,c.jsx)("h3",{children:"Password"}),(0,c.jsx)("input",{placeholder:"Enter password",type:u,name:"password",className:"password-input",value:j.password,onChange:d}),s.password&&(0,c.jsxs)("p",{className:"error",children:["* ",s.password]})]})]}),(0,c.jsx)("button",{onClick:async t=>{var o;if(t.preventDefault(),!s.email&&!s.password)try{const{data:s}=await n.Z.post("/api/auth/login/",j);o=s.token,window.localStorage.setItem("wittle-user-token",o),window.localStorage.setItem("wittle-username",s.username),e("/agents/profile"),y()}catch(r){const e=r.response.data.detail;e&&"Invalid credentials"===e&&a({...s,account:"Account not found"})}},type:"submit",children:"Sign in"}),s.account&&(0,c.jsxs)("p",{className:"error",id:"account",children:["* ",s.account]}),(0,c.jsxs)("p",{children:["Forgotten your login details? ",(0,c.jsx)(r.rU,{to:"/password-reset-request/",children:(0,c.jsx)("span",{children:"Request reset"})})]})]})})})}}}]);
//# sourceMappingURL=345.170828e8.chunk.js.map