"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[710],{15710:function(e,t,n){n.r(t);var a=n(72791),i=n(55294),s=n(57689),r=n(82570),o=(n(99696),n(69768)),l=n(74177),c=n(27112),d=(n(21830),n(80184));t.default=()=>{const e=(0,s.s0)(),[t,n]=(0,a.useState)(!1),[u,m]=(0,a.useState)(),[p,h]=(0,a.useState)(null),[f,g]=(0,a.useState)([]),[v,w]=(0,a.useState)("");(0,a.useEffect)((()=>{(()=>{const e=window.localStorage.getItem("wittle-subscription-tier");console.log("tier ->",e),L(e?{...S,tier:e}:{...S,tier:"Free"})})(),(async()=>{try{const e="/api/branch_list/",{data:t}=await i.Z.get(e);console.log("agent list ->",t),m(t);const n=t.map((e=>({value:e.id,label:e.branch_name})));g(n),console.log("company list ->",n)}catch(e){console.log(e)}})()}),[]);const[x,j]=(0,a.useState)("password"),[N,F]=(0,a.useState)("password"),[C,y]=(0,a.useState)(!1),[b,_]=(0,a.useState)(!1),[S,L]=(0,a.useState)({email:"",company_name:"",password:"",password_confirmation:"",first_name:"",last_name:"",tier:"Free"}),[k,D]=(0,a.useState)({email:"",company_name:"",password:"",password_confirmation:"",first_name:"",last_name:"",post:""}),E=e=>{const{name:t,value:n}=e.target;if(L("email"===t?{...S,[t]:n.toLowerCase()}:{...S,[t]:n}),"password"===t){const e=(e=>{const t=(0,r.matches)(e,/[A-Z]/),n=(0,r.matches)(e,/[a-z]/),a=(0,r.matches)(e,/\d/),i=(0,r.matches)(e,/[^A-Za-z0-9]/);return(0,r.isLength)(e,{min:8})?t?n?a?i?"":"Password must contain at least one special character":"Password must contain at least one digit":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter":"Password must be at least 8 characters long"})(n);D({...k,password:e})}else if("password_confirmation"===t){const e=n!==S.password?"Passwords don't match":"";D({...k,password_confirmation:e})}};return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("section",{className:"login-page",id:"register",children:t?(0,d.jsx)(l.Z,{}):(0,d.jsxs)("section",{className:"login-content",children:[(0,d.jsxs)("div",{className:"pricing-details",children:[(0,d.jsxs)("div",{className:"pricing-headers",children:[(0,d.jsx)("h3",{className:"pricing-option",onClick:()=>L({...S,tier:"Free"}),style:{backgroundColor:"Free"===S.tier?"#ED6B86":"#FDF7F0",color:"Free"===S.tier?"#FDF7F0":"#ED6B86"},children:"Free"}),(0,d.jsx)("h3",{className:"pricing-option",onClick:()=>L({...S,tier:"Lite"}),style:{backgroundColor:"Lite"===S.tier?"#ED6B86":"#FDF7F0",color:"Lite"===S.tier?"#FDF7F0":"#ED6B86"},children:"Lite"}),(0,d.jsx)("h3",{className:"pricing-option",onClick:()=>L({...S,tier:"Boost"}),style:{backgroundColor:"Boost"===S.tier?"#ED6B86":"#FDF7F0",color:"Boost"===S.tier?"#FDF7F0":"#ED6B86"},children:"Boost"}),(0,d.jsx)("h3",{className:"pricing-option",onClick:()=>L({...S,tier:"Elite"}),style:{backgroundColor:"Elite"===S.tier?"#ED6B86":"#FDF7F0",color:"Elite"===S.tier?"#FDF7F0":"#ED6B86"},children:"Elite"})]}),(0,d.jsxs)("div",{className:"pricing-title",children:[(0,d.jsxs)("h3",{className:"pricing-cost",children:["\xa3","Free"===S.tier?"0":"Lite"===S.tier?"45":"Boost"===S.tier?"99":"250","pm"]}),(0,d.jsx)("h4",{className:"pricing-subtitle",children:"What you'll get each month"}),(0,d.jsxs)("div",{className:"monthly-offer",children:[(0,d.jsxs)("div",{className:"feature-row",children:[(0,d.jsx)("div",{className:"feature-icon",children:(0,d.jsx)("div",{className:"icon"})}),(0,d.jsxs)("h3",{className:"feature",children:["Free"===S.tier?"10":"Lite"===S.tier?"75":"Boost"===S.tier?"250":"850"," valuation lead extracts"]})]}),(0,d.jsxs)("div",{className:"feature-row",children:[(0,d.jsx)("div",{className:"feature-icon",children:(0,d.jsx)("div",{className:"icon"})}),(0,d.jsxs)("h3",{className:"feature",children:["Free"===S.tier?"3":"Lite"===S.tier?"10":(S.tier,"Unlimited")," AI generated listings"]})]}),(0,d.jsxs)("div",{className:"feature-row",children:[(0,d.jsx)("div",{className:"feature-icon",children:(0,d.jsx)("div",{className:"icon"})}),(0,d.jsxs)("h3",{className:"feature",children:["Free"===S.tier?"3":"Lite"===S.tier?"10":(S.tier,"Unlimited")," insights database queries"]})]})]})]})]}),(0,d.jsxs)("div",{className:"register-page-split",children:[(0,d.jsx)("div",{className:"logo-section",children:(0,d.jsx)("div",{className:"wittle-logo",onClick:()=>e("/")})}),(0,d.jsx)("div",{className:"register-title",children:(0,d.jsx)("h1",{children:"Unlock the benefits of Wittle"})}),(0,d.jsxs)("div",{className:"register-section",children:[(0,d.jsxs)("div",{className:"login-double-input",children:[(0,d.jsxs)("div",{className:"login-input",children:[(0,d.jsx)("h3",{children:"First name"}),(0,d.jsx)("input",{type:"text",name:"first_name",className:"input",value:S.first_name,onChange:E}),k.first_name&&(0,d.jsxs)("p",{className:"error",children:["* ",k.first_name]})]}),(0,d.jsxs)("div",{className:"login-input",children:[(0,d.jsx)("h3",{children:"Last name"}),(0,d.jsx)("input",{type:"text",name:"last_name",className:"input",value:S.last_name,onChange:E}),k.last_name&&(0,d.jsxs)("p",{className:"error",children:["* ",k.last_name]})]})]}),(0,d.jsxs)("div",{className:"login-input",children:[(0,d.jsx)("h3",{children:"Company"}),(0,d.jsx)(o.Z,{isClearable:!0,onChange:(e,t)=>{h(e);const n=e?e.label:"";L({...S,company_name:n})},options:f,value:p,styles:{control:e=>({...e,fontSize:"0.8rem",fontFamily:"Poppins",color:"#FDF7F0",borderColor:"#FDF7F0",borderRadius:"10px",backgroundColor:"#1A276C",padding:"0px 0px",minHeight:"35px"}),option:(e,t)=>({...e,color:t.isSelected?"white":"#333",backgroundColor:t.isSelected?"#1A276C":"white",fontSize:"0.8rem"}),singleValue:(e,t)=>({...e,color:"#FDF7F0",fontSize:"0.8rem",fontFamily:"Poppins",padding:"0px 0px"}),input:e=>({...e,color:"#FDF7F0"})},placeholder:"Select or add a company...",name:"company_name"}),k.company_name&&(0,d.jsxs)("p",{className:"error",children:["* ",k.company_name]})]}),(0,d.jsxs)("div",{className:"login-input",children:[(0,d.jsx)("h3",{children:"Email"}),(0,d.jsx)("input",{type:"email",name:"email",className:"input",value:S.email,onChange:E}),k.email&&(0,d.jsxs)("p",{className:"error",children:["* ",k.email]})]}),(0,d.jsxs)("div",{className:"login-input",children:[(0,d.jsx)("h3",{children:"Password"}),(0,d.jsx)("input",{type:N,name:"password",className:"password-input-register",value:S.password,onChange:E}),k.password&&(0,d.jsxs)("p",{className:"error",children:["* ",k.password]})]}),(0,d.jsxs)("div",{className:"login-input",children:[(0,d.jsx)("h3",{children:"Confirm password"}),(0,d.jsx)("input",{type:"password",name:"password_confirmation",className:"input",value:S.password_confirmation,onChange:E}),k.password_confirmation&&(0,d.jsxs)("p",{className:"error",children:["* ",k.password_confirmation]})]})]}),(0,d.jsx)("button",{type:"submit",onClick:async t=>{t.preventDefault(),n(!0),D({}),console.log("start register");const a={...k,first_name:S.first_name.length<1?"Add first name":"",last_name:S.last_name.length<1?"Add last name":"",company_name:S.company_name.length<1?"Add company":"",email:(0,r.isEmail)(S.email)?"":"Invalid email address"};D(a),console.log("checked register errors");if(Object.values(a).some((e=>""!==e)))n(!1);else{console.log("post register");try{const t=await i.Z.post("/api/auth/register/",S);if(t.data.checkout_session_id){const e=await(0,c.J)("pk_live_51O02bMBKPXWTORF2v4zeIPMCFzuSvlY6cJaKiStMAVm0cf9LvmMXhobEZ9VPbVVO9kGlfxTPtFkszZAfv10s3oG800dx3kYK7K"),{error:n}=await e.redirectToCheckout({sessionId:t.data.checkout_session_id});n&&(console.error("Stripe Checkout error:",n),D({...k,post:"Failed to initiate payment."}))}else try{const t=await i.Z.post("/api/auth/login/",{email:S.email,password:S.password});s=t.data.token,window.localStorage.setItem("wittle-user-token",s),window.localStorage.setItem("wittle-username",t.data.email),e("/agents/profile")}catch(o){console.error("Login error:",o),D({...k,post:"Login failed. Please check credentials."})}}catch(k){console.error("Registration error:",k),D({...k,post:"Registration failed. Please try again."})}finally{n(!1)}var s}},children:"Register"}),k.post&&(0,d.jsxs)("p",{className:"error",children:["* ",k.post]})]})]})})})}},74177:function(e,t,n){n(72791);var a=n(80184);t.Z=()=>(0,a.jsx)("div",{className:"loading-gif",children:(0,a.jsx)("img",{src:n(29193),alt:"loading gif"})})},69768:function(e,t,n){n.d(t,{Z:function(){return h}});var a=n(87462),i=n(72791),s=n(50241),r=n(8003),o=n(1413),l=n(42982),c=n(45987),d=n(22723),u=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],m=function(){var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,n=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),a=String(t.getOptionValue(e)).toLowerCase(),i=String(t.getOptionLabel(e)).toLowerCase();return a===n||i===n},p={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n,a){return!(!e||t.some((function(t){return m(e,t,a)}))||n.some((function(t){return m(e,t,a)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};n(54164),n(51672);var h=(0,i.forwardRef)((function(e,t){var n=function(e){var t=e.allowCreateWhileLoading,n=void 0!==t&&t,a=e.createOptionPosition,r=void 0===a?"last":a,m=e.formatCreateLabel,h=void 0===m?p.formatCreateLabel:m,f=e.isValidNewOption,g=void 0===f?p.isValidNewOption:f,v=e.getNewOptionData,w=void 0===v?p.getNewOptionData:v,x=e.onCreateOption,j=e.options,N=void 0===j?[]:j,F=e.onChange,C=(0,c.Z)(e,u),y=C.getOptionValue,b=void 0===y?s.g:y,_=C.getOptionLabel,S=void 0===_?s.b:_,L=C.inputValue,k=C.isLoading,D=C.isMulti,E=C.value,O=C.name,P=(0,i.useMemo)((function(){return g(L,(0,d.H)(E),N,{getOptionValue:b,getOptionLabel:S})?w(L,h(L)):void 0}),[h,w,S,b,L,g,N,E]),Z=(0,i.useMemo)((function(){return!n&&k||!P?N:"first"===r?[P].concat((0,l.Z)(N)):[].concat((0,l.Z)(N),[P])}),[n,r,k,P,N]),B=(0,i.useCallback)((function(e,t){if("select-option"!==t.action)return F(e,t);var n=Array.isArray(e)?e:[e];if(n[n.length-1]!==P)F(e,t);else if(x)x(L);else{var a=w(L,L),i={action:"create-option",name:O,option:a};F((0,d.D)(D,[].concat((0,l.Z)((0,d.H)(E)),[a]),a),i)}}),[w,L,D,O,P,x,F,E]);return(0,o.Z)((0,o.Z)({},C),{},{options:Z,onChange:B})}((0,r.u)(e));return i.createElement(s.S,(0,a.Z)({ref:t},n))}))},29193:function(e,t,n){e.exports=n.p+"static/media/transparent-spinner.f3eb62caffaa8568ecbe.gif"},27112:function(e,t,n){n.d(t,{J:function(){return h}});var a,i="https://js.stripe.com/v3",s=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,r="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",o=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(i).concat(t);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},l=null,c=null,d=null,u=function(e){return null!==l?l:(l=new Promise((function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(r),window.Stripe)t(window.Stripe);else try{var a=function(){for(var e=document.querySelectorAll('script[src^="'.concat(i,'"]')),t=0;t<e.length;t++){var n=e[t];if(s.test(n.src))return n}return null}();if(a&&e)console.warn(r);else if(a){if(a&&null!==d&&null!==c){var l;a.removeEventListener("load",d),a.removeEventListener("error",c),null===(l=a.parentNode)||void 0===l||l.removeChild(a),a=o(e)}}else a=o(e);d=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),c=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(n),a.addEventListener("load",d),a.addEventListener("error",c)}catch(u){return void n(u)}else t(null)}))).catch((function(e){return l=null,Promise.reject(e)}))},m=!1,p=function(){return a||(a=u(null).catch((function(e){return a=null,Promise.reject(e)})))};Promise.resolve().then((function(){return p()})).catch((function(e){m||console.warn(e)}));var h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];m=!0;var a=Date.now();return p().then((function(e){return function(e,t,n){if(null===e)return null;var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"3.2.0",startTime:t})}(a,n),a}(e,t,a)}))}}}]);
//# sourceMappingURL=710.410b6848.chunk.js.6697b2d144fa.map