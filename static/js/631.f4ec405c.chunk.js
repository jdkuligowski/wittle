"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[631],{55959:function(e,s,t){t(28381);var a=t(29343);s.Z=()=>(0,a.jsx)("div",{className:"loading-gif",children:(0,a.jsx)("img",{src:t(60782),alt:"loading gif"})})},48925:function(e,s,t){t(28381);var a=t(29343);s.Z=e=>{let{setProfileContent:s,profileContent:t,profileDetail:i,setProfileDetail:r}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"mobile-selector-section",children:(0,a.jsx)("div",{className:"mobile-title-slider",children:"Search"===t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"pills",onClick:()=>r("Wittle search"),style:{fontWeight:"Wittle search"===i?"700":"500",backgroundColor:"Wittle search"===i?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Wittle search"}),(0,a.jsx)("h2",{className:"pills",onClick:()=>r("Property search"),style:{fontWeight:"Property search"===i?"700":"500",backgroundColor:"Property search"===i?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Property search"}),(0,a.jsx)("h2",{className:"pills",onClick:()=>r("Saved properties"),style:{fontWeight:"Saved properties"===i?"700":"500",backgroundColor:"Saved properties"===i?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Saved properties"}),(0,a.jsx)("h2",{className:"pills",onClick:()=>r("Saved searches"),style:{fontWeight:"Saved searches"===i?"700":"500",backgroundColor:"Saved searches"===i?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Saved searches"}),(0,a.jsx)("h2",{className:"pills",onClick:()=>r("Property comparison"),style:{fontWeight:"Property comparison"===i?"700":"500",backgroundColor:"Property comparison"===i?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Property comparison"})]}):"Lifestyle"===t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"pills",onClick:()=>r("Lifestyle search"),style:{fontWeight:"Lifestyle search"===i?"700":"500",backgroundColor:"Lifestyle search"===i?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Search"}),(0,a.jsx)("h2",{className:"pills",onClick:()=>r("List"),style:{fontWeight:"List"===i?"700":"500",backgroundColor:"List"===i?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Saved places"}),(0,a.jsx)("h2",{className:"pills",onClick:()=>r("Lifestyle insights"),style:{fontWeight:"Lifestyle insights"===i?"700":"500",backgroundColor:"Lifestyle insights"===i?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Insights"})]}):"Admin"===t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"pills",onClick:()=>r("Admin dashboard"),style:{fontWeight:"Admin dashboard"===i?"700":"500",backgroundColor:"Admin dashboard"===i?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Dashboard"}),(0,a.jsx)("h2",{className:"pills",onClick:()=>r("Admin opportunities"),style:{fontWeight:"Admin opportunities"===i?"700":"500",backgroundColor:"Admin opportunities"===i?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Opportunity"})]}):""})})})}},8631:function(e,s,t){t.r(s);var a=t(28381),i=t(65293),r=t(42524),n=t(15211),c=(t(47142),t(95325),t(48925),t(8772)),o=t(59693),l=t(37336),d=t(55959),h=t(29343);i.ZP.defaults.xsrfCookieName="csrftoken",i.ZP.defaults.xsrfHeaderName="X-CSRFToken";s.default=()=>{const e=(0,r.s0)(),[s,t]=(0,a.useState)(),[u,g]=(0,a.useState)(),[p,m]=(0,a.useState)(),[x,j]=(0,a.useState)(!1),[f,y]=(0,a.useState)("Comparison"),[v,N]=(0,a.useState)("Comparison"),[b,C]=(0,a.useState)(!1),[k,F]=(0,a.useState)(""),[P,S]=(0,a.useState)(""),[_,E]=(0,a.useState)(),[A,w]=(0,a.useState)(),[L,W]=(0,a.useState)([]),[Z,D]=(0,a.useState)([]),[B,R]=(0,a.useState)(""),[$,z]=(0,a.useState)("Efficiency"),[H,U]=(0,a.useState)([]),[I,T]=(0,a.useState)(sessionStorage.getItem("sessionName")||"");(0,a.useEffect)((()=>{(0,n.Hb)()?(async()=>{try{const{data:e}=await i.ZP.get(`/api/auth/profile/${(0,n.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("user data ->",e),g(e)}catch(e){t(!0),console.log(e)}})():(e("/access-denied"),console.log("no account"))}),[]);const Y=async()=>{if((0,n.Hb)()){console.log("trying to increase");try{const{data:e}=await i.ZP.post("/api/usage/",{},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log(e),"success"===e.status?console.log("Usage count increased successfully"):console.error("Failed to increase usage count:",e.message)}catch(s){console.error("Error:",s)}}else e("/access-denied"),console.log("logged out")};function M(e){return H.some((s=>s.postcode===e.postcode&&s.address===e.address))}return(0,a.useEffect)((()=>{(async()=>{try{const{data:e}=await i.ZP.get("/api/epc_favourite/",{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});U(e)}catch(e){console.error("Error fetching favourites:",e)}})()}),[]),(0,a.useEffect)((()=>{I&&sessionStorage.setItem("sessionName",I)}),[I]),(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("section",{className:"agent-profile-page",children:[(0,h.jsx)("div",{className:"desktop-nav",children:(0,h.jsx)(c.Z,{navbarColour:"#FDF7F0"})}),(0,h.jsx)("div",{className:"mobile-nav",children:(0,h.jsx)(l.Z,{setProfileContent:y,profileContent:f,profileDetail:v,setProfileDetail:N})}),(0,h.jsx)(o.Z,{setProfileDetail:N,variableSide:b,setProfileContent:y,setVariableSide:C,userData:u}),(0,h.jsx)(h.Fragment,{children:u&&u.usage_stats[0]&&("Basic"===u.usage_stats[0].package&&u.usage_stats[0].epc_monthly_count<11||"Unlimited"===u.usage_stats[0].package||"Advanced Pilot"===u.usage_stats[0].package&&u.usage_stats[0].epc_monthly_count<101)?(0,h.jsxs)("section",{className:"property-finder",children:[(0,h.jsx)("h1",{children:"Find the full address of properties listed on the market"}),(0,h.jsxs)("div",{className:"epc-matcher",children:[(0,h.jsxs)("div",{className:"input-section",children:[(0,h.jsx)("h3",{className:"sub-title",children:"Add property details"}),p?(0,h.jsx)(d.Z,{}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"input-block",children:[(0,h.jsx)("h3",{children:"Property category"}),(0,h.jsx)("input",{type:"text",value:I,onChange:e=>T(e.target.value),placeholder:"Enter category..."})]}),(0,h.jsxs)("div",{className:"input-block",children:[(0,h.jsx)("h3",{children:"Postcode"}),(0,h.jsx)("input",{type:"text",value:k,onChange:e=>F(e.target.value),placeholder:"Enter postcode..."})]}),(0,h.jsxs)("div",{className:"input-block",children:[(0,h.jsx)("h3",{children:"Road name"}),(0,h.jsx)("input",{type:"text",value:P,onChange:e=>S(e.target.value)})]}),(0,h.jsxs)("div",{className:"input-block",children:[(0,h.jsx)("h3",{children:"Efficiency (numbers) or Rating (letters)"}),(0,h.jsxs)("select",{onChange:e=>z(e.target.value),children:[(0,h.jsx)("option",{children:"Efficiency"}),(0,h.jsx)("option",{children:"Rating"})]})]}),"Efficiency"===$?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"input-block",children:[(0,h.jsx)("h3",{children:"Current Energy Efficiency"}),(0,h.jsx)("input",{type:"number",value:_,onChange:e=>E(e.target.value)})]}),(0,h.jsxs)("div",{className:"input-block",children:[(0,h.jsx)("h3",{children:"Potential Energy Efficiency"}),(0,h.jsx)("input",{type:"number",value:A,onChange:e=>w(e.target.value)})]})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"input-block",children:[(0,h.jsx)("h3",{children:"Current Energy Rating"}),(0,h.jsx)("input",{type:"text",value:_,onChange:e=>E(e.target.value)})]}),(0,h.jsxs)("div",{className:"input-block",children:[(0,h.jsx)("h3",{children:"Potential Energy Rating"}),(0,h.jsx)("input",{type:"text",value:A,onChange:e=>w(e.target.value)})]})]}),(0,h.jsx)("button",{onClick:async()=>{m(!0),j(!1);try{const{data:e}=await i.ZP.get(`/api/epc/${k}`);if(console.log("Postcode data ->",e),W(e),e&&Array.isArray(e)&&e.length>0){let s=e;"Efficiency"===$?s=s.filter((e=>(!P||e.address.toLowerCase().includes(P.toLowerCase()))&&(!_||e.current_energy_efficiency===Number(_))&&(!A||e.potential_energy_efficiency===Number(A)))):"Rating"===$&&(s=s.filter((e=>(!P||e.address.toLowerCase().includes(P.toLowerCase()))&&(!_||e.current_energy_rating===_.toUpperCase())&&(!A||e.potential_energy_rating===A.toUpperCase())))),s=s.sort(((e,s)=>new Date(s.inspection_date)-new Date(e.inspection_date))),s.length>0&&(D(s),console.log("filtered data->",s),Y()),m(!1)}else console.log("No postcode data available"),m(!1)}catch(e){D(""),t(!0),console.log(e),m(!1)}j(!0)},children:"Load Properties"})]})]}),(0,h.jsxs)("div",{className:"property-results",children:[(0,h.jsx)("h3",{className:"sub-title",children:"Matching properties"}),(0,h.jsx)("div",{className:"results-block",children:0!==L.length||x?x&&0===Z.length?(0,h.jsx)("h3",{className:"response",children:"\ud83e\udd26\u200d\u2640\ufe0f we couldn't find anything that matched your search"}):x&&Z.length>0?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"results-headers",children:[(0,h.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,h.jsx)("div",{id:"column2",className:"column",children:(0,h.jsx)("h5",{children:"Address"})}),(0,h.jsx)("div",{id:"column3",className:"column",children:(0,h.jsx)("h5",{children:"Postcode"})}),(0,h.jsx)("div",{id:"column4",className:"column",children:(0,h.jsx)("h5",{children:"Last inspection"})}),(0,h.jsx)("div",{id:"column5",className:"column",children:(0,h.jsx)("h5",{})})]}),(0,h.jsx)("hr",{className:"property-divider"}),(0,h.jsx)("div",{className:"results-details",children:Z?Z.map(((s,t)=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"results-content",children:[(0,h.jsx)("div",{className:"column",id:"column1",children:(0,h.jsx)("h5",{children:t+1})}),(0,h.jsx)("div",{className:"column",id:"column2",children:(0,h.jsx)("h5",{children:s.address})}),(0,h.jsx)("div",{className:"column",id:"column3",children:(0,h.jsx)("h5",{children:s.postcode})}),(0,h.jsx)("div",{className:"column",id:"column4",children:(0,h.jsx)("h5",{children:s.inspection_date})}),(0,h.jsx)("div",{className:"column",id:"column5",children:M(s)?(0,h.jsx)("button",{className:"added",onClick:()=>(async s=>{if((0,n.Hb)())try{const{data:e}=await i.ZP.delete("/api/epc_favourite/",{data:{postcode:s.postcode,address:s.address},headers:{Authorization:`Bearer ${(0,n.hP)()}`}});e.message&&U((e=>e.filter((e=>e.postcode!==s.postcode||e.address!==s.address))))}catch(t){console.error("Error deleting favourite:",t)}else e("/access-denied"),console.log("logged out")})(s),children:"\u2714\ufe0f"}):(0,h.jsx)("button",{className:"add",onClick:()=>(async s=>{if((0,n.Hb)())try{const{data:e}=await i.ZP.post("/api/epc_favourite/",{postcode:s.postcode,address:s.address,category:I},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("session name->",I),e.message&&!M(s)&&U((e=>[...e,{postcode:s.postcode,address:s.address,category:I}]))}catch(t){console.error("Error saving favourite:",t)}else e("/access-denied"),console.log("logged out")})(s),children:"+"})})]},t),(0,h.jsx)("hr",{className:"property-divider"})]}))):""})]}):"":(0,h.jsx)("h3",{className:"response",children:"\ud83d\udd0e Start new search to see results"})})]})]})]}):u&&"Basic"===u.usage_stats[0].package&&u.usage_stats[0].epc_monthly_count>=11?(0,h.jsxs)("section",{className:"property-finder",children:[(0,h.jsx)("h1",{children:"\ud83d\ude4f Thanks for enjoying Wittle!"}),(0,h.jsx)("h3",{className:"limit-reached",children:"You have reached the free limit of matches for this month, get in touch to unlock another 90 matches."})]}):u&&"Advanced pilot"===u.usage_stats[0].package&&u.usage_stats[0].epc_monthly_count>=101?(0,h.jsxs)("section",{className:"property-finder",children:[(0,h.jsx)("h1",{children:"\ud83d\ude4f Thanks for enjoying Wittle!"}),(0,h.jsx)("h3",{className:"limit-reached",children:"You have carried out 100 matches this month, get in touch to discuss increasing your limit."})]}):""})]})})}},60782:function(e,s,t){e.exports=t.p+"static/media/loading-gif-2.1a30597dcd8d7628a1a5.gif"}}]);
//# sourceMappingURL=631.f4ec405c.chunk.js.map