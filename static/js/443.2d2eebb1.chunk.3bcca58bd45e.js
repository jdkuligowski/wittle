(self.webpackChunkclient=self.webpackChunkclient||[]).push([[443,177],{74177:function(e,s,r){"use strict";r(72791);var n=r(80184);s.Z=()=>(0,n.jsx)("div",{className:"loading-gif",children:(0,n.jsx)("img",{src:r(57837),alt:"loading gif"})})},24604:function(e,s,r){"use strict";r(72791);var n=r(80184);s.Z=e=>{let{setProfileContent:s,profileContent:r,profileDetail:t,setProfileDetail:a}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"mobile-selector-section",children:(0,n.jsx)("div",{className:"mobile-title-slider",children:"Search"===r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"pills",onClick:()=>a("Wittle search"),style:{fontWeight:"Wittle search"===t?"700":"500",backgroundColor:"Wittle search"===t?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Wittle search"}),(0,n.jsx)("h2",{className:"pills",onClick:()=>a("Property search"),style:{fontWeight:"Property search"===t?"700":"500",backgroundColor:"Property search"===t?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Property search"}),(0,n.jsx)("h2",{className:"pills",onClick:()=>a("Saved properties"),style:{fontWeight:"Saved properties"===t?"700":"500",backgroundColor:"Saved properties"===t?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Saved properties"}),(0,n.jsx)("h2",{className:"pills",onClick:()=>a("Saved searches"),style:{fontWeight:"Saved searches"===t?"700":"500",backgroundColor:"Saved searches"===t?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Saved searches"}),(0,n.jsx)("h2",{className:"pills",onClick:()=>a("Property comparison"),style:{fontWeight:"Property comparison"===t?"700":"500",backgroundColor:"Property comparison"===t?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Property comparison"})]}):"Lifestyle"===r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"pills",onClick:()=>a("Lifestyle search"),style:{fontWeight:"Lifestyle search"===t?"700":"500",backgroundColor:"Lifestyle search"===t?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Search"}),(0,n.jsx)("h2",{className:"pills",onClick:()=>a("List"),style:{fontWeight:"List"===t?"700":"500",backgroundColor:"List"===t?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Saved places"}),(0,n.jsx)("h2",{className:"pills",onClick:()=>a("Lifestyle insights"),style:{fontWeight:"Lifestyle insights"===t?"700":"500",backgroundColor:"Lifestyle insights"===t?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Insights"})]}):"Admin"===r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"pills",onClick:()=>a("Admin dashboard"),style:{fontWeight:"Admin dashboard"===t?"700":"500",backgroundColor:"Admin dashboard"===t?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Dashboard"}),(0,n.jsx)("h2",{className:"pills",onClick:()=>a("Admin opportunities"),style:{fontWeight:"Admin opportunities"===t?"700":"500",backgroundColor:"Admin opportunities"===t?"#FFA7E5":"rgba(255, 167, 229, 0.1)"},children:"Opportunity"})]}):""})})})}},9443:function(e,s,r){"use strict";r.r(s);var n=r(72791),t=r(31243),a=r(57689),l=r(97165),i=r(30948),o=(r(99696),r(24604),r(60764)),c=r(52094),d=r(78084),u=r(74177),h=r(98472),p=r(80184);t.Z.defaults.xsrfCookieName="csrftoken",t.Z.defaults.xsrfHeaderName="X-CSRFToken";s.default=()=>{const e=(0,a.s0)(),[s,r]=(0,n.useState)(),[m,x]=(0,n.useState)(),[v,j]=(0,n.useState)(),[f,y]=(0,n.useState)(!1),[g,_]=(0,n.useState)("Comparison"),[b,N]=(0,n.useState)("Comparison"),[k,C]=(0,n.useState)(!1),[S,w]=(0,n.useState)(""),[F,A]=(0,n.useState)(""),[P,O]=(0,n.useState)(),[E,L]=(0,n.useState)(),[D,B]=(0,n.useState)([]),[R,U]=(0,n.useState)([]),[W,$]=(0,n.useState)(""),[T,Z]=(0,n.useState)("Efficiency"),[H,I]=(0,n.useState)([]),[M,z]=(0,n.useState)(),[V,Y]=(0,n.useState)(),[q,G]=(0,n.useState)(sessionStorage.getItem("sessionName")||""),[J,X]=(0,n.useState)(["SW8"]),[K,Q]=(0,n.useState)(),[ee,se]=(0,n.useState)("Home"),[re,ne]=(0,n.useState)([]),[te,ae]=(0,n.useState)([]),[le,ie]=(0,n.useState)([]),[oe,ce]=(0,n.useState)("Lettings"),[de,ue]=(0,n.useState)(!1),[he,pe]=(0,n.useState)({postcode:"",bathrooms_min:null,bathrooms_max:null,bedrooms_min:null,bedrooms_max:null,price_min:null,price_max:null,channel:"",rental_additional:""}),[me,xe]=(0,n.useState)([]),[ve,je]=(0,n.useState)(),[fe,ye]=(0,n.useState)({latitude:51.515419,longitude:-.141099,zoom:11.5}),[ge,_e]=(0,n.useState)([]),[be,Ne]=(0,n.useState)(te.map((()=>!1))),[ke,Ce]=(0,n.useState)("2days"),[Se,we]=(0,n.useState)([]),[Fe,Ae]=(0,n.useState)([]),Pe=()=>{if((0,l.Hb)()){(async()=>{try{const{data:e}=await t.Z.get(`/api/auth/profile/${(0,l.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}});if(console.log("user data ->",e),x(e),e.lead_gen_details.length>0){pe(e.lead_gen_details[0]);const s=e.epc_favourites.filter((e=>null!==e.rightmove_id&&"Saved"===e.action)),r=e.epc_favourites.filter((e=>null!==e.rightmove_id&&"Extracted"===e.action)),n=[...s,...r].map((e=>e.rightmove_id));we(n);const t=Ee(e.epc_favourites);Le(e,n,ke),z(s),Y(r),je(t),console.log("existing dtails ->",e.lead_gen_details[0])}else{Le(e,[],ke),console.log("date -> ",ke)}}catch(e){r(!0),console.log(e)}})()}else e("/access-denied"),console.log("no account")};(0,n.useEffect)((()=>{Pe()}),[]);const Oe=()=>{Ne(Fe.map((()=>!1))),xe([])},Ee=e=>e.filter((e=>null!==e.rightmove_id&&"Saved"===e.action)).map(((e,s)=>({item:s+1,url:e.url,address:e.address,postcode:e.postcode,addedOn:e.added_revised,property_type:e.property_type,price:e.price,bedrooms:e.bedrooms,bathrooms:e.bathrooms,let_available_date:e.let_available_date,date_added:e.date_added_db,agent:e.agent,channel:e.channel}))),Le=async(e,s,r)=>{j(!0);const n=e.lead_gen_details[0].postcode,a=e.lead_gen_details[0].bedrooms_min,i=e.lead_gen_details[0].bedrooms_max,o=e.lead_gen_details[0].price_min,c=e.lead_gen_details[0].price_max,d=e.lead_gen_details[0].rental_additional;try{let e=`/api/epc_properties_rental/combined-epc-results/?postcode=${n}&min_bedrooms=${a}&max_bedrooms=${i}&min_price=${o}&max_price=${c}&rental_additional=${d}`;r&&(e+=`&date_filter=${r}`),s&&s.length>0&&(e+=`&exclude_ids=${s.join(",")}`);const{data:u}=await t.Z.get(e,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}});console.log("combined data ->",u);const h=u.filter((e=>0===e.epc_data_list.length)),p=u.filter((e=>1===e.epc_data_list.length)),m=u.filter((e=>e.epc_data_list.length>1));console.log("sngle matches ->",p),ne(h),ae(p),ie(m),j(!1)}catch(u){console.error("can't access combined data ->",u)}},De=e=>{window.open(e,"_blank","width=1200,height=800,resizable=yes,scrollbars=yes,status=yes")},Be=["200000","300000","400000","500000","600000","700000","800000","900000","1000000","1250000","1500000","1750000","2000000","2250000","2500000","2750000","3000000","3500000","4000000","5000000","7500000","10000000","12500000","15000000","20000000","30000000","40000000","50000000"],Re=["500","600","700","800","900","1000","1100","1200","1300","1400","1500","1600","1700","1800","1900","2000","2250","2500","2750","3000","3250","3500","4000","4500","5000","5500","6000","7000","8000","9000","10000","12500","15000","20000","25000","30000","40000","50000","60000"];(0,n.useEffect)((()=>{const e=((e,s)=>{if(!s||"all"===s)return e;const r="2days"===s?2:"7days"===s?7:"1month"===s?30:"1to3months"===s?90:"3to6months"===s?180:0;return e.filter((e=>{const s=Ue(e.property_data.added_revised),n=Ue(e.property_data.reduced_revised);let t;return t=s&&n?s>n?s:n:s||n,!!t&&We(t,r)}))})(te,ke);Ae(e)}),[te,ke]);const Ue=e=>{if(!e)return null;const[s,r,n]=e.split("/");return new Date(n,r-1,s)},We=(e,s)=>{const r=new Date,n=new Date;return n.setDate(r.getDate()-s),e>=n};return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("section",{className:"agent-profile-page",children:[(0,p.jsx)("div",{className:"desktop-nav",children:(0,p.jsx)(o.Z,{navbarColour:"#FDF7F0"})}),(0,p.jsx)("div",{className:"mobile-nav",children:(0,p.jsx)(d.Z,{setProfileContent:_,profileContent:g,profileDetail:b,setProfileDetail:N})}),(0,p.jsx)(c.Z,{setProfileDetail:N,variableSide:k,setProfileContent:_,setVariableSide:C,userData:m}),(0,p.jsx)("section",{className:"main-body",children:(0,p.jsx)("section",{className:"main-body-details",children:(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("section",{className:"property-finder",children:[(0,p.jsxs)("div",{className:"listing-options",children:[(0,p.jsxs)("div",{className:"listing-buttons",children:[(0,p.jsx)("h5",{className:"no-print",onClick:()=>se("Home"),style:{borderBottom:"Home"===ee?"3px solid #ED6B86":"none",textUnderlineOffset:"Home"===ee?"0.5em":"initial",fontWeight:"Home"===ee?"700":"400"},children:"Home"}),(0,p.jsx)("h5",{className:"no-print",onClick:()=>se("Explore properties"),style:{borderBottom:"Explore properties"===ee?"3px solid #ED6B86":"none",textUnderlineOffset:"Explore properties"===ee?"0.5em":"initial",fontWeight:"Explore properties"===ee?"700":"400"},children:"Explore properties"}),(0,p.jsx)("h5",{className:"no-print",onClick:()=>se("Saved properties"),style:{borderBottom:"Saved properties"===ee?"3px solid #ED6B86":"none",textUnderlineOffset:"Saved properties"===ee?"0.5em":"initial",fontWeight:"Saved properties"===ee?"700":"400"},children:"Saved properties"}),(0,p.jsx)("h5",{className:"no-print",onClick:()=>se("Archived properties"),style:{borderBottom:"Archived properties"===ee?"3px solid #ED6B86":"none",textUnderlineOffset:"Archived properties"===ee?"0.5em":"initial",fontWeight:"Archived properties"===ee?"700":"400"},children:"Archived properties"})]}),(0,p.jsx)("div",{className:"logout-button",onClick:s=>{localStorage.removeItem("wittle-user-token"),localStorage.removeItem("wittle-username"),e("/login")},children:(0,p.jsx)("div",{className:"logout-icon"})})]}),(0,p.jsx)("hr",{className:"title-line"}),(0,p.jsx)("div",{className:"lead-generator",children:(0,p.jsx)("div",{className:"property-results",children:"Home"===ee?(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"lead-gen-inputs",children:[(0,p.jsx)("h3",{className:"sub-title",children:"Set your search criteria"}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Postcode(s)"}),(0,p.jsx)("p",{children:"Add multiple postcodes by separating with a comma, and include any part of the postcode, e.g. \u201cSW4,SW5\u201d"}),(0,p.jsx)("input",{type:"text",value:he.postcode,onChange:e=>{w(e.target.value.toUpperCase().replace(/\s+/g,"")),pe((s=>({...s,postcode:e.target.value.toUpperCase().replace(/\s+/g,"")})))},placeholder:"Enter postcode..."})]})}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Channel"}),(0,p.jsx)("select",{className:"dropdown",value:he.channel||"Lettings",onChange:e=>pe((s=>({...s,channel:e.target.value}))),children:(0,p.jsx)("option",{children:"Lettings"})})]})}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:"see-more-section",onClick:()=>ue(!de),children:[(0,p.jsx)("h3",{className:"sub-title",children:"Add some more detail"}),de?(0,p.jsx)("h3",{className:"sub-title",children:"^"}):(0,p.jsx)("h3",{className:"sub-title",children:"v"})]}),de?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Bedrooms"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:he.bedrooms_min||"",onChange:e=>pe((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,p.jsx)("option",{value:"",children:"No min"}),(0,p.jsx)("option",{value:"1",children:"1"}),(0,p.jsx)("option",{value:"2",children:"2"}),(0,p.jsx)("option",{value:"3",children:"3"}),(0,p.jsx)("option",{value:"4",children:"4"}),(0,p.jsx)("option",{value:"5",children:"5"}),(0,p.jsx)("option",{value:"6",children:"6"})]}),(0,p.jsxs)("select",{className:"dropdown",value:he.bedrooms_max||"",onChange:e=>pe((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,p.jsx)("option",{value:"",children:"No max"}),(0,p.jsx)("option",{value:"1",children:"1"}),(0,p.jsx)("option",{value:"2",children:"2"}),(0,p.jsx)("option",{value:"3",children:"3"}),(0,p.jsx)("option",{value:"4",children:"4"}),(0,p.jsx)("option",{value:"5",children:"5"}),(0,p.jsx)("option",{value:"6",children:"6"}),(0,p.jsx)("option",{value:"7",children:"7"})]})]})]}),"Sales"===he.channel?(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Price"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:he.price_min||null,onChange:e=>pe((s=>({...s,price_min:e.target.value}))),children:[(0,p.jsx)("option",{value:null,children:"No min"}),Be.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(i.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,p.jsxs)("select",{className:"dropdown",value:he.price_max||null,onChange:e=>pe((s=>({...s,price_max:e.target.value}))),children:[(0,p.jsx)("option",{value:null,children:"No max"}),Be.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(i.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]}):"Lettings"===he.channel?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"single-title-double",children:[(0,p.jsx)("h3",{children:"Price"}),(0,p.jsxs)("div",{className:"double-dropdowns",children:[(0,p.jsxs)("select",{className:"dropdown",value:he.price_min||"",onChange:e=>pe((s=>({...s,price_min:e.target.value}))),children:[(0,p.jsx)("option",{value:0,children:"No min"}),Re.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(i.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,p.jsxs)("select",{className:"dropdown",value:he.price_max||"",onChange:e=>pe((s=>({...s,price_max:e.target.value}))),children:[(0,p.jsx)("option",{value:1e7,children:"No max"}),Re.map(((e,s)=>(0,p.jsx)("option",{value:e,children:(0,p.jsx)(i.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]}),(0,p.jsx)("div",{className:"single-input-block",children:(0,p.jsxs)("div",{className:"input-block large",children:[(0,p.jsx)("h3",{children:"Furnishing status"}),(0,p.jsxs)("select",{className:"dropdown",value:he.rental_additional||"Either furnished or unfurnished",onChange:e=>pe((s=>({...s,rental_additional:e.target.value}))),children:[(0,p.jsx)("option",{children:"Either furnished or unfurnished"}),(0,p.jsx)("option",{children:"Furnished"}),(0,p.jsx)("option",{children:"Unfurnished"})]})]})})]}):""]}):""]}),(0,p.jsx)("div",{className:"lead-gen-save",children:(0,p.jsx)("button",{className:"save-details",onClick:async()=>{let e;m&&m.lead_gen_details&&m.lead_gen_details.length>0?(e=await t.Z.put(`/api/lead_gen_details/${m.id}/`,he,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}}),se("Explore properties")):(e=await t.Z.post("/api/lead_gen_details/",he,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}}),se("Explore properties")),j(!0),Pe()},children:"Save details"})})]})}):"Explore properties"!==ee||v?"Explore properties"===ee&&v?(0,p.jsx)("div",{className:"property-table-loading",children:(0,p.jsx)(u.Z,{})}):"Saved properties"===ee?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"results-block",children:M&&M.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"title-section",children:[(0,p.jsxs)("h3",{className:"sub-title",children:["You have ",M.length," properties ready to be extracted"]}),m&&m.epc_favourites&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(h.CSVLink,{data:ve,className:"export",filename:`Wittle Lead Generator Extract - ${(()=>{const e=new Date,s=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}-${r}-${s}`})()}.csv`,style:{textDecoration:"none"},children:(0,p.jsx)("div",{className:"header-cta",onClick:()=>(async s=>{if((0,l.Hb)())try{const e=await t.Z.put("/api/epc_favourite/update_favourites/",{favourite_ids:s},{headers:{Authorization:`Bearer ${(0,l.hP)()}`}});console.log("Response:",e.data),Pe()}catch(r){console.error("Error updating favorite:",r)}else e("/access-denied"),console.log("logged out")})(m.epc_favourites.map((e=>e.rightmove_id))),children:(0,p.jsxs)("div",{className:"copy-button",children:[(0,p.jsx)("div",{className:"export-icon"}),(0,p.jsx)("h3",{style:{textDecoration:"none"},children:"Export"})]})})})})]}),(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Address"})}),(0,p.jsx)("div",{id:"column3",className:"column",children:(0,p.jsx)("h5",{children:"Postcode"})}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Reduced"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsx)("div",{id:"column7",className:"column",children:(0,p.jsx)("h5",{children:"Price"})}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column10",className:"column",children:(0,p.jsx)("h5",{children:"Channel"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details",children:M?M.map(((e,s)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:s+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.address})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.added_revised?"N/a":e.added_revised})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.reduced_revised?"N/a":e.reduced_revised})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_type})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.agent})}),(0,p.jsx)("div",{className:"column",id:"column10",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.channel})})]}),(0,p.jsx)("hr",{className:"property-divider"})]}))):" "})]}):(0,p.jsx)("h3",{className:"sub-title",children:"You haven't saved any properties yet! Once you've saved some properties, you'll be able to extract them."})})}):"Archived properties"===ee?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"results-block",children:V&&V.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"title-section",children:(0,p.jsxs)("h3",{className:"sub-title",children:["You have archived ",V.length," properties"]})}),(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Address"})}),(0,p.jsx)("div",{id:"column3",className:"column",children:(0,p.jsx)("h5",{children:"Postcode"})}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Reduced"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsx)("div",{id:"column7",className:"column",children:(0,p.jsx)("h5",{children:"Price"})}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column10",className:"column",children:(0,p.jsx)("h5",{children:"Channel"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details",children:V?V.map(((e,s)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:s+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.address})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.added_revised})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.reduced_revised})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_type})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.agent})}),(0,p.jsx)("div",{className:"column",id:"column10",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.channel})})]}),(0,p.jsx)("hr",{className:"property-divider"})]}))):" "})]}):(0,p.jsx)("h3",{className:"sub-title",children:"You haven't archived any properties yet! Once you've extracted properties to your files, you&apo;ll see them here."})})}):"":(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"results-block",children:[(0,p.jsxs)("div",{className:"property-insight-nav",children:[(0,p.jsxs)("div",{className:"property-insight-buttons",children:[(0,p.jsx)("h3",{className:"insight-button "+("Lettings"===oe?"active":"inactive"),id:"left",onClick:()=>ce("Lettings"),children:"Lettings"}),(0,p.jsx)("h3",{className:"insight-button "+("Sales"===oe?"active":"inactive"),id:"right",onClick:()=>ce("Sales"),children:"Sales"})]}),(0,p.jsxs)("div",{className:"save-section",children:[(0,p.jsx)("div",{className:"print-icon"}),(0,p.jsx)("h3",{onClick:async()=>{if((0,l.Hb)()){const e=new Set(m.epc_favourites.map((e=>e.rightmove_id))),r=me.filter((s=>!e.has(s.rightmove_id)));if(console.log(r),0===r.length)return void console.log("No new favourites to add");try{const e=await t.Z.post("/api/epc_favourite/",r,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}});console.log("Response:",e.data),Pe(),se("Saved properties")}catch(s){console.error("Error saving favourite:",s)}}else e("/access-denied"),console.log("logged out")},children:"Save selection"})]})]}),"Lettings"===oe?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"filter-section",children:[(0,p.jsx)("h3",{children:"Filter properties"}),(0,p.jsxs)("select",{className:"dropdown",onChange:e=>Ce(e.target.value),children:[(0,p.jsx)("option",{value:"2days",children:"Updated in the last 2 days"}),(0,p.jsx)("option",{value:"7days",children:"Updated in the last 7 days"}),(0,p.jsx)("option",{value:"1month",children:"Updated in the last month"}),(0,p.jsx)("option",{value:"1to3months",children:"On the market for 3 months"}),(0,p.jsx)("option",{value:"3to6months",children:"On the market for 6 months"}),(0,p.jsx)("option",{value:"all",children:"All matching properties"})]})]}),v?(0,p.jsx)("div",{className:"property-table-loading",children:(0,p.jsx)(u.Z,{})}):v?"":(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"title-section",children:[(0,p.jsxs)("h3",{className:"sub-title",children:["There are ",Fe.length," rental properties that match your criteria"]}),(0,p.jsxs)("div",{className:"select-all-box",children:[(0,p.jsx)("h5",{children:"Select all"}),(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:be.length>0&&be.every(Boolean),onChange:e=>{e.target.checked?(()=>{const e=new Set(m.epc_favourites.map((e=>e.rightmove_id))),s=Fe.map((e=>({...e.property_data,address:e.epc_data_list[0].address}))).filter((s=>!e.has(s.rightmove_id)));Ne(Fe.map((()=>!0))),xe(s)})():Oe()}}),(0,p.jsx)("label",{className:"label"})]})]})]}),(0,p.jsxs)("div",{className:"results-headers",children:[(0,p.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,p.jsx)("div",{id:"column2",className:"column",children:(0,p.jsx)("h5",{children:"Address"})}),(0,p.jsx)("div",{id:"column3",className:"column",children:(0,p.jsx)("h5",{children:"Postcode"})}),(0,p.jsx)("div",{id:"column4",className:"column",children:(0,p.jsx)("h5",{children:"Added"})}),(0,p.jsx)("div",{id:"column5",className:"column",children:(0,p.jsx)("h5",{children:"Reduced"})}),(0,p.jsx)("div",{id:"column6",className:"column",children:(0,p.jsx)("h5",{children:"Property type"})}),(0,p.jsx)("div",{id:"column7",className:"column",children:(0,p.jsx)("h5",{children:"Price"})}),(0,p.jsx)("div",{id:"column8",className:"column",children:(0,p.jsx)("h5",{children:"Bedrooms"})}),(0,p.jsx)("div",{id:"column9",className:"column",children:(0,p.jsx)("h5",{children:"Agent"})}),(0,p.jsx)("div",{id:"column10",className:"column",children:(0,p.jsx)("h5",{children:"Select"})})]}),(0,p.jsx)("hr",{className:"property-divider"}),(0,p.jsx)("div",{className:"results-details",children:Fe?Fe.map(((e,s)=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"results-content",children:[(0,p.jsx)("div",{className:"column",id:"column1",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:s+1})}),(0,p.jsx)("div",{className:"column",id:"column2",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.epc_data_list[0].address})}),(0,p.jsx)("div",{className:"column",id:"column3",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.postcode})}),(0,p.jsx)("div",{className:"column",id:"column4",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,p.jsx)("div",{className:"column",id:"column5",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,p.jsx)("div",{className:"column",id:"column6",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.propertyType})}),(0,p.jsx)("div",{className:"column",id:"column7",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.price})}),(0,p.jsx)("div",{className:"column",id:"column8",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.bedrooms})}),(0,p.jsx)("div",{className:"column",id:"column9",onClick:()=>De(e.property_data.url),children:(0,p.jsx)("h5",{children:e.property_data.agent})}),(0,p.jsx)("div",{className:"column",id:"column10",children:(0,p.jsxs)("div",{className:"custom-checkbox",children:[(0,p.jsx)("input",{className:"checkbox",type:"checkbox",checked:be[s],onChange:e=>((e,s)=>{const r=[...be];r[s]=e.target.checked,Ne(r);const n={...Fe[s].property_data,address:Fe[s].epc_data_list[0].address};console.log(n),e.target.checked?xe((e=>[...e,n])):xe((e=>e.filter((e=>e.rightmove_id!==n.rightmove_id))))})(e,s)}),(0,p.jsx)("label",{className:"label"})]})})]}),(0,p.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):""]})})})})]})})})})]})})}},98472:function(e,s,r){e.exports=r(23561)},98015:function(e,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n,t=function(){function e(e,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(s,r,n){return r&&e(s.prototype,r),n&&e(s,n),s}}(),a=r(72791),l=(n=a)&&n.__esModule?n:{default:n},i=r(51509),o=r(58333);var c=function(e){function s(e){!function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(e,s){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!==typeof s&&"function"!==typeof s?e:s}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return r.state={},r}return function(e,s){if("function"!==typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s)}(s,e),t(s,[{key:"buildURI",value:function(){return i.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var e=this.props,s=e.data,r=e.headers,n=e.separator,t=e.enclosingCharacter,a=e.uFEFF,l=e.target,i=e.specs,o=e.replace;this.state.page=window.open(this.buildURI(s,a,r,n,t),l,i,o)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),s}(l.default.Component);c.defaultProps=Object.assign(o.defaultProps,{target:"_blank"}),c.propTypes=o.propTypes,s.default=c},39088:function(e,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n,t=Object.assign||function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(s,r,n){return r&&e(s.prototype,r),n&&e(s,n),s}}(),l=r(72791),i=(n=l)&&n.__esModule?n:{default:n},o=r(51509),c=r(58333);var d=function(e){function s(e){!function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(e,s){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!s||"object"!==typeof s&&"function"!==typeof s?e:s}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return r.buildURI=r.buildURI.bind(r),r}return function(e,s){if("function"!==typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function, not "+typeof s);e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s)}(s,e),a(s,[{key:"buildURI",value:function(){return o.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.navigator.msSaveOrOpenBlob){e.preventDefault();var r=this.props,n=r.data,t=r.headers,a=r.separator,l=r.filename,i=r.enclosingCharacter,c=r.uFEFF,d=s&&"function"===typeof n?n():n,u=new Blob([c?"\ufeff":"",(0,o.toCSV)(d,t,a,i)]);return window.navigator.msSaveBlob(u,l),!1}}},{key:"handleAsyncClick",value:function(e){var s=this;this.props.onClick(e,(function(r){!1!==r?s.handleLegacy(e,!0):e.preventDefault()}))}},{key:"handleSyncClick",value:function(e){!1===this.props.onClick(e)?e.preventDefault():this.handleLegacy(e)}},{key:"handleClick",value:function(){var e=this;return function(s){if("function"===typeof e.props.onClick)return e.props.asyncOnClick?e.handleAsyncClick(s):e.handleSyncClick(s);e.handleLegacy(s)}}},{key:"render",value:function(){var e=this,s=this.props,r=s.data,n=s.headers,a=s.separator,l=s.filename,o=s.uFEFF,c=s.children,d=(s.onClick,s.asyncOnClick,s.enclosingCharacter),u=function(e,s){var r={};for(var n in e)s.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(s,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]),h="undefined"===typeof window?"":this.buildURI(r,o,n,a,d);return i.default.createElement("a",t({download:l},u,{ref:function(s){return e.link=s},target:"_self",href:h,onClick:this.handleClick()}),c)}}]),s}(i.default.Component);d.defaultProps=c.defaultProps,d.propTypes=c.propTypes,s.default=d},51509:function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function n(e){if(Array.isArray(e)){for(var s=0,r=Array(e.length);s<e.length;s++)r[s]=e[s];return r}return Array.from(e)}var t=s.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},a=s.isJsons=function(e){return Array.isArray(e)&&e.every((function(e){return"object"===("undefined"===typeof e?"undefined":r(e))&&!(e instanceof Array)}))},l=s.isArrays=function(e){return Array.isArray(e)&&e.every((function(e){return Array.isArray(e)}))},i=s.jsonsHeaders=function(e){return Array.from(e.map((function(e){return Object.keys(e)})).reduce((function(e,s){return new Set([].concat(n(e),n(s)))}),[]))},o=s.jsons2arrays=function(e,s){var r=s=s||i(e),t=s;a(s)&&(r=s.map((function(e){return e.label})),t=s.map((function(e){return e.key})));var l=e.map((function(e){return t.map((function(s){return c(s,e)}))}));return[r].concat(n(l))},c=s.getHeaderValue=function(e,s){var r=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce((function(e,s,r,n){var t=e[s];if(void 0!==t&&null!==t)return t;n.splice(1)}),s);return void 0===r?e in s?s[e]:"":r},d=s.elementOrEmpty=function(e){return"undefined"===typeof e||null===e?"":e},u=s.joiner=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'"';return e.filter((function(e){return e})).map((function(e){return e.map((function(e){return d(e)})).map((function(e){return""+r+e+r})).join(s)})).join("\n")},h=s.arrays2csv=function(e,s,r,t){return u(s?[s].concat(n(e)):e,r,t)},p=s.jsons2csv=function(e,s,r,n){return u(o(e,s),r,n)},m=s.string2csv=function(e,s,r,n){return s?s.join(r)+"\n"+e:e.replace(/"/g,'""')},x=s.toCSV=function(e,s,r,n){if(a(e))return p(e,s,r,n);if(l(e))return h(e,s,r,n);if("string"===typeof e)return m(e,s,r);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};s.buildURI=function(e,s,r,n,a){var l=x(e,r,n,a),i=t()?"application/csv":"text/csv",o=new Blob([s?"\ufeff":"",l],{type:i}),c="data:"+i+";charset=utf-8,"+(s?"\ufeff":"")+l,d=window.URL||window.webkitURL;return"undefined"===typeof d.createObjectURL?c:d.createObjectURL(o)}},23561:function(e,s,r){"use strict";s.CSVLink=void 0;var n=a(r(98015)),t=a(r(39088));function a(e){return e&&e.__esModule?e:{default:e}}n.default,s.CSVLink=t.default},58333:function(e,s,r){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.PropsNotForwarded=s.defaultProps=s.propTypes=void 0;var n,t=r(72791),a=((n=t)&&n.__esModule,r(52007));s.propTypes={data:(0,a.oneOfType)([a.string,a.array,a.func]).isRequired,headers:a.array,target:a.string,separator:a.string,filename:a.string,uFEFF:a.bool,onClick:a.func,asyncOnClick:a.bool,enclosingCharacter:a.string},s.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},s.PropsNotForwarded=["data","headers"]},57837:function(e,s,r){"use strict";e.exports=r.p+"static/media/new-loading.a788dadda3b120785a81.gif"}}]);
//# sourceMappingURL=443.2d2eebb1.chunk.js.fa25af78d264.map