"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[386],{25605:function(e,t,s){s.r(t),s.d(t,{default:function(){return E}});var a=s(28381),n=s(65293),i=s(42524),l=(s(95325),s(15211)),o=s(47142),r=(s(61505),s(29343));var c=e=>{let{restaurants1:t,cuisines:s,topRestaurants:n,gyms1:i,mainGyms:l,supermarkets1:o,mainSupermarkets:c,pubs1:h,topPubs:d}=e;const[u,p]=(0,a.useState)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:"box-highlights",children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Restaurants"}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83c\udf7d ",t.length," restaurants within 15 mins walk"]}),(0,r.jsxs)("h5",{children:["\ud83c\udf7d more than ",s," cuisines available"]}),(0,r.jsxs)("h5",{children:["\ud83c\udf7d ",n[0],", ",n[1]," & ",n[2]," are well rated"]})]}):""]}),(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Pubs"}),h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83c\udf7a ",h.length," pubs within 15 mins walk"]}),(0,r.jsxs)("h5",{children:["\ud83c\udf7a ",d[0],", ",d[1]," & ",d[2]," are well rated"]})]}):""]})]}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Fitness"}),i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f ",i.length," gyms within 15 mins walk"]}),3===l.length?(0,r.jsxs)("h5",{children:["\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f includes ",l[0],", ",l[1]," & ",l[2]]}):2===l.length?(0,r.jsxs)("h5",{children:["\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f includes ",l[0]," & ",l[1]," "]}):1===l.length?(0,r.jsxs)("h5",{children:["\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f includes ",l[0]]}):""]}):""]}),(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Supermarkets"}),o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83d\uded2 ",o.length," supermarkets within 15 mins walk"]}),3===c.length?(0,r.jsxs)("h5",{children:["\ud83d\uded2 includes ",c[0],", ",c[1]," & ",c[2]]}):2===c.length?(0,r.jsxs)("h5",{children:["\ud83d\uded2 includes ",c[0]," & ",c[1]," "]}):1===c.length?(0,r.jsxs)("h5",{children:["\ud83d\uded2 includes ",c[0]]}):""]}):""]})]})]})})};var h=e=>{let{topPrimaries:t,topSecondaries:s}=e;const n=(0,i.s0)(),[l,o]=(0,a.useState)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:"school-highlights",children:[(0,r.jsxs)("div",{className:"school-block",children:[(0,r.jsx)("h5",{className:"block-title",children:"Primary schools"}),(0,r.jsxs)("div",{className:"school-table-headers",children:[(0,r.jsx)("h5",{id:"column1",children:"#"}),(0,r.jsx)("h5",{id:"column2",children:"School name"}),(0,r.jsx)("h5",{id:"column3",children:"Ofsted"}),(0,r.jsx)("h5",{id:"column4",children:"Catchment"}),(0,r.jsx)("h5",{id:"column5",children:"Distance"})]}),(0,r.jsx)("div",{className:"school-table-details",children:t?t.map(((e,t)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"school-content",children:[(0,r.jsx)("div",{className:"column",id:"column1",children:(0,r.jsx)("h5",{children:t+1})}),(0,r.jsx)("div",{className:"column",id:"column2",children:(0,r.jsx)("h5",{onClick:()=>n(`/agents/primary-schools/${e.id}`),children:e.school_name})}),(0,r.jsx)("div",{className:"column",id:"column3",children:null!==e.ofsted_results?(0,r.jsx)("h5",{children:e.ofsted_results}):(0,r.jsx)("h5",{children:"N/a"})}),(0,r.jsx)("div",{className:"column",id:"column4",children:(0,r.jsx)("h5",{children:e.within_catchment})}),(0,r.jsx)("div",{className:"column",id:"column5",children:(0,r.jsxs)("h5",{children:[e.walkTimeMin," mins"]})})]})}))):""})]}),(0,r.jsxs)("div",{className:"school-block",children:[(0,r.jsx)("h5",{className:"block-title",children:"Secondary schools"}),(0,r.jsxs)("div",{className:"school-table-headers",children:[(0,r.jsx)("h5",{id:"column1",children:"#"}),(0,r.jsx)("h5",{id:"column2",children:"School name"}),(0,r.jsx)("h5",{id:"column3",children:"Ofsted"}),(0,r.jsx)("h5",{id:"column4",children:"Catchment"}),(0,r.jsx)("h5",{id:"column5",children:"Distance"})]}),(0,r.jsx)("div",{className:"school-table-details",children:s?s.map(((e,t)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"school-content",children:[(0,r.jsx)("div",{className:"column",id:"column1",children:(0,r.jsx)("h5",{children:t+1})}),(0,r.jsx)("div",{className:"column",id:"column2",children:(0,r.jsx)("h5",{onClick:()=>n(`/agents/secondary-schools/${e.id}`),children:e.school_name})}),(0,r.jsx)("div",{className:"column",id:"column3",children:null!==e.ofsted_results?(0,r.jsx)("h5",{children:e.ofsted_results}):(0,r.jsx)("h5",{children:"N/a"})}),(0,r.jsx)("div",{className:"column",id:"column4",children:(0,r.jsx)("h5",{children:e.within_catchment})}),(0,r.jsx)("div",{className:"column",id:"column5",children:(0,r.jsxs)("h5",{children:[e.walkTimeMin," mins"]})})]})}))):""})]})]})})};var d=e=>{let{postcodeData:t,tubes1:s,trains1:a}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:"box-highlights",children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Underground & Overground"}),s&&s.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83d\ude87 ",s.length," tube stations within 20 mins walk"]}),(0,r.jsxs)("h5",{children:["\ud83d\ude87 ",s[0].station_name," is ",s[0].walkTimeMin," mins away"]}),s.length>2?(0,r.jsxs)("h5",{children:["\ud83d\ude87 ",s[1].station_name," and ",s[2].station_name," are also nearby"]}):1===s.length?(0,r.jsxs)("h5",{children:["\ud83d\ude87 ",s[1].station_name," is also nearby"]}):""]}):(0,r.jsx)("h5",{children:"\ud83d\ude87 No tube stations within 20 min walk of this property"})]}),(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Electric vehicles"}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83d\ude87 ",t[0].ev.ev_10_mins," charging points within 10 mins walk"]}),(0,r.jsxs)("h5",{children:["\ud83d\ude87 in the top ",Math.round(100*(1-t[0].ev.percentile)),"% of areas in London for ev charging access"]})]}):""]})]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"National Rail"}),a&&a.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83d\ude8a ",a.length," rail stations within 20 mins walk"]}),(0,r.jsxs)("h5",{children:["\ud83d\ude8a ",a[0].station," is ",a[0].walkTimeMin," mins away"]}),a.length>2?(0,r.jsxs)("h5",{children:["\ud83d\ude87 ",a[1].station," and ",a[2].station," are also nearby"]}):1===a.length?(0,r.jsxs)("h5",{children:["\ud83d\ude87 ",a[1].station," is also nearby"]}):""]}):(0,r.jsx)("h5",{children:"\ud83d\ude8a No rail stations within 20 min walk of this property"})]})})]})})};var u=e=>{let{postcodeData:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("section",{className:"box-highlights",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Green space"}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83c\udf33 within top ",100-t[0].parks_lsoa[0].london_percentile,"% of areas in london for access to greenspace"]}),(0,r.jsxs)("h5",{children:["\ud83c\udf33 ",t[0].parks_postcode.park_name0," within ",Math.ceil(t[0].parks_postcode.distance0/1e3/5*60)," mins walk"]})]}):""]}),(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Crime"}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83d\ude93 in the lowest ",Math.round(100*t[0].crime[0].percentile),"% of areas in London for reported crimes"]}),(0,r.jsxs)("h5",{children:["\ud83d\ude93 in the lowest ",Math.round(100*t[0].crime[0].area_specific_percentile),"% of areas in ",t[0].crime[0].borough," for reported crimes"]})]}):""]})]})})})},p=s(15828),m=s(97463),x=s(17077),g=s(35019);var j=e=>{let{neighbourhoodScore:t,postcodeData:s}=e;const a=[{name:"Score",value:t},{name:"Remainder",value:100-t}],n=["#051885","#FFA7E5"],i=[{name:"Score",value:s[0].parks_lsoa[0].london_percentile},{name:"Remainder",value:100-s[0].parks_lsoa[0].london_percentile}],l=[{name:"Score",value:Math.ceil(100*s[0].restaurants.normal_percentile)},{name:"Remainder",value:Math.ceil(100*(1-s[0].restaurants.normal_percentile))}],o=[{name:"Score",value:Math.round(100*s[0].crime[0].percentile)},{name:"Remainder",value:Math.round(100*(1-s[0].crime[0].percentile))}],c=[{name:"Score",value:Math.ceil(100*s[0].tubes.percentile)},{name:"Remainder",value:Math.ceil(100*(1-s[0].tubes.percentile))}],h=[{name:"Score",value:Math.ceil(100*s[0].secondaries.total_score_percentile)},{name:"Remainder",value:Math.ceil(100*(1-s[0].secondaries.total_score_percentile))}];return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("section",{className:"summary-section",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"individual-box",children:[(0,r.jsx)("div",{className:"pie-chart",children:(0,r.jsx)(p.u,{width:100,height:100,children:(0,r.jsxs)(m.b,{data:a,cx:40,cy:50,innerRadius:25,outerRadius:45,fill:"#8884d8",paddingAngle:1,dataKey:"value",startAngle:0,children:[a.map(((e,t)=>(0,r.jsx)(x.b,{fill:n[t%n.length],startAngle:0===t?0:360*a[t-1].value/100,endAngle:360*e.value/100},`cell-${t}`))),(0,r.jsx)(g._,{value:`${t}%`,position:"center",fontSize:15,fontWeight:"bold",fill:"#FFA7E5"})]})})}),(0,r.jsx)("div",{className:"content",children:(0,r.jsx)("h1",{children:"Neighbourhood score"})})]}),(0,r.jsxs)("div",{className:"individual-box",children:[(0,r.jsx)("div",{className:"pie-chart",children:(0,r.jsx)(p.u,{width:100,height:100,children:(0,r.jsxs)(m.b,{data:i,cx:40,cy:50,innerRadius:25,outerRadius:45,fill:"#8884d8",paddingAngle:1,dataKey:"value",startAngle:0,children:[i.map(((e,t)=>(0,r.jsx)(x.b,{fill:n[t%n.length],startAngle:0===t?0:360*a[t-1].value/100,endAngle:360*e.value/100},`cell-${t}`))),(0,r.jsx)(g._,{value:`${i[0].value>50?i[1].value:i[0].value}%`,position:"center",fontSize:15,fontWeight:"bold",fill:"#FFA7E5"})]})})}),(0,r.jsx)("div",{className:"content",children:i[0].value>50?(0,r.jsxs)("h1",{children:["within top ",i[1].value,"% of areas of London for access to greenspace"]}):(0,r.jsxs)("h1",{children:["within bottom ",i[0].value,"% of areas of London for access to greenspace"]})})]}),(0,r.jsxs)("div",{className:"individual-box",children:[(0,r.jsx)("div",{className:"pie-chart",children:(0,r.jsx)(p.u,{width:100,height:100,children:(0,r.jsxs)(m.b,{data:h,cx:40,cy:50,innerRadius:25,outerRadius:45,fill:"#8884d8",paddingAngle:1,dataKey:"value",startAngle:0,children:[h.map(((e,t)=>(0,r.jsx)(x.b,{fill:n[t%n.length],startAngle:0===t?0:360*a[t-1].value/100,endAngle:360*e.value/100},`cell-${t}`))),(0,r.jsx)(g._,{value:100-h[0].value+"%",position:"center",fontSize:15,fontWeight:"bold",fill:"#FFA7E5"})]})})}),(0,r.jsx)("div",{className:"content",children:(0,r.jsxs)("h1",{children:["within top ",100-h[0].value,"% of areas of London for secondary schools"]})})]}),(0,r.jsxs)("div",{className:"individual-box",children:[(0,r.jsx)("div",{className:"pie-chart",children:(0,r.jsx)(p.u,{width:100,height:100,children:(0,r.jsxs)(m.b,{data:l,cx:40,cy:50,innerRadius:25,outerRadius:45,fill:"#8884d8",paddingAngle:1,dataKey:"value",startAngle:0,children:[l.map(((e,t)=>(0,r.jsx)(x.b,{fill:n[t%n.length],startAngle:0===t?0:360*a[t-1].value/100,endAngle:360*e.value/100},`cell-${t}`))),(0,r.jsx)(g._,{value:100-l[0].value+"%",position:"center",fontSize:15,fontWeight:"bold",fill:"#FFA7E5"})]})})}),(0,r.jsx)("div",{className:"content",children:(0,r.jsxs)("h1",{children:["within best ",100-l[0].value,"% of areas of London for number of quality restaurants"]})})]}),(0,r.jsxs)("div",{className:"individual-box",children:[(0,r.jsx)("div",{className:"pie-chart",children:(0,r.jsx)(p.u,{width:100,height:100,children:(0,r.jsxs)(m.b,{data:o.reverse(),cx:40,cy:50,innerRadius:25,outerRadius:45,fill:"#8884d8",paddingAngle:1,dataKey:"value",startAngle:0,children:[o.map(((e,t)=>(0,r.jsx)(x.b,{fill:n[t%n.length],startAngle:0===t?0:360*a[t-1].value/100,endAngle:360*e.value/100},`cell-${t}`))),(0,r.jsx)(g._,{value:`${o[1].value>50?o[0].value:o[1].value}%`,position:"center",fontSize:15,fontWeight:"bold",fill:"#FFA7E5"})]})})}),(0,r.jsx)("div",{className:"content",children:o[1].value>50?(0,r.jsxs)("h1",{children:["In the highest ",o[0].value,"% of areas in London for reported crimes"]}):(0,r.jsxs)("h1",{children:["In the lowest ",o[1].value,"% of areas in London for reported crimes"]})})]}),(0,r.jsxs)("div",{className:"individual-box",children:[(0,r.jsx)("div",{className:"pie-chart",children:(0,r.jsx)(p.u,{width:100,height:100,children:(0,r.jsxs)(m.b,{data:c,cx:40,cy:50,innerRadius:25,outerRadius:45,fill:"#8884d8",paddingAngle:1,dataKey:"value",startAngle:0,children:[c.map(((e,t)=>(0,r.jsx)(x.b,{fill:n[t%n.length],startAngle:0===t?0:360*a[t-1].value/100,endAngle:360*e.value/100},`cell-${t}`))),(0,r.jsx)(g._,{value:100-c[0].value+"%",position:"center",fontSize:15,fontWeight:"bold",fill:"#FFA7E5"})]})})}),(0,r.jsx)("div",{className:"content",children:(0,r.jsxs)("h1",{children:["within top ",100-c[0].value,"% of areas of London for access to tubes"]})})]})]})})})};var f=e=>{let{sliderSelection:t,setSliderSelection:s}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"detail-slider",children:[(0,r.jsx)("h5",{onClick:()=>s("Primary schools"),style:{backgroundColor:"Primary schools"===t?"rgba(255, 167, 229, 1)":"initial",fontWeight:"Primary schools"===t?"bold":"initial"},children:"Primary schools"}),(0,r.jsx)("h5",{onClick:()=>s("Secondary schools"),style:{backgroundColor:"Secondary schools"===t?"rgba(255, 167, 229, 1)":"initial",fontWeight:"Secondary schools"===t?"bold":"initial"},children:"Secondary schools"}),(0,r.jsx)("h5",{onClick:()=>s("Restaurants"),style:{backgroundColor:"Restaurants"===t?"rgba(255, 167, 229, 1)":"initial",fontWeight:"Restaurants"===t?"bold":"initial"},children:"Restaurants"}),(0,r.jsx)("h5",{onClick:()=>s("Pubs"),style:{backgroundColor:"Pubs"===t?"rgba(255, 167, 229, 1)":"initial",fontWeight:"Pubs"===t?"bold":"initial"},children:"Pubs"}),(0,r.jsx)("h5",{onClick:()=>s("Supermarkets"),style:{backgroundColor:"Supermarkets"===t?"rgba(255, 167, 229, 1)":"initial",fontWeight:"Supermarkets"===t?"bold":"initial"},children:"Supermarkets"}),(0,r.jsx)("h5",{onClick:()=>s("Fitness"),style:{backgroundColor:"Fitness"===t?"rgba(255, 167, 229, 1)":"initial",fontWeight:"Fitness"===t?"bold":"initial"},children:"Fitness"}),(0,r.jsx)("h5",{onClick:()=>s("EVs"),style:{backgroundColor:"EVs"===t?"rgba(255, 167, 229, 1)":"initial",fontWeight:"EVs"===t?"bold":"initial"},children:"EVs"})]})})},v=s(36051),y=s(54738),b=s(59693),w=s(8772),M=s(65554),_=s(79877),N=s(24377),k=s(9663),S=s(9738),F=s(37336),P=s(12779),D=s(49354);var E=()=>{const{postcode:e}=(0,i.UO)(),t=(0,i.s0)(),s=(0,i.TH)(),[p,m]=(0,a.useState)([]),[x,g]=(0,a.useState)("My properties"),[E,C]=(0,a.useState)("My properties"),[A,R]=(0,a.useState)(!1),[T,W]=(0,a.useState)(),[U,Z]=(0,a.useState)(),[q,L]=(0,a.useState)(),[$,V]=(0,a.useState)(),[I,z]=(0,a.useState)("Property overview"),[B,O]=(0,a.useState)(!1),[H,K]=(0,a.useState)(!1),[G,Y]=(0,a.useState)(!1),[J,Q]=(0,a.useState)(!1),[X,ee]=(0,a.useState)(!1),[te,se]=(0,a.useState)(),[ae,ne]=(0,a.useState)(),[ie,le]=(0,a.useState)(),[oe,re]=(0,a.useState)(),[ce,he]=(0,a.useState)(),[de,ue]=(0,a.useState)(),[pe,me]=(0,a.useState)(),[xe,ge]=(0,a.useState)(),[je,fe]=(0,a.useState)(),[ve,ye]=(0,a.useState)(),[be,we]=(0,a.useState)(),[Me,_e]=(0,a.useState)(),[Ne,ke]=(0,a.useState)(),[Se,Fe]=(0,a.useState)(),[Pe,De]=(0,a.useState)(),[Ee,Ce]=(0,a.useState)(),[Ae,Re]=(0,a.useState)(),[Te,We]=(0,a.useState)([]),[Ue,Ze]=(0,a.useState)([]),[qe,Le]=(0,a.useState)([]),[$e,Ve]=(0,a.useState)([]),[Ie,ze]=(0,a.useState)(),[Be,Oe]=(0,a.useState)(),[He,Ke]=(0,a.useState)(),[Ge,Ye]=(0,a.useState)(),[Je,Qe]=(0,a.useState)(),[Xe,et]=(0,a.useState)("Primary schools"),[tt,st]=(0,a.useState)();(0,a.useEffect)((()=>{(()=>{try{(async()=>{const{data:t}=await n.ZP.get(`/api/postcodes/${e}`);console.log("postcode data ->",t),W(t)})()}catch(t){V(!0),console.log(t)}})()}),[]);(0,a.useEffect)((()=>{(()=>{if((0,l.Hb)())try{(async()=>{const{data:e}=await n.ZP.get(`/api/auth/profile/${(0,l.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}});let t=0;e.white_properties.forEach((e=>{t+=e.price}));const s={...e,total_value:t};Z(s),st(e.white_properties),console.log("user data ->",s)})()}catch(e){V(!0),console.log(e)}else t("/access-denied"),console.log("no account")})()}),[]);(0,a.useEffect)((()=>{T&&U&&(()=>{const t=U.white_properties.find((t=>t.postcode===e));L(t),console.log("current-property ->",t)})()}),[T,U]);(0,a.useEffect)((()=>{T&&(()=>{try{(async()=>{const{data:e}=await n.ZP.get("/api/primaries/");se(e)})()}catch(e){V(!0),console.log(e)}})()}),[T]);const at=20/60*5,nt=6371,it=e=>e*Math.PI/180,lt=5/60;(0,a.useEffect)((()=>{te&&(()=>{const e=te.filter((e=>{const t=it(parseFloat(e.latitude)-parseFloat(T[0].longitude)),s=it(parseFloat(e.longitude)-parseFloat(T[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(it(parseFloat(T[0].longitude)))*Math.cos(it(parseFloat(e.latitude)))*Math.sin(s/2)*Math.sin(s/2),n=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),i=nt*n;e.distance_between=i,e.walkTimeMin=Math.round(i/lt);const l=i/e.max_distance;return"Independent school"===e.school_type||"Special school"===e.school_type?e.within_catchment="N/a":"Based on map"===e.additional_status?e.within_catchment="Check catchment map":"Religion"===e.max_distance&e.distance_between<.6?e.within_catchment="Very likely if religious critera met":"Religion"===e.max_distance&e.distance_between<.8?e.within_catchment="Likely if religious critera met":"Religion"===e.max_distance&e.distance_between<1?e.within_catchment="Probably if religious critera met":"Religion"===e.max_distance&e.distance_between<1.5?e.within_catchment="Unlikely, even if religious critera met":"Religion"===e.max_distance&e.distance_between>1.5?e.within_catchment="Very unlikely, even if religious critera met":"Not specified"===e.max_distance&e.distance_between<.4?e.within_catchment="Very likely but no distance specified":"Not specified"===e.max_distance&e.distance_between<.7?e.within_catchment="Likely but no distance specified":"Not specified"===e.max_distance&e.distance_between<1?e.within_catchment="Probably but no distance specified":"Not specified"===e.max_distance&e.distance_between>1?e.within_catchment="Unlikely, no distance specified":"Does not apply"===e.max_distance?e.within_catchment="Yes":"On request"===e.max_distance?e.within_catchment="N/a":e.within_catchment=l<=.6?"Yes":l<=.8?"Very likely":l<=1?"Probably":l<=1.2?"Probably not":"No",i<=at})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin)),t=e.slice(0,8);he(t),ne(e),console.log("nearby primaries ->",e)})()}),[te]);(0,a.useEffect)((()=>{T&&(()=>{try{(async()=>{const{data:e}=await n.ZP.get("/api/secondaries/");le(e)})()}catch(e){V(!0),console.log(e)}})()}),[T]);(0,a.useEffect)((()=>{ie&&(()=>{const e=ie.filter((e=>{const t=it(parseFloat(e.latitude)-parseFloat(T[0].longitude)),s=it(parseFloat(e.longitude)-parseFloat(T[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(it(parseFloat(T[0].longitude)))*Math.cos(it(parseFloat(e.latitude)))*Math.sin(s/2)*Math.sin(s/2),n=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),i=nt*n;e.distance_between=i,e.walkTimeMin=Math.round(i/lt);const l=i/e.max_distance;return"Independent school"===e.school_type?e.within_catchment="N/a":"Check"===e.max_distance||"Religion"===e.max_distance||null===e.max_distance?e.within_catchment="Check":"Does not apply"===e.max_distance?e.within_catchment="Yes":e.within_catchment=l<=.6?"Yes":l<=.8?"Very likely":l<=1?"Probably":l<=1.2?"Probably not":"No",i<=2.5})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin)),t=e.slice(0,8);ue(t),re(e),console.log("nearby secondaries ->",e)})()}),[ie]);(0,a.useEffect)((()=>{T&&(()=>{try{(async()=>{const{data:e}=await n.ZP.get("/api/restaurants/");me(e)})()}catch(e){V(!0),console.log(e)}})()}),[T]);const ot=1.25;(0,a.useEffect)((()=>{pe&&(()=>{const e=pe.filter((e=>{const t=it(parseFloat(e.latitude)-parseFloat(T[0].longitude)),s=it(parseFloat(e.longitude)-parseFloat(T[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(it(parseFloat(T[0].longitude)))*Math.cos(it(parseFloat(e.latitude)))*Math.sin(s/2)*Math.sin(s/2),n=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),i=nt*n;return e.distance_between=i,e.walkTimeMin=Math.round(i/lt),i<=ot})).sort(((e,t)=>t.rating-e.rating)),t=e.filter((e=>"No Cuisine Data"!==e.cuisine)).slice(0,3).map((e=>e.restaurant_name));Re((e=>new Set(e.map((e=>e.cuisine))).size)(e)),_e(e),We(t),console.log("Nearby restaurants ->",e)})()}),[pe]);(0,a.useEffect)((()=>{T&&(()=>{try{(async()=>{const{data:e}=await n.ZP.get("/api/gyms/");console.log("gyms data ->",e),ge(e)})()}catch(e){V(!0),console.log(e)}})()}),[T]);(0,a.useEffect)((()=>{xe&&(()=>{const e=["third space","pure gym","1 rebel","virgin","barry's","the gym group"],t=new Set,s=xe.filter((e=>{const t=it(parseFloat(e.Lat)-parseFloat(T[0].longitude)),s=it(parseFloat(e.long)-parseFloat(T[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(it(parseFloat(T[0].longitude)))*Math.cos(it(parseFloat(e.Lat)))*Math.sin(s/2)*Math.sin(s/2),n=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),i=nt*n;return e.distance_between=i,e.walkTimeMin=Math.round(i/lt),i<=ot})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin)),a=[];for(let n=0;n<s.length;n++){const i=s[n];if(i.gym_group&&e.includes(i.gym_group.toLowerCase())&&!t.has(i.gym_group)&&(a.push(i.gym_group),t.add(i.gym_group),3===a.length))break}ke(s),Le(a)})()}),[xe]);(0,a.useEffect)((()=>{T&&(()=>{try{(async()=>{const{data:e}=await n.ZP.get("/api/supermarkets/");ye(e)})()}catch(e){V(!0),console.log(e)}})()}),[T]);(0,a.useEffect)((()=>{ve&&(()=>{const e=["m&s food","waitrose","aldi","lidl","sainsbury's","tesco","asda"],t=new Set,s=ve.map((e=>{const t=it(parseFloat(e.Lat)-parseFloat(T[0].longitude)),s=it(parseFloat(e.long)-parseFloat(T[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(it(parseFloat(T[0].longitude)))*Math.cos(it(parseFloat(e.Lat)))*Math.sin(s/2)*Math.sin(s/2),n=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),i=nt*n;return e.distance_between=i,e.walkTimeMin=Math.round(i/lt),{...e,distance:i}})).filter((e=>e.distance<=ot)),a=[];for(let n=0;n<s.length;n++){const i=s[n];if(e.includes(i.cleansed_name.toLowerCase())&&!t.has(i.cleansed_name)&&(a.push(i.cleansed_name),t.add(i.cleansed_name),3===a.length))break}De(s),Ve(a),console.log("Nearby supermarkets ->",s)})()}),[ve]);(0,a.useEffect)((()=>{T&&(()=>{try{(async()=>{const{data:e}=await n.ZP.get("/api/tubes/");ze(e)})()}catch(e){V(!0),console.log(e)}})()}),[T]);(0,a.useEffect)((()=>{Ie&&(()=>{const e=Ie.filter((e=>{const t=it(parseFloat(e.lat)-parseFloat(T[0].longitude)),s=it(parseFloat(e.long)-parseFloat(T[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(it(parseFloat(T[0].longitude)))*Math.cos(it(parseFloat(e.lat)))*Math.sin(s/2)*Math.sin(s/2),n=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),i=nt*n;return e.distance_between=i,e.walkTimeMin=Math.round(i/lt),i<=at})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin));Ke(e),console.log("Nearby tubes ->",e)})()}),[Ie]);(0,a.useEffect)((()=>{T&&(()=>{try{(async()=>{const{data:e}=await n.ZP.get("/api/evs/");console.log("ev data ->",e),we(e)})()}catch(e){V(!0),console.log(e)}})()}),[T]);(0,a.useEffect)((()=>{be&&(()=>{const e=be.filter((e=>{const t=it(parseFloat(e.latitude)-parseFloat(T[0].longitude)),s=it(parseFloat(e.longitude)-parseFloat(T[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(it(parseFloat(T[0].longitude)))*Math.cos(it(parseFloat(e.latitude)))*Math.sin(s/2)*Math.sin(s/2),n=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),i=nt*n;return e.distance_between=i,e.walkTimeMin=Math.round(i/lt),i<=.8333333333333333})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin));Ce(e)})()}),[be]);(0,a.useEffect)((()=>{T&&(()=>{try{(async()=>{const{data:e}=await n.ZP.get("/api/pubs/");console.log("pub data ->",e),fe(e)})()}catch(e){V(!0),console.log(e)}})()}),[T]);(0,a.useEffect)((()=>{je&&(()=>{const e=je.filter((e=>{const t=it(parseFloat(e.latitude)-parseFloat(T[0].longitude)),s=it(parseFloat(e.longitude)-parseFloat(T[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(it(parseFloat(T[0].longitude)))*Math.cos(it(parseFloat(e.latitude)))*Math.sin(s/2)*Math.sin(s/2),n=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),i=nt*n;return e.distance_between=i,e.walkTimeMin=Math.round(i/lt),i<=ot})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin)),t=e.slice(0,3).map((e=>e.name));Fe(e),Ze(t),console.log("Nearby pubs ->",e)})()}),[je]);(0,a.useEffect)((()=>{if(T&&T[0]){const e=(1-T[0].crime[0].percentile+T[0].ev.percentile+T[0].fitness.percentile+(1-T[0].parks_lsoa[0].london_percentile/100)+T[0].restaurants.normal_percentile+T[0].supermarkets.percentile+T[0].tubes.percentile)/7*100;console.log("raw->",e);const t=T.map((e=>{return(1-(t=e).crime[0].percentile+t.ev.percentile+t.fitness.percentile+(1-t.parks_lsoa[0].london_percentile/100)+t.restaurants.normal_percentile+t.supermarkets.percentile+t.tubes.percentile)/7*100;var t})),s=Math.min(...t),a=Math.max(...t);console.log("all->",t);const n=Math.ceil(((e,t,s)=>(e-t)/(s-t)*100)(e,s,a));Qe(n)}}),[T]);(0,a.useEffect)((()=>{T&&(()=>{try{(async()=>{const{data:e}=await n.ZP.get("/api/trains/");console.log("trains data ->",e),Oe(e)})()}catch(e){V(!0),console.log(e)}})()}),[T]);(0,a.useEffect)((()=>{Be&&(()=>{const e=Be.filter((e=>{const t=it(parseFloat(e.latitude)-parseFloat(T[0].longitude)),s=it(parseFloat(e.longitude)-parseFloat(T[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(it(parseFloat(T[0].longitude)))*Math.cos(it(parseFloat(e.latitude)))*Math.sin(s/2)*Math.sin(s/2),n=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),i=nt*n;return e.distance_between=i,e.walkTimeMin=Math.round(i/lt),i<=at})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin));Ye(e),console.log("Nearby trains ->",e)})()}),[Be]),(0,a.useEffect)((()=>{m((e=>[...e,s.pathname]))}),[s]);return(0,a.useEffect)((()=>{console.log(`profileContent updated to: ${x}`)}),[x]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:"agent-specific-property print-container",children:[(0,r.jsx)("div",{className:"desktop-nav",children:(0,r.jsx)(w.Z,{navbarColour:"#FDF7F0"})}),(0,r.jsx)("div",{className:"mobile-nav",children:(0,r.jsx)(F.Z,{setProfileContent:g,profileContent:x,profileDetail:E,setProfileDetail:C})}),(0,r.jsx)(b.Z,{setProfileDetail:C,variableSide:A,setProfileContent:g,setVariableSide:R}),(0,r.jsx)("div",{className:"go-back-button no-print remove-margin",children:(0,r.jsx)("h5",{onClick:()=>t("/agents/profile"),children:"<- back to profile"})}),(0,r.jsxs)("div",{className:"property-options no-print",children:[(0,r.jsxs)("div",{className:"left-section",children:[(0,r.jsx)("h5",{className:"no-print",onClick:()=>z("Property overview"),style:{textDecoration:"Property overview"===I?"underline 2px #FFA7E5":"none",textUnderlineOffset:"Property overview"===I?"0.5em":"initial",fontWeight:"Property overview"===I?"700":"400"},children:"Property overview"}),(0,r.jsx)("h5",{className:"no-print",onClick:()=>z("Property details"),style:{textDecoration:"Property details"===I?"underline 2px #FFA7E5":"none",textUnderlineOffset:"Property details"===I?"0.5em":"initial",fontWeight:"Property details"===I?"700":"400"},children:"Property details"})]}),(0,r.jsx)("h1",{className:"print-button no-print",onClick:()=>window.print(),children:"\ud83d\udda8"})]}),"Property overview"===I?(0,r.jsxs)("section",{className:"property-wrapper",children:[q?(0,r.jsxs)("section",{className:"property-details remove-margin",children:[(0,r.jsx)("img",{className:"property-image",src:q.image,alt:"property-image"}),(0,r.jsx)("div",{className:"property-content",children:(0,r.jsxs)("div",{className:"content-blocks",children:[(0,r.jsxs)("div",{className:"content-summary",children:[(0,r.jsxs)("div",{className:"content-top-line",children:[(0,r.jsx)("h1",{children:q.name}),(0,r.jsx)("h1",{children:(0,r.jsx)(o.h3,{value:q.price,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})})]}),(0,r.jsx)("h3",{children:q.address})]}),(0,r.jsxs)("div",{className:"content-details",children:[(0,r.jsxs)("div",{className:"content-details-top",children:[(0,r.jsxs)("h4",{children:["\ud83c\udfe0 ",q.type]}),(0,r.jsxs)("h4",{children:["\ud83d\udce6 ",q.size]})]}),(0,r.jsxs)("div",{className:"content-details-bottom",children:[(0,r.jsxs)("h4",{children:["\ud83d\udecc x ",q.bedrooms]}),(0,r.jsxs)("h4",{children:["\ud83d\udec1 x ",q.bathrooms]}),(0,r.jsxs)("h4",{children:["\ud83d\udecb x ",q.living_rooms]})]})]})]})})]}):"",(0,r.jsxs)("section",{className:"property-summary-sections remove-margin",children:[(0,r.jsxs)("div",{className:"property-highlight",onClick:()=>O(!B),children:[(0,r.jsx)("h3",{children:"Property Summary"}),(0,r.jsx)("div",{className:"click-downs",children:B?(0,r.jsx)("h4",{children:"^"}):(0,r.jsx)("h4",{children:"v"})})]}),T&&B?(0,r.jsx)(j,{neighbourhoodScore:Je,postcodeData:T}):"",(0,r.jsx)("hr",{className:"highlight-separator"}),(0,r.jsxs)("div",{className:"property-highlight",onClick:()=>K(!H),children:[(0,r.jsx)("h3",{children:"School Highlights"}),(0,r.jsx)("div",{className:"click-downs",children:H?(0,r.jsx)("h4",{children:"^"}):(0,r.jsx)("h4",{children:"v"})})]}),H?(0,r.jsx)(h,{topPrimaries:ce,topSecondaries:de}):"",(0,r.jsx)("hr",{className:"highlight-separator"}),(0,r.jsxs)("div",{className:"property-highlight",onClick:()=>Y(!G),children:[(0,r.jsx)("h3",{children:"Lifestyle Highlights"}),(0,r.jsx)("div",{className:"click-downs",children:G?(0,r.jsx)("h4",{children:"^"}):(0,r.jsx)("h4",{children:"v"})})]}),G?(0,r.jsx)(c,{restaurants1:Me,cuisines:Ae,topRestaurants:Te,gyms1:Ne,mainGyms:qe,supermarkets1:Pe,mainSupermarkets:$e,pubs1:Se,topPubs:Ue}):"",(0,r.jsx)("hr",{className:"highlight-separator"}),(0,r.jsxs)("div",{className:"property-highlight",onClick:()=>Q(!J),children:[(0,r.jsx)("h3",{children:"Transport Highlights"}),(0,r.jsx)("div",{className:"click-downs",children:J?(0,r.jsx)("h4",{children:"^"}):(0,r.jsx)("h4",{children:"v"})})]}),J?(0,r.jsx)(d,{postcodeData:T,tubes1:He,trains1:Ge}):"",(0,r.jsx)("hr",{className:"highlight-separator"}),(0,r.jsxs)("div",{className:"property-highlight",onClick:()=>ee(!X),children:[(0,r.jsx)("h3",{children:"Neighbourhood Highlights"}),(0,r.jsx)("div",{className:"click-downs",children:X?(0,r.jsx)("h4",{children:"^"}):(0,r.jsx)("h4",{children:"v"})})]}),X?(0,r.jsx)(u,{postcodeData:T}):""]})]}):"Property details"===I?(0,r.jsxs)("section",{className:"property-wrapper",children:[(0,r.jsx)(f,{sliderSelection:Xe,setSliderSelection:et}),"Primary schools"===Xe?(0,r.jsx)(v.Z,{primaryData1:ae,setPrimaryData1:ne,propertyData:q,listType:"short list",postcodeData:T}):"Secondary schools"===Xe?(0,r.jsx)(y.Z,{secondaryData1:oe,setSecondaryData1:re,propertyData:q,listType:"short list",postcodeData:T}):"Restaurants"===Xe?(0,r.jsx)(M.Z,{restaurants1:Me,setRestaurants1:_e,propertyData:q,listType:"short list",postcodeData:T}):"Fitness"===Xe?(0,r.jsx)(_.Z,{gyms1:Ne,setGyms1:ke,propertyData:q,listType:"short list",postcodeData:T}):"Supermarkets"===Xe?(0,r.jsx)(N.Z,{supermarkets1:Pe,setSupermarkets1:De,propertyData:q,listType:"short list",postcodeData:T}):"EVs"===Xe?(0,r.jsx)(P.Z,{ev1:Ee,setEv1:Ce,propertyData:q,listType:"short list",postcodeData:T}):"Pubs"===Xe?(0,r.jsx)(D.Z,{pubs1:Se,setPubs1:Fe,propertyData:q,listType:"short list",postcodeData:T}):""]}):"Variables"===I?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(k.default,{profileDetail:E,setProfileDetail:C,profileContent:x})}):"Comparison"===x?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(S.default,{userData:U,propertyList:tt})}):""]})})}},54038:function(e,t,s){function a(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function n(e){this.setState(function(t){var s=this.constructor.getDerivedStateFromProps(e,t);return null!==s&&void 0!==s?s:null}.bind(this))}function i(e,t){try{var s=this.props,a=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(s,a)}finally{this.props=s,this.state=a}}function l(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var s=null,l=null,o=null;if("function"===typeof t.componentWillMount?s="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(s="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?l="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(l="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?o="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==s||null!==l||null!==o){var r=e.displayName||e.name,c="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+r+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==s?"\n  "+s:"")+(null!==l?"\n  "+l:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=a,t.componentWillReceiveProps=n),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i;var h=t.componentDidUpdate;t.componentDidUpdate=function(e,t,s){var a=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:s;h.call(this,e,t,a)}}return e}s.r(t),s.d(t,{polyfill:function(){return l}}),a.__suppressDeprecationWarning=!0,n.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0}}]);
//# sourceMappingURL=386.91d6084a.chunk.js.c43b963a0bd7.map