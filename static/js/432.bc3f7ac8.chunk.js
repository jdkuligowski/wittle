"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[432],{26432:function(e,t,s){s.r(t),s.d(t,{default:function(){return T}});var a=s(28381),i=s(65293),n=s(42524),l=(s(95325),s(15211)),c=s(47142),r=(s(61505),s(29343));var o=e=>{let{restaurants1:t,cuisines:s,topRestaurants:i,gyms1:n,mainGyms:l,supermarkets1:c,mainSupermarkets:o,pubs1:h,topPubs:d}=e;const[m,u]=(0,a.useState)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:"box-highlights",children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Restaurants"}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83c\udf7d ",t.length," restaurants within 15 mins walk"]}),(0,r.jsxs)("h5",{children:["\ud83c\udf7d more than ",s," cuisines available"]}),(0,r.jsxs)("h5",{children:["\ud83c\udf7d ",i[0],", ",i[1]," & ",i[2]," are well rated"]})]}):""]}),(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Pubs"}),h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83c\udf7a ",h.length," pubs within 15 mins walk"]}),(0,r.jsxs)("h5",{children:["\ud83c\udf7a ",d[0],", ",d[1]," & ",d[2]," are well rated"]})]}):""]})]}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Fitness"}),n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f ",n.length," gyms within 15 mins walk"]}),3===l.length?(0,r.jsxs)("h5",{children:["\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f includes ",l[0],", ",l[1]," & ",l[2]]}):2===l.length?(0,r.jsxs)("h5",{children:["\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f includes ",l[0]," & ",l[1]," "]}):1===l.length?(0,r.jsxs)("h5",{children:["\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f includes ",l[0]]}):""]}):""]}),(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Supermarkets"}),c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83d\uded2 ",c.length," supermarkets within 15 mins walk"]}),3===o.length?(0,r.jsxs)("h5",{children:["\ud83d\uded2 includes ",o[0],", ",o[1]," & ",o[2]]}):2===o.length?(0,r.jsxs)("h5",{children:["\ud83d\uded2 includes ",o[0]," & ",o[1]," "]}):1===o.length?(0,r.jsxs)("h5",{children:["\ud83d\uded2 includes ",o[0]]}):""]}):""]})]})]})})};var h=e=>{let{topPrimaries:t,topSecondaries:s}=e;const i=(0,n.s0)(),[l,c]=(0,a.useState)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:"school-highlights",children:[(0,r.jsxs)("div",{className:"school-block",children:[(0,r.jsx)("h5",{className:"block-title",children:"Primary schools"}),(0,r.jsxs)("div",{className:"school-table-headers",children:[(0,r.jsx)("h5",{id:"column1",children:"#"}),(0,r.jsx)("h5",{id:"column2",children:"School name"}),(0,r.jsx)("h5",{id:"column3",children:"Ofsted"}),(0,r.jsx)("h5",{id:"column4",children:"Catchment"}),(0,r.jsx)("h5",{id:"column5",children:"Distance"})]}),(0,r.jsx)("div",{className:"school-table-details",children:t?t.map(((e,t)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"school-content",children:[(0,r.jsx)("div",{className:"column",id:"column1",children:(0,r.jsx)("h5",{children:t+1})}),(0,r.jsx)("div",{className:"column",id:"column2",children:(0,r.jsx)("h5",{onClick:()=>i(`/agents/primary-schools/${e.id}`),children:e.school_name})}),(0,r.jsx)("div",{className:"column",id:"column3",children:null!==e.ofsted_results?(0,r.jsx)("h5",{children:e.ofsted_results}):(0,r.jsx)("h5",{children:"N/a"})}),(0,r.jsx)("div",{className:"column",id:"column4",children:(0,r.jsx)("h5",{children:e.within_catchment})}),(0,r.jsx)("div",{className:"column",id:"column5",children:(0,r.jsxs)("h5",{children:[e.walkTimeMin," mins"]})})]})}))):""})]}),(0,r.jsxs)("div",{className:"school-block",children:[(0,r.jsx)("h5",{className:"block-title",children:"Secondary schools"}),(0,r.jsxs)("div",{className:"school-table-headers",children:[(0,r.jsx)("h5",{id:"column1",children:"#"}),(0,r.jsx)("h5",{id:"column2",children:"School name"}),(0,r.jsx)("h5",{id:"column3",children:"Ofsted"}),(0,r.jsx)("h5",{id:"column4",children:"Catchment"}),(0,r.jsx)("h5",{id:"column5",children:"Distance"})]}),(0,r.jsx)("div",{className:"school-table-details",children:s?s.map(((e,t)=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"school-content",children:[(0,r.jsx)("div",{className:"column",id:"column1",children:(0,r.jsx)("h5",{children:t+1})}),(0,r.jsx)("div",{className:"column",id:"column2",children:(0,r.jsx)("h5",{onClick:()=>i(`/agents/secondary-schools/${e.id}`),children:e.school_name})}),(0,r.jsx)("div",{className:"column",id:"column3",children:null!==e.ofsted_results?(0,r.jsx)("h5",{children:e.ofsted_results}):(0,r.jsx)("h5",{children:"N/a"})}),(0,r.jsx)("div",{className:"column",id:"column4",children:(0,r.jsx)("h5",{children:e.within_catchment})}),(0,r.jsx)("div",{className:"column",id:"column5",children:(0,r.jsxs)("h5",{children:[e.walkTimeMin," mins"]})})]})}))):""})]})]})})};var d=e=>{let{postcodeData:t,tubes1:s,trains1:a}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:"box-highlights",children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Underground & Overground"}),s&&s.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83d\ude87 ",s.length," tube stations within 20 mins walk"]}),(0,r.jsxs)("h5",{children:["\ud83d\ude87 ",s[0].station_name," is ",s[0].walkTimeMin," mins away"]}),s.length>2?(0,r.jsxs)("h5",{children:["\ud83d\ude87 ",s[1].station_name," and ",s[2].station_name," are also nearby"]}):1===s.length?(0,r.jsxs)("h5",{children:["\ud83d\ude87 ",s[1].station_name," is also nearby"]}):""]}):(0,r.jsx)("h5",{children:"\ud83d\ude87 No tube stations within 20 min walk of this property"})]}),(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Electric vehicles"}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83d\ude87 ",t[0].ev.ev_10_mins," charging points within 10 mins walk"]}),(0,r.jsxs)("h5",{children:["\ud83d\ude87 in the top ",Math.round(100*(1-t[0].ev.percentile)),"% of areas in London for ev charging access"]})]}):""]})]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"National Rail"}),a&&a.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83d\ude8a ",a.length," rail stations within 20 mins walk"]}),(0,r.jsxs)("h5",{children:["\ud83d\ude8a ",a[0].station," is ",a[0].walkTimeMin," mins away"]}),a.length>2?(0,r.jsxs)("h5",{children:["\ud83d\ude8a ",a[1].station," and ",a[2].station," are also nearby"]}):2===a.length?(0,r.jsxs)("h5",{children:["\ud83d\ude8a ",a[1].station," is also nearby"]}):""]}):(0,r.jsx)("h5",{children:"\ud83d\ude8a No rail stations within 20 min walk of this property"})]})})]})})};var m=e=>{let{postcodeData:t}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("section",{className:"box-highlights",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Green space"}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83c\udf33 within top ",100-t[0].parks_lsoa[0].london_percentile,"% of areas in london for access to greenspace"]}),(0,r.jsxs)("h5",{children:["\ud83c\udf33 ",t[0].parks_postcode.park_name0," within ",Math.ceil(t[0].parks_postcode.distance0/1e3/5*60)," mins walk"]})]}):""]}),(0,r.jsxs)("div",{className:"column",children:[(0,r.jsx)("h5",{className:"block-title",children:"Crime"}),t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h5",{children:["\ud83d\ude93 in the lowest ",Math.round(100*t[0].crime[0].percentile),"% of areas in London for reported crimes"]}),(0,r.jsxs)("h5",{children:["\ud83d\ude93 in the lowest ",Math.round(100*t[0].crime[0].area_specific_percentile),"% of areas in ",t[0].crime[0].borough," for reported crimes"]})]}):""]})]})})})},u=s(15828),p=s(97463),x=s(17077),g=s(35019);var j=e=>{let{neighbourhoodScore:t,postcodeData:s}=e;const a=[{name:"Score",value:t},{name:"Remainder",value:100-t}],i=["#051885","#FFA7E5"],n=[{name:"Score",value:s[0].parks_lsoa[0].london_percentile},{name:"Remainder",value:100-s[0].parks_lsoa[0].london_percentile}],l=[{name:"Score",value:Math.ceil(100*s[0].restaurants.normal_percentile)},{name:"Remainder",value:Math.ceil(100*(1-s[0].restaurants.normal_percentile))}],c=[{name:"Score",value:Math.round(100*s[0].crime[0].percentile)},{name:"Remainder",value:Math.round(100*(1-s[0].crime[0].percentile))}],o=[{name:"Score",value:Math.ceil(100*s[0].tubes.percentile)},{name:"Remainder",value:Math.ceil(100*(1-s[0].tubes.percentile))}],h=[{name:"Score",value:Math.ceil(100*s[0].secondaries.total_score_percentile)},{name:"Remainder",value:Math.ceil(100*(1-s[0].secondaries.total_score_percentile))}];return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("section",{className:"summary-section",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"individual-box",children:[(0,r.jsx)("div",{className:"pie-chart",children:(0,r.jsx)(u.u,{width:100,height:100,children:(0,r.jsxs)(p.b,{data:a,cx:40,cy:50,innerRadius:25,outerRadius:45,fill:"#8884d8",paddingAngle:1,dataKey:"value",startAngle:0,children:[a.map(((e,t)=>(0,r.jsx)(x.b,{fill:i[t%i.length],startAngle:0===t?0:360*a[t-1].value/100,endAngle:360*e.value/100},`cell-${t}`))),(0,r.jsx)(g._,{value:`${t}%`,position:"center",fontSize:15,fontWeight:"bold",fill:"#FFA7E5"})]})})}),(0,r.jsx)("div",{className:"content",children:(0,r.jsx)("h1",{children:"Neighbourhood score"})})]}),(0,r.jsxs)("div",{className:"individual-box",children:[(0,r.jsx)("div",{className:"pie-chart",children:(0,r.jsx)(u.u,{width:100,height:100,children:(0,r.jsxs)(p.b,{data:n,cx:40,cy:50,innerRadius:25,outerRadius:45,fill:"#8884d8",paddingAngle:1,dataKey:"value",startAngle:0,children:[n.map(((e,t)=>(0,r.jsx)(x.b,{fill:i[t%i.length],startAngle:0===t?0:360*a[t-1].value/100,endAngle:360*e.value/100},`cell-${t}`))),(0,r.jsx)(g._,{value:`${n[0].value>50?n[1].value:n[0].value}%`,position:"center",fontSize:15,fontWeight:"bold",fill:"#FFA7E5"})]})})}),(0,r.jsx)("div",{className:"content",children:n[0].value>50?(0,r.jsxs)("h1",{children:["within top ",n[1].value,"% of areas of London for access to greenspace"]}):(0,r.jsxs)("h1",{children:["within bottom ",n[0].value,"% of areas of London for access to greenspace"]})})]}),(0,r.jsxs)("div",{className:"individual-box",children:[(0,r.jsx)("div",{className:"pie-chart",children:(0,r.jsx)(u.u,{width:100,height:100,children:(0,r.jsxs)(p.b,{data:h,cx:40,cy:50,innerRadius:25,outerRadius:45,fill:"#8884d8",paddingAngle:1,dataKey:"value",startAngle:0,children:[h.map(((e,t)=>(0,r.jsx)(x.b,{fill:i[t%i.length],startAngle:0===t?0:360*a[t-1].value/100,endAngle:360*e.value/100},`cell-${t}`))),(0,r.jsx)(g._,{value:100-h[0].value+"%",position:"center",fontSize:15,fontWeight:"bold",fill:"#FFA7E5"})]})})}),(0,r.jsx)("div",{className:"content",children:(0,r.jsxs)("h1",{children:["within top ",100-h[0].value,"% of areas of London for secondary schools"]})})]}),(0,r.jsxs)("div",{className:"individual-box",children:[(0,r.jsx)("div",{className:"pie-chart",children:(0,r.jsx)(u.u,{width:100,height:100,children:(0,r.jsxs)(p.b,{data:l,cx:40,cy:50,innerRadius:25,outerRadius:45,fill:"#8884d8",paddingAngle:1,dataKey:"value",startAngle:0,children:[l.map(((e,t)=>(0,r.jsx)(x.b,{fill:i[t%i.length],startAngle:0===t?0:360*a[t-1].value/100,endAngle:360*e.value/100},`cell-${t}`))),(0,r.jsx)(g._,{value:100-l[0].value+"%",position:"center",fontSize:15,fontWeight:"bold",fill:"#FFA7E5"})]})})}),(0,r.jsx)("div",{className:"content",children:(0,r.jsxs)("h1",{children:["within best ",100-l[0].value,"% of areas of London for number of quality restaurants"]})})]}),(0,r.jsxs)("div",{className:"individual-box",children:[(0,r.jsx)("div",{className:"pie-chart",children:(0,r.jsx)(u.u,{width:100,height:100,children:(0,r.jsxs)(p.b,{data:c.reverse(),cx:40,cy:50,innerRadius:25,outerRadius:45,fill:"#8884d8",paddingAngle:1,dataKey:"value",startAngle:0,children:[c.map(((e,t)=>(0,r.jsx)(x.b,{fill:i[t%i.length],startAngle:0===t?0:360*a[t-1].value/100,endAngle:360*e.value/100},`cell-${t}`))),(0,r.jsx)(g._,{value:`${c[1].value>50?c[0].value:c[1].value}%`,position:"center",fontSize:15,fontWeight:"bold",fill:"#FFA7E5"})]})})}),(0,r.jsx)("div",{className:"content",children:c[1].value>50?(0,r.jsxs)("h1",{children:["In the highest ",c[0].value,"% of areas in London for reported crimes"]}):(0,r.jsxs)("h1",{children:["In the lowest ",c[1].value,"% of areas in London for reported crimes"]})})]}),(0,r.jsxs)("div",{className:"individual-box",children:[(0,r.jsx)("div",{className:"pie-chart",children:(0,r.jsx)(u.u,{width:100,height:100,children:(0,r.jsxs)(p.b,{data:o,cx:40,cy:50,innerRadius:25,outerRadius:45,fill:"#8884d8",paddingAngle:1,dataKey:"value",startAngle:0,children:[o.map(((e,t)=>(0,r.jsx)(x.b,{fill:i[t%i.length],startAngle:0===t?0:360*a[t-1].value/100,endAngle:360*e.value/100},`cell-${t}`))),(0,r.jsx)(g._,{value:100-o[0].value+"%",position:"center",fontSize:15,fontWeight:"bold",fill:"#FFA7E5"})]})})}),(0,r.jsx)("div",{className:"content",children:(0,r.jsxs)("h1",{children:["within top ",100-o[0].value,"% of areas of London for access to tubes"]})})]})]})})})},v=s(91357),f=s(36051),y=s(54738),w=s(59693),b=s(8772),_=s(65554),M=s(79877),N=s(24377),k=s(9663),F=s(9738),S=s(37336),P=s(12779),D=s(49354);var T=()=>{const{postcode:e}=(0,n.UO)(),t=(0,n.s0)(),s=(0,n.TH)(),[u,p]=(0,a.useState)([]),[x,g]=(0,a.useState)("My properties"),[T,E]=(0,a.useState)("My properties"),[A,R]=(0,a.useState)(!1),[C,Z]=(0,a.useState)(),[L,q]=(0,a.useState)(),[$,V]=(0,a.useState)(),[z,U]=(0,a.useState)(),[W,O]=(0,a.useState)(),[H,K]=(0,a.useState)("Property overview"),[B,G]=(0,a.useState)(!1),[I,Y]=(0,a.useState)(!1),[J,Q]=(0,a.useState)(!1),[X,ee]=(0,a.useState)(!1),[te,se]=(0,a.useState)(!1),[ae,ie]=(0,a.useState)(),[ne,le]=(0,a.useState)(),[ce,re]=(0,a.useState)(),[oe,he]=(0,a.useState)(),[de,me]=(0,a.useState)(),[ue,pe]=(0,a.useState)(),[xe,ge]=(0,a.useState)(),[je,ve]=(0,a.useState)(),[fe,ye]=(0,a.useState)(),[we,be]=(0,a.useState)(),[_e,Me]=(0,a.useState)(),[Ne,ke]=(0,a.useState)(),[Fe,Se]=(0,a.useState)(),[Pe,De]=(0,a.useState)(),[Te,Ee]=(0,a.useState)(),[Ae,Re]=(0,a.useState)(),[Ce,Ze]=(0,a.useState)(),[Le,qe]=(0,a.useState)([]),[$e,Ve]=(0,a.useState)([]),[ze,Ue]=(0,a.useState)([]),[We,Oe]=(0,a.useState)([]),[He,Ke]=(0,a.useState)(),[Be,Ge]=(0,a.useState)(),[Ie,Ye]=(0,a.useState)(),[Je,Qe]=(0,a.useState)(),[Xe,et]=(0,a.useState)(),[tt,st]=(0,a.useState)("Primary schools"),[at,it]=(0,a.useState)();(0,a.useEffect)((()=>{(()=>{try{(async()=>{const{data:t}=await i.ZP.get(`/api/postcodes/${e}`);console.log("postcode data ->",t),Z(t)})()}catch(t){O(!0),console.log(t)}})()}),[]);(0,a.useEffect)((()=>{C&&(()=>{if((0,l.Hb)())try{(async()=>{const{data:e}=await i.ZP.get(`/api/auth/profile/${(0,l.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}});console.log("user data ->",e),q(e),U(e.company)})()}catch(e){O(!0),console.log(e)}else t("/access-denied"),console.log("no account")})()}),[C]);(0,a.useEffect)((()=>{z&&(()=>{try{(async()=>{const{data:t}=await i.ZP.get(`/api/white_properties/${z}`,{headers:{Authorization:`Bearer ${(0,l.hP)()}`}}),s=t.find((t=>t.postcode===e));V(s),console.log("current-property ->",s)})()}catch(t){O(!0),console.log(t)}})()}),[z]);(0,a.useEffect)((()=>{C&&(()=>{try{(async()=>{const{data:e}=await i.ZP.get("/api/primaries/");ie(e)})()}catch(e){O(!0),console.log(e)}})()}),[C]);const nt=20/60*5,lt=6371,ct=e=>e*Math.PI/180,rt=5/60;(0,a.useEffect)((()=>{ae&&(()=>{const e=ae.filter((e=>{const t=ct(parseFloat(e.latitude)-parseFloat(C[0].longitude)),s=ct(parseFloat(e.longitude)-parseFloat(C[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(ct(parseFloat(C[0].longitude)))*Math.cos(ct(parseFloat(e.latitude)))*Math.sin(s/2)*Math.sin(s/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),n=lt*i;e.distance_between=n,e.walkTimeMin=Math.round(n/rt);const l=n/e.max_distance;return"Independent school"===e.school_type||"Special school"===e.school_type||"On request"===e.max_distance?e.within_catchment="N/a":"Based on map"===e.additional_status?e.within_catchment="Check catchment map":"Religion"===e.max_distance&e.distance_between<.6?e.within_catchment="Very likely if religious critera met":"Religion"===e.max_distance&e.distance_between<.8?e.within_catchment="Likely if religious critera met":"Religion"===e.max_distance&e.distance_between<1?e.within_catchment="Probably if religious critera met":"Religion"===e.max_distance&e.distance_between<1.5?e.within_catchment="Unlikely, even if religious critera met":"Religion"===e.max_distance&e.distance_between>1.5?e.within_catchment="Very unlikely, even if religious critera met":"Not specified"===e.max_distance&e.distance_between<.4?e.within_catchment="Very likely but no distance specified":"Not specified"===e.max_distance&e.distance_between<.7?e.within_catchment="Likely but no distance specified":"Not specified"===e.max_distance&e.distance_between<1?e.within_catchment="Probably but no distance specified":"Not specified"===e.max_distance&e.distance_between>1?e.within_catchment="Unlikely, but no distance specified":null===e.max_distance&e.distance_between<.6?e.within_catchment="Very likely, but no distance data available":null===e.max_distance&e.distance_between<.8?e.within_catchment="Likely, but no distance data available":null===e.max_distance&e.distance_between<1?e.within_catchment="Probably, but no distance data available":null===e.max_distance&e.distance_between<1.5?e.within_catchment="Unlikely, but no distance data available":null===e.max_distance&e.distance_between>1.5?e.within_catchment="Very unlikely, but no distance data available":l<=.6?e.within_catchment="Yes":l<=.8?e.within_catchment="Very likely":l<=1?e.within_catchment="Probably":l<=1.2?e.within_catchment="Probably not":"Does not apply"===e.max_distance?e.within_catchment="Yes":e.within_catchment="No",n<=nt})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin)),t=e.slice(0,8);me(t),le(e),console.log("nearby primaries ->",e)})()}),[ae]);(0,a.useEffect)((()=>{C&&(()=>{try{(async()=>{const{data:e}=await i.ZP.get("/api/secondaries/");re(e)})()}catch(e){O(!0),console.log(e)}})()}),[C]);(0,a.useEffect)((()=>{ce&&(()=>{const e=ce.filter((e=>{const t=ct(parseFloat(e.latitude)-parseFloat(C[0].longitude)),s=ct(parseFloat(e.longitude)-parseFloat(C[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(ct(parseFloat(C[0].longitude)))*Math.cos(ct(parseFloat(e.latitude)))*Math.sin(s/2)*Math.sin(s/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),n=lt*i;e.distance_between=n,e.walkTimeMin=Math.round(n/rt);const l=n/e.max_distance,c=n/e.min_distance;return e.school_type.includes("independent")||e.school_type.includes("special")?e.within_catchment="N/a":"Exam"===e.max_distance||"Test score"===e.max_distance?e.within_catchment="Dependent on test results":"Random"===e.max_distance?e.within_catchment="Random selection based on performance":"Catchment score"===e.max_distance?e.within_catchment="School uses catchment score - check":"Based on map"===e.max_distance?e.within_catchment="Check catchment map":"Religion"===e.max_distance&e.distance_between<.7?e.within_catchment="Very likely if religious critera met":"Religion"===e.max_distance&e.distance_between<.9?e.within_catchment="Likely if religious critera met":"Religion"===e.max_distance&e.distance_between<1.5?e.within_catchment="Probably if religious critera met":"Religion"===e.max_distance&e.distance_between>1.5?e.within_catchment="Unlikely, even if religious critera met":"Does not apply"===e.max_distance||null!==e.min_distance&c<=1?e.within_catchment="Yes":null!==e.min_distance&l<=.5?e.within_catchment="Very likely":null!==e.min_distance&l<=.7?e.within_catchment="Probably":e.within_catchment=l<=.6?"Yes":l<=.8?"Very likely":l<=1?"Probably":l<=1.2?"Probably not":"No",n<=2.5})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin)),t=e.slice(0,8);pe(t),he(e),console.log("nearby secondaries ->",e)})()}),[ce]);(0,a.useEffect)((()=>{C&&(()=>{try{(async()=>{const{data:e}=await i.ZP.get("/api/restaurants/");ge(e)})()}catch(e){O(!0),console.log(e)}})()}),[C]);const ot=1.25;(0,a.useEffect)((()=>{xe&&(()=>{const e=xe.filter((e=>{const t=ct(parseFloat(e.latitude)-parseFloat(C[0].longitude)),s=ct(parseFloat(e.longitude)-parseFloat(C[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(ct(parseFloat(C[0].longitude)))*Math.cos(ct(parseFloat(e.latitude)))*Math.sin(s/2)*Math.sin(s/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),n=lt*i;return e.distance_between=n,e.walkTimeMin=Math.round(n/rt),n<=ot})).sort(((e,t)=>t.rating-e.rating)),t=e.filter((e=>"No Cuisine Data"!==e.cuisine)).slice(0,3).map((e=>e.restaurant_name));Ze((e=>new Set(e.map((e=>e.cuisine))).size)(e)),ke(e),qe(t),console.log("Nearby restaurants ->",e)})()}),[xe]);(0,a.useEffect)((()=>{C&&(()=>{try{(async()=>{const{data:e}=await i.ZP.get("/api/gyms/");console.log("gyms data ->",e),ve(e)})()}catch(e){O(!0),console.log(e)}})()}),[C]);(0,a.useEffect)((()=>{je&&(()=>{const e=["third space","pure gym","1 rebel","virgin","barry's","the gym group"],t=new Set,s=je.filter((e=>{const t=ct(parseFloat(e.Lat)-parseFloat(C[0].longitude)),s=ct(parseFloat(e.long)-parseFloat(C[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(ct(parseFloat(C[0].longitude)))*Math.cos(ct(parseFloat(e.Lat)))*Math.sin(s/2)*Math.sin(s/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),n=lt*i;return e.distance_between=n,e.walkTimeMin=Math.round(n/rt),n<=ot})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin)),a=[];for(let i=0;i<s.length;i++){const n=s[i];if(n.gym_group&&e.includes(n.gym_group.toLowerCase())&&!t.has(n.gym_group)&&(a.push(n.gym_group),t.add(n.gym_group),3===a.length))break}Se(s),Ue(a)})()}),[je]);(0,a.useEffect)((()=>{C&&(()=>{try{(async()=>{const{data:e}=await i.ZP.get("/api/supermarkets/");be(e)})()}catch(e){O(!0),console.log(e)}})()}),[C]);(0,a.useEffect)((()=>{we&&(()=>{const e=["m&s food","waitrose","aldi","lidl","sainsbury's","tesco","asda"],t=new Set,s=we.map((e=>{const t=ct(parseFloat(e.Lat)-parseFloat(C[0].longitude)),s=ct(parseFloat(e.long)-parseFloat(C[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(ct(parseFloat(C[0].longitude)))*Math.cos(ct(parseFloat(e.Lat)))*Math.sin(s/2)*Math.sin(s/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),n=lt*i;return e.distance_between=n,e.walkTimeMin=Math.round(n/rt),{...e,distance:n}})).filter((e=>e.distance<=ot)),a=[];for(let i=0;i<s.length;i++){const n=s[i];if(e.includes(n.cleansed_name.toLowerCase())&&!t.has(n.cleansed_name)&&(a.push(n.cleansed_name),t.add(n.cleansed_name),3===a.length))break}Ee(s),Oe(a),console.log("Nearby supermarkets ->",s)})()}),[we]);(0,a.useEffect)((()=>{C&&(()=>{try{(async()=>{const{data:e}=await i.ZP.get("/api/tubes/");Ke(e)})()}catch(e){O(!0),console.log(e)}})()}),[C]);(0,a.useEffect)((()=>{He&&(()=>{const e=He.filter((e=>{const t=ct(parseFloat(e.lat)-parseFloat(C[0].longitude)),s=ct(parseFloat(e.long)-parseFloat(C[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(ct(parseFloat(C[0].longitude)))*Math.cos(ct(parseFloat(e.lat)))*Math.sin(s/2)*Math.sin(s/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),n=lt*i;return e.distance_between=n,e.walkTimeMin=Math.round(n/rt),n<=nt})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin));Ye(e),console.log("Nearby tubes ->",e)})()}),[He]);(0,a.useEffect)((()=>{C&&(()=>{try{(async()=>{const{data:e}=await i.ZP.get("/api/evs/");console.log("ev data ->",e),Me(e)})()}catch(e){O(!0),console.log(e)}})()}),[C]);(0,a.useEffect)((()=>{_e&&(()=>{const e=_e.filter((e=>{const t=ct(parseFloat(e.latitude)-parseFloat(C[0].longitude)),s=ct(parseFloat(e.longitude)-parseFloat(C[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(ct(parseFloat(C[0].longitude)))*Math.cos(ct(parseFloat(e.latitude)))*Math.sin(s/2)*Math.sin(s/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),n=lt*i;return e.distance_between=n,e.walkTimeMin=Math.round(n/rt),n<=.8333333333333333})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin));Re(e)})()}),[_e]);(0,a.useEffect)((()=>{C&&(()=>{try{(async()=>{const{data:e}=await i.ZP.get("/api/pubs/");console.log("pub data ->",e),ye(e)})()}catch(e){O(!0),console.log(e)}})()}),[C]);(0,a.useEffect)((()=>{fe&&(()=>{const e=fe.filter((e=>{const t=ct(parseFloat(e.latitude)-parseFloat(C[0].longitude)),s=ct(parseFloat(e.longitude)-parseFloat(C[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(ct(parseFloat(C[0].longitude)))*Math.cos(ct(parseFloat(e.latitude)))*Math.sin(s/2)*Math.sin(s/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),n=lt*i;return e.distance_between=n,e.walkTimeMin=Math.round(n/rt),n<=ot})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin)),t=e.slice(0,3).map((e=>e.name));De(e),Ve(t),console.log("Nearby pubs ->",e)})()}),[fe]);(0,a.useEffect)((()=>{C&&(()=>{const e=Math.ceil((1-C[0].crime[0].percentile+C[0].ev.percentile+C[0].fitness.percentile+(1-C[0].parks_lsoa[0].london_percentile/100)+C[0].restaurants.normal_percentile+C[0].supermarkets.percentile+C[0].tubes.percentile)/7*100);et(e)})()}));(0,a.useEffect)((()=>{C&&(()=>{try{(async()=>{const{data:e}=await i.ZP.get("/api/trains/");console.log("trains data ->",e),Ge(e)})()}catch(e){O(!0),console.log(e)}})()}),[C]);(0,a.useEffect)((()=>{Be&&(()=>{const e=Be.filter((e=>{const t=ct(parseFloat(e.latitude)-parseFloat(C[0].longitude)),s=ct(parseFloat(e.longitude)-parseFloat(C[0].latitude)),a=Math.sin(t/2)*Math.sin(t/2)+Math.cos(ct(parseFloat(C[0].longitude)))*Math.cos(ct(parseFloat(e.latitude)))*Math.sin(s/2)*Math.sin(s/2),i=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),n=lt*i;return e.distance_between=n,e.walkTimeMin=Math.round(n/rt),n<=nt})).sort(((e,t)=>e.walkTimeMin-t.walkTimeMin));Qe(e),console.log("Nearby trains ->",e)})()}),[Be]),(0,a.useEffect)((()=>{p((e=>[...e,s.pathname]))}),[s]);return(0,a.useEffect)((()=>{console.log(`profileContent updated to: ${x}`)}),[x]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("section",{className:"agent-specific-property print-container",children:[(0,r.jsx)("div",{className:"desktop-nav",children:(0,r.jsx)(b.Z,{navbarColour:"#FDF7F0"})}),(0,r.jsx)("div",{className:"mobile-nav",children:(0,r.jsx)(S.Z,{setProfileContent:g,profileContent:x,profileDetail:T,setProfileDetail:E})}),(0,r.jsx)(w.Z,{setProfileDetail:E,variableSide:A,setProfileContent:g,setVariableSide:R}),(0,r.jsx)("div",{className:"go-back-button no-print remove-margin",children:(0,r.jsx)("h5",{onClick:()=>t("/agents/profile"),children:"<- back to profile"})}),(0,r.jsxs)("div",{className:"property-options no-print",children:[(0,r.jsxs)("div",{className:"left-section",children:[(0,r.jsx)("h5",{className:"no-print",onClick:()=>K("Property overview"),style:{textDecoration:"Property overview"===H?"underline 2px #FFA7E5":"none",textUnderlineOffset:"Property overview"===H?"0.5em":"initial",fontWeight:"Property overview"===H?"700":"400"},children:"Property overview"}),(0,r.jsx)("h5",{className:"no-print",onClick:()=>K("Property details"),style:{textDecoration:"Property details"===H?"underline 2px #FFA7E5":"none",textUnderlineOffset:"Property details"===H?"0.5em":"initial",fontWeight:"Property details"===H?"700":"400"},children:"Property details"})]}),(0,r.jsx)("h1",{className:"print-button no-print",onClick:()=>window.print(),children:"\ud83d\udda8"})]}),"Property overview"===H?(0,r.jsxs)("section",{className:"property-wrapper",children:[$?(0,r.jsxs)("section",{className:"property-details remove-margin",children:[(0,r.jsx)("img",{className:"property-image",src:$.image,alt:"property-image"}),(0,r.jsx)("div",{className:"property-content",children:(0,r.jsxs)("div",{className:"content-blocks",children:[(0,r.jsxs)("div",{className:"content-summary",children:[(0,r.jsxs)("div",{className:"content-top-line",children:[(0,r.jsx)("h1",{children:$.name}),(0,r.jsx)("h1",{children:(0,r.jsx)(c.h3,{value:$.price,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})})]}),(0,r.jsx)("h3",{children:$.address})]}),(0,r.jsxs)("div",{className:"content-details",children:[(0,r.jsxs)("div",{className:"content-details-top",children:[(0,r.jsxs)("h4",{children:["\ud83c\udfe0 ",$.type]}),(0,r.jsxs)("h4",{children:["\ud83d\udce6 ",$.size]})]}),(0,r.jsxs)("div",{className:"content-details-bottom",children:[(0,r.jsxs)("h4",{children:["\ud83d\udecc x ",$.bedrooms]}),(0,r.jsxs)("h4",{children:["\ud83d\udec1 x ",$.bathrooms]}),(0,r.jsxs)("h4",{children:["\ud83d\udecb x ",$.living_rooms]})]})]})]})})]}):"",(0,r.jsxs)("section",{className:"property-summary-sections remove-margin",children:[(0,r.jsxs)("div",{className:"property-highlight",onClick:()=>G(!B),children:[(0,r.jsx)("h3",{children:"Property Summary"}),(0,r.jsx)("div",{className:"click-downs",children:B?(0,r.jsx)("h4",{children:"^"}):(0,r.jsx)("h4",{children:"v"})})]}),C&&B?(0,r.jsx)(j,{neighbourhoodScore:Xe,postcodeData:C}):"",(0,r.jsx)("hr",{className:"highlight-separator"}),(0,r.jsxs)("div",{className:"property-highlight",onClick:()=>Y(!I),children:[(0,r.jsx)("h3",{children:"School Highlights"}),(0,r.jsx)("div",{className:"click-downs",children:I?(0,r.jsx)("h4",{children:"^"}):(0,r.jsx)("h4",{children:"v"})})]}),I?(0,r.jsx)(h,{topPrimaries:de,topSecondaries:ue}):"",(0,r.jsx)("hr",{className:"highlight-separator"}),(0,r.jsxs)("div",{className:"property-highlight",onClick:()=>Q(!J),children:[(0,r.jsx)("h3",{children:"Lifestyle Highlights"}),(0,r.jsx)("div",{className:"click-downs",children:J?(0,r.jsx)("h4",{children:"^"}):(0,r.jsx)("h4",{children:"v"})})]}),J?(0,r.jsx)(o,{restaurants1:Ne,cuisines:Ce,topRestaurants:Le,gyms1:Fe,mainGyms:ze,supermarkets1:Te,mainSupermarkets:We,pubs1:Pe,topPubs:$e}):"",(0,r.jsx)("hr",{className:"highlight-separator"}),(0,r.jsxs)("div",{className:"property-highlight",onClick:()=>ee(!X),children:[(0,r.jsx)("h3",{children:"Transport Highlights"}),(0,r.jsx)("div",{className:"click-downs",children:X?(0,r.jsx)("h4",{children:"^"}):(0,r.jsx)("h4",{children:"v"})})]}),X?(0,r.jsx)(d,{postcodeData:C,tubes1:Ie,trains1:Je}):"",(0,r.jsx)("hr",{className:"highlight-separator"}),(0,r.jsxs)("div",{className:"property-highlight",onClick:()=>se(!te),children:[(0,r.jsx)("h3",{children:"Neighbourhood Highlights"}),(0,r.jsx)("div",{className:"click-downs",children:te?(0,r.jsx)("h4",{children:"^"}):(0,r.jsx)("h4",{children:"v"})})]}),te?(0,r.jsx)(m,{postcodeData:C}):""]})]}):"Property details"===H?(0,r.jsxs)("section",{className:"property-wrapper",children:[(0,r.jsx)(v.Z,{sliderSelection:tt,setSliderSelection:st}),"Primary schools"===tt?(0,r.jsx)(f.Z,{primaryData1:ne,setPrimaryData1:le,propertyData:$,listType:"short list",postcodeData:C}):"Secondary schools"===tt?(0,r.jsx)(y.Z,{secondaryData1:oe,setSecondaryData1:he,propertyData:$,listType:"short list",postcodeData:C}):"Restaurants"===tt?(0,r.jsx)(_.Z,{restaurants1:Ne,setRestaurants1:ke,propertyData:$,listType:"short list",postcodeData:C}):"Fitness"===tt?(0,r.jsx)(M.Z,{gyms1:Fe,setGyms1:Se,propertyData:$,listType:"short list",postcodeData:C}):"Supermarkets"===tt?(0,r.jsx)(N.Z,{supermarkets1:Te,setSupermarkets1:Ee,propertyData:$,listType:"short list",postcodeData:C}):"EVs"===tt?(0,r.jsx)(P.Z,{ev1:Ae,setEv1:Re,propertyData:$,listType:"short list",postcodeData:C}):"Pubs"===tt?(0,r.jsx)(D.Z,{pubs1:Pe,setPubs1:De,propertyData:$,listType:"short list",postcodeData:C}):""]}):"Variables"===H?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(k.default,{profileDetail:T,setProfileDetail:E,profileContent:x})}):"Comparison"===x?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(F.default,{userData:L,propertyList:at})}):""]})})}}}]);
//# sourceMappingURL=432.bc3f7ac8.chunk.js.map