"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[872],{9872:function(e,t,s){var a=s(28381),i=s(65293),n=(s(97575),s(45851),s(42524)),o=(s(47142),s(15211)),l=s(20904),r=s(50964),c=s(11535),d=s(68603),h=s(29343);t.Z=e=>{let{livingRegisterShow:t,handleLivingRegisterClose:s,loadUserData:u,setComplete2:m}=e;const p=(0,n.s0)(),[v,g]=(0,a.useState)("Page 1"),[x,_]=(0,a.useState)(0),[f,y]=(0,a.useState)(),[b,w]=(0,a.useState)(),[j,k]=(0,a.useState)(),[N,C]=(0,a.useState)(),[S,E]=(0,a.useState)(),[M,T]=(0,a.useState)({email:"",username:"",password:"",password_confirmation:"",first_name:"",last_name:""}),[D,P]=(0,a.useState)({email:"",username:"",password:"",password_confirmation:"",first_name:"",last_name:"",post:""}),L=e=>{if(T({...M,[e.target.name]:e.target.value,email:W.email_address}),"first_name"===e.target.name)e.target.value.length<1?P({...D,first_name:"Add first name"}):P({...D,first_name:""});else if("last_name"===e.target.name)e.target.value.length<1?P({...D,last_name:"Add last name"}):P({...D,last_name:""});else if("email"===e.target.name)(0,c.isEmail)(M.email)?P({...D,email:""}):P({...D,email:"Invalid email address"});else if("username"===e.target.name)e.target.value.length<1?P({...D,username:"Add username"}):P({...D,username:""});else if("password"===e.target.name){const t=U(e.target.value);P({...D,password:t})}else"password_confirmation"===e.target.name&&(e.target.value!==M.password?P({...D,password_confirmation:"Passwords don't match"}):P({...D,password_confirmation:""}))},I=e=>{window.localStorage.setItem("wittle-user-token",e)},[W,Z]=(0,a.useState)({email_address:"",long:"",lat:"",email_confirmation:0}),[A,H]=(0,a.useState)({email_address:"",address:"",post:""}),[O,z]=(0,a.useState)({email_address:null,long:null,lat:null,email_status:0,subscription_type:1,admin_status:0,lifestyle_status:0,property_status:0,mortgage_status:0,mortgage_provider:"",mortgage_value:null,mortgage_date:null,boiler_status:0,boiler_provider:"",boiler_value:null,boiler_date:null,insurance_status:0,insurance_provider:"",insurance_value:null,insurance_date:null,energy_status:0,energy_detail:1,energy_provider:"",energy_value:null,energy_date:null,gas_provider:"",gas_value:null,gas_date:null,electric_provider:"",electric_value:null,electric_date:null,council_tax_status:0,council_tax_value:null,council_tax_date:null,broadband_status:0,broadband_provider:"",broadband_value:null,broadband_date:null,sky_status:0,sky_provider:"",sky_value:null,sky_date:null,netflix_status:0,netflix_value:null,netflix_date:null,amazon_status:0,amazon_value:null,amazon_date:null,disney_status:0,disney_value:null,disney_date:null,apple_status:0,apple_value:null,apple_date:null,tv_status:0,tv_value:null,tv_date:null,phone_status:0,phone_provider:"",phone_value:null,phone_date:null,gym_status:0,gym_provider:"",gym_value:null,gym_date:null,other_status_1:0,other_type_1:"",other_provider_1:"",other_value_1:null,other_date_1:null,other_status_2:0,other_type_2:"",other_provider_2:"",other_value_2:null,other_date_2:null,other_status_3:0,other_type_3:"",other_provider_3:"",other_value_3:null,other_date_3:null}),U=e=>{const t=(0,c.matches)(e,/[A-Z]/),s=(0,c.matches)(e,/[a-z]/),a=(0,c.matches)(e,/\d/),i=(0,c.matches)(e,/[^A-Za-z0-9]/);return(0,c.isLength)(e,{min:8})?t?s?a?i?"":"Password must contain at least one special character":"Password must contain at least one digit":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter":"Password must be at least 8 characters long"};return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"wittle-living-signup",children:(0,h.jsx)(l.Z,{show:t,onHide:s,backdrop:"static",className:"wittle-living-signup-modal",children:(0,h.jsx)(l.Z.Body,{children:"Page 1"===v?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("section",{className:"content-section",children:[(0,h.jsxs)("div",{className:"nav-section",children:[(0,h.jsx)("div",{className:"logo",children:(0,h.jsx)("h2",{onClick:()=>p("/"),children:"Wittle"})}),(0,h.jsx)("h1",{className:"mobile-close",onClick:s,children:"x"})]}),(0,h.jsxs)("div",{className:"body-section",children:[(0,h.jsxs)("div",{className:"body-title",children:[(0,h.jsx)("h1",{children:"Step One"}),(0,h.jsx)("h5",{children:"Add your contact email and let us know the area you want to know about"})]}),(0,h.jsxs)("div",{className:"body-detail",children:[(0,h.jsxs)("div",{className:"body-block",children:[(0,h.jsx)("h5",{children:"Enter email"}),(0,h.jsx)("input",{type:"text",name:"email_address",value:W.email_address,onChange:e=>{Z({...W,email_address:e.target.value}),z({...O,email_address:e.target.value}),T({...M,email:e.target.value})}}),A.email_address&&(0,h.jsxs)("p",{className:"error",children:["* ",A.email_address]})]}),(0,h.jsxs)("div",{className:"body-block",children:[(0,h.jsx)("h5",{children:"Enter address"}),(0,h.jsx)(d.Z,{livingData:O,setLivingData:z,userEmail:W,setUserEmail:Z,setLifestyleLat:w,setLifestyleLong:y,setLoading:k,setClick:C,setViewport:E}),A.address&&(0,h.jsxs)("p",{className:"error",children:["* ",A.address]})]}),(0,h.jsxs)("div",{className:"body-block",children:[(0,h.jsx)("h5",{children:"Our default catchment area is a 20 min walk in all directions"}),(0,h.jsx)("div",{className:"map-radius"})]}),(0,h.jsxs)("div",{className:"tick-block",children:[(0,h.jsx)("input",{type:"checkbox",name:"email_confirmation",onChange:e=>{0===W.email_confirmation?(Z({...W,email_confirmation:1}),z({...O,email_status:1})):1===W.email_confirmation&&(Z({...W,email_confirmation:0}),z({...O,email_status:0}))},checked:1===W.email_confirmation}),(0,h.jsx)("h5",{children:"I'd like a weekly email giving me insights about my area"})]}),(0,h.jsx)("button",{className:"living-next",onClick:async e=>{if((0,c.isEmail)(W.email_address))if(""===W.lat||void 0===W.lat)H({...A,email_address:""}),H({...A,address:"Enter valid address"});else try{const{data:e}=await i.ZP.post("/api/emails/",W);console.log("email-data ->",e),g("Page 2")}catch(t){console.log(t),H({...A,email_address:"Living account with this email already exists"})}else H({...A,email_address:"Invalid email address"})},children:"Continue"}),(0,h.jsx)("h5",{className:"terms",children:"By continuing, you accept you have read our terms and privacy notice"})]})]})]}),(0,h.jsxs)("section",{className:"image-section",children:[(0,h.jsx)("h1",{className:"desktop-close",onClick:s,children:"x"}),(0,h.jsx)("div",{className:"image-flow-1"})]})]}):"Page 2"===v?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("section",{className:"content-section",children:[(0,h.jsxs)("div",{className:"nav-section",children:[(0,h.jsx)("div",{className:"logo",children:(0,h.jsx)("h2",{onClick:()=>p("/"),children:"Wittle"})}),(0,h.jsx)("h1",{className:"mobile-close",onClick:s,children:"x"})]}),(0,h.jsxs)("div",{className:"body-section",children:[(0,h.jsxs)("div",{className:"body-title",children:[(0,h.jsx)("h1",{children:"Step Two"}),(0,h.jsx)("h5",{children:"Log in to your account or register with Wittle"})]}),(0,h.jsxs)("div",{className:"body-detail",children:[(0,h.jsxs)("div",{className:"tick-block",children:[(0,h.jsx)("h5",{children:"Are you a member of Wittle?"}),(0,h.jsx)(r.Z,{checked:1===x,onChange:()=>{0===x?_(1):1===x&&_(0)}})]}),0===x?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"body-block",children:[(0,h.jsx)("h5",{children:"First name"}),(0,h.jsx)("input",{type:"text",name:"first_name",className:"input",placeholder:"First name",value:M.first_name,onChange:L}),D.first_name&&(0,h.jsxs)("p",{className:"error",children:["* ",D.first_name]})]}),(0,h.jsxs)("div",{className:"body-block",children:[(0,h.jsx)("h5",{children:"Last name"}),(0,h.jsx)("input",{type:"text",name:"last_name",className:"input",placeholder:"Last name",value:M.last_name,onChange:L}),D.last_name&&(0,h.jsxs)("p",{className:"error",children:["* ",D.last_name]})]}),(0,h.jsxs)("div",{className:"body-block",children:[(0,h.jsx)("h5",{children:"Username"}),(0,h.jsx)("input",{type:"text",name:"username",className:"input",placeholder:"Username",value:M.username,onChange:L}),D.username&&(0,h.jsxs)("p",{className:"error",children:["* ",D.username]})]}),(0,h.jsxs)("div",{className:"body-block",children:[(0,h.jsx)("h5",{children:"Enter password"}),(0,h.jsx)("input",{type:"password",name:"password",className:"input",placeholder:"Password",value:M.password,onChange:L}),D.password&&(0,h.jsxs)("p",{className:"error",children:["* ",D.password]})]}),(0,h.jsxs)("div",{className:"body-block",children:[(0,h.jsx)("h5",{children:"Confrm password"}),(0,h.jsx)("input",{type:"password",name:"password_confirmation",className:"input",placeholder:"Password confirmation",value:M.password_confirmation,onChange:L}),D.password_confirmation&&(0,h.jsxs)("p",{className:"error",children:["* ",D.password_confirmation]})]}),(0,h.jsx)("button",{className:"living-next",onClick:async e=>{e.preventDefault();try{await i.ZP.post("/api/auth/register/",M);const{data:e}=await i.ZP.post("/api/auth/login/",M);I(e.token),window.localStorage.setItem("wittle-username",e.username),console.log("username ->",e.username),T(),g("Page 3")}catch(t){P({...D,post:t.response.statusText}),console.log(t.response.statusText)}},children:"Continue"})]}):1===x?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"body-block",children:[(0,h.jsx)("h5",{children:"Enter email"}),(0,h.jsx)("input",{type:"text",name:"email_address",value:W.email_address,onChange:L})]}),(0,h.jsxs)("div",{className:"body-block",children:[(0,h.jsx)("h5",{children:"Confrm password"}),(0,h.jsx)("input",{type:"password",name:"password",className:"input",placeholder:"Password password",value:M.password,onChange:L})]}),(0,h.jsx)("button",{className:"living-next",onClick:async e=>{e.preventDefault();try{const{data:e}=await i.ZP.post("/api/auth/login/",M);console.log(M),I(e.token),console.log({data:e}),window.localStorage.setItem("wittle-username",e.username),window.localStorage.setItem("wittle-email",e.email),console.log("username ->",e.username),g("Page 3")}catch(t){P({...D,post:t.response.statusText}),console.log(t.response.statusText)}},children:"Continue"})]}):""]})]})]}),(0,h.jsxs)("section",{className:"image-section",children:[(0,h.jsx)("h1",{className:"desktop-close",onClick:s,children:"x"}),(0,h.jsx)("div",{className:"image-flow-2"})]})]}):"Page 3"===v?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("section",{className:"content-section",children:[(0,h.jsxs)("div",{className:"nav-section",children:[(0,h.jsx)("div",{className:"logo",children:(0,h.jsx)("h2",{onClick:()=>p("/"),children:"Wittle"})}),(0,h.jsx)("h1",{className:"mobile-close",onClick:s,children:"x"})]}),(0,h.jsxs)("div",{className:"body-section",children:[(0,h.jsxs)("div",{className:"body-title",children:[(0,h.jsx)("h1",{children:"Step Three"}),(0,h.jsx)("h5",{children:"Finally, tell us what you want to see"})]}),(0,h.jsxs)("div",{className:"body-detail",children:[(0,h.jsxs)("div",{className:"body-block",id:"final-step",children:[(0,h.jsxs)("div",{className:"block-left",children:[(0,h.jsx)("h5",{children:"Lifestyle"}),(0,h.jsx)("p",{children:"Find out about what's going on near you and in all of London"})]}),(0,h.jsx)(r.Z,{checked:1===O.lifestyle_status,onChange:()=>{0===O.lifestyle_status?z({...O,lifestyle_status:1}):z({...O,lifestyle_status:0})}})]}),(0,h.jsxs)("div",{className:"body-block",id:"final-step",children:[(0,h.jsxs)("div",{className:"block-left",children:[(0,h.jsx)("h5",{children:"Property management"}),(0,h.jsx)("p",{children:"Manage and get insights on your bills in one place, keep on top of maintenance, insurance and more"})]}),(0,h.jsx)(r.Z,{checked:1===O.admin_status,onChange:()=>{0===O.admin_status?z({...O,admin_status:1}):z({...O,admin_status:0})}})]}),(0,h.jsxs)("div",{className:"body-block",id:"final-step",children:[(0,h.jsxs)("div",{className:"block-left",children:[(0,h.jsx)("h5",{children:"Area metrics"}),(0,h.jsx)("p",{children:"Keep on top of individual property sales in the area, average pricing and more"})]}),(0,h.jsx)(r.Z,{checked:1===O.property_status,onChange:()=>{0===O.property_status?z({...O,property_status:1}):z({...O,property_status:0})}})]}),(0,h.jsx)("button",{className:"living-next",onClick:async e=>{e.preventDefault();try{const{data:e}=await i.ZP.post("/api/living/",O,{headers:{Authorization:`Bearer ${(0,o.hP)()}`}});window.localStorage.setItem("wittle-living-data",e),console.log("wittle living info ->",e),p(`/profile/${(0,o.Nh)()}/`),u(),m(!0),s(!0)}catch(t){console.log(t),console.log(t.response.data)}},children:"Submit"})]})]})]}),(0,h.jsxs)("section",{className:"image-section",children:[(0,h.jsx)("h1",{className:"desktop-close",onClick:s,children:"x"}),(0,h.jsx)("div",{className:"image-flow-3"})]})]}):""})})})})}},50964:function(e,t,s){s.d(t,{Z:function(){return c}});var a=s(28381);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},i.apply(this,arguments)}var n=a.createElement("svg",{viewBox:"-2 -5 14 20",height:"100%",width:"100%",style:{position:"absolute",top:0}},a.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"})),o=a.createElement("svg",{height:"100%",width:"100%",viewBox:"-2 -5 17 21",style:{position:"absolute",top:0}},a.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}));function l(e){if(7===e.length)return e;for(var t="#",s=1;s<4;s+=1)t+=e[s]+e[s];return t}function r(e,t,s,a,i){return function(e,t,s,a,i){var n=(e-s)/(t-s);if(0===n)return a;if(1===n)return i;for(var o="#",l=1;l<6;l+=2){var r=parseInt(a.substr(l,2),16),c=parseInt(i.substr(l,2),16),d=Math.round((1-n)*r+n*c).toString(16);1===d.length&&(d="0"+d),o+=d}return o}(e,t,s,l(a),l(i))}var c=function(e){function t(t){e.call(this,t);var s=t.height,a=t.width,i=t.checked;this.t=t.handleDiameter||s-2,this.i=Math.max(a-s,a-(s+this.t)/2),this.o=Math.max(0,(s-this.t)/2),this.state={h:i?this.i:this.o},this.l=0,this.u=0,this.p=this.p.bind(this),this.v=this.v.bind(this),this.g=this.g.bind(this),this.k=this.k.bind(this),this.m=this.m.bind(this),this.M=this.M.bind(this),this.T=this.T.bind(this),this.$=this.$.bind(this),this.C=this.C.bind(this),this.D=this.D.bind(this),this.O=this.O.bind(this),this.S=this.S.bind(this)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.componentDidMount=function(){this.W=!0},t.prototype.componentDidUpdate=function(e){e.checked!==this.props.checked&&this.setState({h:this.props.checked?this.i:this.o})},t.prototype.componentWillUnmount=function(){this.W=!1},t.prototype.I=function(e){this.H.focus(),this.setState({R:e,j:!0,B:Date.now()})},t.prototype.L=function(e){var t=this.state,s=t.R,a=t.h,i=(this.props.checked?this.i:this.o)+e-s;t.N||e===s||this.setState({N:!0});var n=Math.min(this.i,Math.max(this.o,i));n!==a&&this.setState({h:n})},t.prototype.U=function(e){var t=this.state,s=t.h,a=t.N,i=t.B,n=this.props.checked,o=(this.i+this.o)/2;this.setState({h:this.props.checked?this.i:this.o});var l=Date.now()-i;(!a||l<250||n&&s<=o||!n&&s>=o)&&this.A(e),this.W&&this.setState({N:!1,j:!1}),this.l=Date.now()},t.prototype.p=function(e){e.preventDefault(),"number"==typeof e.button&&0!==e.button||(this.I(e.clientX),window.addEventListener("mousemove",this.v),window.addEventListener("mouseup",this.g))},t.prototype.v=function(e){e.preventDefault(),this.L(e.clientX)},t.prototype.g=function(e){this.U(e),window.removeEventListener("mousemove",this.v),window.removeEventListener("mouseup",this.g)},t.prototype.k=function(e){this.X=null,this.I(e.touches[0].clientX)},t.prototype.m=function(e){this.L(e.touches[0].clientX)},t.prototype.M=function(e){e.preventDefault(),this.U(e)},t.prototype.$=function(e){Date.now()-this.l>50&&(this.A(e),Date.now()-this.u>50&&this.W&&this.setState({j:!1}))},t.prototype.C=function(){this.u=Date.now()},t.prototype.D=function(){this.setState({j:!0})},t.prototype.O=function(){this.setState({j:!1})},t.prototype.S=function(e){this.H=e},t.prototype.T=function(e){e.preventDefault(),this.H.focus(),this.A(e),this.W&&this.setState({j:!1})},t.prototype.A=function(e){var t=this.props;(0,t.onChange)(!t.checked,e,t.id)},t.prototype.render=function(){var e=this.props,t=e.checked,s=e.disabled,n=e.className,o=e.offColor,l=e.onColor,c=e.offHandleColor,d=e.onHandleColor,h=e.checkedIcon,u=e.uncheckedIcon,m=e.checkedHandleIcon,p=e.uncheckedHandleIcon,v=e.boxShadow,g=e.activeBoxShadow,x=e.height,_=e.width,f=e.borderRadius,y=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(s[a]=e[a]);return s}(e,["checked","disabled","className","offColor","onColor","offHandleColor","onHandleColor","checkedIcon","uncheckedIcon","checkedHandleIcon","uncheckedHandleIcon","boxShadow","activeBoxShadow","height","width","borderRadius","handleDiameter"]),b=this.state,w=b.h,j=b.N,k=b.j,N={position:"relative",display:"inline-block",textAlign:"left",opacity:s?.5:1,direction:"ltr",borderRadius:x/2,WebkitTransition:"opacity 0.25s",MozTransition:"opacity 0.25s",transition:"opacity 0.25s",touchAction:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},C={height:x,width:_,margin:Math.max(0,(this.t-x)/2),position:"relative",background:r(w,this.i,this.o,o,l),borderRadius:"number"==typeof f?f:x/2,cursor:s?"default":"pointer",WebkitTransition:j?null:"background 0.25s",MozTransition:j?null:"background 0.25s",transition:j?null:"background 0.25s"},S={height:x,width:Math.min(1.5*x,_-(this.t+x)/2+1),position:"relative",opacity:(w-this.o)/(this.i-this.o),pointerEvents:"none",WebkitTransition:j?null:"opacity 0.25s",MozTransition:j?null:"opacity 0.25s",transition:j?null:"opacity 0.25s"},E={height:x,width:Math.min(1.5*x,_-(this.t+x)/2+1),position:"absolute",opacity:1-(w-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:"none",WebkitTransition:j?null:"opacity 0.25s",MozTransition:j?null:"opacity 0.25s",transition:j?null:"opacity 0.25s"},M={height:this.t,width:this.t,background:r(w,this.i,this.o,c,d),display:"inline-block",cursor:s?"default":"pointer",borderRadius:"number"==typeof f?f-1:"50%",position:"absolute",transform:"translateX("+w+"px)",top:Math.max(0,(x-this.t)/2),outline:0,boxShadow:k?g:v,border:0,WebkitTransition:j?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",MozTransition:j?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s",transition:j?null:"background-color 0.25s, transform 0.25s, box-shadow 0.15s"},T={height:this.t,width:this.t,opacity:Math.max(2*(1-(w-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:j?null:"opacity 0.25s",MozTransition:j?null:"opacity 0.25s",transition:j?null:"opacity 0.25s"},D={height:this.t,width:this.t,opacity:Math.max(2*((w-this.o)/(this.i-this.o)-.5),0),position:"absolute",left:0,top:0,pointerEvents:"none",WebkitTransition:j?null:"opacity 0.25s",MozTransition:j?null:"opacity 0.25s",transition:j?null:"opacity 0.25s"};return a.createElement("div",{className:n,style:N},a.createElement("div",{className:"react-switch-bg",style:C,onClick:s?null:this.T,onMouseDown:function(e){return e.preventDefault()}},h&&a.createElement("div",{style:S},h),u&&a.createElement("div",{style:E},u)),a.createElement("div",{className:"react-switch-handle",style:M,onClick:function(e){return e.preventDefault()},onMouseDown:s?null:this.p,onTouchStart:s?null:this.k,onTouchMove:s?null:this.m,onTouchEnd:s?null:this.M,onTouchCancel:s?null:this.O},p&&a.createElement("div",{style:T},p),m&&a.createElement("div",{style:D},m)),a.createElement("input",i({},{type:"checkbox",role:"switch","aria-checked":t,checked:t,disabled:s,style:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}},y,{ref:this.S,onFocus:this.D,onBlur:this.O,onKeyUp:this.C,onChange:this.$})))},t}(a.Component);c.defaultProps={disabled:!1,offColor:"#888",onColor:"#080",offHandleColor:"#fff",onHandleColor:"#fff",uncheckedIcon:n,checkedIcon:o,boxShadow:null,activeBoxShadow:"0 0 2px 3px #3bf",height:28,width:56}}}]);
//# sourceMappingURL=872.d071f4d3.chunk.js.92cebcc7f725.map