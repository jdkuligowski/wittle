"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[533],{5533:function(e,a,t){t.r(a),t.d(a,{default:function(){return x}});var n=t(2791),s=t(5294),o=t(7689),i=t(2570),r=(t(9696),t(7462)),l=t(241),c=t(8003),m=t(1413),p=t(2982),d=t(5987),u=t(2723),g=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],h=function(){var e=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,t=String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase(),n=String(a.getOptionValue(e)).toLowerCase(),s=String(a.getOptionLabel(e)).toLowerCase();return n===t||s===t},f={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,a,t,n){return!(!e||a.some((function(a){return h(e,a,n)}))||t.some((function(a){return h(e,a,n)})))},getNewOptionData:function(e,a){return{label:a,value:e,__isNew__:!0}}};t(4164),t(1672);var w=(0,n.forwardRef)((function(e,a){var t=function(e){var a=e.allowCreateWhileLoading,t=void 0!==a&&a,s=e.createOptionPosition,o=void 0===s?"last":s,i=e.formatCreateLabel,r=void 0===i?f.formatCreateLabel:i,c=e.isValidNewOption,h=void 0===c?f.isValidNewOption:c,w=e.getNewOptionData,v=void 0===w?f.getNewOptionData:w,x=e.onCreateOption,_=e.options,j=void 0===_?[]:_,C=e.onChange,N=(0,d.Z)(e,g),y=N.getOptionValue,b=void 0===y?l.g:y,S=N.getOptionLabel,O=void 0===S?l.b:S,L=N.inputValue,F=N.isLoading,Z=N.isMulti,k=N.value,P=N.name,A=(0,n.useMemo)((function(){return h(L,(0,u.H)(k),j,{getOptionValue:b,getOptionLabel:O})?v(L,r(L)):void 0}),[r,v,O,b,L,h,j,k]),D=(0,n.useMemo)((function(){return!t&&F||!A?j:"first"===o?[A].concat((0,p.Z)(j)):[].concat((0,p.Z)(j),[A])}),[t,o,F,A,j]),V=(0,n.useCallback)((function(e,a){if("select-option"!==a.action)return C(e,a);var t=Array.isArray(e)?e:[e];if(t[t.length-1]!==A)C(e,a);else if(x)x(L);else{var n=v(L,L),s={action:"create-option",name:P,option:n};C((0,u.D)(Z,[].concat((0,p.Z)((0,u.H)(k)),[n]),n),s)}}),[v,L,Z,P,A,x,C,k]);return(0,m.Z)((0,m.Z)({},N),{},{options:D,onChange:V})}((0,c.u)(e));return n.createElement(l.S,(0,r.Z)({ref:a},t))})),v=t(184);var x=()=>{const e=(0,o.s0)(),[a,t]=(0,n.useState)(),[r,l]=(0,n.useState)(null),[c,m]=(0,n.useState)([]);(0,n.useEffect)((()=>{(async()=>{try{const e="/api/branch_list/",{data:a}=await s.Z.get(e);console.log("agent list ->",a),t(a);const n=a.map((e=>({value:e.id,label:e.branch_name})));m(n),console.log("company list ->",n)}catch(e){console.log(e)}})()}),[]);const[p,d]=(0,n.useState)("password"),[u,g]=(0,n.useState)("password"),[h,f]=(0,n.useState)(!1),[x,_]=(0,n.useState)(!1),[j,C]=(0,n.useState)({email:"",username:"",company_name:"",password:"",password_confirmation:"",first_name:"",last_name:""}),[N,y]=(0,n.useState)({email:"",username:"",company_name:"",password:"",password_confirmation:"",first_name:"",last_name:"",post:""}),b=e=>{if(C({...j,[e.target.name]:e.target.value}),"first_name"===e.target.name)e.target.value.length<1?y({...N,first_name:"Add first name"}):y({...N,first_name:""});else if("last_name"===e.target.name)e.target.value.length<1?y({...N,last_name:"Add last name"}):y({...N,last_name:""});else if("company_name"===e.target.name)e.target.value.length<1?y({...N,company_name:"Add company_name"}):y({...N,company_name:""});else if("username"===e.target.name)e.target.value.length<1?y({...N,username:"Add username"}):y({...N,username:""});else if("email"===e.target.name)(0,i.isEmail)(j.email)?y({...N,email:""}):y({...N,email:"Invalid email address"});else if("password"===e.target.name){const a=(e=>{const a=(0,i.matches)(e,/[A-Z]/),t=(0,i.matches)(e,/[a-z]/),n=(0,i.matches)(e,/\d/),s=(0,i.matches)(e,/[^A-Za-z0-9]/);return(0,i.isLength)(e,{min:8})?a?t?n?s?"":"Password must contain at least one special character":"Password must contain at least one digit":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter":"Password must be at least 8 characters long"})(e.target.value);y({...N,password:a})}else"password_confirmation"===e.target.name&&(e.target.value!==j.password?y({...N,password_confirmation:"Passwords don't match"}):y({...N,password_confirmation:""}))};return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("section",{className:"login-page",id:"register",children:(0,v.jsxs)("section",{className:"login-content",children:[(0,v.jsx)("div",{className:"register-title",children:(0,v.jsx)("h1",{children:"Unlock the benefits of Wittle"})}),(0,v.jsxs)("div",{className:"register-section",children:[(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"First name"}),(0,v.jsx)("input",{type:"text",name:"first_name",className:"input",value:j.first_name,onChange:b}),N.first_name&&(0,v.jsxs)("p",{className:"error",children:["* ",N.first_name]})]}),(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"Last name"}),(0,v.jsx)("input",{type:"text",name:"last_name",className:"input",value:j.last_name,onChange:b}),N.last_name&&(0,v.jsxs)("p",{className:"error",children:["* ",N.last_name]})]}),(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"Company"}),(0,v.jsx)(w,{isClearable:!0,onChange:(e,a)=>{l(e);const t=e?e.label:"";C({...j,company_name:t})},options:c,value:r,styles:{control:e=>({...e,fontSize:"0.8rem",fontFamily:"Poppins",color:"#FDF7F0",borderColor:"#FDF7F0",borderRadius:"10px",backgroundColor:"#1A276C",padding:"0px 0px",minHeight:"35px"}),option:(e,a)=>({...e,color:a.isSelected?"white":"#333",backgroundColor:a.isSelected?"#1A276C":"white",fontSize:"0.8rem"}),singleValue:(e,a)=>({...e,color:"#FDF7F0",fontSize:"0.8rem",fontFamily:"Poppins",padding:"0px 0px"})},placeholder:"Select or add a company..."}),N.company_name&&(0,v.jsxs)("p",{className:"error",children:["* ",N.company_name]})]}),(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"Username"}),(0,v.jsx)("input",{type:"text",name:"username",className:"input",value:j.username,onChange:b}),N.username&&(0,v.jsxs)("p",{className:"error",children:["* ",N.username]})]}),(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"Email"}),(0,v.jsx)("input",{type:"email",name:"email",className:"input",value:j.email,onChange:b}),N.email&&(0,v.jsxs)("p",{className:"error",children:["* ",N.email]})]}),(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"Password"}),(0,v.jsx)("input",{type:u,name:"password",className:"password-input-register",value:j.password,onChange:b}),N.password&&(0,v.jsxs)("p",{className:"error",children:["* ",N.password]})]}),(0,v.jsxs)("div",{className:"login-input",children:[(0,v.jsx)("h3",{children:"Confirm password"}),(0,v.jsx)("input",{type:"password",name:"password_confirmation",className:"input",value:j.password_confirmation,onChange:b}),N.password_confirmation&&(0,v.jsxs)("p",{className:"error",children:["* ",N.password_confirmation]})]})]}),(0,v.jsx)("button",{type:"submit",onClick:async a=>{a.preventDefault();try{await s.Z.post("/api/auth/register/",j)}catch(n){return console.log(n),void y({...N,post:"Error registering account. It may already exist."})}try{const{data:a}=await s.Z.post("/api/auth/login/",{email:j.email,password:j.password});t=a.token,window.localStorage.setItem("wittle-user-token",t),window.localStorage.setItem("wittle-username",a.username),console.log("username ->",a.username),C({}),e("/agents/profile")}catch(n){console.log(n),y({...N,post:"Error logging in after registration."})}var t},children:"Register"}),N.post&&(0,v.jsxs)("p",{className:"error",children:["* ",N.post]})]})})})}}}]);
//# sourceMappingURL=533.66a85273.chunk.js.0828d480e4e2.map