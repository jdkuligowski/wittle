"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[779],{4177:function(e,s,a){a(2791);var l=a(184);s.Z=()=>(0,l.jsx)("div",{className:"loading-gif",children:(0,l.jsx)("img",{src:a(9193),alt:"loading gif"})})},4604:function(e,s,a){a(2791),a(184)},6779:function(e,s,a){a.r(s),a.d(s,{default:function(){return F}});var l=a(2791),i=a(5294),r=a(7689),c=a(7165),d=a(948),n=(a(9696),a(4604),a(764)),t=a(2094),o=a(8084),h=a(4177),m=a(8472),p=a(936),u=a(184);var x=e=>{let{savedActionShow:s,handleSavedActionClose:a,setLeadGenSection:l,latestFavourites:i}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsx)("div",{className:"core-body",children:(0,u.jsxs)("h3",{className:"message",children:["We've added ",1===i?`${i} property`:`${i} properties`," to your saved list \ud83e\udd1d"]})}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:()=>{l("Saved properties"),a()},children:"Go to saved"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})};var j=e=>{let{increaseUsageCount:s,setErrors:a,userData:d,loadUserData:n,savedProperties:t,archivedProperties:o,handleVisitUrl:m,savedActionShow:p,handleSavedActionClose:j,setLeadGenSection:v,latestFavourites:g,handleSavedActionShow:_,setLatestFavourites:N,setSavedActionShow:y}=e;const[b,k]=(0,l.useState)(),C=(0,r.s0)(),[f,w]=(0,l.useState)(""),[S,F]=(0,l.useState)(""),[A,P]=(0,l.useState)(),[B,E]=(0,l.useState)(),[$,D]=(0,l.useState)([]),[L,U]=(0,l.useState)([]),[M,Z]=(0,l.useState)(!1),[H,T]=(0,l.useState)("Lettings"),[R,G]=(0,l.useState)("Efficiency"),[z,O]=(0,l.useState)(new Set),[W,I]=(0,l.useState)({}),Y=async e=>{try{console.log(e);const{data:s}=await i.Z.get(`/api/epc_properties_rental/${e}`);return s}catch(s){return console.log(s),[]}},V=async e=>{try{console.log(e);const{data:s}=await i.Z.get(`/api/epc_properties/${e}`);return s}catch(s){return console.log(s),[]}};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"epc-matcher",children:[(0,u.jsxs)("div",{className:"input-section",children:[(0,u.jsx)("h3",{className:"sub-title",children:"Input property details to find  details about live listings"}),b?(0,u.jsx)(h.Z,{}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"double-input-block",children:[(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Postcode"}),(0,u.jsx)("input",{type:"text",value:f,onChange:e=>w(e.target.value),placeholder:"Enter postcode..."})]}),(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Road name"}),(0,u.jsx)("input",{type:"text",value:S,onChange:e=>F(e.target.value)})]})]}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Efficiency (numbers) or Rating (letters)"}),(0,u.jsxs)("select",{onChange:e=>G(e.target.value),children:[(0,u.jsx)("option",{children:"Efficiency"}),(0,u.jsx)("option",{children:"Rating"})]})]})}),"Efficiency"===R?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"double-input-block",children:[(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Current Energy Efficiency"}),(0,u.jsx)("input",{type:"number",value:A,onChange:e=>P(e.target.value)})]}),(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Potential Energy Efficiency"}),(0,u.jsx)("input",{type:"number",value:B,onChange:e=>E(e.target.value)})]})]})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"double-input-block",children:[(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Current Energy Rating"}),(0,u.jsx)("input",{type:"text",value:A,onChange:e=>P(e.target.value)})]}),(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Potential Energy Rating"}),(0,u.jsx)("input",{type:"text",value:B,onChange:e=>E(e.target.value)})]})]})}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Property category"}),(0,u.jsxs)("select",{className:"dropdown",value:H||"Lettings",onChange:e=>T(e.target.value),children:[(0,u.jsx)("option",{children:"Lettings"}),(0,u.jsx)("option",{children:"Sales"})]})]})}),(0,u.jsx)("div",{className:"search-section",children:(0,u.jsx)("button",{className:"load-insights",onClick:async()=>{I({}),O(new Set),k(!0),Z(!1);const e=f.replace(/\s+/g,"");try{const{data:a}=await i.Z.get(`/api/epc/${e}`);if(console.log("Postcode data ->",a),D(a),a&&Array.isArray(a)&&a.length>0){let e=a;"Efficiency"===R?e=e.filter((e=>(!S||e.address.toLowerCase().includes(S.toLowerCase()))&&(!A||e.current_energy_efficiency===Number(A))&&(!B||e.potential_energy_efficiency===Number(B)))):"Rating"===R&&(e=e.filter((e=>(!S||e.address.toLowerCase().includes(S.toLowerCase()))&&(!A||e.current_energy_rating===A.toUpperCase())&&(!B||e.potential_energy_rating===B.toUpperCase())))),e=e.sort(((e,s)=>new Date(s.inspection_date)-new Date(e.inspection_date))),e.length>0?(U(e),console.log("filtered data->",e),s()):0===e.length&&U(""),k(!1)}else console.log("No postcode data available"),k(!1)}catch(l){U(""),a(!0),console.log(l),k(!1)}Z(!0)},children:"Load Properties"})})]})]}),(0,u.jsx)("div",{className:"manual-property-results",children:(0,u.jsx)("div",{className:"results-block",children:0!==$.length||M?M&&0===L.length?(0,u.jsx)("h3",{className:"sub-title",children:"We couldn't find anything that matched your search"}):M&&L.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("h3",{className:"sub-title",children:["You have ",L.length," matching results"]}),(0,u.jsx)("div",{className:"results-details",children:L?L.map(((e,s)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("h5",{className:"row-value",children:s+1}),(0,u.jsxs)("div",{className:"results-items",children:[(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"catchment"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"Address: "}),(0,u.jsx)("h5",{className:"text-result",children:e.address})]})]}),(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"house"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"Floor area: "}),(0,u.jsxs)("h5",{className:"text-result",children:[e.floor_area," sq.m"]})]})]}),(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"location"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"Postcode: "}),(0,u.jsx)("h5",{className:"text-result",children:e.postcode})]})]}),(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"building"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"Floor level: "}),(0,u.jsx)("h5",{className:"text-result",children:e.final_floor_level})]})]}),(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"search"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"last inspection: "}),(0,u.jsx)("h5",{className:"text-result",children:e.inspection_date})]})]})]}),(0,u.jsx)("div",{className:"buttons",children:t.some((s=>s.address===e.address&&s.postcode===e.postcode))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Saved"})}):o.some((s=>s.address===e.address&&s.postcode===e.postcode))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Archived"})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"heart-icon",onClick:()=>(async e=>{if((0,c.Hb)()){const a=[{rightmove_id:Math.floor(1e12*Math.random()).toString(),postcode:e.postcode,address:e.address,agent:"",type:"",addedOn:"",propertyType:"",price:null,bathrooms:null,bedrooms:null,let_available_date:null,date_added_db:null,url:"",current_epc:e.current_energy_efficiency,potential_epc:e.potential_energy_efficiency,action:"Saved",added_revised:null,reduced_revised:null}];try{const e=await i.Z.post("/api/epc_favourite/",a,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log("Response:",e.data),O(new Set),N(1),_(),n()}catch(s){console.error("Error saving favourite:",s)}}else C("/access-denied"),console.log("logged out")})(e)}),(0,u.jsx)("button",{className:"expansion",style:{backgroundColor:(z.has(s),"#1A276C")},onClick:()=>(async e=>{const s=new Set(z),a=L[e];if(s.has(e))s.delete(e);else if(s.add(e),W[e]||"Lettings"!==H){if(!W[e]&&"Sales"===H){const s=await V(a.postcode);console.log("matches ->",s),I({...W,[e]:s})}}else{const s=await Y(a.postcode);console.log("matches ->",s),I({...W,[e]:s})}O(s)})(s),children:z.has(s)?"-":"+"})]})})]},s),z.has(s)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("hr",{className:"property-divider"}),W[s]&&W[s].length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"matching-title",children:"Matching properties"}),(0,u.jsxs)("div",{className:"expanded-section-titles",children:[(0,u.jsx)("p",{className:"column",id:"column1",children:"#"}),(0,u.jsx)("p",{className:"column",id:"column2",children:"Address"}),(0,u.jsx)("p",{className:"column",id:"column3",children:"Postcode"}),(0,u.jsx)("p",{className:"column",id:"column4",children:"Price"}),(0,u.jsx)("p",{className:"column",id:"column5",children:"Bedrooms"}),(0,u.jsx)("p",{className:"column",id:"column6"})]})]}):"",(0,u.jsx)("div",{className:"expanded-section",children:W[s]&&W[s].length>0?W[s].map(((s,a)=>(0,u.jsxs)("div",{className:"expanded-content",children:[(0,u.jsxs)("p",{className:"column",id:"column1",onClick:()=>m(s.url),children:[a+1," "]}),(0,u.jsx)("p",{className:"column",id:"column2",onClick:()=>m(s.url),children:s.displayAddress}),(0,u.jsx)("p",{className:"column",id:"column3",onClick:()=>m(s.url),children:s.postcode}),(0,u.jsx)("p",{className:"column",id:"column4",onClick:()=>m(s.url),children:s.price}),(0,u.jsx)("p",{className:"column",id:"column5",onClick:()=>m(s.url),children:s.bedrooms}),(0,u.jsx)("div",{className:"column",id:"column6",children:t.some((e=>e.rightmove_id===s.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Saved"})}):o.some((e=>e.rightmove_id===s.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Archived"})}):(0,u.jsx)("div",{className:"heart-icon",onClick:()=>(async(e,s)=>{if((0,c.Hb)()){const l=[{rightmove_id:e.rightmove_id,postcode:e.postcode,address:s.address,agent:e.agent,type:e.type,addedOn:e.addedOn,propertyType:e.propertyType,price:e.price,bathrooms:e.bathrooms,bedrooms:e.bedrooms,let_available_date:e.let_available_date,date_added_db:e.date_added_db,url:e.url,current_epc:e.current_epc,potential_epc:e.potential_epc,action:"Saved",added_revised:e.added_revised,reduced_revised:e.reduced_revised}];try{const e=await i.Z.post("/api/epc_favourite/",l,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log("Response:",e.data),N(1),_(),n()}catch(a){console.error("Error saving favourite:",a)}}else C("/access-denied"),console.log("logged out")})(s,e)})})]},a))):(0,u.jsxs)("p",{className:"denied",children:["No matching properties found for ",e.address,"."]})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):""})]}):"":(0,u.jsx)("h3",{className:"sub-title",children:"Start new search to see results"})})})]}),(0,u.jsx)(x,{savedActionShow:p,handleSavedActionClose:j,setLeadGenSection:v,latestFavourites:g})]})};var v=e=>{let{propertyRemoveShow:s,handleRemovePropertyClose:a,removeProperty:l}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsxs)("div",{className:"core-body",children:[(0,u.jsx)("h3",{className:"message",children:"Are you sure you don't want to see these properties any more?"}),(0,u.jsx)("h3",{className:"sub-message",children:"Once you do this, they won't appear in your latest or saved properties."})]}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:l,children:"Remove"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Go back"})]})]})})})})})},g=a(8622);var _=e=>{let{archivedActionShow:s,handleArchivedActionClose:a,setLeadGenSection:l,latestFavourites:i}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsx)("div",{className:"core-body",children:(0,u.jsxs)("h3",{className:"message",children:["We've added ",1===i?`${i} property`:`${i} properties`," to your archived list \ud83e\udd1d"]})}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:()=>{l("Archived properties"),a()},children:"Go to archived"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})};var N=e=>{let{savedProperties:s,userData:a,csvData:d,setCsvData:n,getCurrentDate:t,handleVisitUrl:o,loadUserData:h,setSavedProperties:p,setLatestFavourites:x,latestFavourites:j,setLeadGenSection:v}=e;const N=(0,r.s0)(),[y,b]=(0,l.useState)("Grid"),[k,C]=(0,l.useState)({}),[f,w]=(0,l.useState)({}),[S,F]=(0,l.useState)({}),[A,P]=(0,l.useState)([]),[B,E]=(0,l.useState)(!1),$=e=>{w((s=>({...s,[e]:!s[e]})))};(0,l.useEffect)((()=>{if(A){const e=(e=>e.map(((e,s)=>({item:s+1,url:e.url,address:e.address,postcode:e.postcode,addressPostcode:`${e.address}, ${e.postcode}`,addedOn:e.added_revised,property_type:e.property_type,price:e.price,bedrooms:e.bedrooms,bathrooms:e.bathrooms,let_available_date:e.let_available_date,date_added:e.date_added_db,agent:e.agent,channel:e.channel,owner_name:e.owner_name,owner_email:e.owner_email,owner_mobile:e.owner_mobile,emails_sent:e.emails_sent,letters_sent:e.letters_sent,valuation_booked:e.valuation_booked,notes:e.notes}))))(A);n(e)}}),[A]);const[D,L]=(0,l.useState)(!1),U=e=>{L(!0),P([])};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"results-block",children:s&&s.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"title-section",children:[(0,u.jsxs)("h3",{className:"sub-title",children:["You have ",s.length," properties ready to be extracted"]}),a&&a.company_favourites&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g.ZP,{className:"select-dropdown",options:[{value:"export",label:"Extract"},{value:"archive",label:"Archive"}],onChange:e=>{"export"===e.value?(document.querySelector(".csv-link").click(),P([])):"archive"===e.value&&(async e=>{if((0,c.Hb)())try{const s=await i.Z.put("/api/epc_favourite/update_favourites/",{favourite_ids:e},{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log("Response:",s.data),x(e.length),h(),U(),P([])}catch(s){console.error("Error updating favorite:",s)}else N("/access-denied"),console.log("logged out")})(A.map((e=>e.rightmove_id)))},isSearchable:!1,placeholder:"Select an action"}),(0,u.jsx)(m.CSVLink,{data:d||[],className:"export csv-link",filename:`Wittle Lead Generator Extract - ${t()}.csv`,style:{display:"none"}})]})]}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:A.length===s.length&&s.length>0,onChange:e=>{e.target.checked?(P(s),E(!0)):(P([]),E(!1))}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Channel"})}),(0,u.jsx)("div",{id:"column7",className:"column",children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9saved",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column10saved",className:"column",children:(0,u.jsx)("h5",{})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details archive",children:s?s.map(((e,a)=>{const l=k[e.rightmove_id],r=f[e.rightmove_id],d=A.some((s=>s.rightmove_id===e.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(d?"highlighted-row":""),children:[(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:A.some((s=>s.rightmove_id===e.rightmove_id)),onChange:a=>((e,a)=>{const l={...a};console.log("selected row ->",a),e.target.checked?P((e=>[...e,l])):P((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id)))),E(s.length===A.length)})(a,e)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>o(e.url),children:(0,u.jsx)("h5",{children:a+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>o(e.url),children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>o(e.url),children:(0,u.jsx)("h5",{children:e.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>o(e.url),children:(0,u.jsx)("h5",{children:null===e.added_revised?"N/a":e.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>o(e.url),children:(0,u.jsx)("h5",{children:null===e.reduced_revised?"N/a":e.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>o(e.url),children:(0,u.jsx)("h5",{children:e.channel})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>o(e.url),children:(0,u.jsx)("h5",{children:e.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>o(e.url),children:(0,u.jsx)("h5",{children:e.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9saved",onClick:()=>o(e.url),children:(0,u.jsx)("h5",{children:e.agent})}),"Grid"===y?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"column",id:"column10saved",onClick:()=>(e=>{const a=s.find((s=>s.rightmove_id===e));k[e]||F({owner_name:a.owner_name,owner_email:a.owner_email,owner_mobile:a.owner_mobile,emails_sent:a.emails_sent,letters_sent:a.letters_sent,valuation_booked:a.valuation_booked,notes:a.notes||""}),C((s=>({...s,[e]:!s[e]})))})(e.rightmove_id),children:(0,u.jsx)("h5",{className:"expander",children:l?"v":"^"})})}):"Table"===y?(0,u.jsx)(u.Fragment,{}):""]}),l&&(0,u.jsxs)("div",{className:"expanded-tracking-details",children:[(0,u.jsxs)("div",{className:"expanded-tracking-content",children:[(0,u.jsxs)("div",{className:"tracking-left",children:[(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Owner name: "}),r?(0,u.jsx)("input",{type:"text",value:S.owner_name,onChange:e=>F({...S,owner_name:e.target.value}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.owner_name})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Owner email: "}),r?(0,u.jsx)("input",{type:"text",value:S.owner_email,onChange:e=>F({...S,owner_email:e.target.value}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.owner_email})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Owner phone: "}),r?(0,u.jsx)("input",{type:"text",value:S.owner_mobile,onChange:e=>F({...S,owner_mobile:e.target.value}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.owner_mobile})]})]}),(0,u.jsxs)("div",{className:"tracking-middle",children:[(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Emails sent: "}),r?(0,u.jsx)("input",{type:"text",value:S.emails_sent,onChange:e=>F({...S,emails_sent:e.target.value}),className:"row-input narrow"}):(0,u.jsx)("h3",{className:"row-result",children:e.emails_sent})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Letters sent: "}),r?(0,u.jsx)("input",{type:"text",value:S.letters_sent,onChange:e=>F({...S,letters_sent:e.target.value}),className:"row-input narrow"}):(0,u.jsx)("h3",{className:"row-result",children:e.letters_sent})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Valuation booked: "}),r?(0,u.jsx)("input",{type:"text",value:S.valuation_booked,onChange:e=>F({...S,valuation_booked:e.target.value}),className:"row-input narrow"}):(0,u.jsx)("h3",{className:"row-result",children:e.valuation_booked})]})]}),(0,u.jsx)("div",{className:"tracking-right",children:(0,u.jsx)("div",{className:"tracking-row",children:r?(0,u.jsx)("textarea",{placeholder:"Notes",value:S.notes,onChange:e=>F({...S,notes:e.target.value})}):(0,u.jsx)("h3",{className:"row-result",children:e.notes})})})]}),(0,u.jsxs)("div",{className:"expanded-tracking-actions",children:[(0,u.jsx)("button",{className:"save",onClick:()=>{r?(async e=>{if((0,c.Hb)())try{await i.Z.patch(`/api/epc_favourite/update_favourites/${e}/`,S,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}}),h(),$(e)}catch(s){console.error("Error updating favourite:",s)}else N("/access-denied"),console.log("logged out")})(e.rightmove_id):$(e.rightmove_id)},children:r?"Save":"Edit"}),(0,u.jsx)("button",{className:"delete",onClick:()=>(async e=>{if((0,c.Hb)())try{await i.Z.delete("/api/epc_favourite/delete_favourite/",{headers:{Authorization:`Bearer ${(0,c.hP)()}`},data:{rightmove_id:e}}),h()}catch(s){console.error("Error updating favourite:",s)}else N("/access-denied"),console.log("logged out")})(e.rightmove_id),children:"Delete"})]})]}),(0,u.jsx)("hr",{className:"property-divider"})]})})):" "})]})]}):(0,u.jsx)("h3",{className:"sub-title",children:"You haven't saved any properties yet! Once you've saved some properties, you'll be able to extract them."})}),(0,u.jsx)(_,{archivedActionShow:D,handleArchivedActionClose:()=>{L(!1)},setLeadGenSection:v,latestFavourites:j})]})};var y=e=>{let{hiddenSavedShow:s,handleHiddenSavedClose:a,setLeadGenSection:l,latestFavourites:i}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsx)("div",{className:"core-body",children:(0,u.jsxs)("h3",{className:"message",children:["We've moved ",1===i?`${i} property`:`${i} properties`," back to your saved list \ud83e\udd1d"]})}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:()=>{l("Saved properties"),a()},children:"Go to saved"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})};var b=e=>{let{hiddenProperties:s,handleVisitUrl:a,loadUserData:d,setLeadGenSection:n,latestFavourites:t,setLatestFavourites:o}=e;const h=(0,r.s0)(),[m,p]=(0,l.useState)([]),[x,j]=(0,l.useState)(!1),[v,g]=(0,l.useState)(!1),_=e=>{g(!0),p([])};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"results-block",children:s&&s.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"title-section",children:[(0,u.jsxs)("h3",{className:"sub-title",children:["You have hidden ",s.length," properties"]}),(0,u.jsx)("div",{className:"action-section hidden",children:(0,u.jsx)("div",{className:"save-section",children:(0,u.jsx)("h3",{onClick:()=>(async e=>{if((0,c.Hb)()){console.log(e);const a=e.map((e=>e.rightmove_id));try{const e=await i.Z.delete("/api/epc_favourite/delete_favourite/multiple/",{headers:{Authorization:`Bearer ${(0,c.hP)()}`},data:{rightmove_ids:a}});o(a.length),d(),_(),p([]),console.log("Response:",e.data)}catch(s){console.error("Error deleting favourites:",s)}}else h("/access-denied"),console.log("logged out")})(m),children:"Move properties"})})})]}),(0,u.jsx)("div",{className:"saved-select-row hidden",children:(0,u.jsx)("div",{className:"select-all-box hidden",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:m.length===s.length&&s.length>0,onChange:e=>{e.target.checked?(p(s),j(!0)):(p([]),j(!1))}}),(0,u.jsx)("label",{className:"label"})]})})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Channel"})}),(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsx)("h5",{})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details archive",children:s?s.map(((e,l)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:l+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.property_type})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.agent})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.channel})}),(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:m.some((s=>s.rightmove_id===e.rightmove_id)),onChange:a=>((e,a)=>{const l={...a};e.target.checked?p((e=>[...e,l])):p((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id)))),j(s.length===m.length)})(a,e)}),(0,u.jsx)("label",{className:"label"})]})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):(0,u.jsx)("h3",{className:"sub-title",children:"You don't have any hidden properties. If you're not interested in a property, hide it to remove it from the main results page."})}),(0,u.jsx)(y,{hiddenSavedShow:v,handleHiddenSavedClose:()=>{g(!1)},setLeadGenSection:n,latestFavourites:t})]})};var k=e=>{let{archviedSavedShow:s,handleArchivedSavedClose:a,setLeadGenSection:l,latestFavourites:i}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsx)("div",{className:"core-body",children:(0,u.jsxs)("h3",{className:"message",children:["We've moved ",1===i?`${i} property`:`${i} properties`," back to your saved list \ud83e\udd1d"]})}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:()=>{l("Saved properties"),a()},children:"Go to saved"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})};var C=e=>{let{archivedProperties:s,handleVisitUrl:a,loadUserData:d,setLeadGenSection:n,latestFavourites:t,setLatestFavourites:o}=e;const h=(0,r.s0)(),[m,p]=(0,l.useState)([]),[x,j]=(0,l.useState)(!1),[v,g]=(0,l.useState)(!1),_=e=>{g(!0),p([])};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"results-block",children:s&&s.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"title-section",children:[(0,u.jsxs)("h3",{className:"sub-title",children:["You have archived ",s.length," properties"]}),(0,u.jsx)("div",{className:"action-section hidden",children:(0,u.jsx)("div",{className:"save-section",children:(0,u.jsx)("h3",{onClick:()=>(async e=>{if((0,c.Hb)())try{const s=e.map((e=>e.rightmove_id)),a=await i.Z.put("/api/epc_favourite/update_favourites/archive-to-saved/",{favourite_ids:s},{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log("Response:",a.data),o(s.length),d(),_(),p([])}catch(s){console.error("Error saving favourite:",s)}else h("/access-denied"),console.log("logged out")})(m),children:"Move properties"})})})]}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsxs)("div",{id:"column11",className:"column",children:[(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:m.length===s.length&&s.length>0,onChange:e=>{e.target.checked?(p(s),j(!0)):(p([]),j(!1))}}),(0,u.jsx)("label",{className:"label"})]}),"                "]}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Channel"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details archive",children:s?s.map(((e,l)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:m.some((s=>s.rightmove_id===e.rightmove_id)),onChange:a=>((e,a)=>{const l={...a};e.target.checked?p((e=>[...e,l])):p((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id)))),j(s.length===m.length)})(a,e)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:l+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.property_type})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.channel})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):(0,u.jsx)("h3",{className:"sub-title",children:"You haven't archived any properties yet! Once you've extracted properties to your files, you&apo;ll see them here."})}),(0,u.jsx)(k,{archviedSavedShow:v,handleArchivedSavedClose:e=>{g(!1)},setLeadGenSection:n,latestFavourites:t})]})},f=(a(5985),a(1830)),w=a.n(f),S=a(5314);i.Z.defaults.xsrfCookieName="csrftoken",i.Z.defaults.xsrfHeaderName="X-CSRFToken";var F=()=>{const e=(0,r.s0)(),[s,a]=(0,l.useState)(),[m,p]=(0,l.useState)(),[g,_]=(0,l.useState)(),[y,k]=(0,l.useState)(),[f,F]=(0,l.useState)(),[A,P]=(0,l.useState)(),[B,E]=(0,l.useState)(!1),[$,D]=(0,l.useState)("Comparison"),[L,U]=(0,l.useState)("Comparison"),[M,Z]=(0,l.useState)(!1),[H,T]=(0,l.useState)(""),[R,G]=(0,l.useState)(""),[z,O]=(0,l.useState)(""),[W,I]=(0,l.useState)(),[Y,V]=(0,l.useState)(),[X,q]=(0,l.useState)([]),[J,K]=(0,l.useState)([]),[Q,ee]=(0,l.useState)(""),[se,ae]=(0,l.useState)("Efficiency"),[le,ie]=(0,l.useState)([]),[re,ce]=(0,l.useState)(),[de,ne]=(0,l.useState)(),[te,oe]=(0,l.useState)(),[he,me]=(0,l.useState)(),[pe,ue]=(0,l.useState)(sessionStorage.getItem("sessionName")||""),[xe,je]=(0,l.useState)(["SW8"]),[ve,ge]=(0,l.useState)(),[_e,Ne]=(0,l.useState)("Home"),[ye,be]=(0,l.useState)([]),[ke,Ce]=(0,l.useState)([]),[fe,we]=(0,l.useState)([]),[Se,Fe]=(0,l.useState)([]),[Ae,Pe]=(0,l.useState)([]),[Be,Ee]=(0,l.useState)([]),[$e,De]=(0,l.useState)("Lettings"),[Le,Ue]=(0,l.useState)(!1),[Me,Ze]=(0,l.useState)({postcode:"",subcode:"",bathrooms_min:null,bathrooms_max:null,bedrooms_min:null,bedrooms_max:null,rental_price_min:null,rental_price_max:null,sales_price_min:null,sales_price_max:null,channel:"",rental_additional:""}),[He,Te]=(0,l.useState)([]),[Re,Ge]=(0,l.useState)([]),[ze,Oe]=(0,l.useState)(),[We,Ie]=(0,l.useState)({latitude:51.515419,longitude:-.141099,zoom:11.5}),[Ye,Ve]=(0,l.useState)([]),[Xe,qe]=(0,l.useState)(ke.map((()=>!1))),[Je,Ke]=(0,l.useState)(Ae.map((()=>!1))),[Qe,es]=(0,l.useState)("2days"),[ss,as]=(0,l.useState)([]),[ls,is]=(0,l.useState)([]),[rs,cs]=(0,l.useState)([]),[ds,ns]=(0,l.useState)([]),[ts,os]=(0,l.useState)([]),[hs,ms]=(0,l.useState)([]),[ps,us]=(0,l.useState)([]),[xs,js]=(0,l.useState)([]),[vs,gs]=(0,l.useState)("asc"),[_s,Ns]=(0,l.useState)("asc"),[ys,bs]=(0,l.useState)(),[ks,Cs]=(0,l.useState)("Matching"),[fs,ws]=(0,l.useState)("Matching"),[Ss,Fs]=(0,l.useState)(new Set),[As,Ps]=(0,l.useState)(new Set),Bs=()=>{if((0,c.Hb)()){(async()=>{try{F(!0),P(!0);const{data:e}=await i.Z.get(`/api/auth/profile/${(0,c.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});if(console.log("user data ->",e),_(e),k(e.usage_stats[0].package),e.lead_gen_details.length>0){Ze(e.lead_gen_details[0]);const s=e.company_favourites.filter((e=>null!==e.rightmove_id&&"Saved"===e.action)),a=e.company_favourites.filter((e=>null!==e.rightmove_id&&"Extracted"===e.action)),l=e.company_favourites.filter((e=>null!==e.rightmove_id&&"Removed"===e.action)),i=[...s,...a,...l].map((e=>e.rightmove_id));as(i),is(l),console.log("removed properties ->",l);Ds(e.company_favourites);"Lettings"===e.lead_gen_details[0].channel?(P(!1),Ls(e,l,Qe)):"Sales"===e.lead_gen_details[0].channel?(F(!1),Us(e,l,Qe)):"Both"===e.lead_gen_details[0].channel&&(Us(e,l,Qe),Ls(e,l,Qe)),ce(s),console.log("saved properties ->",s),oe(a),me(l),console.log("existing dtails ->",e.lead_gen_details[0]),ea(),S.Y.emit("userDataUpdated")}else{console.log("date -> ",Qe)}}catch(e){a(!0),console.log(e)}})()}else e("/access-denied"),console.log("no account")};(0,l.useEffect)((()=>{Bs()}),[]);const Es=()=>{qe(rs.map((()=>!1))),Te([])},$s=()=>{Ke(ds.map((()=>!1))),Ge([])},Ds=e=>e.filter((e=>null!==e.rightmove_id&&"Saved"===e.action)).map(((e,s)=>({item:s+1,url:e.url,address:e.address,postcode:e.postcode,addressPostcode:`${e.address}, ${e.postcode}`,addedOn:e.added_revised,property_type:e.property_type,price:e.price,bedrooms:e.bedrooms,bathrooms:e.bathrooms,let_available_date:e.let_available_date,date_added:e.date_added_db,agent:e.agent,channel:e.channel,owner_name:e.owner_name,owner_email:e.owner_email,owner_mobile:e.owner_mobile,emails_sent:e.emails_sent,letters_sent:e.letters_sent,valuation_booked:e.valuation_booked,notes:e.notes}))),Ls=async(e,s,a)=>{const l=e.lead_gen_details[0].postcode,r=e.lead_gen_details[0].subcode,d=e.lead_gen_details[0].bedrooms_min,n=e.lead_gen_details[0].bedrooms_max,t=e.lead_gen_details[0].rental_price_min,o=e.lead_gen_details[0].rental_price_max,h=e.lead_gen_details[0].rental_additional;try{const e=`/api/epc_properties_rental/combined-epc-results/?postcode=${l}&subcode=${r}&min_bedrooms=${d}&max_bedrooms=${n}&rental_price_min=${t}&rental_price_max=${o}&rental_additional=${h}`,{data:a}=await i.Z.get(e,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log("combined data ->",a);const m=s.map((e=>e.rightmove_id)),p=a.filter((e=>!m.includes(e.property_data.rightmove_id))),u=p.filter((e=>0===e.epc_data_list.length)),x=p.filter((e=>1===e.epc_data_list.length)),j=p.filter((e=>e.epc_data_list.length>1));console.log("sngle matches ->",x),console.log("no matches ->",u),console.log("multiple matches ->",j),be(u),Ce(x),we(j),F(!1)}catch(m){console.error("can't access combined data ->",m)}},Us=async(e,s,a)=>{const l=e.lead_gen_details[0].postcode,r=e.lead_gen_details[0].subcode,d=e.lead_gen_details[0].bedrooms_min,n=e.lead_gen_details[0].bedrooms_max,t=e.lead_gen_details[0].sales_price_min,o=e.lead_gen_details[0].sales_price_max;try{const e=`/api/epc_properties/combined-epc-results/?postcode=${l}&subcode=${r}&min_bedrooms=${d}&max_bedrooms=${n}&sales_price_min=${t}&sales_price_max=${o}`,{data:a}=await i.Z.get(e,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log("combined data ->",a);const h=s.map((e=>e.rightmove_id)),m=a.filter((e=>!h.includes(e.property_data.rightmove_id))),p=m.filter((e=>0===e.epc_data_list.length)),u=m.filter((e=>1===e.epc_data_list.length)),x=m.filter((e=>e.epc_data_list.length>1));console.log("sales single matches ->",u),console.log("sales no matches ->",p),console.log("sales multiple matches ->",x),Fe(p),Pe(u),Ee(x),P(!1)}catch(h){console.error("can't access combined data ->",h)}},Ms=e=>{window.open(e,"_blank","width=1200,height=800,resizable=yes,scrollbars=yes,status=yes")},Zs=s=>{localStorage.removeItem("wittle-user-token"),localStorage.removeItem("wittle-username"),e("/login")},Hs=["200000","300000","400000","500000","600000","700000","800000","900000","1000000","1250000","1500000","1750000","2000000","2250000","2500000","2750000","3000000","3500000","4000000","5000000","7500000","10000000","12500000","15000000","20000000","30000000","40000000","50000000"],Ts=["500","600","700","800","900","1000","1100","1200","1300","1400","1500","1600","1700","1800","1900","2000","2250","2500","2750","3000","3250","3500","4000","4500","5000","5500","6000","7000","8000","9000","10000","12500","15000","20000","25000","30000","40000","50000","60000"],Rs=(e,s)=>{if(!s||"all"===s)return e;let a,l="within";switch(s){case"1day":a=1;break;case"2days":a=2;break;case"3days":a=3;break;case"7days":a=7;break;case"4weeks":a=28;break;case"8weeks":a=56;break;case"12weeks":a=84;break;case"16weeks":a=112;break;case">8weeks":a=56,l="beyond";break;case">12weeks":a=84,l="beyond";break;case">16weeks":a=112,l="beyond";break;default:return e}return e.filter((e=>{const s=Gs(e.property_data.added_revised),i=Gs(e.property_data.reduced_revised),r=s||i;return!!r&&("within"===l?zs(r,a):Os(r,a))}))};(0,l.useEffect)((()=>{const e=Rs(ke,Qe);cs(e)}),[ke,Qe]),(0,l.useEffect)((()=>{const e=Rs(Ae,Qe);ns(e)}),[Ae,Qe]),(0,l.useEffect)((()=>{const e=Rs(fe,Qe);os(e)}),[fe,Qe]),(0,l.useEffect)((()=>{const e=Rs(Be,Qe);ms(e)}),[Be,Qe]),(0,l.useEffect)((()=>{const e=Rs(ye,Qe);us(e)}),[ye,Qe]),(0,l.useEffect)((()=>{const e=Rs(Se,Qe);js(e)}),[Se,Qe]);const Gs=e=>{if(!e)return null;const[s,a,l]=e.split("/");return new Date(l,a-1,s)},zs=(e,s)=>{const a=new Date;return e>=new Date(a.getFullYear(),a.getMonth(),a.getDate()-s)},Os=(e,s)=>{const a=new Date;return e<new Date(a.getFullYear(),a.getMonth(),a.getDate()-s)},Ws=()=>{const e=[...rs].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===vs?a-l:l-a})),s=[...ds].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===vs?a-l:l-a})),a=[...ts].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===vs?a-l:l-a})),l=[...hs].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===vs?a-l:l-a})),i=[...ps].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===vs?a-l:l-a})),r=[...xs].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===vs?a-l:l-a}));cs(e),ns(s),os(a),ms(l),us(i),js(r),gs("asc"===vs?"desc":"asc")},Is=()=>{const e=[...rs].sort(((e,s)=>"asc"===_s?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),s=[...ds].sort(((e,s)=>"asc"===_s?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),a=[...ts].sort(((e,s)=>"asc"===_s?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),l=[...hs].sort(((e,s)=>"asc"===_s?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),i=[...ps].sort(((e,s)=>"asc"===_s?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),r=[...xs].sort(((e,s)=>"asc"===_s?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode)));cs(e),ns(s),os(a),ms(l),us(i),js(r),Ns("asc"===_s?"desc":"asc")},[Ys,Vs]=(0,l.useState)(!1),Xs=()=>{Vs(!1)},qs=e=>{Vs(!0),Te([])},[Js,Ks]=(0,l.useState)(!1),Qs=()=>{Ks(!1)},ea=async()=>{if((0,c.Hb)()){console.log("trying to increase");try{const{data:e}=await i.Z.post("/api/usage/",{},{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log(e),"success"===e.status?console.log("Usage count increased successfully"):console.error("Failed to increase usage count:",e.message)}catch(s){console.error("Error:",s)}}else e("/access-denied"),console.log("logged out")},sa=e=>{Fs((s=>{const a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a}))},aa=e=>{Ps((s=>{const a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a}))},la=async(s,a,l)=>{if((0,c.Hb)()){const e=[{rightmove_id:s.property_data.rightmove_id,postcode:s.property_data.postcode,address:a.address,agent:s.property_data.agent,type:s.property_data.type,addedOn:s.property_data.addedOn,propertyType:s.property_data.propertyType,price:s.property_data.price,bathrooms:s.property_data.bathrooms,bedrooms:s.property_data.bedrooms,let_available_date:s.property_data.let_available_date,date_added_db:s.property_data.date_added_db,url:s.property_data.url,current_epc:s.property_data.current_epc,potential_epc:s.property_data.potential_epc,action:"Saved",added_revised:s.property_data.added_revised,reduced_revised:s.property_data.reduced_revised}];try{const s=await i.Z.post("/api/epc_favourite/",e,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log("Response:",s.data),sa(l),aa(l),bs(1),qs(),Bs()}catch(r){console.error("Error saving favourite:",r)}}else e("/access-denied"),console.log("logged out")};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("section",{className:"agent-profile-page",children:[(0,u.jsx)("div",{className:"desktop-nav",children:(0,u.jsx)(n.Z,{navbarColour:"#FDF7F0"})}),(0,u.jsx)("div",{className:"mobile-nav",children:(0,u.jsx)(o.Z,{setProfileContent:D,profileContent:$,profileDetail:L,setProfileDetail:U})}),(0,u.jsx)(t.Z,{setProfileDetail:U,variableSide:M,setProfileContent:D,setVariableSide:Z,userData:g}),g&&"Trial expired"===g.usage_stats[0].package?(0,u.jsx)("section",{className:"main-body remove-margin",children:(0,u.jsx)("section",{className:"main-body-details",children:(0,u.jsxs)("section",{className:"listing-generator",children:[(0,u.jsxs)("div",{className:"listing-options",children:[(0,u.jsx)("div",{className:"listing-buttons"}),(0,u.jsx)("div",{className:"logout-button",onClick:Zs,children:(0,u.jsx)("div",{className:"logout-icon"})})]}),(0,u.jsxs)("div",{className:"no-access-body",children:[(0,u.jsx)("div",{className:"no-access-image"}),(0,u.jsx)("h1",{className:"no-access-title",children:"Oops! Dead end"}),(0,u.jsx)("h3",{className:"no-access-message",children:"You no longer have access to this content. Get in touch to upgrade your account and access the Wittle magic."})]})]})})}):(0,u.jsx)("section",{className:"main-body",children:(0,u.jsx)("section",{className:"main-body-details",children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("section",{className:"property-finder",children:[(0,u.jsxs)("div",{className:"listing-options",children:[(0,u.jsxs)("div",{className:"listing-buttons",children:[(0,u.jsx)("h5",{className:"no-print",onClick:()=>Ne("Home"),style:{borderBottom:"Home"===_e?"3px solid #ED6B86":"none",textUnderlineOffset:"Home"===_e?"0.5em":"initial",fontWeight:"Home"===_e?"700":"400"},children:"Home"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>Ne("Explore properties"),style:{borderBottom:"Explore properties"===_e?"3px solid #ED6B86":"none",textUnderlineOffset:"Explore properties"===_e?"0.5em":"initial",fontWeight:"Explore properties"===_e?"700":"400"},children:"Explore properties"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>Ne("Saved properties"),style:{borderBottom:"Saved properties"===_e?"3px solid #ED6B86":"none",textUnderlineOffset:"Saved properties"===_e?"0.5em":"initial",fontWeight:"Saved properties"===_e?"700":"400"},children:"Saved properties"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>Ne("Archived properties"),style:{borderBottom:"Archived properties"===_e?"3px solid #ED6B86":"none",textUnderlineOffset:"Archived properties"===_e?"0.5em":"initial",fontWeight:"Archived properties"===_e?"700":"400"},children:"Archived properties"}),(0,u.jsx)("h5",{className:"no-print",id:"manual-matcher",onClick:()=>Ne("Manual matcher"),style:{borderBottom:"Manual matcher"===_e?"3px solid #ED6B86":"none",textUnderlineOffset:"Manual matcher"===_e?"0.5em":"initial",fontWeight:"Manual matcher"===_e?"700":"400"},children:"Manual matcher"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>Ne("Hidden properties"),style:{borderBottom:"Hidden properties"===_e?"3px solid #ED6B86":"none",textUnderlineOffset:"Hidden properties"===_e?"0.5em":"initial",fontWeight:"Hidden properties"===_e?"700":"400"},children:"Hidden properties"})]}),(0,u.jsx)("div",{className:"logout-button",onClick:Zs,children:(0,u.jsx)("div",{className:"logout-icon"})})]}),(0,u.jsx)("hr",{className:"title-line"}),(0,u.jsx)("div",{className:"lead-generator",children:(0,u.jsx)("div",{className:"property-results",children:"Home"===_e?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"lead-gen-inputs",children:[(0,u.jsx)("h3",{className:"sub-title",children:"Set your search criteria"}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Postcode(s)"}),(0,u.jsx)("p",{children:"Add multiple postcodes by separating with a comma, and include any part of the postcode, e.g. \u201cSW4,SW5\u201d. For efficiency, this is limited to 6 postcode areas."}),(0,u.jsx)("input",{type:"text",value:Me.postcode,onChange:e=>{let s=e.target.value.toUpperCase().replace(/\s+/g,"");const a=s.split(",");a.length>6&&(w().fire({title:"\ud83e\udee1 Wittle alerts",text:"To optimise your experience, you can only add up to 6 postcode areas.",confirmButtonText:"\ud83e\udd1d thanks",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}}),s=a.slice(0,6).join(",")),T(s),Ze((e=>({...e,postcode:s})))},placeholder:"Enter postcode..."})]})}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Sub postcode(s)"}),(0,u.jsx)("p",{children:"Add sub postcodes, e.g. \u201cSW4 0,SW5 0\u201d. You can also chain these."}),(0,u.jsx)("input",{type:"text",value:Me.subcode,onChange:e=>{G(e.target.value.toUpperCase().replace(/\s+/g,"")),Ze((s=>({...s,subcode:e.target.value.toUpperCase().replace(/\s+/g,"")})))},placeholder:"Enter subcode..."})]})}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Channel"}),(0,u.jsxs)("select",{className:"dropdown",value:Me.channel||"Lettings",onChange:e=>Ze((s=>({...s,channel:e.target.value}))),children:[(0,u.jsx)("option",{children:"Lettings"}),(0,u.jsx)("option",{children:"Sales"}),(0,u.jsx)("option",{children:"Both"})]})]})}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"see-more-section",onClick:()=>Ue(!Le),children:[(0,u.jsx)("h3",{className:"sub-title",children:"Add some more detail"}),Le?(0,u.jsx)("h3",{className:"sub-title",children:"^"}):(0,u.jsx)("h3",{className:"sub-title",children:"v"})]}),Le?(0,u.jsx)(u.Fragment,{children:"Lettings"===Me.channel?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Bedrooms"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Me.bedrooms_min||"",onChange:e=>Ze((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No min"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"})]}),(0,u.jsxs)("select",{className:"dropdown",value:Me.bedrooms_max||"",onChange:e=>Ze((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No max"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"}),(0,u.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Price"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Me.rental_price_min||"",onChange:e=>Ze((s=>({...s,rental_price_min:e.target.value}))),children:[(0,u.jsx)("option",{value:0,children:"No min"}),Ts.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(d.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,u.jsxs)("select",{className:"dropdown",value:Me.rental_price_max||"",onChange:e=>Ze((s=>({...s,rental_price_max:e.target.value}))),children:[(0,u.jsx)("option",{value:1e7,children:"No max"}),Ts.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(d.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Furnishing status"}),(0,u.jsxs)("select",{className:"dropdown",value:Me.rental_additional||"Either furnished or unfurnished",onChange:e=>Ze((s=>({...s,rental_additional:e.target.value}))),children:[(0,u.jsx)("option",{children:"Either furnished or unfurnished"}),(0,u.jsx)("option",{children:"Furnished"}),(0,u.jsx)("option",{children:"Unfurnished"})]})]})})]}):"Sales"===Me.channel?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Bedrooms"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Me.bedrooms_min||"",onChange:e=>Ze((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No min"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"})]}),(0,u.jsxs)("select",{className:"dropdown",value:Me.bedrooms_max||"",onChange:e=>Ze((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No max"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"}),(0,u.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Price"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Me.sales_price_min||"",onChange:e=>Ze((s=>({...s,sales_price_min:e.target.value}))),children:[(0,u.jsx)("option",{value:0,children:"No min"}),Hs.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(d.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,u.jsxs)("select",{className:"dropdown",value:Me.sales_price_max||"",onChange:e=>Ze((s=>({...s,sales_price_max:e.target.value}))),children:[(0,u.jsx)("option",{value:1e8,children:"No max"}),Hs.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(d.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]})]}):"Both"===Me.channel?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Bedrooms"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Me.bedrooms_min||"",onChange:e=>Ze((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No min"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"})]}),(0,u.jsxs)("select",{className:"dropdown",value:Me.bedrooms_max||"",onChange:e=>Ze((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No max"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"}),(0,u.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Rental price"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Me.rental_price_min||"",onChange:e=>Ze((s=>({...s,rental_price_min:e.target.value}))),children:[(0,u.jsx)("option",{value:0,children:"No min"}),Ts.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(d.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,u.jsxs)("select",{className:"dropdown",value:Me.rental_price_max||"",onChange:e=>Ze((s=>({...s,rental_price_max:e.target.value}))),children:[(0,u.jsx)("option",{value:1e7,children:"No max"}),Ts.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(d.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Rental furnishing status"}),(0,u.jsxs)("select",{className:"dropdown",value:Me.rental_additional||"Either furnished or unfurnished",onChange:e=>Ze((s=>({...s,rental_additional:e.target.value}))),children:[(0,u.jsx)("option",{children:"Either furnished or unfurnished"}),(0,u.jsx)("option",{children:"Furnished"}),(0,u.jsx)("option",{children:"Unfurnished"})]})]})}),(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Sales price"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Me.sales_price_min||"",onChange:e=>Ze((s=>({...s,sales_price_min:e.target.value}))),children:[(0,u.jsx)("option",{value:0,children:"No min"}),Hs.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(d.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,u.jsxs)("select",{className:"dropdown",value:Me.sales_price_max||"",onChange:e=>Ze((s=>({...s,sales_price_max:e.target.value}))),children:[(0,u.jsx)("option",{value:1e8,children:"No max"}),Hs.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(d.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]})]}):""}):""]}),(0,u.jsx)("div",{className:"lead-gen-save",children:(0,u.jsx)("button",{className:"save-details",onClick:async()=>{let e;g&&g.lead_gen_details&&g.lead_gen_details.length>0?(e=await i.Z.put(`/api/lead_gen_details/${g.id}/`,Me,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}}),"Lettings"===g.lead_gen_details.channel?F(!0):"Sales"===g.lead_gen_details.channel?P(!0):"Both"===g.lead_gen_details.channel&&(F(!0),P(!0)),Ne("Explore properties")):(e=await i.Z.post("/api/lead_gen_details/",Me,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}}),"Lettings"===g.lead_gen_details.channel?F(!0):"Sales"===g.lead_gen_details.channel?P(!0):"Both"===g.lead_gen_details.channel&&(F(!0),P(!0)),Ne("Explore properties")),Bs()},children:"Save details"})})]})}):"Explore properties"!==_e||f?"Explore properties"===_e&&f?(0,u.jsx)("div",{className:"property-table-loading",children:(0,u.jsx)(h.Z,{})}):"Saved properties"===_e?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(N,{savedProperties:re,userData:g,csvData:ze,setCsvData:Oe,getCurrentDate:()=>{const e=new Date,s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}-${a}-${s}`},handleVisitUrl:Ms,loadUserData:Bs,setSavedProperties:ce,latestFavourites:ys,setLatestFavourites:bs,setLeadGenSection:Ne})}):"Archived properties"===_e?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(C,{handleVisitUrl:Ms,archivedProperties:te,loadUserData:Bs,setLeadGenSection:Ne,latestFavourites:ys,setLatestFavourites:bs})}):"Manual matcher"===_e?(0,u.jsx)(j,{increaseUsageCount:ea,setErrors:a,userData:g,loadUserData:Bs,savedProperties:re,archivedProperties:te,handleVisitUrl:Ms,savedActionShow:Ys,setSavedActionShow:Vs,handleSavedActionClose:Xs,setLeadGenSection:Ne,latestFavourites:ys,handleSavedActionShow:qs,setLatestFavourites:bs}):"Hidden properties"===_e?(0,u.jsx)(b,{hiddenProperties:he,handleVisitUrl:Ms,loadUserData:Bs,setLeadGenSection:Ne,latestFavourites:ys,setLatestFavourites:bs}):"":(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"results-block",children:[(0,u.jsxs)("div",{className:"property-insight-nav",children:[(0,u.jsxs)("div",{className:"property-insight-buttons",children:[(0,u.jsx)("h3",{className:"insight-button "+("Lettings"===$e?"active":"inactive"),id:"left",onClick:()=>De("Lettings"),children:"Lettings"}),(0,u.jsx)("h3",{className:"insight-button "+("Sales"===$e?"active":"inactive"),id:"right",onClick:()=>De("Sales"),children:"Sales"})]}),(0,u.jsxs)("div",{className:"action-section",children:[(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"bin-icon"}),(0,u.jsx)("h3",{onClick:e=>{Ks(!0)},children:"Hide selection"})]}),(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:async()=>{if((0,c.Hb)()){const e=new Set(g.company_favourites.map((e=>e.rightmove_id))),a=[...He,...Re].filter((s=>!e.has(s.rightmove_id)));if(console.log(a),0===a.length)return void console.log("No new favourites to add");try{const e=await i.Z.post("/api/epc_favourite/",a,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log("Response:",e.data),bs(a.length),Bs(),w().fire({title:"\ud83d\ude0e action complete",text:`${a.length} properties added to your saved properties`,confirmButtonText:"Go to saved",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}).then((e=>{e.isConfirmed&&Ne("Saved properties")})),Te([]),Ge([]),qe(ke.map((()=>!1))),Ke(Ae.map((()=>!1)))}catch(s){console.error("Error saving favourite:",s)}}else e("/access-denied"),console.log("logged out")},children:"Track selection"})]})]})]}),"Lettings"===$e?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"filter-section",children:[(0,u.jsx)("h3",{children:"Filter properties"}),(0,u.jsxs)("select",{className:"dropdown",value:Qe,onChange:e=>es(e.target.value),children:[(0,u.jsx)("option",{value:"1day",children:"Updated in the last 24 hours"}),(0,u.jsx)("option",{value:"2days",children:"Updated in the last 48 hours"}),(0,u.jsx)("option",{value:"3days",children:"Updated in the last 72 hours"}),(0,u.jsx)("option",{value:"7days",children:"Updated in the last week"}),(0,u.jsx)("option",{value:"4weeks",children:"Updated in the last 4 weeks"}),(0,u.jsx)("option",{value:"8weeks",children:"Updated in the last 8 weeks"}),(0,u.jsx)("option",{value:"12weeks",children:"Updated in the last 12 weeks"}),(0,u.jsx)("option",{value:"16weeks",children:"Updated in the last 16 weeks"}),(0,u.jsx)("option",{value:"all",children:"All properties"}),(0,u.jsx)("option",{value:">8weeks",children:"Added over 8 weeks ago"}),(0,u.jsx)("option",{value:">12weeks",children:"Added over 12 weeks ago"}),(0,u.jsx)("option",{value:">16weeks",children:"Added over 16 weeks ago"})]})]}),(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Cs("Matching"),style:{color:"Matching"===ks?"white":"#1A276C",backgroundColor:"Matching"===ks?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Matching"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Cs("Multiple matches"),style:{color:"Multiple matches"===ks?"white":"#1A276C",backgroundColor:"Multiple matches"===ks?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Multiple matches"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Cs("No matches"),style:{color:"No matches"===ks?"white":"#1A276C",backgroundColor:"No matches"===ks?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"No matches"})]}),"Matching"===ks?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",rs.length," rental properties that match your criteria"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:Xe.length>0&&Xe.every(Boolean),onChange:e=>{e.target.checked?(()=>{const e=new Set(g.company_favourites.map((e=>e.rightmove_id))),s=rs.map((e=>({...e.property_data,address:e.epc_data_list[0].address}))).filter((s=>!e.has(s.rightmove_id)));qe(rs.map((()=>!0))),Te(s)})():Es()}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",onClick:Is,children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:Ws,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Bathrooms"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:rs?rs.map(((e,s)=>{const a=He.some((s=>s.rightmove_id===e.property_data.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(a?"highlighted-row":""),children:[(0,u.jsx)("div",{className:"column",id:"column11",children:re.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2764\ufe0f"})}):te.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2b50\ufe0f"})}):(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:Xe[s],onChange:e=>((e,s)=>{const a=[...Xe];a[s]=e.target.checked,qe(a);const l={...rs[s].property_data,address:rs[s].epc_data_list[0].address};console.log("selected property->",l),e.target.checked?(console.log("checked"),Te((e=>[...e,l]))):Te((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id))))})(e,s)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>Ms(e.property_data.url),children:y&&"Free"===y?(0,u.jsx)("h5",{children:e.property_data.displayAddress}):(0,u.jsx)("h5",{children:e.epc_data_list[0].address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bathrooms})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]})})):" "})]})]}):"Multiple matches"===ks?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",ts.length," rental properties that we do not have an exact match for"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("div",{id:"column1",className:"column",children:(0,u.jsx)("h5",{children:"#"})}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Listed address"})}),(0,u.jsx)("div",{id:"column3",className:"column",onClick:Is,children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Size (sq. m)"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:Ws,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Bathrooms"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsx)("h5",{children:"Action"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:ts?ts.map(((e,s)=>{const a=Ss.has(s);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.displayAddress})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised&&e.property_data.reduced_revised?`Reduced ${e.property_data.reduced_revised}`:e.property_data.added_revised&&null===e.property_data.reduced_revised?e.property_data.added_revised:"N/a"})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:"nan"===e.property_data.size?"":(.092903*e.property_data.size).toFixed(1)})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bathrooms})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})}),(0,u.jsx)("div",{className:"column",id:"column11",children:re.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Saved"})}):te.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Archived"})}):(0,u.jsx)("h3",{className:"expansion",onClick:()=>sa(s),children:Ss.has(s)?"^":"v"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),a&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"matching-title",children:"Matching properties"}),(0,u.jsxs)("div",{className:"expanded-section-titles",children:[(0,u.jsx)("p",{className:"column",id:"column1",children:"#"}),(0,u.jsx)("p",{className:"column",id:"column2",children:"Address"}),(0,u.jsx)("p",{className:"column",id:"column3",children:"Postcode"}),(0,u.jsx)("p",{className:"column",id:"column4",children:"Current EPC"}),(0,u.jsx)("p",{className:"column",id:"column5",children:"Potential EPC"}),(0,u.jsx)("p",{className:"column",id:"column6",children:"Floor"}),(0,u.jsx)("p",{className:"column",id:"column7",children:"Size"}),(0,u.jsx)("p",{className:"column",id:"column8"})]}),e.epc_data_list.map(((a,l)=>(0,u.jsxs)("div",{className:"expanded-content",children:[(0,u.jsxs)("p",{className:"column",id:"column1",onClick:()=>Ms(a.url),children:[l+1," "]}),(0,u.jsx)("p",{className:"column",id:"column2",onClick:()=>Ms(a.url),children:a.address}),(0,u.jsx)("p",{className:"column",id:"column3",onClick:()=>Ms(a.url),children:a.postcode}),(0,u.jsx)("p",{className:"column",id:"column4",onClick:()=>Ms(a.url),children:a.current_energy_efficiency}),(0,u.jsx)("p",{className:"column",id:"column5",onClick:()=>Ms(a.url),children:a.potential_energy_efficiency}),(0,u.jsx)("p",{className:"column",id:"column6",onClick:()=>Ms(a.url),children:a.final_floor_level}),(0,u.jsx)("p",{className:"column",id:"column7",onClick:()=>Ms(a.url),children:a.floor_area}),(0,u.jsx)("div",{className:"column",id:"column8",children:(0,u.jsx)("button",{className:"add-property",onClick:()=>la(e,a,s),children:"+"})})]},l)))]})]})})):" "})]})]}):"No matches"===ks?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",ps.length," rental properties that we do not have any match for"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Listed address"})}),(0,u.jsx)("div",{id:"column3",className:"column",onClick:Is,children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:Ws,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:ps?ps.map(((e,s)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.displayAddress})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):""]}):"Sales"===$e?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"filter-section",children:[(0,u.jsx)("h3",{children:"Filter properties"}),(0,u.jsxs)("select",{className:"dropdown",value:Qe,onChange:e=>es(e.target.value),children:[(0,u.jsx)("option",{value:"1day",children:"Updated in the last 24 hours"}),(0,u.jsx)("option",{value:"2days",children:"Updated in the last 48 hours"}),(0,u.jsx)("option",{value:"3days",children:"Updated in the last 72 hours"}),(0,u.jsx)("option",{value:"7days",children:"Updated in the last week"}),(0,u.jsx)("option",{value:"4weeks",children:"Updated in the last 4 weeks"}),(0,u.jsx)("option",{value:"8weeks",children:"Updated in the last 8 weeks"}),(0,u.jsx)("option",{value:"12weeks",children:"Updated in the last 12 weeks"}),(0,u.jsx)("option",{value:"16weeks",children:"Updated in the last 16 weeks"}),(0,u.jsx)("option",{value:"all",children:"All properties"}),(0,u.jsx)("option",{value:">8weeks",children:"Added over 8 weeks ago"}),(0,u.jsx)("option",{value:">12weeks",children:"Added over 12 weeks ago"}),(0,u.jsx)("option",{value:">16weeks",children:"Added over 16 weeks ago"})]})]}),(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>ws("Matching"),style:{color:"Matching"===fs?"white":"#1A276C",backgroundColor:"Matching"===fs?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Matching"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>ws("Multiple matches"),style:{color:"Multiple matches"===fs?"white":"#1A276C",backgroundColor:"Multiple matches"===fs?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Multiple matches"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>ws("No matches"),style:{color:"No matches"===fs?"white":"#1A276C",backgroundColor:"No matches"===fs?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"No matches"})]}),A?(0,u.jsx)("div",{className:"property-table-loading",children:(0,u.jsx)(h.Z,{})}):A?"":(0,u.jsx)(u.Fragment,{children:"Matching"===fs?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",ds.length," properties for sale that match your criteria"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:Je.length>0&&Je.every(Boolean),onChange:e=>{e.target.checked?(()=>{const e=new Set(g.company_favourites.map((e=>e.rightmove_id))),s=ds.map((e=>({...e.property_data,address:e.epc_data_list[0].address}))).filter((s=>!e.has(s.rightmove_id)));Ke(ds.map((()=>!0))),Ge(s)})():$s()}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",onClick:Is,children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:Ws,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Bathrooms"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:ds?ds.map(((e,s)=>{const a=Re.some((s=>s.rightmove_id===e.property_data.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(a?"highlighted-row":""),children:[(0,u.jsx)("div",{className:"column",id:"column11",children:re.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2764\ufe0f"})}):te.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2b50\ufe0f"})}):(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:Je[s],onChange:e=>((e,s)=>{const a=[...Je];a[s]=e.target.checked,Ke(a);const l={...ds[s].property_data,address:ds[s].epc_data_list[0].address};console.log(l),e.target.checked?Ge((e=>[...e,l])):Ge((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id))))})(e,s)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>Ms(e.property_data.url),children:y&&"Free"===y?(0,u.jsx)("h5",{children:e.property_data.displayAddress}):(0,u.jsx)("h5",{children:e.epc_data_list[0].address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bathrooms})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]})})):" "})]})]}):"Multiple matches"===fs?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",hs.length," properties for sale that we do not have an exact match for"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Listed address"})}),(0,u.jsx)("div",{id:"column3",className:"column",onClick:Is,children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Size (sq. m)"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:Ws,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Bathrooms"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsx)("h5",{children:"Action"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:hs?hs.map(((e,s)=>{const a=As.has(s);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.displayAddress})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised&&e.property_data.reduced_revised?`Reduced ${e.property_data.reduced_revised}`:e.property_data.added_revised&&null===e.property_data.reduced_revised?e.property_data.added_revised:"N/a"})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:"nan"===e.property_data.size?"":(.092903*e.property_data.size).toFixed(1)})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bathrooms})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})}),(0,u.jsx)("div",{className:"column",id:"column11",children:re.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Saved"})}):te.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Archived"})}):(0,u.jsx)("h3",{className:"expansion",onClick:()=>aa(s),children:As.has(s)?"^":"v"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),a&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"matching-title",children:"Matching properties"}),(0,u.jsxs)("div",{className:"expanded-section-titles",children:[(0,u.jsx)("p",{className:"column",id:"column1",children:"#"}),(0,u.jsx)("p",{className:"column",id:"column2",children:"Address"}),(0,u.jsx)("p",{className:"column",id:"column3",children:"Postcode"}),(0,u.jsx)("p",{className:"column",id:"column4",children:"Current EPC"}),(0,u.jsx)("p",{className:"column",id:"column5",children:"Potential EPC"}),(0,u.jsx)("p",{className:"column",id:"column6",children:"Floor"}),(0,u.jsx)("p",{className:"column",id:"column7",children:"Size"}),(0,u.jsx)("p",{className:"column",id:"column8"})]}),e.epc_data_list.map(((a,l)=>(0,u.jsxs)("div",{className:"expanded-content",children:[(0,u.jsxs)("p",{className:"column",id:"column1",onClick:()=>Ms(a.url),children:[l+1," "]}),(0,u.jsx)("p",{className:"column",id:"column2",onClick:()=>Ms(a.url),children:a.address}),(0,u.jsx)("p",{className:"column",id:"column3",onClick:()=>Ms(a.url),children:a.postcode}),(0,u.jsx)("p",{className:"column",id:"column4",onClick:()=>Ms(a.url),children:a.current_energy_efficiency}),(0,u.jsx)("p",{className:"column",id:"column5",onClick:()=>Ms(a.url),children:a.potential_energy_efficiency}),(0,u.jsx)("p",{className:"column",id:"column6",onClick:()=>Ms(a.url),children:a.final_floor_level}),(0,u.jsx)("p",{className:"column",id:"column7",onClick:()=>Ms(a.url),children:a.floor_area}),(0,u.jsx)("div",{className:"column",id:"column8",children:(0,u.jsx)("button",{className:"add-property",onClick:()=>la(e,a,s),children:"+"})})]},l)))]})]})})):" "})]})]}):"No matches"===fs?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",xs.length," properties for sale that we do not have any match for"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Listed address"})}),(0,u.jsx)("div",{id:"column3",className:"column",onClick:Is,children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:Ws,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:xs?xs.map(((e,s)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.displayAddress})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>Ms(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):""})]}):""]})})})})]})})})})]}),(0,u.jsx)(x,{savedActionShow:Ys,handleSavedActionClose:Xs,setLeadGenSection:Ne,latestFavourites:ys}),(0,u.jsx)(v,{propertyRemoveShow:Js,handleRemovePropertyClose:Qs,removeProperty:async()=>{if((0,c.Hb)()){const e=new Set(g.company_favourites.map((e=>e.rightmove_id))),a=[...He,...Re].filter((s=>!e.has(s.rightmove_id)));if(console.log(a),0===a.length)return void console.log("No properties to remove");try{const e=await i.Z.post("/api/epc_favourite/remove_property/",a,{headers:{Authorization:`Bearer ${(0,c.hP)()}`}});console.log("Response:",e.data),bs(a.length),Bs(),Cs("Matching"),Te([]),Ge([]),qe(ke.map((()=>!1))),Ke(Ae.map((()=>!1))),Qs()}catch(s){console.error("Error saving favourite:",s)}}else e("/access-denied"),console.log("logged out")}})]})}},9193:function(e,s,a){e.exports=a.p+"static/media/transparent-spinner.f3eb62caffaa8568ecbe.gif"}}]);
//# sourceMappingURL=779.0770db0f.chunk.js.map