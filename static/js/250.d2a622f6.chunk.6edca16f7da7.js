"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[250],{78250:function(e,s,a){a.r(s);var t=a(28381),l=a(65293),r=a(42524),i=(a(95325),a(15211)),c=(a(61505),a(47142)),n=a(59693),o=a(8772),d=(a(9663),a(9738),a(37336)),h=a(29343);s.default=()=>{const e=(0,r.s0)(),[s,a]=((0,r.TH)(),(0,t.useState)([])),[m,p]=(0,t.useState)(),[u,x]=(0,t.useState)(),[j,v]=(0,t.useState)(),[y,g]=(0,t.useState)("My properties"),[N,f]=(0,t.useState)("My properties"),[S,b]=(0,t.useState)(!1),[C,k]=(0,t.useState)(""),[w,P]=(0,t.useState)(""),[F,A]=(0,t.useState)(null),[D,$]=(0,t.useState)(),[T,Z]=(0,t.useState)(0),[L,z]=(0,t.useState)();(0,t.useEffect)((()=>{(0,i.Hb)()?(async()=>{try{const{data:e}=await l.ZP.get(`/api/auth/profile/${(0,i.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});console.log("user data ->",e),p(e),x(e.company),console.log("company ->",e.company)}catch(e){v(!0),console.log(e)}})():(e("/access-denied"),console.log("no account"))}),[]);(0,t.useEffect)((()=>{u&&(async()=>{try{const{data:e}=await l.ZP.get(`/api/white_properties/${u}`,{headers:{Authorization:`Bearer ${(0,i.hP)()}`}});if(console.log("agent property data ->",e),e&&Array.isArray(e)&&e.length>0){$(e);const s=e.reduce(((e,s)=>e+(s.price||0)),0);Z(s.toFixed(1)),z("Let"===e[0].status?"Rent":"Sale")}else console.log("No property data available")}catch(e){v(!0),console.log(e)}})()}),[u]);const B=e=>{A(e)};return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("section",{className:"agent-profile-page",children:[(0,h.jsx)("div",{className:"desktop-nav",children:(0,h.jsx)(o.Z,{navbarColour:"#FDF7F0"})}),(0,h.jsx)("div",{className:"mobile-nav",children:(0,h.jsx)(d.Z,{setProfileContent:g,profileContent:y,profileDetail:N,setProfileDetail:f})}),(0,h.jsx)(n.Z,{setProfileDetail:f,variableSide:S,setProfileContent:g,setVariableSide:b}),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("section",{className:"profile-summary",children:[(0,h.jsx)("div",{className:"welcome",children:m?(0,h.jsxs)("h1",{children:["\ud83d\udc4b Welcome back ",m.first_name,"!"]}):""}),(0,h.jsxs)("div",{className:"summary-boxes",children:[(0,h.jsx)("div",{className:"summary-box",children:D?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h1",{children:D.length}),(0,h.jsx)("h5",{children:"Properties under management"})]}):""}),(0,h.jsx)("div",{className:"summary-box",children:D?(0,h.jsxs)(h.Fragment,{children:["Sale"===L?(0,h.jsxs)("h1",{children:["\xa3",(0,h.jsx)(c.h3,{value:T/1e6,displayType:"text",thousandSeparator:!0,prefix:""}),"m"]}):"Rent"===L?(0,h.jsxs)("h1",{children:["\xa3",(0,h.jsx)(c.h3,{value:T/1e3,displayType:"text",thousandSeparator:!0,prefix:""}),"k"]}):"",(0,h.jsx)("h5",{children:"Properties under management"})]}):""})]})]}),(0,h.jsxs)("section",{className:"profile-property-list",children:[(0,h.jsxs)("div",{className:"search-section",children:[(0,h.jsxs)("div",{className:"search-section-left",children:[(0,h.jsx)("h3",{children:"Search"}),(0,h.jsx)("input",{value:C,onChange:e=>k(e.target.value),placeholder:"Type property name"})]}),(0,h.jsxs)("div",{className:"search-section-right",children:[(0,h.jsx)("h3",{children:"Status"}),(0,h.jsx)("input",{value:w,onChange:e=>P(e.target.value),placeholder:"All"})]})]}),(0,h.jsx)("div",{className:"agent-property-list",children:(0,h.jsxs)("div",{className:"property-block",children:[(0,h.jsxs)("div",{className:"property-table-headers",children:[(0,h.jsx)("h5",{id:"column1"}),(0,h.jsxs)("div",{id:"column2",className:"sort-section",children:[(0,h.jsx)("h5",{children:"Street name"}),(0,h.jsx)("h5",{className:"sort",onClick:()=>B("name"),children:"\u2195\ufe0f"})]}),(0,h.jsxs)("div",{id:"column3",className:"sort-section",children:[(0,h.jsx)("h5",{children:"Price"}),(0,h.jsx)("h5",{className:"sort",onClick:()=>B("price"),children:"\u2195\ufe0f"})]}),(0,h.jsx)("h5",{id:"column4",children:"Status"}),(0,h.jsx)("h5",{id:"column5",children:"Action"})]}),(0,h.jsx)("div",{className:"property-table-details",children:D?D.filter((e=>e.name.toLowerCase().includes(C.toLowerCase()))).sort(((e,s)=>"name"===F?e.name.localeCompare(s.name):"price"===F?e.price-s.price:"date"===F?new Date(e.date)-new Date(s.date):0)).map(((s,a)=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"property-content",children:[(0,h.jsx)("div",{className:"column",id:"column1",children:(0,h.jsx)("div",{className:"property-image",style:{backgroundImage:`url(${s.image})`}})}),(0,h.jsx)("div",{className:"column",id:"column2",children:(0,h.jsx)("h5",{children:s.name})}),(0,h.jsx)("div",{className:"column",id:"column3",children:(0,h.jsx)("h5",{children:(0,h.jsx)(c.h3,{value:s.price,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})})}),(0,h.jsx)("div",{className:"column",id:"column4",children:(0,h.jsx)("h5",{children:s.status})}),(0,h.jsx)("div",{className:"column",id:"column6",children:(0,h.jsx)("button",{onClick:()=>e(`/agents/property/${s.postcode}`),children:"View"})})]},a),(0,h.jsx)("hr",{className:"property-divider"})]}))):""})]})})]})]})]})})}}}]);
//# sourceMappingURL=250.d2a622f6.chunk.js.2fde345e5674.map