{"version":3,"file":"static/js/545.d9e45059.chunk.js","mappings":"iKAwHA,UA/GqBA,KAGnB,MAAMC,GAAWC,EAAAA,EAAAA,OAKVC,EAAUC,KAFGC,EAAAA,EAAAA,QAAO,OAEKC,EAAAA,EAAAA,WAAS,KAMlCC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,CACvCG,MAAO,GACPC,SAAU,MAILC,EAAQC,IAAaN,EAAAA,EAAAA,WAAS,IAgC9BO,EAAcC,IAAmBR,EAAAA,EAAAA,WAAS,IAa1CS,EAAcC,IAAmBV,EAAAA,EAAAA,UAAS,CAC/CG,MAAO,GACPQ,SAAU,GACVP,SAAU,GACVQ,sBAAuB,GACvBC,WAAY,GACZC,UAAW,KAsBb,OACEC,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,CAAAC,UACEC,EAAAA,EAAAA,MAAA,WAASC,UAAU,cAAaF,SAAA,EAC9BF,EAAAA,EAAAA,KAACK,EAAAA,EAAM,KACPL,EAAAA,EAAAA,KAAA,WAASI,UAAU,iBAAgBF,UACjCC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBF,SAAA,EAC7BF,EAAAA,EAAAA,KAAA,OAAKI,UAAU,qBACfJ,EAAAA,EAAAA,KAAA,MAAII,UAAU,kBAAiBF,SAAC,oBAChCF,EAAAA,EAAAA,KAAA,MAAII,UAAU,oBAAmBF,SAAC,qFAClCF,EAAAA,EAAAA,KAAA,UAAQM,QAASA,IAAM1B,EAAS,UAAUsB,SAAC,yBAIhD,C","sources":["components/helpers/AccessDenied.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport axios from 'axios'\nimport { useParams, useNavigate, Link } from 'react-router-dom'\nimport { getUserToken, isUserAuth, getAccessToken } from '../auth/Auth'\nimport NavBar from '../tools/NavBar'\nimport { Modal } from 'react-bootstrap'\n\n\n\nconst AccessDenied = () => {\n\n  // state to enable navigation between pages\n  const navigate = useNavigate()\n\n\n  const dropdownRef = useRef(null)\n  // const [isActive, setIsActive] = useDetectOutsideClick(dropdownRef, false)\n  const [isActive, setIsActive] = useState(false)\n  const openDropdown = () => setIsActive(!isActive)\n\n\n  // ? Section for login form detail within navbar\n  // set form data required for login\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n  })\n\n  // set error state\n  const [errors, setErrors] = useState(false)\n\n  // function for setting user to local storage when log in is successful\n  const setUserTokenToLocalStorage = (token) => {\n    window.localStorage.setItem('wittle-user-token', token)\n  }\n\n  // send form to back end to log in\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    try {\n      const { data } = await axios.post('/api/auth/login/', formData)\n      console.log(formData)\n      setUserTokenToLocalStorage(data.token)\n      //console.log(data.token)\n      console.log({ data })\n      window.localStorage.setItem('wittle-username', data.username)\n      navigate('/')\n    } catch (error) {\n      setErrors(true)\n    }\n  }\n\n  // update form dtail when logging in\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value })\n    setErrors(false)\n  }\n\n\n  // ? Registration modal\n  // set state for showing insights modal\n  const [registerShow, setRegisterShow] = useState(false)\n\n  // close modal\n  const handleRegisterClose = () => {\n    setRegisterShow(false)\n  }\n\n  // show the modal\n  const handleRegisterShow = () => {\n    setRegisterShow(true)\n  }\n\n  // register data\n  const [registerData, setRegisterData] = useState({\n    email: '',\n    username: '',\n    password: '',\n    password_confirmation: '',\n    first_name: '',\n    last_name: '',\n  })\n\n  // update registration data\n  const registerChange = (e) => {\n    setRegisterData({ ...registerData, [e.target.name]: e.target.value })\n    console.log(e.target.name)\n    console.log(e.target.value)\n    // setErrors({ ...errors, [e.target.name]: '' })\n  }\n\n  // submit registration form\n  const registerSubmit = async (e) => {\n    e.preventDefault()\n    try {\n      await axios.post('/api/auth/register/', registerData)\n      handleRegisterClose()\n    } catch (err) {\n      // setErrors(err.response.status + ' ' + err.response.statusText)\n    }\n  }\n\n  return (\n    <>\n      <section className='denied-page'>\n        <NavBar />\n        <section className='denied-section'>\n          <div className='no-access-body'>\n            <div className='no-access-image'></div>\n            <h1 className='no-access-title'>Oops! Dead end</h1>\n            <h3 className='no-access-message'>Your session has timed out. Log back in to unlock the Wittle magic ðŸª„</h3>\n            <button onClick={() => navigate('/login')}>Agent login</button>\n          </div>\n        </section>\n      </section>\n    </>\n\n  )\n}\n\nexport default AccessDenied"],"names":["AccessDenied","navigate","useNavigate","isActive","setIsActive","useRef","useState","formData","setFormData","email","password","errors","setErrors","registerShow","setRegisterShow","registerData","setRegisterData","username","password_confirmation","first_name","last_name","_jsx","_Fragment","children","_jsxs","className","NavBar","onClick"],"sourceRoot":""}