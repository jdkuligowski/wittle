{"version":3,"file":"static/js/697.0c2c264a.chunk.js","mappings":"wKA0DA,UApDoB,MACDA,EAAAA,EAAAA,MAAjB,MACOC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,KAC5BC,EAAOC,IAAYF,EAAAA,EAAAA,UAAS,IA2BnC,OACE,iCACE,SAAC,IAAM,CAACG,aAAa,aAErB,oBAASC,UAAU,aAAY,UAC7B,oBAASA,UAAU,gBAAe,UAChC,oBAASA,UAAU,eAAc,UAC/B,kBAAMA,UAAU,cAAcC,SA3BfC,UACvBC,EAAMC,iBACN,MAAMC,EAAY,CAAEX,MAAOA,GAE3B,IACE,MAAMY,QAAiBC,EAAAA,GAAAA,KAAW,6BAA8BF,GAChEG,QAAQC,IAAI,wBAAyBH,GACrCI,MAAM,uCACNf,EAAS,GASX,CARE,MAAOgB,GACPH,QAAQX,MAAM,8CAA+Cc,GACzDA,EAAIL,WACNE,QAAQX,MAAMc,EAAIL,SAASM,MAC3BJ,QAAQX,MAAMc,EAAIL,SAASO,QAC3BL,QAAQX,MAAMc,EAAIL,SAASQ,SAC3BhB,EAAS,oEAEb,GAUiE,WAEvD,oEACA,kBAAOiB,KAAK,QAAQC,KAAK,QAAQhB,UAAU,QAAQiB,MAAOvB,EAAOwB,SAnCvDf,IACpBR,EAASQ,EAAMgB,OAAOF,OACtBT,QAAQC,IAAIN,EAAMgB,OAAOF,MAAM,IAkCpBpB,IAAS,eAAGG,UAAU,QAAO,eAAIH,MAClC,mBAAQG,UAAU,UAAUe,KAAK,SAAQ,oCAMhD,C,qGC2OP,IAtRe,IAAuB,IAAtB,aAAEhB,GAAc,EAG9B,MAQMqB,GAAW3B,EAAAA,EAAAA,OAOV4B,EAAUC,KAFGC,EAAAA,EAAAA,QAAO,OAEK3B,EAAAA,EAAAA,WAAS,KAOlC4B,EAAQC,IAAa7B,EAAAA,EAAAA,UAAS,CACnCF,MAAO,GAEPgC,SAAU,GACVC,qBAAsB,MAkCjBC,EAAmBC,IAAwBjC,EAAAA,EAAAA,UAAS,aACpDkC,EAAsBC,IAA2BnC,EAAAA,EAAAA,UAAS,aAsB1DoC,EAAUC,IAAerC,EAAAA,EAAAA,WAAS,IAclCsC,EAAcC,IAAmBvC,EAAAA,EAAAA,WAAS,IAa1CwC,EAAcC,IAAmBzC,EAAAA,EAAAA,UAAS,CAC/CF,MAAO,GACP4C,SAAU,GACVZ,SAAU,GACVa,sBAAuB,GACvBC,WAAY,GACZC,UAAW,MAINC,EAAeC,IAAoB/C,EAAAA,EAAAA,UAAS,CACjDF,MAAO,GACP4C,SAAU,GACVZ,SAAU,GACVa,sBAAuB,GACvBC,WAAY,GACZC,UAAW,GACXG,KAAM,KAiHR,OACE,iCACE,qBAAS5C,UAAU,cAAc6C,MAAO,CAAEC,gBAAiB/C,GAAe,WACxE,iBAAKC,UAAU,eAAc,WAC3B,gBAAKA,UAAU,OAAM,UACnB,eAAI+C,QAAS,IAAM3B,EAAS,KAAK,uBAGnC,eAAI2B,QAAS,IAAM3B,EAAS,WAAYpB,UAAU,eAAc,yBAChE,eAAI+C,QAAS,IAAM3B,EAAS,mCAAoCpB,UAAU,eAAc,0BAE1F,gBAAKA,UAAU,iBAAiB+C,QAhKf,KACrBd,GAAY,EAAK,EA+J2C,UACtD,gBAAKjC,UAAU,eAAc,UAC3B,2BACE,iBAAKA,UAAU,cAAa,WAC1B,eAAIA,UAAU,sBACd,eAAIA,UAAU,sBACd,eAAIA,UAAU,+BAKtB,mBAAQ+C,QAAS,IAAM3B,EAAS,UAAWpB,UAAU,cAAa,6BAEpE,SAAC,IAAS,CACRgC,SAAUA,EACVC,YAAaA,EACbe,gBArLkB,KACtBf,GAAY,EAAM,EAqLdgB,sBA5QyBC,IAC7BC,aAAaC,WAAW,qBACxBD,aAAaC,WAAW,mBACxBC,OAAOC,SAASC,SAChBjC,GAAY,EAAM,MA0Qf,C","sources":["components/auth/Unsubscribe.js","components/tools/NavBar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { useNavigate, Link } from 'react-router-dom'\nimport { isEmail, isLength, matches } from 'validator'\nimport NavBar from '../tools/NavBar'\n\nconst Unsubscribe = () => {\n  const navigate = useNavigate()\n  const [email, setEmail] = useState('')\n  const [error, setError] = useState('')\n\n  const handleChange = (event) => {\n    setEmail(event.target.value)\n    console.log(event.target.value)\n  }\n\n  const unsubscribeEmail = async (event) => {\n    event.preventDefault() // prevent default form submission behavior\n    const emailData = { email: email }\n\n    try {\n      const response = await axios.post('/api/waitlist/unsubscribe/', emailData)\n      console.log('Unsubscribe response:', response)\n      alert('You have successfully unsubscribed.')\n      setEmail('')\n    } catch (err) {\n      console.error('An error occurred while making the request:', err)\n      if (err.response) {\n        console.error(err.response.data)\n        console.error(err.response.status)\n        console.error(err.response.headers)\n        setError('An error occurred while trying to unsubscribe. Please try again.')\n      } \n    }\n  }\n\n  return (\n    <>\n      <NavBar navbarColour='#051885' />\n\n      <section className='login-page'>\n        <section className='login-content'>\n          <section className='form-section'>\n            <form className='form-detail' onSubmit={unsubscribeEmail}>\n\n              <p>Enter your email address to unsubscribe</p>\n              <input type='email' name='email' className='input' value={email} onChange={handleChange} />\n              {error && <p className=\"error\">* {error}</p>}\n              <button className='sign-up' type='submit'>Unsubscribe</button>\n\n            </form>\n          </section>\n        </section>\n      </section>\n    </>\n  )\n}\n\nexport default Unsubscribe\n","import { useNavigate, Link } from 'react-router-dom'\nimport React, { useState, useEffect, useRef } from 'react'\nimport axios from 'axios'\nimport { isUserAuth, getUserToken, getAccessToken } from '../auth/Auth'\nimport Select from 'react-select'\nimport { Modal } from 'react-bootstrap'\nimport { GoogleLogin } from '@react-oauth/google'\nimport { isEmail, isLength, matches } from 'validator'\nimport MenuModal from '../helpers/modals/MenuModal'\n\n\nconst NavBar = ({ navbarColour }) => {\n\n  // remove login token from storage\n  const removeItemFromStorage = (token) => {\n    localStorage.removeItem('wittle-user-token')\n    localStorage.removeItem('wittle-username')\n    window.location.reload()\n    setIsActive(false)\n  }\n\n  // state to enable navigation between pages\n  const navigate = useNavigate()\n\n  // state to manage navbar colour depending on page\n  // const [navbarColour, setNavBarColour] = useState('#051885')\n\n  const dropdownRef = useRef(null)\n  // const [isActive, setIsActive] = useDetectOutsideClick(dropdownRef, false)\n  const [isActive, setIsActive] = useState(false)\n  const openDropdown = () => setIsActive(!isActive)\n\n\n  // ? Section for login form detail within navbar\n  // set form data required for login\n\n  const [errors, setErrors] = useState({\n    email: '',\n    // username: '',\n    password: '',\n    passwordConfirmation: '',\n    // first_name: '',\n    // last_name: '',\n  })\n\n  // function for setting user to local storage when log in is successful\n  const setUserTokenToLocalStorage = (token) => {\n    window.localStorage.setItem('wittle-user-token', token)\n  }\n\n  // send form to back end to log in\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    try {\n      const { data } = await axios.post('/api/auth/login/', registerData)\n      console.log(registerData)\n      setUserTokenToLocalStorage(data.token)\n      //console.log(data.token)\n      console.log({ data })\n      window.localStorage.setItem('wittle-username', data.username)\n      console.log('username ->', data.username)\n      navigate('/')\n    } catch (error) {\n      setErrors(true)\n    }\n  }\n\n  // update form dtail when logging in\n  const handleChange = (e) => {\n    setRegisterData({ ...registerData, [e.target.name]: e.target.value })\n    setErrors(false)\n  }\n\n  // state for determining password state type\n  const [loginPasswordType, setLoginPasswordType] = useState('password')\n  const [registerPasswordType, setRegisterPasswordType] = useState('password')\n\n  // password reveal button\n  const passwordReveal = () => {\n    if (loginPasswordType === 'password') {\n      setLoginPasswordType('text')\n    } else {\n      setLoginPasswordType('password')\n    }\n  }\n\n  // password reveal button\n  const passwordRegisterReveal = () => {\n    if (registerPasswordType === 'password') {\n      setRegisterPasswordType('text')\n    } else {\n      setRegisterPasswordType('password')\n    }\n  }\n\n  // ? Menu modal\n  // state for the menu modal\n  const [menuShow, setMenuShow] = useState(false)\n\n  // close modal\n  const handleMenuClose = () => {\n    setMenuShow(false)\n  }\n\n  // open modal\n  const handleMenuShow = () => {\n    setMenuShow(true)\n  }\n\n  // ? Registration modal\n  // set state for showing insights modal\n  const [registerShow, setRegisterShow] = useState(false)\n\n  // close modal\n  const handleRegisterClose = () => {\n    setRegisterShow(false)\n  }\n\n  // show the modal\n  const handleRegisterShow = () => {\n    setRegisterShow(true)\n  }\n\n  // register data\n  const [registerData, setRegisterData] = useState({\n    email: '',\n    username: '',\n    password: '',\n    password_confirmation: '',\n    first_name: '',\n    last_name: '',\n  })\n\n  // register data erros\n  const [registerError, setRegisterError] = useState({\n    email: '',\n    username: '',\n    password: '',\n    password_confirmation: '',\n    first_name: '',\n    last_name: '',\n    post: '',\n  })\n\n  // function to validate the password\n  const validatePassword = (password) => {\n    const minLength = 8\n    const hasUppercase = matches(password, /[A-Z]/)\n    const hasLowercase = matches(password, /[a-z]/)\n    const hasDigit = matches(password, /\\d/)\n    const hasSpecialChar = matches(password, /[^A-Za-z0-9]/)\n\n    if (!isLength(password, { min: minLength })) {\n      return 'Password must be at least 8 characters long'\n    }\n    if (!hasUppercase) {\n      return 'Password must contain at least one uppercase letter'\n    }\n    if (!hasLowercase) {\n      return 'Password must contain at least one lowercase letter'\n    }\n    if (!hasDigit) {\n      return 'Password must contain at least one digit'\n    }\n    if (!hasSpecialChar) {\n      return 'Password must contain at least one special character'\n    }\n    return ''\n  }\n\n  // update registration data and enter errors where relevant\n  const registerChange = (e) => {\n    setRegisterData({ ...registerData, [e.target.name]: e.target.value })\n    if (!isEmail(registerData.email)) {\n      setRegisterError({ ...registerError, email: 'Invalid email address' })\n\n    } else if (e.target.name === 'first_name') {\n      if (e.target.value.length < 1) {\n        setRegisterError({ ...registerError, first_name: 'Add first name' })\n      } else {\n        setRegisterError({ ...registerError, first_name: '' })\n      }\n\n    } else if (e.target.name === 'last_name') {\n      if (e.target.value.length < 1) {\n        setRegisterError({ ...registerError, last_name: 'Add last name' })\n      } else {\n        setRegisterError({ ...registerError, last_name: '' })\n      }\n\n    } else if (e.target.name === 'username') {\n      if (e.target.value.length < 1) {\n        setRegisterError({ ...registerError, username: 'Add username' })\n      } else {\n        setRegisterError({ ...registerError, username: '' })\n      }\n\n    } else if (e.target.name === 'password') {\n      const passwordError = validatePassword(e.target.value)\n      setRegisterError({ ...registerError, password: passwordError })\n\n    } else if (e.target.name === 'password_confirmation') {\n      if (e.target.value !== registerData.password) {\n        setRegisterError({ ...registerError, password_confirmation: 'Passwords don\\'t match' })\n      } else {\n        setRegisterError({ ...registerError, password_confirmation: '' })\n      }\n    }\n  }\n\n  // submit registration form\n  const registerSubmit = async (e) => {\n    e.preventDefault()\n    try {\n      await axios.post('/api/auth/register/', registerData)\n      const { data } = await axios.post('/api/auth/login/', registerData)\n      setUserTokenToLocalStorage(data.token)\n      window.localStorage.setItem('wittle-username', data.username)\n      console.log('username ->', data.username)\n      handleRegisterClose()\n      setRegisterData()\n    } catch (err) {\n      console.log(err)\n      setRegisterError({ ...registerError, post: 'Wittle account with this email already exists' })\n    }\n  }\n\n\n  const responseMessage = (response) => {\n    console.log(response)\n  }\n\n  const errorMessage = (error) => {\n    console.log(error)\n  }\n\n\n  // post google information for authentication\n  const googleLogin = async (response) => {\n    try {\n      // await axios.post('/api/auth/google/', registerData)\n      const auth = { 'auth_token': response.credential }\n      console.log(auth)\n      const { data } = await axios.post('/api/auth/google/', {\n        body: JSON.stringify(auth),\n      })\n      console.log(data)\n    } catch (err) {\n      setErrors(err)\n      console.log(err)\n      console.log(err.response.data)\n    }\n  }\n\n  return (\n    <>\n      <section className='nav-section' style={{ backgroundColor: navbarColour }}>\n        <div className='left-section'>\n          <div className='logo'>\n            <h2 onClick={() => navigate('/')}>Wittle</h2>\n            {/* <div className='logo-image'></div> */}\n          </div>\n          <h4 onClick={() => navigate('/agents')} className='agent-button'>For agents</h4>\n          <h4 onClick={() => navigate('/blogs/school-search-simplified')} className='agent-button'>Insights</h4>\n        </div>\n        <div className='menu-container' onClick={handleMenuShow}>\n          <div className=\"menu-trigger\">\n            <span>\n              <div className='burger-icon'>\n                <hr className='burger-icon-line' />\n                <hr className='burger-icon-line' />\n                <hr className='burger-icon-line' />\n              </div>\n            </span>\n          </div>\n        </div>\n        <button onClick={() => navigate('/login')} className='agent-login'>Agent login</button>\n      </section>\n      <MenuModal\n        menuShow={menuShow}\n        setMenuShow={setMenuShow}\n        handleMenuClose={handleMenuClose}\n        removeItemFromStorage={removeItemFromStorage}\n      />\n    </>\n  )\n\n}\n\nexport default NavBar"],"names":["useNavigate","email","setEmail","useState","error","setError","navbarColour","className","onSubmit","async","event","preventDefault","emailData","response","axios","console","log","alert","err","data","status","headers","type","name","value","onChange","target","navigate","isActive","setIsActive","useRef","errors","setErrors","password","passwordConfirmation","loginPasswordType","setLoginPasswordType","registerPasswordType","setRegisterPasswordType","menuShow","setMenuShow","registerShow","setRegisterShow","registerData","setRegisterData","username","password_confirmation","first_name","last_name","registerError","setRegisterError","post","style","backgroundColor","onClick","handleMenuClose","removeItemFromStorage","token","localStorage","removeItem","window","location","reload"],"sourceRoot":""}