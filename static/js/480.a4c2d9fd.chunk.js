"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[480,584],{74177:function(e,s,a){a(72791);var l=a(80184);s.Z=()=>(0,l.jsx)("div",{className:"loading-gif",children:(0,l.jsx)("img",{src:a(29193),alt:"loading gif"})})},24604:function(e,s,a){a(72791),a(80184)},62480:function(e,s,a){a.r(s),a.d(s,{default:function(){return M}});var l=a(72791),t=a(55294),i=a(57689),n=a(97165),c=a(30948),r=(a(99696),a(24604),a(60764)),o=a(52094),d=a(78084),h=a(74177),m=a(98472),p=a(40936),u=a(80184);var x=e=>{let{savedActionShow:s,handleSavedActionClose:a,setLeadGenSection:l,latestFavourites:t}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsx)("div",{className:"core-body",children:(0,u.jsxs)("h3",{className:"message",children:["We've added ",1===t?`${t} property`:`${t} properties`," to your saved list \ud83e\udd1d"]})}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:()=>{l("Saved properties"),a()},children:"Go to saved"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})};var j=e=>{let{increaseUsageCount:s,setErrors:a,userData:c,loadUserData:r,savedProperties:o,archivedProperties:d,handleVisitUrl:m,savedActionShow:p,handleSavedActionClose:j,setLeadGenSection:v,latestFavourites:g,handleSavedActionShow:N,setLatestFavourites:_,setSavedActionShow:y}=e;const[b,f]=(0,l.useState)(),C=(0,i.s0)(),[k,w]=(0,l.useState)(""),[S,B]=(0,l.useState)(""),[A,F]=(0,l.useState)(),[D,T]=(0,l.useState)(),[E,L]=(0,l.useState)([]),[$,P]=(0,l.useState)([]),[M,I]=(0,l.useState)(!1),[U,Z]=(0,l.useState)("Lettings"),[z,H]=(0,l.useState)("Efficiency"),[R,O]=(0,l.useState)(new Set),[W,G]=(0,l.useState)({}),Y=async e=>{try{console.log(e);const{data:s}=await t.Z.get(`/api/epc_properties_rental/${e}`);return s}catch(s){return console.log(s),[]}},V=async e=>{try{console.log(e);const{data:s}=await t.Z.get(`/api/epc_properties/${e}`);return s}catch(s){return console.log(s),[]}};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"epc-matcher",children:[(0,u.jsxs)("div",{className:"input-section",children:[(0,u.jsx)("h3",{className:"sub-title",children:"Input property details to find  details about live listings"}),b?(0,u.jsx)(h.Z,{}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"double-input-block",children:[(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Postcode"}),(0,u.jsx)("input",{type:"text",value:k,onChange:e=>w(e.target.value),placeholder:"Enter postcode..."})]}),(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Road name"}),(0,u.jsx)("input",{type:"text",value:S,onChange:e=>B(e.target.value)})]})]}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Efficiency (numbers) or Rating (letters)"}),(0,u.jsxs)("select",{onChange:e=>H(e.target.value),children:[(0,u.jsx)("option",{children:"Efficiency"}),(0,u.jsx)("option",{children:"Rating"})]})]})}),"Efficiency"===z?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"double-input-block",children:[(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Current Energy Efficiency"}),(0,u.jsx)("input",{type:"number",value:A,onChange:e=>F(e.target.value)})]}),(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Potential Energy Efficiency"}),(0,u.jsx)("input",{type:"number",value:D,onChange:e=>T(e.target.value)})]})]})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"double-input-block",children:[(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Current Energy Rating"}),(0,u.jsx)("input",{type:"text",value:A,onChange:e=>F(e.target.value)})]}),(0,u.jsxs)("div",{className:"input-block half",children:[(0,u.jsx)("h3",{children:"Potential Energy Rating"}),(0,u.jsx)("input",{type:"text",value:D,onChange:e=>T(e.target.value)})]})]})}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Property category"}),(0,u.jsxs)("select",{className:"dropdown",value:U||"Lettings",onChange:e=>Z(e.target.value),children:[(0,u.jsx)("option",{children:"Lettings"}),(0,u.jsx)("option",{children:"Sales"})]})]})}),(0,u.jsx)("div",{className:"search-section",children:(0,u.jsx)("button",{className:"load-insights",onClick:async()=>{G({}),O(new Set),f(!0),I(!1);const e=k.replace(/\s+/g,"");try{const{data:a}=await t.Z.get(`/api/epc/${e}`);if(console.log("Postcode data ->",a),L(a),a&&Array.isArray(a)&&a.length>0){let e=a;"Efficiency"===z?e=e.filter((e=>(!S||e.address.toLowerCase().includes(S.toLowerCase()))&&(!A||e.current_energy_efficiency===Number(A))&&(!D||e.potential_energy_efficiency===Number(D)))):"Rating"===z&&(e=e.filter((e=>(!S||e.address.toLowerCase().includes(S.toLowerCase()))&&(!A||e.current_energy_rating===A.toUpperCase())&&(!D||e.potential_energy_rating===D.toUpperCase())))),e=e.sort(((e,s)=>new Date(s.inspection_date)-new Date(e.inspection_date))),e.length>0?(P(e),console.log("filtered data->",e),s()):0===e.length&&P(""),f(!1)}else console.log("No postcode data available"),f(!1)}catch(l){P(""),a(!0),console.log(l),f(!1)}I(!0)},children:"Load Properties"})})]})]}),(0,u.jsx)("div",{className:"manual-property-results",children:(0,u.jsx)("div",{className:"results-block",children:0!==E.length||M?M&&0===$.length?(0,u.jsx)("h3",{className:"sub-title",children:"We couldn't find anything that matched your search"}):M&&$.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("h3",{className:"sub-title",children:["You have ",$.length," matching results"]}),(0,u.jsx)("div",{className:"results-details",children:$?$.map(((e,s)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("h5",{className:"row-value",children:s+1}),(0,u.jsxs)("div",{className:"results-items",children:[(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"catchment"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"Address: "}),(0,u.jsx)("h5",{className:"text-result",children:e.address})]})]}),(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"house"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"Floor area: "}),(0,u.jsxs)("h5",{className:"text-result",children:[e.floor_area," sq.m"]})]})]}),(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"location"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"Postcode: "}),(0,u.jsx)("h5",{className:"text-result",children:e.postcode})]})]}),(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"building"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"Floor level: "}),(0,u.jsx)("h5",{className:"text-result",children:e.final_floor_level})]})]}),(0,u.jsxs)("div",{className:"results-line",children:[(0,u.jsx)("div",{className:"result-icon",id:"search"}),(0,u.jsxs)("div",{className:"results-text",children:[(0,u.jsx)("h5",{className:"text-title",children:"last inspection: "}),(0,u.jsx)("h5",{className:"text-result",children:e.inspection_date})]})]})]}),(0,u.jsx)("div",{className:"buttons",children:o.some((s=>s.address===e.address&&s.postcode===e.postcode))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Saved"})}):d.some((s=>s.address===e.address&&s.postcode===e.postcode))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Archived"})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"heart-icon",onClick:()=>(async e=>{if((0,n.Hb)()){const a=[{rightmove_id:Math.floor(1e12*Math.random()).toString(),postcode:e.postcode,address:e.address,agent:"",type:"",addedOn:"",propertyType:"",price:null,bathrooms:null,bedrooms:null,let_available_date:null,date_added_db:null,url:"",current_epc:e.current_energy_efficiency,potential_epc:e.potential_energy_efficiency,action:"Saved",added_revised:null,reduced_revised:null}];try{const e=await t.Z.post("/api/epc_favourite/",a,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",e.data),O(new Set),_(1),N(),r()}catch(s){console.error("Error saving favourite:",s)}}else C("/access-denied"),console.log("logged out")})(e)}),(0,u.jsx)("button",{className:"expansion",style:{backgroundColor:(R.has(s),"#1A276C")},onClick:()=>(async e=>{const s=new Set(R),a=$[e];if(s.has(e))s.delete(e);else if(s.add(e),W[e]||"Lettings"!==U){if(!W[e]&&"Sales"===U){const s=await V(a.postcode);console.log("matches ->",s),G({...W,[e]:s})}}else{const s=await Y(a.postcode);console.log("matches ->",s),G({...W,[e]:s})}O(s)})(s),children:R.has(s)?"-":"+"})]})})]},s),R.has(s)&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("hr",{className:"property-divider"}),W[s]&&W[s].length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"matching-title",children:"Matching properties"}),(0,u.jsxs)("div",{className:"expanded-section-titles",children:[(0,u.jsx)("p",{className:"column",id:"column1",children:"#"}),(0,u.jsx)("p",{className:"column",id:"column2",children:"Address"}),(0,u.jsx)("p",{className:"column",id:"column3",children:"Postcode"}),(0,u.jsx)("p",{className:"column",id:"column4",children:"Price"}),(0,u.jsx)("p",{className:"column",id:"column5",children:"Bedrooms"}),(0,u.jsx)("p",{className:"column",id:"column6"})]})]}):"",(0,u.jsx)("div",{className:"expanded-section",children:W[s]&&W[s].length>0?W[s].map(((s,a)=>(0,u.jsxs)("div",{className:"expanded-content",children:[(0,u.jsxs)("p",{className:"column",id:"column1",onClick:()=>m(s.url),children:[a+1," "]}),(0,u.jsx)("p",{className:"column",id:"column2",onClick:()=>m(s.url),children:s.displayAddress}),(0,u.jsx)("p",{className:"column",id:"column3",onClick:()=>m(s.url),children:s.postcode}),(0,u.jsx)("p",{className:"column",id:"column4",onClick:()=>m(s.url),children:s.price}),(0,u.jsx)("p",{className:"column",id:"column5",onClick:()=>m(s.url),children:s.bedrooms}),(0,u.jsx)("div",{className:"column",id:"column6",children:o.some((e=>e.rightmove_id===s.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Saved"})}):d.some((e=>e.rightmove_id===s.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Archived"})}):(0,u.jsx)("div",{className:"heart-icon",onClick:()=>(async(e,s)=>{if((0,n.Hb)()){const l=[{rightmove_id:e.rightmove_id,postcode:e.postcode,address:s.address,agent:e.agent,type:e.type,addedOn:e.addedOn,propertyType:e.propertyType,price:e.price,bathrooms:e.bathrooms,bedrooms:e.bedrooms,let_available_date:e.let_available_date,date_added_db:e.date_added_db,url:e.url,current_epc:e.current_epc,potential_epc:e.potential_epc,action:"Saved",added_revised:e.added_revised,reduced_revised:e.reduced_revised}];try{const e=await t.Z.post("/api/epc_favourite/",l,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",e.data),_(1),N(),r()}catch(a){console.error("Error saving favourite:",a)}}else C("/access-denied"),console.log("logged out")})(s,e)})})]},a))):(0,u.jsxs)("p",{className:"denied",children:["No matching properties found for ",e.address,"."]})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):""})]}):"":(0,u.jsx)("h3",{className:"sub-title",children:"Start new search to see results"})})})]}),(0,u.jsx)(x,{savedActionShow:p,handleSavedActionClose:j,setLeadGenSection:v,latestFavourites:g})]})};var v=e=>{let{propertyRemoveShow:s,handleRemovePropertyClose:a,removeProperty:l}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsxs)("div",{className:"core-body",children:[(0,u.jsx)("h3",{className:"message",children:"Are you sure you don't want to see these properties any more?"}),(0,u.jsx)("h3",{className:"sub-message",children:"Once you do this, they won't appear in your latest or saved properties."})]}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:l,children:"Remove"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Go back"})]})]})})})})})},g=a(18622);var N=e=>{let{archivedActionShow:s,handleArchivedActionClose:a,setLeadGenSection:l,latestFavourites:t}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsx)("div",{className:"core-body",children:(0,u.jsxs)("h3",{className:"message",children:["We've added ",1===t?`${t} property`:`${t} properties`," to your archived list \ud83e\udd1d"]})}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:()=>{l("Archived properties"),a()},children:"Go to archived"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})},_=a(21830),y=a.n(_);var b=e=>{let{savedProperties:s,userData:a,csvData:c,setCsvData:r,getCurrentDate:o,handleVisitUrl:d,loadUserData:h,setSavedProperties:p,setLatestFavourites:x,latestFavourites:j,setLeadGenSection:v}=e;const _=(0,i.s0)(),[b,f]=(0,l.useState)("Grid"),[C,k]=(0,l.useState)({}),[w,S]=(0,l.useState)({}),[B,A]=(0,l.useState)({}),[F,D]=(0,l.useState)([]),[T,E]=(0,l.useState)(!1),[L,$]=(0,l.useState)([]),[P,M]=(0,l.useState)([]),[I,U]=(0,l.useState)("Live"),[Z,z]=(0,l.useState)(!1),[H,R]=(0,l.useState)(""),[O,W]=(0,l.useState)(""),[G,Y]=(0,l.useState)(""),[V,J]=(0,l.useState)(""),[q,X]=(0,l.useState)(""),[K,Q]=(0,l.useState)(""),[ee,se]=(0,l.useState)(""),[ae,le]=(0,l.useState)([]),[te,ie]=(0,l.useState)([]);(0,l.useEffect)((()=>{if(s){let e=s;H&&(e=e.filter((e=>e.channel===H))),O&&(e=e.filter((e=>e.postcode.toUpperCase().startsWith(O.toUpperCase())))),G&&(e=e.filter((e=>parseInt(e.bedrooms)>=parseInt(G)))),V&&(e=e.filter((e=>parseInt(e.bedrooms)<=parseInt(V)))),q&&(e=e.filter((e=>parseInt(e.price_numeric)>=parseInt(q)))),K&&(e=e.filter((e=>parseInt(e.price_numeric)<=parseInt(K)))),ee&&(e=e.filter((e=>parseInt(e.live_tracking)===parseInt(ee))));const a=e.filter((e=>"Off Market"===e.market_status)),l=e.filter((e=>"Live"===e.market_status));M(a),$(l)}}),[s,H,O,G,V,q,K,ee]),(0,l.useEffect)((()=>{"rent"===H?(le(ce),ie(ce)):"sale"===H?(le(re),ie(re)):(le([]),ie([]))}),[H]);const ne=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"}],ce=[...Array.from({length:9},((e,s)=>({value:""+(100+100*s),label:"\xa3"+(100+100*s)}))),...Array.from({length:5},((e,s)=>({value:""+(1e3+200*s),label:"\xa3"+(1e3+200*s)}))),...Array.from({length:8},((e,s)=>({value:""+(2e3+250*s),label:"\xa3"+(2e3+250*s)}))),...Array.from({length:8},((e,s)=>({value:""+(4e3+500*s),label:"\xa3"+(4e3+500*s)}))),...Array.from({length:4},((e,s)=>({value:""+(8e3+1e3*s),label:"\xa3"+(8e3+1e3*s)}))),...Array.from({length:4},((e,s)=>({value:""+(12e3+2e3*s),label:"\xa3"+(12e3+2e3*s)})))],re=[...Array.from({length:9},((e,s)=>({value:""+(1e5+1e5*s),label:`\xa3${(1e5+1e5*s).toLocaleString()}`}))),...Array.from({length:5},((e,s)=>({value:""+(1e6+2e5*s),label:`\xa3${(1e6+2e5*s).toLocaleString()}`}))),...Array.from({length:8},((e,s)=>({value:""+(2e6+25e4*s),label:`\xa3${(2e6+25e4*s).toLocaleString()}`}))),...Array.from({length:8},((e,s)=>({value:""+(4e6+5e5*s),label:`\xa3${(4e6+5e5*s).toLocaleString()}`}))),...Array.from({length:4},((e,s)=>({value:""+(8e6+1e6*s),label:`\xa3${(8e6+1e6*s).toLocaleString()}`}))),...Array.from({length:6},((e,s)=>({value:""+(12e6+2e6*s),label:`\xa3${(12e6+2e6*s).toLocaleString()}`})))];(0,l.useEffect)((()=>{if(F){const e=(e=>e.map(((e,s)=>({item:s+1,url:e.url,address:e.address,postcode:e.postcode,addressPostcode:`${e.address}, ${e.postcode}`,addedOn:e.added_revised,property_type:e.property_type,price:e.price,bedrooms:e.bedrooms,bathrooms:e.bathrooms,let_available_date:e.let_available_date,date_added:e.date_added_db,agent:e.agent,channel:e.channel,owner_name:e.owner_name,owner_email:e.owner_email,owner_mobile:e.owner_mobile,emails_sent:e.emails_sent,letters_sent:e.letters_sent,hand_cards:e.hand_cards,notes:e.notes}))))(F);r(e)}}),[F]);const[oe,de]=(0,l.useState)(!1),he=e=>{de(!0),D([])};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"results-block",children:s&&s.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"property-insight-nav",children:(0,u.jsxs)("div",{className:"property-insight-buttons",children:[(0,u.jsx)("h3",{className:"insight-button "+("Live"===I?"active":"inactive"),id:"left",onClick:()=>U("Live"),children:"Live properties"}),(0,u.jsx)("h3",{className:"insight-button "+("Off Market"===I?"active":"inactive"),id:"right",onClick:()=>U("Off Market"),children:"Withdrawn or sold"})]})}),(0,u.jsxs)("div",{className:"title-section",children:[(0,u.jsxs)("h3",{className:"sub-title",children:["You have ",L&&"Live"===I?`${L.length} on market`:P&&"Off Market"===I?`${P.length} off market`:""," properties ready to be extracted"]}),(0,u.jsxs)("div",{className:"tracking-actions",children:[a&&a.company_favourites&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g.ZP,{className:"select-dropdown",options:[{value:"export",label:"Extract"},{value:"archive",label:"Archive"},{value:"letter",label:"Letters"}],onChange:e=>{"export"===e.value&&(document.querySelector(".csv-link").click(),D([])),"archive"===e.value?(async e=>{if((0,n.Hb)())try{const s=await t.Z.put("/api/epc_favourite/update_favourites/",{favourite_ids:e},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",s.data),x(e.length),h(),he(),D([])}catch(s){console.error("Error updating favorite:",s)}else _("/access-denied"),console.log("logged out")})(F.map((e=>e.rightmove_id))):"letter"===e.value&&(async e=>{if((0,n.Hb)())try{const s=await t.Z.put("/api/epc_favourite/move_to_letters/",{favourite_ids:e},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",s.data),y().fire({title:"\ud83d\ude0e action complete",text:`${e.length} properties prepared for outbound letters`,confirmButtonText:"Go to letter hub",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}).then((e=>{e.isConfirmed&&v("Letter campaigns")})),h(),D([])}catch(s){console.error("Error updating favorite:",s)}else _("/access-denied"),console.log("logged out")})(F.map((e=>e.rightmove_id)))},isSearchable:!1,placeholder:"Select an action"}),(0,u.jsx)(m.CSVLink,{data:c||[],className:"export csv-link",filename:`Wittle Lead Generator Extract - ${o()}.csv`,style:{display:"none"}})]}),(0,u.jsx)("div",{className:"filter-icon "+(Z?"active":"inactive"),onClick:()=>z(!Z),style:{backgroundColor:Z?"#1A276C":"inherit"}})]})]}),Z?(0,u.jsxs)("div",{className:"filter-row-section "+(Z?"active":"inactive"),children:[(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Channel"}),(0,u.jsxs)("select",{onChange:e=>R(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select..."}),(0,u.jsx)("option",{value:"sale",children:"Sale"}),(0,u.jsx)("option",{value:"rent",children:"Rent"})]})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Postcode"}),(0,u.jsx)("input",{className:"filter-input",onChange:e=>W(e.target.value)})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Bedrooms"}),(0,u.jsxs)("select",{className:"small",value:G,onChange:e=>Y(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Min"}),ne.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,u.jsxs)("select",{className:"small",value:V,onChange:e=>J(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Max"}),ne.filter((e=>e.value>=G)).map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Price"}),(0,u.jsxs)("select",{className:"small",value:q,onChange:e=>X(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Min"}),ae.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,u.jsxs)("select",{className:"small",value:K,onChange:e=>Q(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Max"}),te.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Tracking"}),(0,u.jsxs)("select",{onChange:e=>se(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"All"}),(0,u.jsx)("option",{value:"1",children:"Yes"}),(0,u.jsx)("option",{value:"0",children:"No"})]})]}),(0,u.jsx)("button",{className:"clear-filters",onClick:()=>{R(""),W(""),Y(""),J(""),se(""),X(""),Q("")},children:"Clear"})]}):"",(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:"Live"===I&&F&&L?F.length===L.length&&L.length>0:!("Off Market"!==I||!F||!P)&&(F.length===P.length&&P.length>0),onChange:e=>{e.target.checked?("Live"===I?D(L):"Off Market"===I&&D(P),E(!0)):(D([]),E(!1))}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Channel"})}),(0,u.jsx)("div",{id:"column7",className:"column",children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9saved",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column10saved",className:"column",children:(0,u.jsx)("h5",{})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details archive "+(Z?"active":"inactive"),children:("Live"===I?L:P).map(((e,a)=>{const l=C[e.rightmove_id],i=w[e.rightmove_id],c=F.some((s=>s.rightmove_id===e.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(c?"highlighted-row":""),children:[(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:F.some((s=>s.rightmove_id===e.rightmove_id)),onChange:a=>((e,a)=>{const l={...a};console.log("selected row ->",a),e.target.checked?D((e=>[...e,l])):D((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id)))),E(s.length===F.length)})(a,e)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:a+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:e.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:null===e.added_revised?"N/a":e.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:null===e.reduced_revised?"N/a":e.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:e.channel})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:e.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:e.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9saved",onClick:()=>d(e.url),children:(0,u.jsx)("h5",{children:e.agent})}),"Grid"===b?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("div",{className:"column",id:"column10saved",onClick:()=>(e=>{const a=s.find((s=>s.rightmove_id===e));k((s=>({...s,[e]:!s[e]}))),C[e]||B[e]||A((s=>({...s,[e]:{owner_name:a.owner_name||"",owner_email:a.owner_email||"",owner_mobile:a.owner_mobile||null,emails_sent:a.emails_sent||null,letters_sent:a.letters_sent||null,hand_cards:a.hand_cards||null,notes:a.notes||"",live_tracking:a.live_tracking||0}})))})(e.rightmove_id),children:(0,u.jsx)("h5",{className:"expander",children:l?"v":"^"})})}):"Table"===b?(0,u.jsx)(u.Fragment,{}):""]}),l&&(0,u.jsxs)("div",{className:"expanded-tracking-details",children:[(0,u.jsxs)("div",{className:"expanded-tracking-content",children:[(0,u.jsxs)("div",{className:"tracking-left",children:[(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Owner name: "}),i?(0,u.jsx)("input",{type:"text",value:B[e.rightmove_id].owner_name||"",onChange:s=>A({...B,[e.rightmove_id]:{...B[e.rightmove_id],owner_name:s.target.value}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.owner_name})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Owner email: "}),i?(0,u.jsx)("input",{type:"text",value:B[e.rightmove_id].owner_email||"",onChange:s=>A({...B,[e.rightmove_id]:{...B[e.rightmove_id],owner_email:s.target.value}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.owner_email})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Owner phone: "}),i?(0,u.jsx)("input",{type:"text",value:B[e.rightmove_id].owner_mobile||null,onChange:s=>A({...B,[e.rightmove_id]:{...B[e.rightmove_id],owner_mobile:s.target.value}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.owner_mobile})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Currently Tracking: "}),i?(0,u.jsx)("input",{type:"checkbox",checked:!!B[e.rightmove_id].live_tracking,onChange:s=>A({...B,[e.rightmove_id]:{...B[e.rightmove_id],live_tracking:s.target.checked?1:0}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:1===e.live_tracking?"Yes":"No"})]})]}),(0,u.jsxs)("div",{className:"tracking-middle",children:[(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Emails sent: "}),i?(0,u.jsx)("input",{type:"text",value:B[e.rightmove_id].emails_sent||0,onChange:s=>A({...B,[e.rightmove_id]:{...B[e.rightmove_id],emails_sent:s.target.value}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.emails_sent})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Letters sent: "}),i?(0,u.jsx)("input",{type:"text",value:B[e.rightmove_id].letters_sent||0,onChange:s=>A({...B,[e.rightmove_id]:{...B[e.rightmove_id],letters_sent:s.target.value}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.letters_sent})]}),(0,u.jsxs)("div",{className:"tracking-row",children:[(0,u.jsx)("h3",{className:"row-title",children:"Hand written cards: "}),i?(0,u.jsx)("input",{type:"text",value:B[e.rightmove_id].hand_cards||0,onChange:s=>A({...B,[e.rightmove_id]:{...B[e.rightmove_id],hand_cards:s.target.value}}),className:"row-input wide"}):(0,u.jsx)("h3",{className:"row-result",children:e.hand_cards})]})]}),(0,u.jsx)("div",{className:"tracking-right",children:(0,u.jsx)("div",{className:"tracking-row",children:i?(0,u.jsx)("textarea",{placeholder:"Notes",value:B[e.rightmove_id].notes||"",onChange:s=>A({...B,[e.rightmove_id]:{...B[e.rightmove_id],notes:s.target.value}})}):(0,u.jsx)("h3",{className:"row-result",children:e.notes})})})]}),(0,u.jsxs)("div",{className:"expanded-tracking-actions",children:[(0,u.jsx)("button",{className:"save",onClick:()=>{i?(async e=>{if((0,n.Hb)())try{await t.Z.patch(`/api/epc_favourite/update_favourites/${e}/`,B[e],{headers:{Authorization:`Bearer ${(0,n.hP)()}`}}),h(),S((s=>({...s,[e]:!1})))}catch(s){console.error("Error updating favourite:",s)}else _("/access-denied"),console.log("logged out")})(e.rightmove_id):((e,s)=>{w[e]||A((a=>({...a,[e]:{owner_name:s.owner_name||"",owner_email:s.owner_email||"",owner_mobile:s.owner_mobile||null,emails_sent:s.emails_sent||null,letters_sent:s.letters_sent||null,hand_cards:s.hand_cards||null,notes:s.notes||"",live_tracking:s.live_tracking||0}}))),S((s=>({...s,[e]:!s[e]})))})(e.rightmove_id,e)},children:i?"Save":"Edit"}),(0,u.jsx)("button",{className:"delete",onClick:()=>(async e=>{if((0,n.Hb)())try{await t.Z.delete("/api/epc_favourite/delete_favourite/",{headers:{Authorization:`Bearer ${(0,n.hP)()}`},data:{rightmove_id:e}}),h()}catch(s){console.error("Error updating favourite:",s)}else _("/access-denied"),console.log("logged out")})(e.rightmove_id),children:"Delete"})]})]}),(0,u.jsx)("hr",{className:"property-divider"})]})}))})]})]}):(0,u.jsx)("h3",{className:"sub-title",children:"You haven't saved any properties yet! Once you've saved some properties, you'll be able to extract them."})}),(0,u.jsx)(N,{archivedActionShow:oe,handleArchivedActionClose:()=>{de(!1)},setLeadGenSection:v,latestFavourites:j})]})};var f=e=>{let{hiddenSavedShow:s,handleHiddenSavedClose:a,setLeadGenSection:l,latestFavourites:t}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsx)("div",{className:"core-body",children:(0,u.jsxs)("h3",{className:"message",children:["We've moved ",1===t?`${t} property`:`${t} properties`," back to your saved list \ud83e\udd1d"]})}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:()=>{l("Saved properties"),a()},children:"Go to saved"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})};var C=e=>{let{hiddenProperties:s,handleVisitUrl:a,loadUserData:c,setLeadGenSection:r,latestFavourites:o,setLatestFavourites:d}=e;const h=(0,i.s0)(),[m,p]=(0,l.useState)([]),[x,j]=(0,l.useState)(!1),[v,g]=(0,l.useState)(!1),N=e=>{g(!0),p([])};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"results-block",children:s&&s.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"title-section",children:[(0,u.jsxs)("h3",{className:"sub-title",children:["You have hidden ",s.length," properties"]}),(0,u.jsx)("div",{className:"action-section hidden",children:(0,u.jsx)("div",{className:"save-section",children:(0,u.jsx)("h3",{onClick:()=>(async e=>{if((0,n.Hb)()){console.log(e);const a=e.map((e=>e.rightmove_id));try{const e=await t.Z.delete("/api/epc_favourite/delete_favourite/multiple/",{headers:{Authorization:`Bearer ${(0,n.hP)()}`},data:{rightmove_ids:a}});d(a.length),c(),N(),p([]),console.log("Response:",e.data)}catch(s){console.error("Error deleting favourites:",s)}}else h("/access-denied"),console.log("logged out")})(m),children:"Move properties"})})})]}),(0,u.jsx)("div",{className:"saved-select-row hidden",children:(0,u.jsx)("div",{className:"select-all-box hidden",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:m.length===s.length&&s.length>0,onChange:e=>{e.target.checked?(p(s),j(!0)):(p([]),j(!1))}}),(0,u.jsx)("label",{className:"label"})]})})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Channel"})}),(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsx)("h5",{})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details archive",children:s?s.map(((e,l)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:l+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.property_type})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.agent})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.channel})}),(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:m.some((s=>s.rightmove_id===e.rightmove_id)),onChange:a=>((e,a)=>{const l={...a};e.target.checked?p((e=>[...e,l])):p((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id)))),j(s.length===m.length)})(a,e)}),(0,u.jsx)("label",{className:"label"})]})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):(0,u.jsx)("h3",{className:"sub-title",children:"You don't have any hidden properties. If you're not interested in a property, hide it to remove it from the main results page."})}),(0,u.jsx)(f,{hiddenSavedShow:v,handleHiddenSavedClose:()=>{g(!1)},setLeadGenSection:r,latestFavourites:o})]})};var k=e=>{let{archviedSavedShow:s,handleArchivedSavedClose:a,setLeadGenSection:l,latestFavourites:t}=e;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"saved-action-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"inner-wrapper",children:[(0,u.jsx)("div",{className:"header-section",children:(0,u.jsx)("h1",{onClick:a,children:"X"})}),(0,u.jsx)("div",{className:"core-body",children:(0,u.jsxs)("h3",{className:"message",children:["We've moved ",1===t?`${t} property`:`${t} properties`," back to your saved list \ud83e\udd1d"]})}),(0,u.jsxs)("div",{className:"cta-section",children:[(0,u.jsx)("button",{className:"saved",onClick:()=>{l("Saved properties"),a()},children:"Go to saved"}),(0,u.jsx)("button",{className:"stay",onClick:a,children:"Stay here"})]})]})})})})})};var w=e=>{let{archivedProperties:s,handleVisitUrl:a,loadUserData:c,setLeadGenSection:r,latestFavourites:o,setLatestFavourites:d}=e;const h=(0,i.s0)(),[m,p]=(0,l.useState)([]),[x,j]=(0,l.useState)(!1),[v,g]=(0,l.useState)(!1),N=e=>{g(!0),p([])};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"results-block",children:s&&s.length>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"title-section",children:[(0,u.jsxs)("h3",{className:"sub-title",children:["You have archived ",s.length," properties"]}),(0,u.jsx)("div",{className:"action-section hidden",children:(0,u.jsx)("div",{className:"save-section",children:(0,u.jsx)("h3",{onClick:()=>(async e=>{if((0,n.Hb)())try{const s=e.map((e=>e.rightmove_id)),a=await t.Z.put("/api/epc_favourite/update_favourites/archive-to-saved/",{favourite_ids:s},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",a.data),d(s.length),c(),N(),p([])}catch(s){console.error("Error saving favourite:",s)}else h("/access-denied"),console.log("logged out")})(m),children:"Move properties"})})})]}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsxs)("div",{id:"column11",className:"column",children:[(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:m.length===s.length&&s.length>0,onChange:e=>{e.target.checked?(p(s),j(!0)):(p([]),j(!1))}}),(0,u.jsx)("label",{className:"label"})]}),"                "]}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Channel"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details archive",children:s?s.map(((e,l)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:m.some((s=>s.rightmove_id===e.rightmove_id)),onChange:a=>((e,a)=>{const l={...a};e.target.checked?p((e=>[...e,l])):p((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id)))),j(s.length===m.length)})(a,e)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:l+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.property_type})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.channel})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>a(e.url),children:(0,u.jsx)("h5",{children:e.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):(0,u.jsx)("h3",{className:"sub-title",children:"You haven't archived any properties yet! Once you've extracted properties to your files, you&apo;ll see them here."})}),(0,u.jsx)(k,{archviedSavedShow:v,handleArchivedSavedClose:e=>{g(!1)},setLeadGenSection:r,latestFavourites:o})]})},S=(a(75985),a(75314)),B=a(67842),A=a(69584),F=a(58340);var D=e=>{let{createTemplateShow:s,handleCreateTemplateClose:a,signature:i,loadUserData:c,templateAction:r,currentTemplate:o,exampleData:d,setCampaignLoading:h}=e;const[m,x]=(0,l.useState)(!1),[j,v]=(0,l.useState)({template_name:"",template_body_1:"",template_body_2:"",template_body_3:"",template_body_4:"",template_body_5:"",template_type:"Basic template",sender_name:1,sender_company:1,sender_role:1,sender_mobile:1,sender_landline:1,sender_email:1,sender_footer:1,logo_width:250,logo_height:50,logo_position:"Right",opening:"Dear ",closing:"Best wishes"});(0,l.useEffect)((()=>{"edit"===r?v(o):"new"===r&&v({template_name:"",template_body_1:"",template_body_2:"",template_body_3:"",template_body_4:"",template_body_5:"",template_type:"Basic template",sender_name:1,sender_company:1,sender_role:1,sender_mobile:1,sender_landline:1,sender_email:1,sender_footer:1,logo_width:250,logo_height:50,logo_position:"Right",opening:"Dear ",closing:"Best wishes"})}),[r]);const g=e=>{const{name:s,value:a}=e.target;if(j){const e=2200-Object.keys(j).reduce(((e,a)=>a!==s?e+(j[a]&&j[a].length||0):e),0),l=a.slice(0,Math.max(0,e));v((e=>({...e,[s]:l})))}},N=e=>{v((s=>({...s,[e]:1===s[e]?0:1})))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"create-template-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"template-wrapper",children:[(0,u.jsxs)("div",{className:"template-header",children:[(0,u.jsx)("h1",{children:"Wittle letter template builder"}),(0,u.jsx)("div",{className:"close",onClick:a,children:"x"})]}),(0,u.jsxs)("div",{className:"template-body",children:[(0,u.jsxs)("div",{className:"template-inputs",children:[(0,u.jsxs)("div",{className:"input-top",children:[(0,u.jsx)("h3",{className:"template-name",children:"Template name"}),(0,u.jsx)("input",{className:"template-name-input",value:j.template_name,onChange:e=>v({...j,template_name:e.target.value})})]}),(0,u.jsxs)("div",{className:"input-details",children:[(0,u.jsx)("div",{className:"sub-title",children:(0,u.jsx)("h3",{children:"Details"})}),(0,u.jsxs)("div",{className:"details-array",children:[(0,u.jsxs)("div",{className:"detail-line",children:[(0,u.jsx)("h3",{children:"Intro"}),(0,u.jsx)("input",{className:"detail-inputs",value:j.opening,onChange:e=>v({...j,opening:e.target.value})})]}),(0,u.jsxs)("div",{className:"detail-line",children:[(0,u.jsx)("h3",{children:"Outro"}),(0,u.jsx)("input",{className:"detail-inputs",value:j.closing,onChange:e=>v({...j,closing:e.target.value})})]}),(0,u.jsxs)("div",{className:"detail-line",children:[(0,u.jsx)("h3",{children:"Name"}),(0,u.jsx)(B.Z,{checked:1===j.sender_name,onChange:()=>N("sender_name"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,u.jsxs)("div",{className:"detail-line",children:[(0,u.jsx)("h3",{children:"Company"}),(0,u.jsx)(B.Z,{checked:1===j.sender_company,onChange:()=>N("sender_company"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,u.jsxs)("div",{className:"detail-line",children:[(0,u.jsx)("h3",{children:"Role"}),(0,u.jsx)(B.Z,{checked:1===j.sender_role,onChange:()=>N("sender_role"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,u.jsxs)("div",{className:"detail-line",children:[(0,u.jsx)("h3",{children:"Mobile"}),(0,u.jsx)(B.Z,{checked:1===j.sender_mobile,onChange:()=>N("sender_mobile"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,u.jsxs)("div",{className:"detail-line",children:[(0,u.jsx)("h3",{children:"Landline"}),(0,u.jsx)(B.Z,{checked:1===j.sender_landline,onChange:()=>N("sender_landline"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,u.jsxs)("div",{className:"detail-line",children:[(0,u.jsx)("h3",{children:"Email"}),(0,u.jsx)(B.Z,{checked:1===j.sender_email,onChange:()=>N("sender_email"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]}),(0,u.jsxs)("div",{className:"detail-line",children:[(0,u.jsx)("h3",{children:"Footer"}),(0,u.jsx)(B.Z,{checked:1===j.sender_footer,onChange:()=>N("sender_footer"),onColor:"#ED6B86",offColor:"#D5D5D5",uncheckedIcon:null,checkedIcon:null})]})]})]}),(0,u.jsx)("div",{className:"input-details",children:(0,u.jsxs)("div",{className:"sub-title",children:[(0,u.jsx)("h3",{children:"Logo details"}),(0,u.jsxs)("div",{className:"logo-position",children:[(0,u.jsx)("button",{className:"position-button",onClick:()=>v({...j,logo_position:"Left"}),style:{backgroundColor:"Left"===j.logo_position?"#ED6B86":"inherit"},children:"Left"}),(0,u.jsx)("button",{className:"position-button",onClick:()=>v({...j,logo_position:"Centre"}),style:{backgroundColor:"Centre"===j.logo_position?"#ED6B86":"inherit"},children:"Centre"}),(0,u.jsx)("button",{className:"position-button",onClick:()=>v({...j,logo_position:"Right"}),style:{backgroundColor:"Right"===j.logo_position?"#ED6B86":"inherit"},children:"Right"})]}),(0,u.jsxs)("div",{className:"logo-sizing",children:[(0,u.jsxs)("div",{className:"logo-size-item",children:[(0,u.jsx)("h3",{children:"Height"}),(0,u.jsx)("input",{type:"number",max:125,value:j.logo_height,onChange:e=>v({...j,logo_height:e.target.value})})]}),(0,u.jsxs)("div",{className:"logo-size-item",children:[(0,u.jsx)("h3",{children:"Width"}),(0,u.jsx)("input",{type:"number",max:350,value:j.logo_width,onChange:e=>v({...j,logo_width:e.target.value})})]})]})]})}),(0,u.jsxs)("div",{className:"input-body",children:[(0,u.jsxs)("div",{className:"sub-title",children:[(0,u.jsx)("h3",{children:"Template body"}),j?(0,u.jsxs)("div",{className:"characters",children:[2200-((j.template_body_1?j.template_body_1.length:0)+(j.template_body_2?j.template_body_2.length:0)+(j.template_body_3?j.template_body_3.length:0)+(j.template_body_4?j.template_body_4.length:0)+(j.template_body_5?j.template_body_5.length:0))," characters remaining"]}):""]}),(0,u.jsxs)("div",{className:"text-block",children:[(0,u.jsx)("div",{className:"sub-sub-title",children:(0,u.jsx)("h3",{children:"Paragraph 1"})}),(0,u.jsx)("textarea",{name:"template_body_1",value:j.template_body_1,className:"input-text-body",onChange:g}),(0,u.jsx)("div",{className:"sub-sub-title",children:(0,u.jsx)("h3",{children:"Paragraph 2"})}),(0,u.jsx)("textarea",{name:"template_body_2",value:j.template_body_2,className:"input-text-body",onChange:g}),(0,u.jsx)("div",{className:"sub-sub-title",children:(0,u.jsx)("h3",{children:"Paragraph 3"})}),(0,u.jsx)("textarea",{name:"template_body_3",value:j.template_body_3,className:"input-text-body",onChange:g}),(0,u.jsx)("div",{className:"sub-sub-title",children:(0,u.jsx)("h3",{children:"Paragraph 4"})}),(0,u.jsx)("textarea",{name:"template_body_4",value:j.template_body_4,className:"input-text-body",onChange:g}),(0,u.jsx)("div",{className:"sub-sub-title",children:(0,u.jsx)("h3",{children:"Paragraph 5"})}),(0,u.jsx)("textarea",{name:"template_body_5",value:j.template_body_5,className:"input-text-body",onChange:g})]})]}),(0,u.jsx)("div",{className:"save-section",children:"new"===r?(0,u.jsx)("button",{onClick:()=>(async()=>{h(!0),a();const e=d.address.split(",").map((e=>e.trim())).slice(0,4);d.postcode&&e.push(d.postcode),console.log("template ->",j);const s=F.renderToStaticMarkup((0,u.jsx)(A.default,{signature:i,selectedTemplate:j,ownerData:d.owner_name,address:e})),l={...j,htmlContent:s,recipient:d};console.log("template body ->",l);try{const e=await t.Z.post("/api/letter_templates/add/",l,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Letter template ->",e),await c(),y().fire({title:"\ud83d\ude0e Action complete",text:"New template added successfully",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}catch(r){console.error("Error adding template:",r),y().fire({title:"\ud83e\udee1 Wittle alerts",text:"There was an issue adding your template",confirmButtonText:"Try Again \ud83d\udd04",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}finally{h(!1)}})(),children:"Save template"}):"edit"===r?(0,u.jsx)("button",{onClick:()=>(async()=>{x(!0);try{const e=await t.Z.put(`/api/letter_templates/edit/${j.id}/`,j,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Letter template ->",e),c(),a(),y().fire({title:"\ud83d\ude0e action complete",text:"Template updated",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}catch(e){console.error("Error updating template:",e)}finally{x(!1)}})(),children:"Save template"}):""})]}),(0,u.jsxs)("div",{className:"template-section",children:[(0,u.jsxs)("div",{className:"template-content",children:[(0,u.jsx)("div",{className:"logo-section",style:{justifyContent:"Left"===j.logo_position?"Flex-start":"Centre"===j.logo_position?"Center":"flex-end"},children:(0,u.jsx)("div",{className:"logo-box",style:{justifyContent:"Left"===j.logo_position?"Flex-start":"Centre"===j.logo_position?"Center":"flex-end",height:`${j.logo_height}px`,width:`${j.logo_width}px`},children:i?(0,u.jsx)("img",{src:i.logo,alt:"Logo",className:"logo"}):""})}),(0,u.jsxs)("div",{className:"address-section",children:[(0,u.jsx)("h3",{className:"address-details",children:"Owner"}),(0,u.jsx)("h3",{className:"address-details",children:"Address line 1"}),(0,u.jsx)("h3",{className:"address-details",children:"Address line 2"}),(0,u.jsx)("h3",{className:"address-details",children:"Address line 3"}),(0,u.jsx)("h3",{className:"address-details",children:"Postcode"})]}),j?(0,u.jsxs)("div",{className:"body-section",children:[(0,u.jsxs)("div",{className:"letter-intro",children:[(0,u.jsxs)("h3",{className:"intro",children:[j.opening," "]}),(0,u.jsx)("h3",{className:"intro",children:" Homeowner,"})]}),(0,u.jsx)("h3",{className:"letter-paragraph",children:j.template_body_1}),(0,u.jsx)("h3",{className:"letter-paragraph",children:j.template_body_2}),(0,u.jsx)("h3",{className:"letter-paragraph",children:j.template_body_3}),(0,u.jsx)("h3",{className:"letter-paragraph",children:j.template_body_4}),(0,u.jsx)("h3",{className:"letter-paragraph",children:j.template_body_5})]}):"",(0,u.jsxs)("div",{className:"sign-off-section",children:[(0,u.jsx)("h3",{className:"sign-off-line",children:j.closing}),j.sender_name?(0,u.jsxs)("h3",{className:"sign-off-line",children:[i.first_name," ",i.last_name]}):"",j.sender_role?(0,u.jsx)("h3",{className:"sign-off-line",children:i.role}):"",j.sender_company?(0,u.jsx)("h3",{className:"sign-off-line",children:i.company_name}):"",j.sender_mobile?(0,u.jsx)("h3",{className:"sign-off-line",children:i.mobile}):"",j.sender_landline?(0,u.jsx)("h3",{className:"sign-off-line",children:i.landline}):"",j.sender_email?(0,u.jsx)("h3",{className:"sign-off-line",children:i.email}):""]})]}),i&&j.sender_footer?(0,u.jsx)("h3",{className:"letter-footer",children:i.letter_footer}):""]})]})]})})})})})};a(25215);var T=e=>{let{createCampaignShow:s,handleCreateCampaignClose:a,letterTemplates:i,loadUserData:c,editData:r}=e;const[o,d]=(0,l.useState)(1),[h,m]=(0,l.useState)({campaign_name:"",campaign_status:"Not launched",campaign_start_date:null,campaign_type:"1 step",template_names:["","","","",""],template_dates:[null,null,null,null,null]});(0,l.useEffect)((()=>{if("None"!==r){m(r);const e=parseInt(r.campaign_type.split(" ")[0]);d(e)}else if(h){const e=parseInt(h.campaign_type.split(" ")[0]);d(e)}}),[r]);return(0,u.jsx)(p.Z,{show:s,onHide:a,backdrop:"static",className:"create-campaign-modal",children:(0,u.jsx)(p.Z.Body,{children:(0,u.jsxs)("div",{className:"campaign-wrapper",children:[(0,u.jsxs)("div",{className:"campaign-header",children:[(0,u.jsx)("h2",{children:"Wittle campaign builder"}),(0,u.jsx)("div",{className:"close",onClick:a,children:"x"})]}),(0,u.jsx)("div",{className:"campaign-sub-header",children:(0,u.jsx)("h3",{children:"Set up your campaign sequences. Select your templates and the dates you'd like them to be sent \ud83d\udce9. You can add up to 5 steps."})}),(0,u.jsxs)("div",{className:"campaign-title-section",children:[(0,u.jsx)("h3",{children:"Campaign name"}),(0,u.jsx)("input",{name:"campaign_name",value:h.campaign_name,onChange:e=>{const{name:s,value:a}=e.target;m({...h,[s]:a})}})]}),(0,u.jsxs)("div",{className:"campaign-headers",children:[(0,u.jsx)("h3",{className:"step-header",children:"Step"}),(0,u.jsx)("h3",{className:"template-header",children:"Template"}),(0,u.jsx)("h3",{className:"date-title",children:"Send date"})]}),(0,u.jsxs)("div",{className:"campaign-stages",children:[o&&Array.from({length:o}).map(((e,s)=>(0,u.jsxs)("div",{className:"campaign-step",children:[(0,u.jsxs)("h3",{className:"step-column",children:["Step ",s+1]}),(0,u.jsxs)("select",{className:"template-dropdown",value:h[`template_${s+1}_name`]||"",onChange:e=>((e,s)=>{m({...h,[`template_${e+1}_name`]:s})})(s,e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select Template"}),i.map(((e,s)=>(0,u.jsx)("option",{value:e.template_name,children:e.template_name},s)))]}),0===s?(0,u.jsx)("div",{className:"on-launch",children:"On launch"}):(0,u.jsxs)("div",{className:"date-input-container",children:[(0,u.jsx)("input",{className:"date-input",type:"number",min:"0",value:h[`template_${s+1}_date`]||"",onChange:e=>((e,s)=>{0!==e&&m({...h,[`template_${e+1}_date`]:s})})(s,e.target.value)}),(0,u.jsx)("span",{className:"days-later",children:"days later"})]}),o&&o>1&&s===o-1&&(0,u.jsx)("h3",{className:"remove",onClick:()=>(()=>{const e=o;if(e>1){const s={campaign_type:`${e-1} step${e-1>1?"s":""}`};s[`template_${e}_name`]="",s[`template_${e}_date`]=null,m((e=>({...e,...s}))),d(e-1)}})(),children:"\u274c"})]},s))),(0,u.jsxs)("div",{className:"footer-buttons",children:[o&&o<5&&(0,u.jsx)("button",{className:"add-step",onClick:()=>{const e=o;if(e<5){const s=`${e+1} step${e+1>1?"s":""}`;m((a=>({...a,campaign_type:s,[`template_${e+1}_name`]:"",[`template_${e+1}_date`]:""}))),d(e+1)}},children:"Add Step"}),"None"===r?(0,u.jsx)("button",{className:"save-campaign",onClick:async()=>{try{await t.Z.post("/api/letter_campaigns/add/",h,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});c(),a(),y().fire({title:"\ud83d\ude0e action complete",text:"Campaign saved",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}catch(e){console.error("Failed to save the campaign",e),y().fire("Error","There was an issue saving the campaign.","error")}},children:"Save Campaign"}):(0,u.jsx)("button",{className:"save-campaign",onClick:async()=>{console.log("edit campaign id ->",r.id);try{await t.Z.put(`/api/letter_campaigns/edit/${r.id}/`,h,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});c(),a(),y().fire({title:"\ud83d\ude0e action complete",text:"Campaign updated",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}catch(e){console.error("Failed to save the campaign",e),y().fire("Error","There was an issue updating the campaign.","error")}},children:"Update Campaign"})]})]})]})})})};var E=e=>{let{letterTab:s,setLetterTab:a,letterCampaigns:i,loadUserData:c,letterTemplates:r,letterProperties:o,signature:d,editCredts:m,setEditCredits:p,initiateCheckoutSession:x,creditValue:j,addCreditValue:v,availableCredits:g}=e;const[N,_]=(0,l.useState)("Overview"),[b,f]=(0,l.useState)(""),[C,k]=(0,l.useState)("Leads"),[w,S]=(0,l.useState)(!1),[B,D]=(0,l.useState)([]),[E,L]=(0,l.useState)(!1),[$,P]=(0,l.useState)(),[M,I]=(0,l.useState)(),[U,Z]=(0,l.useState)(),[z,H]=(0,l.useState)(!1),[R,O]=(0,l.useState)(0);(0,l.useEffect)((()=>{if(o&&b){const e=o.filter((e=>e.letter_campaign===b.campaign_name)),s=o.filter((e=>"None"===e.letter_campaign));P(e),console.log("properties in campaign ->",e),console.log("properties not in campaign ->",s),I(s)}}),[o]);const W=e=>{S(!0)},G=()=>{S(!1)},Y=e=>{_("Specific"),f(e),console.log("selected campaign ->",e);const s=o.filter((s=>s.letter_campaign===e.campaign_name)),a=o.filter((e=>"None"===e.letter_campaign));P(s),I(a),console.log("properties in campaign ->",s),console.log("properties not in campaign ->",a)};(0,l.useEffect)((()=>{b&&"Live"===b.campaign_status&&(async()=>{try{const e=b.campaign_name,s=(await t.Z.get("/api/campaign_tracking/",{params:{campaign_name:e},headers:{Authorization:`Bearer ${(0,n.hP)()}`}})).data.reduce(((e,s)=>{const a=e.find((e=>e.target_address===s.target_address));if(a)a.steps[s.campaign_step-1]={status:s.status,step:s.campaign_step,pdf:s.pdf};else{const a=Array.from({length:s.max_step},(()=>null));a[s.campaign_step-1]={status:s.status,step:s.campaign_step,pdf:s.pdf},e.push({...s,steps:a})}return e}),[]),a=s.reduce(((e,s)=>Math.max(e,s.steps.length)),0);O(a),Z(s)}catch(e){console.error("Error fetching campaign analytics:",e)}})()}),[b]);function V(e){const s=["th","st","nd","rd"],a=new Date(e),l=a.getDate(),t=a.getMonth(),i=a.getFullYear();return`${l}${s[l<10||l>20?l%10:0]||s[0]} ${["January","February","March","April","May","June","July","August","September","October","November","December"][t]} ${i}`}return(0,u.jsx)(u.Fragment,{children:N&&"Overview"===N&&!z?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"top-line",children:[(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("My signatures"),style:{color:"My signatures"===s?"white":"#1A276C",backgroundColor:"My signatures"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"My signatures"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("Templates"),style:{color:"Templates"===s?"white":"#1A276C",backgroundColor:"Templates"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Templates"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("Campaigns"),style:{color:"Campaigns"===s?"white":"#1A276C",backgroundColor:"Campaigns"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Campaigns"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("Home"),style:{color:"Home"===s?"white":"#1A276C",backgroundColor:"Home"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Home"})]}),m?(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("input",{type:"number",className:"credit-input",value:j,onChange:v}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>x(j),children:"Add"}),(0,u.jsx)("h3",{className:"close-credits",onClick:()=>p(!1),children:"\u274c"})]}):(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("h3",{className:"credit-balance",children:g?`Current balance \xa3${g}`:""}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>p(!0),children:"Top up"})]})]}),(0,u.jsxs)("div",{className:"action-section letter",children:[i?(0,u.jsxs)("h3",{className:"template-total",children:["You have ",i.length," saved campaigns"]}):"",(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:()=>W(),children:"New campaign "})]})]}),(0,u.jsx)(T,{createCampaignShow:w,handleCreateCampaignClose:G,letterTemplates:r,loadUserData:c,editData:"None"}),(0,u.jsx)("div",{className:"template-list",children:(0,u.jsxs)("div",{className:"template-table",children:[(0,u.jsxs)("div",{className:"template-headers",children:[(0,u.jsx)("h3",{id:"column1",children:"#"}),(0,u.jsx)("h3",{id:"column2",children:"Name"}),(0,u.jsx)("h3",{id:"column3",children:"Type"}),(0,u.jsx)("h3",{id:"column4-campaign",children:"Status"}),(0,u.jsx)("h3",{id:"column5-campaign",children:"Launch date"}),(0,u.jsx)("h3",{id:"column6-campaign",children:"Duplicate"})]}),(0,u.jsx)("div",{className:"template-content",children:i?[...i].sort(((e,s)=>e.id-s.id)).map(((e,s)=>(0,u.jsxs)("div",{className:"template-item",children:[(0,u.jsx)("h3",{className:"template-number",id:"column1",onClick:()=>Y(e),children:s+1}),(0,u.jsx)("h3",{className:"template-name",id:"column2",onClick:()=>Y(e),children:e.campaign_name}),(0,u.jsx)("h3",{className:"template-type",id:"column3",onClick:()=>Y(e),children:e.campaign_type}),(0,u.jsx)("h3",{className:"template-status",id:"column4-campaign",onClick:()=>Y(e),children:e.campaign_status}),(0,u.jsx)("h3",{className:"launch-date",id:"column5-campaign",children:e.campaign_start_date?V(e.campaign_start_date):"N/a"}),(0,u.jsx)("h3",{className:"duplicate",id:"column6-campaign",onClick:()=>(async e=>{console.log("campaign for duplication ->",e);try{const s=await t.Z.post(`/api/letter_campaigns/duplicate/${e}/`,{},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});c(),y().fire({title:"\ud83d\ude0e Action Complete",text:"Campaign duplicated successfully",icon:"success",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}}),console.log("Duplicate Campaign Response:",s.data)}catch(s){console.error("Failed to duplicate the campaign:",s),y().fire({title:"\ud83e\udee1 Wittle alerts",text:"There was an issue duplicating the campaign.",icon:"error",confirmButtonText:"Try Again",confirmButtonColor:"#ED6B86",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}})}})(e.id),children:"\ud83d\udcd1"})]},s))):""})]})})]}):"Specific"!==N||z?"Specific"===N&&z?(0,u.jsxs)("div",{className:"property-table-loading campaign",children:[(0,u.jsx)(h.Z,{}),(0,u.jsx)("h3",{children:"Hold tight, your campaign is being launched. This may take a few minutes \ud83d\ude80"})]}):"":(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"single-campaign-wrapper",children:(0,u.jsxs)("div",{className:"campaign-detail-header",children:[(0,u.jsxs)("div",{className:"go-back-box",onClick:()=>_("Overview"),children:[(0,u.jsx)("div",{className:"go-back-sign",children:"<"}),(0,u.jsx)("h3",{children:"Back to campaigns"})]}),(0,u.jsx)("div",{className:"actions",children:b&&"Live"===b.campaign_status?"":(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:()=>W(),children:"Edit campaign"}),(0,u.jsx)(T,{createCampaignShow:w,handleCreateCampaignClose:G,letterTemplates:r,loadUserData:c,editData:b})]}),(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:()=>(async(e,s,a,l)=>{H(!0);const i=parseInt(e.campaign_type.split(" ")[0]),r=[];for(let t=1;t<=i;t++){const s=e[`template_${t}_name`];if(s){const e=a.find((e=>e.template_name===s));e&&r.push({template:e,step:t})}}const o=s.flatMap((e=>r.map((s=>{let{template:a,step:t}=s;const i=e.address.split(",").map((e=>e.trim())).slice(0,4);e.postcode&&i.push(e.postcode);const n=F.renderToStaticMarkup((0,u.jsx)(A.default,{signature:l,selectedTemplate:a,ownerData:e,address:i}));return{step:t,template_name:a.template_name,htmlContent:n,recipient:e}}))));console.log("data for campaign -> ",o);try{const s=await t.Z.post("/api/letter_campaigns/create_campaign/",{campaign:e,sequence_details:o},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Campaign processing response ->",s.data),y().fire({title:"\ud83d\ude0e Action complete",text:"Congrats, you have successfully launched your campaign. Track progress on the analytics tab \ud83d\udcc8",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}),await c(),H(!1)}catch(d){console.error("Error posting campaign data to Django:",d),y().fire({title:"\ud83e\udee1 Wittle alerts",text:"There was an issue launchign your campaign",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}),H(!1)}})(b,$,r,d),children:"Launch campaign"})]})]})})]})}),(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>k("Leads"),style:{color:"Leads"===C?"white":"#1A276C",backgroundColor:"Leads"===C?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Leads"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>k("Analytics"),style:{color:"Analytics"===C?"white":"#1A276C",backgroundColor:"Analytics"===C?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Analytics"})]}),"Leads"===C?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"campaign-lead-section",children:[(0,u.jsxs)("div",{className:"action-section letter",style:{marginTop:"1%",marginRight:"3%"},children:[$&&b&&"Live"===b.campaign_status?(0,u.jsxs)("h3",{className:"lead-message",style:{fontSize:"0.8rem"},children:["You have ",$.length," properties in your campaign"]}):(0,u.jsxs)("h3",{className:"lead-message",style:{fontSize:"0.8rem"},children:["You have ",$.length," properties in your unlaunched campaign"]}),b&&"Live"===b.campaign_status?"":(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:()=>(async(e,s)=>{const a=e.map((e=>e.rightmove_id));0===a.length&&y().fire({title:"\ud83e\udee1 Wittle alerts",text:"You must select the properties you want to remove from your campaign",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}});try{const l=await t.Z.put("/api/epc_favourite/remove_from_campaign/",{property_ids:a,campaign_name:s},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Properties removed to campaign successfully:",l.data),c(),D([]),y().fire({title:"\ud83d\ude0e action complete",text:`${e.length} properties removed from campaign`,confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}catch(l){console.error("Error removing properties to campaign:",l.response.data)}})(B,b),children:"Remove leads "})]})]}),(0,u.jsxs)("div",{className:"results-table",style:{marginTop:"1%"},children:[(0,u.jsxs)("div",{className:"results-headers letter",children:[b&&"Live"===b.campaign_status?"":(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:B&&$?B.length===$.length&&$.length>0:"",onChange:e=>{e.target.checked?(D($),L(!0)):(D([]),L(!1))}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Owner"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details letter",children:$?$.map(((e,s)=>{const a=B.some((s=>s.rightmove_id===e.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(a?"highlighted-row":""),children:[b&&"Live"===b.campaign_status?"":(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:B.some((s=>s.rightmove_id===e.rightmove_id)),onChange:s=>((e,s)=>{const a={...s};console.log("selected row ->",s),e.target.checked?D((e=>[...e,a])):D((e=>e.filter((e=>e.rightmove_id!==a.rightmove_id)))),L(o.length===B.length)})(s,e)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",children:(0,u.jsx)("h5",{children:e.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",children:(0,u.jsx)("h5",{children:e.agent})}),(0,u.jsx)("div",{className:"column",id:"column5",children:(0,u.jsx)("h5",{children:e.owner_name?e.owner_name:"N/a"})})]}),(0,u.jsx)("hr",{className:"property-divider"})]})})):" "})]})]})}):"Analytics"===C?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"campaign-analytics",children:[(0,u.jsx)("div",{className:"action-section letter",style:{marginTop:"1%",marginRight:"3%"},children:b&&"Live"===b.campaign_status?(0,u.jsx)("h3",{className:"template-total",children:"Your campaign is live! Track the status of your letters here."}):(0,u.jsx)("h3",{className:"template-total",children:"You can track your campaign progress here once it's been launched."})}),b&&"Live"===b.campaign_status?(0,u.jsxs)("div",{className:"results-table analytics",children:[(0,u.jsxs)("div",{className:"results-headers analytics",children:[(0,u.jsx)("div",{id:"column1",className:"column",children:(0,u.jsx)("h5",{children:"#"})}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Owner"})}),[...Array(R)].map(((e,s)=>(0,u.jsxs)("div",{className:"column",id:`column${s+4}`,children:[(0,u.jsxs)("h5",{className:"step-title",children:["Step ",s+1]}),(0,u.jsxs)("div",{className:"sub-header",children:[(0,u.jsx)("h5",{children:"Status"}),(0,u.jsx)("h5",{children:"Pdf"})]})]},s)))]}),(0,u.jsx)("div",{className:"results-details analytics",children:U?U.map(((e,s)=>(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"results-content analytics",children:[(0,u.jsx)("div",{className:"column",id:"column1",children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",children:(0,u.jsx)("h5",{children:e.target_address})}),(0,u.jsx)("div",{className:"column",id:"column3",children:(0,u.jsx)("h5",{children:e.target_name?e.target_name:"N/a"})}),e.steps.map(((e,s)=>(0,u.jsxs)("div",{className:"column",id:`column${e.step+3}`,children:[(0,u.jsx)("h5",{children:e.status}),"empty"===e.pdf?"":(0,u.jsx)("h5",{onClick:()=>window.open(e.pdf,"_blank"),className:"open-pdf-button",children:"\ud83d\udcd1"})]},s)))]},s)}))):""})]}):""]})}):"Sequences"===C?(0,u.jsx)(u.Fragment,{}):""]})})};var L=e=>{let{letterTab:s,setLetterTab:a,signature:i,setSignature:c,loadUserData:r,editCredts:o,setEditCredits:d,initiateCheckoutSession:m,creditValue:p,addCreditValue:x,availableCredits:j}=e;const[v,g]=(0,l.useState)(!1),[N,_]=(0,l.useState)(!1),y=e=>{const{name:s,value:a,type:l,files:t}=e.target;c("file"===l?e=>({...e,[s]:t[0]}):e=>({...e,[s]:a}))};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"top-line",children:[(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("My signatures"),style:{color:"My signatures"===s?"white":"#1A276C",backgroundColor:"My signatures"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"My signatures"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("Templates"),style:{color:"Templates"===s?"white":"#1A276C",backgroundColor:"Templates"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Templates"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("Campaigns"),style:{color:"Campaigns"===s?"white":"#1A276C",backgroundColor:"Campaigns"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Campaigns"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>a("Home"),style:{color:"Home"===s?"white":"#1A276C",backgroundColor:"Home"===s?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Home"})]}),o?(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("input",{type:"number",value:p,onChange:x}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>m(p),children:"Add"}),(0,u.jsx)("h3",{className:"close-credits",onClick:()=>d(!1),children:"\u274c"})]}):(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("h3",{className:"credit-balance",children:j?`Current balance \xa3${j}`:""}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>d(!0),children:"Top up"})]})]}),(0,u.jsxs)("div",{className:"my-details-section",children:[(0,u.jsx)("h1",{className:"my-details-title",children:"Add or update the details you want to include in your letters"}),i&&!v?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"my-details-content",children:[(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Title"}),N?(0,u.jsx)("input",{name:"title",type:"text",value:i.title,onChange:y}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.title})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"First name"}),N?(0,u.jsx)("input",{name:"first_name",type:"text",value:i.first_name,onChange:y}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.first_name})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Last name"}),N?(0,u.jsx)("input",{name:"last_name",type:"text",value:i.last_name,onChange:y}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.last_name})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Company"}),N?(0,u.jsx)("input",{name:"company_name",type:"text",value:i.company_name,onChange:y}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.company_name})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Role"}),N?(0,u.jsx)("input",{name:"role",type:"text",value:i.role,onChange:y}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.role})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Mobile"}),N?(0,u.jsx)("input",{name:"mobile",type:"text",pattern:"\\d*",value:i.mobile,onChange:y}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.mobile})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Landline"}),N?(0,u.jsx)("input",{name:"landline",type:"text",pattern:"\\d*",value:i.landline,onChange:y}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.landline})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Email"}),N?(0,u.jsx)("input",{name:"email",type:"text",value:i.email,onChange:y}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.email})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Address"}),N?(0,u.jsx)("input",{name:"address",type:"text",value:i.address,onChange:y}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.address})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Website"}),N?(0,u.jsx)("input",{name:"website",type:"text",value:i.website,onChange:y}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.website})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Footer"}),N?(0,u.jsx)("input",{name:"letter_footer",type:"text",value:i.letter_footer,onChange:y}):(0,u.jsx)("h3",{className:"signature-fixed",children:i.letter_footer})]}),(0,u.jsxs)("div",{className:"details-row",children:[(0,u.jsx)("h3",{className:"detail-title",children:"Logo"}),N?(0,u.jsx)("input",{type:"file",name:"logo",accept:"image/png, image/jpeg",className:"image-input",onChange:y}):i.logo?(0,u.jsx)("div",{className:"logo-box",children:(0,u.jsx)("img",{src:i.logo,alt:"Logo",className:"signature-logo"})}):null]})]}),(0,u.jsx)("div",{className:"save",children:N?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{onClick:()=>(async()=>{g(!0);const e=new FormData;Object.entries(i).forEach((s=>{let[a,l]=s;e.append(a,l)}));try{const s=await t.Z.put("/api/letter_signatures/",e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Letter signature ->",s),r()}catch(s){console.error("Error updating letters:",s)}finally{g(!1)}})(),children:"Save details"}),(0,u.jsx)("button",{className:"stop-edit",onClick:()=>_(!1),children:"Stop editing"})]}):(0,u.jsx)("button",{onClick:()=>_(!0),children:"Edit details"})})]}):v?(0,u.jsx)("div",{className:"property-table-loading",children:(0,u.jsx)(h.Z,{})}):""]})]})},$=a(34797);var P=e=>{let{letterProperties:s,setLetterProperties:a,userData:c,setUserData:r,signature:o,setSignature:d,loadUserData:m,letterTemplates:p,setLetterTemplates:x,letterCampaigns:j,setLetterCampaigns:v,campaignLoading:g,setCampaignLoading:N,setLeadGenSection:_,availableCredits:b,setAvailableCredits:f}=e;(0,i.s0)();const[C,k]=(0,l.useState)("Home"),[w,S]=(0,l.useState)([]),[B,A]=(0,l.useState)(!1),[F,T]=(0,l.useState)(!1),[P,M]=(0,l.useState)(),[I,U]=(0,l.useState)(0),[Z,z]=(0,l.useState)(null),[H,R]=(0,l.useState)(!1),[O,W]=(0,l.useState)(null),[G,Y]=(0,l.useState)(),[V,J]=(0,l.useState)(""),[q,X]=(0,l.useState)(""),[K,Q]=(0,l.useState)(""),[ee,se]=(0,l.useState)(!1),[ae,le]=(0,l.useState)(!1),[te,ie]=(0,l.useState)(),[ne,ce]=(0,l.useState)(!1),[re,oe]=(0,l.useState)([]),[de,he]=(0,l.useState)(""),[me,pe]=(0,l.useState)(""),[ue,xe]=(0,l.useState)(""),[je,ve]=(0,l.useState)(""),[ge,Ne]=(0,l.useState)(""),[_e,ye]=(0,l.useState)(""),[be,fe]=(0,l.useState)([]),[Ce,ke]=(0,l.useState)([]);(0,l.useEffect)((()=>{if(s){let e=s;de&&(e=e.filter((e=>e.channel===de))),me&&(e=e.filter((e=>e.postcode.toUpperCase().startsWith(me.toUpperCase())))),ue&&(e=e.filter((e=>parseInt(e.bedrooms)>=parseInt(ue)))),je&&(e=e.filter((e=>parseInt(e.bedrooms)<=parseInt(je)))),ge&&(e=e.filter((e=>parseInt(e.price_numeric)>=parseInt(ge)))),_e&&(e=e.filter((e=>parseInt(e.price_numeric)<=parseInt(_e)))),oe(e)}}),[s,de,me,ue,je,ge,_e]),(0,l.useEffect)((()=>{"rent"===de?(fe(Se),ke(Se)):"sale"===de?(fe(Be),ke(Be)):(fe([]),ke([]))}),[de]);const we=[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"}],Se=[...Array.from({length:9},((e,s)=>({value:""+(100+100*s),label:"\xa3"+(100+100*s)}))),...Array.from({length:5},((e,s)=>({value:""+(1e3+200*s),label:"\xa3"+(1e3+200*s)}))),...Array.from({length:8},((e,s)=>({value:""+(2e3+250*s),label:"\xa3"+(2e3+250*s)}))),...Array.from({length:8},((e,s)=>({value:""+(4e3+500*s),label:"\xa3"+(4e3+500*s)}))),...Array.from({length:4},((e,s)=>({value:""+(8e3+1e3*s),label:"\xa3"+(8e3+1e3*s)}))),...Array.from({length:4},((e,s)=>({value:""+(12e3+2e3*s),label:"\xa3"+(12e3+2e3*s)})))],Be=[...Array.from({length:9},((e,s)=>({value:""+(1e5+1e5*s),label:`\xa3${(1e5+1e5*s).toLocaleString()}`}))),...Array.from({length:5},((e,s)=>({value:""+(1e6+2e5*s),label:`\xa3${(1e6+2e5*s).toLocaleString()}`}))),...Array.from({length:8},((e,s)=>({value:""+(2e6+25e4*s),label:`\xa3${(2e6+25e4*s).toLocaleString()}`}))),...Array.from({length:8},((e,s)=>({value:""+(4e6+5e5*s),label:`\xa3${(4e6+5e5*s).toLocaleString()}`}))),...Array.from({length:4},((e,s)=>({value:""+(8e6+1e6*s),label:`\xa3${(8e6+1e6*s).toLocaleString()}`}))),...Array.from({length:6},((e,s)=>({value:""+(12e6+2e6*s),label:`\xa3${(12e6+2e6*s).toLocaleString()}`})))];(0,l.useEffect)((()=>{c&&c.epc_favourites&&(ie(c.epc_favourites[0]),console.log("example data for template ->",c.epc_favourites[0]))}),[c]);(0,l.useEffect)((()=>{ee&&K&&(T(!0),se(!1))}),[K,ee]);const Ae=async(e,s)=>{const a=e.map((e=>e.rightmove_id));try{const l=await t.Z.put("/api/epc_favourite/add_to_campaign/",{property_ids:a,campaign_name:s},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Properties added to campaign successfully:",l.data),m(),S([]),y().fire({title:"\ud83d\ude0e action complete",text:`${e.length} properties added to campaign`,confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}})}catch(l){console.error("Error adding properties to campaign:",l.response.data)}},Fe=e=>{const s=new Date(e);if(isNaN(s.getTime()))return console.warn("Invalid date:",e),e;return`${s.getDate().toString().padStart(2,"0")}/${(s.getMonth()+1).toString().padStart(2,"0")}/${s.getFullYear()}`},De=async e=>{const s=Number(e);try{const e=await t.Z.post("/api/usage/add_credit/",{credits_amount:s},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});window.localStorage.setItem("wittle-latest-credits",JSON.stringify("Yes")),window.localStorage.setItem("wittle-credit-value",JSON.stringify(`${I}`));const{sessionId:a}=e.data,l=await(0,$.J)("pk_live_51O02bMBKPXWTORF2v4zeIPMCFzuSvlY6cJaKiStMAVm0cf9LvmMXhobEZ9VPbVVO9kGlfxTPtFkszZAfv10s3oG800dx3kYK7K");await l.redirectToCheckout({sessionId:a})}catch(a){console.error("Error initiating checkout session:",a)}},Te=e=>{U(e.target.value),console.log("credit input ->",e.target.value)};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)("section",{className:"letter-section",children:(0,u.jsx)("div",{className:"results-block",children:g?(0,u.jsx)("div",{className:"property-table-loading",children:(0,u.jsx)(h.Z,{})}):"Home"!==C||g?"Campaigns"!==C||g?"Templates"!==C||g?"My signatures"!==C||g?"":(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(L,{letterTab:C,setLetterTab:k,signature:o,setSignature:d,loadUserData:m,creditValue:I,editCredts:ae,setEditCredits:le,availableCredits:b,initiateCheckoutSession:De,addCreditValue:Te})}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"top-line",children:[(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>k("My signatures"),style:{color:"My signatures"===C?"white":"#1A276C",backgroundColor:"My signatures"===C?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"My signatures"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>k("Templates"),style:{color:"Templates"===C?"white":"#1A276C",backgroundColor:"Templates"===C?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Templates"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>k("Campaigns"),style:{color:"Campaigns"===C?"white":"#1A276C",backgroundColor:"Campaigns"===C?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Campaigns"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>k("Home"),style:{color:"Home"===C?"white":"#1A276C",backgroundColor:"Home"===C?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Home"})]}),ae?(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("h3",{className:"credit-balance",children:"Top up value:"}),(0,u.jsx)("input",{type:"number",value:I,onChange:Te}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>De(I),children:"Add"}),(0,u.jsx)("h3",{className:"close-credits",onClick:()=>le(!1),children:"\u274c"})]}):(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("h3",{className:"credit-balance",children:b?`Current balance \xa3${b}`:""}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>le(!0),children:"Top up"})]})]}),(0,u.jsxs)("div",{className:"action-section letter",children:[p?(0,u.jsxs)("h3",{className:"template-total",children:["You have ",p.length," saved templates"]}):"",(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:()=>(X("new"),Q({}),void T(!0)),children:"New template "})]})]}),(0,u.jsx)(D,{handleCreateTemplateClose:()=>{T(!1),Q({}),X("new")},createTemplateShow:F,signature:o,loadUserData:m,templateAction:q,currentTemplate:K,exampleData:te,setCampaignLoading:N}),(0,u.jsx)("div",{className:"template-list",children:(0,u.jsxs)("div",{className:"template-table",children:[(0,u.jsxs)("div",{className:"template-headers",children:[(0,u.jsx)("h3",{id:"column1",children:"#"}),(0,u.jsx)("h3",{id:"column2",children:"Name"}),(0,u.jsx)("h3",{id:"column3",children:"Type"}),(0,u.jsx)("h3",{id:"column4",children:"Edit"}),(0,u.jsx)("h3",{id:"column5",children:"View"}),(0,u.jsx)("h3",{id:"column6",children:"Delete"})]}),(0,u.jsx)("div",{className:"template-content",children:p?[...p].sort(((e,s)=>e.template_number-s.template_number)).map(((e,s)=>(0,u.jsxs)("div",{className:"template-item",children:[(0,u.jsx)("h3",{className:"template-number",id:"column1",children:s+1}),(0,u.jsx)("h3",{className:"template-name",id:"column2",children:e.template_name}),(0,u.jsx)("h3",{className:"template-type",id:"column3",children:e.template_type}),(0,u.jsx)("div",{id:"column4",children:(0,u.jsx)("h3",{className:"action",onClick:()=>(e=>{X("edit"),Q(e),se(!0)})(e),children:"\u270d\ud83c\udffc"})}),(0,u.jsx)("div",{id:"column5",children:(0,u.jsx)("h3",{className:"action",onClick:()=>window.open(e.example_pdf,"_blank"),children:"\ud83d\udc40"})}),(0,u.jsx)("div",{id:"column6",children:(0,u.jsx)("h3",{className:"action",onClick:()=>(async e=>{N(!0);try{await t.Z.delete(`/api/letter_templates/delete/${e.id}/`,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}}),y().fire({title:"\ud83e\udee1 Wittle alerts",text:"Template deleted",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}),await m()}catch(s){console.error("Error deleting template:",s)}finally{N(!1)}})(e),children:"\ud83d\uddd1"})})]},s))):""})]})})]}):(0,u.jsx)(E,{letterTab:C,setLetterTab:k,letterCampaigns:j,loadUserData:m,letterTemplates:p,letterProperties:s,signature:o,campaignLoading:g,setCampaignLoading:N,creditValue:I,editCredts:ae,setEditCredits:le,availableCredits:b,initiateCheckoutSession:De,addCreditValue:Te}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"top-line",children:[(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>k("My signatures"),style:{color:"My signatures"===C?"white":"#1A276C",backgroundColor:"My signatures"===C?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"My signatures"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>k("Templates"),style:{color:"Templates"===C?"white":"#1A276C",backgroundColor:"Templates"===C?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Templates"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>k("Campaigns"),style:{color:"Campaigns"===C?"white":"#1A276C",backgroundColor:"Campaigns"===C?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Campaigns"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>k("Home"),style:{color:"Home"===C?"white":"#1A276C",backgroundColor:"Home"===C?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Home"})]}),ae?(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("input",{type:"number",value:I,onChange:Te}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>De(I),children:"Add"}),(0,u.jsx)("h3",{className:"close-credits",onClick:()=>le(!1),children:"\u274c"})]}):(0,u.jsxs)("div",{className:"credits-section",children:[(0,u.jsx)("h3",{className:"credit-balance",children:b?`Current balance \xa3${b}`:""}),(0,u.jsx)("button",{className:"add-credts",onClick:()=>le(!0),children:"Top up"})]})]}),(0,u.jsxs)("div",{className:"action-section letter",children:[re?(0,u.jsxs)("h3",{className:"template-total",children:["You have ",re.length," properties prepared for letter campaigns"]}):"",(0,u.jsxs)("div",{className:"letter-selections",children:[(0,u.jsxs)("select",{value:P,onChange:e=>{const s=e.target.value;M(s);const a=w,l=j.find((e=>e.id.toString()===s));a&&a.length>0&&l?Ae(a,l.campaign_name):console.log("No properties selected or campaign not found")},className:"template-select",children:[(0,u.jsx)("option",{value:"",children:"Select a campaign"}),j?j.filter((e=>"Live"!==e.campaign_status)).map(((e,s)=>(0,u.jsx)("option",{value:e.id,children:e.campaign_name},s))):""]}),(0,u.jsx)("div",{className:"filter-icon "+(ne?"active":"inactive"),onClick:()=>ce(!ne),style:{backgroundColor:ne?"#1A276C":"inherit"}})]})]}),ne?(0,u.jsxs)("div",{className:"filter-row-section "+(ne?"active":"inactive"),children:[(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Channel"}),(0,u.jsxs)("select",{onChange:e=>he(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Select..."}),(0,u.jsx)("option",{value:"sale",children:"Sale"}),(0,u.jsx)("option",{value:"rent",children:"Rent"})]})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Postcode"}),(0,u.jsx)("input",{className:"filter-input",onChange:e=>pe(e.target.value)})]}),(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Bedrooms"}),(0,u.jsxs)("select",{className:"small",value:ue,onChange:e=>xe(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Min"}),we.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,u.jsxs)("select",{className:"small",value:je,onChange:e=>ve(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Max"}),we.filter((e=>e.value>=ue)).map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),""!==de&&(0,u.jsxs)("div",{className:"filter-block",children:[(0,u.jsx)("h3",{className:"filter-title",children:"Price"}),(0,u.jsxs)("select",{className:"small",value:ge,onChange:e=>Ne(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Min"}),be.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]}),(0,u.jsxs)("select",{className:"small",value:_e,onChange:e=>ye(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"Max"}),Ce.map((e=>(0,u.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,u.jsx)("button",{className:"clear-filters",onClick:()=>{he(""),pe(""),xe(""),ve(""),Ne(""),ye("")},children:"Clear"})]}):"",(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers letter",children:[(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:re&&w.length===re.filter((e=>"None"===e.letter_campaign||null===e.letter_campaign)).length&&w.length>0,onChange:e=>{e.target.checked?(()=>{const e=re.filter((e=>"None"===e.letter_campaign||null===e.letter_campaign));S(e),A(!0)})():(S([]),A(!1))}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",children:(0,u.jsx)("h5",{children:"Date added"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Date removed"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Market status"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Channel"})}),(0,u.jsx)("div",{id:"column7",className:"column",children:(0,u.jsx)("h5",{children:"Price"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details letter",children:re?re.map(((e,s)=>{const a=w.some((s=>s.rightmove_id===e.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(a?"highlighted-row":""),children:["None"===e.letter_campaign?(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:w.some((s=>s.rightmove_id===e.rightmove_id)),onChange:s=>((e,s)=>{const a={...s};console.log("selected row ->",s),e.target.checked?S((e=>[...e,a])):S((e=>e.filter((e=>e.rightmove_id!==a.rightmove_id))));const l=re.filter((e=>"None"===e.letter_campaign||null===e.letter_campaign)).length;A(w.length===l)})(s,e)}),(0,u.jsx)("label",{className:"label"})]})}):(0,u.jsx)("div",{className:"column",id:"column11",children:(0,u.jsx)("h6",{children:"In campaign"})}),(0,u.jsx)("div",{className:"column",id:"column1",children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",children:(0,u.jsx)("h5",{children:e.address})}),(0,u.jsx)("div",{className:"column",id:"column3",children:(0,u.jsx)("h5",{children:e.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column4",children:(0,u.jsx)("h5",{children:"Live"===e.market_status?"":"Off Market"===e.market_status&&e.week_removed?Fe(e.week_removed):""})}),(0,u.jsx)("div",{className:"column",id:"column5",children:(0,u.jsx)("h5",{children:"Live"===e.market_status?e.market_status:`\ud83d\udea9 ${e.market_status}`})}),(0,u.jsx)("div",{className:"column",id:"column6",children:(0,u.jsx)("h5",{children:e.channel})}),(0,u.jsx)("div",{className:"column",id:"column7",children:(0,u.jsx)("h5",{children:e.price})})]}),(0,u.jsx)("hr",{className:"property-divider"})]})})):" "})]})]})})})})};t.Z.defaults.xsrfCookieName="csrftoken",t.Z.defaults.xsrfHeaderName="X-CSRFToken";var M=()=>{const e=(0,i.s0)(),[s,a]=(0,l.useState)(),[m,p]=(0,l.useState)(),[g,N]=(0,l.useState)(),[_,f]=(0,l.useState)(),[k,B]=(0,l.useState)(),[A,F]=(0,l.useState)(),[D,T]=(0,l.useState)(),[E,L]=(0,l.useState)(!1),[$,M]=(0,l.useState)("Comparison"),[I,U]=(0,l.useState)("Comparison"),[Z,z]=(0,l.useState)(!1),[H,R]=(0,l.useState)(""),[O,W]=(0,l.useState)(""),[G,Y]=(0,l.useState)(""),[V,J]=(0,l.useState)(),[q,X]=(0,l.useState)(),[K,Q]=(0,l.useState)([]),[ee,se]=(0,l.useState)([]),[ae,le]=(0,l.useState)(""),[te,ie]=(0,l.useState)("Efficiency"),[ne,ce]=(0,l.useState)([]),[re,oe]=(0,l.useState)(),[de,he]=(0,l.useState)(),[me,pe]=(0,l.useState)(),[ue,xe]=(0,l.useState)(),[je,ve]=(0,l.useState)(),[ge,Ne]=(0,l.useState)(sessionStorage.getItem("sessionName")||""),[_e,ye]=(0,l.useState)(["SW8"]),[be,fe]=(0,l.useState)(),[Ce,ke]=(0,l.useState)("Inputs"),[we,Se]=(0,l.useState)([]),[Be,Ae]=(0,l.useState)([]),[Fe,De]=(0,l.useState)([]),[Te,Ee]=(0,l.useState)([]),[Le,$e]=(0,l.useState)([]),[Pe,Me]=(0,l.useState)([]),[Ie,Ue]=(0,l.useState)("Lettings"),[Ze,ze]=(0,l.useState)(!1),[He,Re]=(0,l.useState)(null),[Oe,We]=(0,l.useState)({postcode:"",subcode:"",bathrooms_min:null,bathrooms_max:null,bedrooms_min:null,bedrooms_max:null,rental_price_min:null,rental_price_max:null,sales_price_min:null,sales_price_max:null,channel:"",rental_additional:""}),[Ge,Ye]=(0,l.useState)({first_name:"",last_name:"",company_name:"",title:"",role:"",mobile:null,landline:null,address:"",email:"",letter_footer:"",logo:""}),[Ve,Je]=(0,l.useState)(),[qe,Xe]=(0,l.useState)(),[Ke,Qe]=(0,l.useState)([]),[es,ss]=(0,l.useState)([]),[as,ls]=(0,l.useState)(),[ts,is]=(0,l.useState)({latitude:51.515419,longitude:-.141099,zoom:11.5}),[ns,cs]=(0,l.useState)([]),[rs,os]=(0,l.useState)(Be.map((()=>!1))),[ds,hs]=(0,l.useState)(Le.map((()=>!1))),[ms,ps]=(0,l.useState)("2days"),[us,xs]=(0,l.useState)([]),[js,vs]=(0,l.useState)([]),[gs,Ns]=(0,l.useState)([]),[_s,ys]=(0,l.useState)([]),[bs,fs]=(0,l.useState)([]),[Cs,ks]=(0,l.useState)([]),[ws,Ss]=(0,l.useState)([]),[Bs,As]=(0,l.useState)([]),[Fs,Ds]=(0,l.useState)("asc"),[Ts,Es]=(0,l.useState)("asc"),[Ls,$s]=(0,l.useState)(),[Ps,Ms]=(0,l.useState)("Matching"),[Is,Us]=(0,l.useState)("Matching"),[Zs,zs]=(0,l.useState)(new Set),[Hs,Rs]=(0,l.useState)(new Set),Os=()=>{if((0,n.Hb)()){(async()=>{try{B(!0),F(!0),T(!0);const{data:e}=await t.Z.get(`/api/auth/profile/${(0,n.Nh)()}/`,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});if(console.log("user data ->",e),N(e),f(e.usage_stats[0].package),Re(e.usage_stats[0].credits),e.lead_gen_details.length>0){We(e.lead_gen_details[0]);const s=e.company_favourites.filter((e=>null!==e.rightmove_id&&"Saved"===e.action)),a=e.company_favourites.filter((e=>null!==e.rightmove_id&&"Saved"===e.action&&1===e.letter_sequence)),l=e.company_favourites.filter((e=>null!==e.rightmove_id&&"Extracted"===e.action)),t=e.company_favourites.filter((e=>null!==e.rightmove_id&&"Removed"===e.action)),i=[...s,...l,...t].map((e=>e.rightmove_id));xs(i),vs(t),console.log("removed properties ->",t);Ys(e.company_favourites);"Lettings"===e.lead_gen_details[0].channel?(F(!1),Vs(e,t,ms)):"Sales"===e.lead_gen_details[0].channel?(B(!1),Js(e,t,ms)):"Both"===e.lead_gen_details[0].channel&&(Js(e,t,ms),Vs(e,t,ms)),oe(s),ve(a),Ye(e.letter_signatures[0]),Je(e.letter_templates),Xe(e.letter_campaigns),console.log("letter properties ->",a),console.log("saved properties ->",s),pe(l),xe(t),console.log("existing dtails ->",e.lead_gen_details[0]),ma(),S.Y.emit("userDataUpdated"),T(!1)}else{console.log("date -> ",ms)}}catch(e){a(!0),console.log(e)}})()}else e("/access-denied"),console.log("no account")};(0,l.useEffect)((()=>{const s=JSON.parse(localStorage.getItem("wittle-latest-credits"));console.log("credit path ->",s);const a=JSON.parse(localStorage.getItem("wittle-credit-value"));console.log("credit value ->",a);const l=new URLSearchParams(window.location.search);"Yes"===s&&l.get("success")?(y().fire({title:"\ud83d\ude0e action complete",text:`\xa3${a} added to your letter credits`,confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}),e("/agents/lead-gen"),ke("Letter campaigns"),Os(),localStorage.removeItem("wittle-latest-credits"),localStorage.removeItem("wittle-credit-value")):"Yes"===s&&l.get("cancelled")?(e("/agents/lead-gen"),ke("Letter campaigns"),Os(),y().fire({title:"\ud83e\udee1 Wittle alerts",text:"There was an error processing your payment",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}),localStorage.removeItem("wittle-latest-credits"),localStorage.removeItem("wittle-credit-value")):Os()}),[]);const Ws=()=>{os(gs.map((()=>!1))),Qe([])},Gs=()=>{hs(_s.map((()=>!1))),ss([])},Ys=e=>e.filter((e=>null!==e.rightmove_id&&"Saved"===e.action)).map(((e,s)=>({item:s+1,url:e.url,address:e.address,postcode:e.postcode,addressPostcode:`${e.address}, ${e.postcode}`,addedOn:e.added_revised,property_type:e.property_type,price:e.price,bedrooms:e.bedrooms,bathrooms:e.bathrooms,let_available_date:e.let_available_date,date_added:e.date_added_db,agent:e.agent,channel:e.channel,owner_name:e.owner_name,owner_email:e.owner_email,owner_mobile:e.owner_mobile,emails_sent:e.emails_sent,letters_sent:e.letters_sent,valuation_booked:e.valuation_booked,notes:e.notes}))),Vs=async(e,s,a)=>{const l=e.lead_gen_details[0].postcode,i=e.lead_gen_details[0].subcode,c=e.lead_gen_details[0].bedrooms_min,r=e.lead_gen_details[0].bedrooms_max,o=e.lead_gen_details[0].rental_price_min,d=e.lead_gen_details[0].rental_price_max,h=e.lead_gen_details[0].rental_additional;try{const e=`/api/epc_properties_rental/combined-epc-results/?postcode=${l}&subcode=${i}&min_bedrooms=${c}&max_bedrooms=${r}&rental_price_min=${o}&rental_price_max=${d}&rental_additional=${h}`,{data:a}=await t.Z.get(e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("combined data ->",a);const m=s.map((e=>e.rightmove_id)),p=a.filter((e=>!m.includes(e.property_data.rightmove_id))),u=p.filter((e=>0===e.epc_data_list.length)),x=p.filter((e=>1===e.epc_data_list.length)),j=p.filter((e=>e.epc_data_list.length>1));console.log("sngle matches ->",x),console.log("no matches ->",u),console.log("multiple matches ->",j),Se(u),Ae(x),De(j),B(!1)}catch(m){console.error("can't access combined data ->",m)}},Js=async(e,s,a)=>{const l=e.lead_gen_details[0].postcode,i=e.lead_gen_details[0].subcode,c=e.lead_gen_details[0].bedrooms_min,r=e.lead_gen_details[0].bedrooms_max,o=e.lead_gen_details[0].sales_price_min,d=e.lead_gen_details[0].sales_price_max;try{const e=`/api/epc_properties/combined-epc-results/?postcode=${l}&subcode=${i}&min_bedrooms=${c}&max_bedrooms=${r}&sales_price_min=${o}&sales_price_max=${d}`,{data:a}=await t.Z.get(e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("combined data ->",a);const h=s.map((e=>e.rightmove_id)),m=a.filter((e=>!h.includes(e.property_data.rightmove_id))),p=m.filter((e=>0===e.epc_data_list.length)),u=m.filter((e=>1===e.epc_data_list.length)),x=m.filter((e=>e.epc_data_list.length>1));console.log("sales single matches ->",u),console.log("sales no matches ->",p),console.log("sales multiple matches ->",x),Ee(p),$e(u),Me(x),F(!1)}catch(h){console.error("can't access combined data ->",h)}},qs=e=>{window.open(e,"_blank","width=1200,height=800,resizable=yes,scrollbars=yes,status=yes")},Xs=s=>{localStorage.removeItem("wittle-user-token"),localStorage.removeItem("wittle-username"),e("/login")},Ks=["200000","300000","400000","500000","600000","700000","800000","900000","1000000","1250000","1500000","1750000","2000000","2250000","2500000","2750000","3000000","3500000","4000000","5000000","7500000","10000000","12500000","15000000","20000000","30000000","40000000","50000000"],Qs=["500","600","700","800","900","1000","1100","1200","1300","1400","1500","1600","1700","1800","1900","2000","2250","2500","2750","3000","3250","3500","4000","4500","5000","5500","6000","7000","8000","9000","10000","12500","15000","20000","25000","30000","40000","50000","60000"],ea=(e,s)=>{if(!s||"all"===s)return e;let a,l="within";switch(s){case"1day":a=1;break;case"2days":a=2;break;case"3days":a=3;break;case"7days":a=7;break;case"4weeks":a=28;break;case"8weeks":a=56;break;case"12weeks":a=84;break;case"16weeks":a=112;break;case">8weeks":a=56,l="beyond";break;case">12weeks":a=84,l="beyond";break;case">16weeks":a=112,l="beyond";break;default:return e}return e.filter((e=>{const s=sa(e.property_data.added_revised),t=sa(e.property_data.reduced_revised),i=s||t;return!!i&&("within"===l?aa(i,a):la(i,a))}))};(0,l.useEffect)((()=>{const e=ea(Be,ms);Ns(e)}),[Be,ms]),(0,l.useEffect)((()=>{const e=ea(Le,ms);ys(e)}),[Le,ms]),(0,l.useEffect)((()=>{const e=ea(Fe,ms);fs(e)}),[Fe,ms]),(0,l.useEffect)((()=>{const e=ea(Pe,ms);ks(e)}),[Pe,ms]),(0,l.useEffect)((()=>{const e=ea(we,ms);Ss(e)}),[we,ms]),(0,l.useEffect)((()=>{const e=ea(Te,ms);As(e)}),[Te,ms]);const sa=e=>{if(!e)return null;const[s,a,l]=e.split("/");return new Date(l,a-1,s)},aa=(e,s)=>{const a=new Date;return e>=new Date(a.getFullYear(),a.getMonth(),a.getDate()-s)},la=(e,s)=>{const a=new Date;return e<new Date(a.getFullYear(),a.getMonth(),a.getDate()-s)},ta=()=>{const e=[...gs].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===Fs?a-l:l-a})),s=[..._s].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===Fs?a-l:l-a})),a=[...bs].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===Fs?a-l:l-a})),l=[...Cs].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===Fs?a-l:l-a})),t=[...ws].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===Fs?a-l:l-a})),i=[...Bs].sort(((e,s)=>{const a=parseInt(e.property_data.price.replace(/[^\d.]/g,"")),l=parseInt(s.property_data.price.replace(/[^\d.]/g,""));return"asc"===Fs?a-l:l-a}));Ns(e),ys(s),fs(a),ks(l),Ss(t),As(i),Ds("asc"===Fs?"desc":"asc")},ia=()=>{const e=[...gs].sort(((e,s)=>"asc"===Ts?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),s=[..._s].sort(((e,s)=>"asc"===Ts?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),a=[...bs].sort(((e,s)=>"asc"===Ts?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),l=[...Cs].sort(((e,s)=>"asc"===Ts?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),t=[...ws].sort(((e,s)=>"asc"===Ts?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode))),i=[...Bs].sort(((e,s)=>"asc"===Ts?e.property_data.postcode.localeCompare(s.property_data.postcode):s.property_data.postcode.localeCompare(e.property_data.postcode)));Ns(e),ys(s),fs(a),ks(l),Ss(t),As(i),Es("asc"===Ts?"desc":"asc")},[na,ca]=(0,l.useState)(!1),ra=()=>{ca(!1)},[oa,da]=(0,l.useState)(!1),ha=()=>{da(!1)},ma=async()=>{if((0,n.Hb)()){console.log("trying to increase");try{const{data:e}=await t.Z.post("/api/usage/",{},{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log(e),"success"===e.status?console.log("Usage count increased successfully"):console.error("Failed to increase usage count:",e.message)}catch(s){console.error("Error:",s)}}else e("/access-denied"),console.log("logged out")},pa=e=>{zs((s=>{const a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a}))},ua=e=>{Rs((s=>{const a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a}))},xa=async(s,a,l)=>{if((0,n.Hb)()){const e=[{rightmove_id:s.property_data.rightmove_id,postcode:s.property_data.postcode,address:a.address,agent:s.property_data.agent,type:s.property_data.type,addedOn:s.property_data.addedOn,propertyType:s.property_data.propertyType,price:s.property_data.price,price_numeric:s.property_data.price_numeric,bathrooms:s.property_data.bathrooms,bedrooms:s.property_data.bedrooms,let_available_date:s.property_data.let_available_date,date_added_db:s.property_data.date_added_db,url:s.property_data.url,current_epc:s.property_data.current_epc,potential_epc:s.property_data.potential_epc,action:"Saved",added_revised:s.property_data.added_revised,reduced_revised:s.property_data.reduced_revised,market_status:s.property_data.market_status}];try{const s=await t.Z.post("/api/epc_favourite/",e,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",s.data),pa(l),ua(l),y().fire({title:"\ud83d\ude0e action complete",text:"New property added to your saved properties",confirmButtonText:"Thanks \ud83e\udd1d",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}),Os()}catch(i){console.error("Error saving favourite:",i)}}else e("/access-denied"),console.log("logged out")};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("section",{className:"agent-profile-page",children:[(0,u.jsx)("div",{className:"desktop-nav",children:(0,u.jsx)(r.Z,{navbarColour:"#FDF7F0"})}),(0,u.jsx)("div",{className:"mobile-nav",children:(0,u.jsx)(d.Z,{setProfileContent:M,profileContent:$,profileDetail:I,setProfileDetail:U})}),(0,u.jsx)(o.Z,{setProfileDetail:U,variableSide:Z,setProfileContent:M,setVariableSide:z,userData:g}),g&&"Trial expired"===g.usage_stats[0].package?(0,u.jsx)("section",{className:"main-body remove-margin",children:(0,u.jsx)("section",{className:"main-body-details",children:(0,u.jsxs)("section",{className:"listing-generator",children:[(0,u.jsxs)("div",{className:"listing-options",children:[(0,u.jsx)("div",{className:"listing-buttons"}),(0,u.jsx)("div",{className:"logout-button",onClick:Xs,children:(0,u.jsx)("div",{className:"logout-icon"})})]}),(0,u.jsxs)("div",{className:"no-access-body",children:[(0,u.jsx)("div",{className:"no-access-image"}),(0,u.jsx)("h1",{className:"no-access-title",children:"Oops! Dead end"}),(0,u.jsx)("h3",{className:"no-access-message",children:"You no longer have access to this content. Get in touch to upgrade your account and access the Wittle magic."})]})]})})}):(0,u.jsx)("section",{className:"main-body",children:(0,u.jsx)("section",{className:"main-body-details",children:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("section",{className:"property-finder",children:[(0,u.jsxs)("div",{className:"listing-options",children:[(0,u.jsxs)("div",{className:"listing-buttons",children:[(0,u.jsx)("h5",{className:"no-print",onClick:()=>ke("Inputs"),style:{borderBottom:"Inputs"===Ce?"3px solid #ED6B86":"none",textUnderlineOffset:"Inputs"===Ce?"0.5em":"initial",fontWeight:"Inputs"===Ce?"700":"400"},children:"Inputs"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>ke("Explore"),style:{borderBottom:"Explore"===Ce?"3px solid #ED6B86":"none",textUnderlineOffset:"Explore"===Ce?"0.5em":"initial",fontWeight:"Explore"===Ce?"700":"400"},children:"Explore"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>ke("Tracking"),style:{borderBottom:"Tracking"===Ce?"3px solid #ED6B86":"none",textUnderlineOffset:"Tracking"===Ce?"0.5em":"initial",fontWeight:"Tracking"===Ce?"700":"400"},children:"Tracking"}),!g||1!==g.id&&55!==g.id?"":(0,u.jsx)("h5",{className:"no-print",onClick:()=>ke("Letter campaigns"),style:{borderBottom:"Letter campaigns"===Ce?"3px solid #ED6B86":"none",textUnderlineOffset:"Letter campaigns"===Ce?"0.5em":"initial",fontWeight:"Letter campaigns"===Ce?"700":"400"},children:"Letter campaigns"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>ke("Archived"),style:{borderBottom:"Archived"===Ce?"3px solid #ED6B86":"none",textUnderlineOffset:"Archived"===Ce?"0.5em":"initial",fontWeight:"Archived"===Ce?"700":"400"},children:"Archived"}),(0,u.jsx)("h5",{className:"no-print",id:"manual-matcher",onClick:()=>ke("Manual matcher"),style:{borderBottom:"Manual matcher"===Ce?"3px solid #ED6B86":"none",textUnderlineOffset:"Manual matcher"===Ce?"0.5em":"initial",fontWeight:"Manual matcher"===Ce?"700":"400"},children:"Manual matcher"}),(0,u.jsx)("h5",{className:"no-print",onClick:()=>ke("Hidden properties"),style:{borderBottom:"Hidden properties"===Ce?"3px solid #ED6B86":"none",textUnderlineOffset:"Hidden properties"===Ce?"0.5em":"initial",fontWeight:"Hidden properties"===Ce?"700":"400"},children:"Hidden properties"})]}),(0,u.jsx)("div",{className:"logout-button",onClick:Xs,children:(0,u.jsx)("div",{className:"logout-icon"})})]}),(0,u.jsx)("hr",{className:"title-line"}),(0,u.jsx)("div",{className:"lead-generator",children:(0,u.jsx)("div",{className:"property-results",children:"Inputs"===Ce?(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"lead-gen-inputs",children:[(0,u.jsx)("h3",{className:"sub-title",children:"Set your search criteria"}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Postcode(s)"}),(0,u.jsx)("p",{children:"Add multiple postcodes by separating with a comma, and include any part of the postcode, e.g. \u201cSW4,SW5\u201d. For efficiency, this is limited to 6 postcode areas."}),(0,u.jsx)("input",{type:"text",value:Oe.postcode,onChange:e=>{let s=e.target.value.toUpperCase().replace(/\s+/g,"");const a=s.split(",");a.length>6&&(y().fire({title:"\ud83e\udee1 Wittle alerts",text:"To optimise your experience, you can only add up to 6 postcode areas.",confirmButtonText:"\ud83e\udd1d thanks",confirmButtonColor:"#ED6B86",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm"}}),s=a.slice(0,6).join(",")),R(s),We((e=>({...e,postcode:s})))},placeholder:"Enter postcode..."})]})}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Sub postcode(s)"}),(0,u.jsx)("p",{children:"Add sub postcodes, e.g. \u201cSW4 0,SW5 0\u201d. You can also chain these."}),(0,u.jsx)("input",{type:"text",value:Oe.subcode,onChange:e=>{W(e.target.value.toUpperCase().replace(/\s+/g,"")),We((s=>({...s,subcode:e.target.value.toUpperCase().replace(/\s+/g,"")})))},placeholder:"Enter subcode..."})]})}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Channel"}),(0,u.jsxs)("select",{className:"dropdown",value:Oe.channel||"Lettings",onChange:e=>We((s=>({...s,channel:e.target.value}))),children:[(0,u.jsx)("option",{children:"Lettings"}),(0,u.jsx)("option",{children:"Sales"}),(0,u.jsx)("option",{children:"Both"})]})]})}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"see-more-section",onClick:()=>ze(!Ze),children:[(0,u.jsx)("h3",{className:"sub-title",children:"Add some more detail"}),Ze?(0,u.jsx)("h3",{className:"sub-title",children:"^"}):(0,u.jsx)("h3",{className:"sub-title",children:"v"})]}),Ze?(0,u.jsx)(u.Fragment,{children:"Lettings"===Oe.channel?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Bedrooms"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Oe.bedrooms_min||"",onChange:e=>We((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No min"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"})]}),(0,u.jsxs)("select",{className:"dropdown",value:Oe.bedrooms_max||"",onChange:e=>We((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No max"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"}),(0,u.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Price"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Oe.rental_price_min||"",onChange:e=>We((s=>({...s,rental_price_min:e.target.value}))),children:[(0,u.jsx)("option",{value:0,children:"No min"}),Qs.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(c.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,u.jsxs)("select",{className:"dropdown",value:Oe.rental_price_max||"",onChange:e=>We((s=>({...s,rental_price_max:e.target.value}))),children:[(0,u.jsx)("option",{value:1e7,children:"No max"}),Qs.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(c.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Furnishing status"}),(0,u.jsxs)("select",{className:"dropdown",value:Oe.rental_additional||"Either furnished or unfurnished",onChange:e=>We((s=>({...s,rental_additional:e.target.value}))),children:[(0,u.jsx)("option",{children:"Either furnished or unfurnished"}),(0,u.jsx)("option",{children:"Furnished"}),(0,u.jsx)("option",{children:"Unfurnished"})]})]})})]}):"Sales"===Oe.channel?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Bedrooms"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Oe.bedrooms_min||"",onChange:e=>We((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No min"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"})]}),(0,u.jsxs)("select",{className:"dropdown",value:Oe.bedrooms_max||"",onChange:e=>We((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No max"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"}),(0,u.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Price"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Oe.sales_price_min||"",onChange:e=>We((s=>({...s,sales_price_min:e.target.value}))),children:[(0,u.jsx)("option",{value:0,children:"No min"}),Ks.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(c.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,u.jsxs)("select",{className:"dropdown",value:Oe.sales_price_max||"",onChange:e=>We((s=>({...s,sales_price_max:e.target.value}))),children:[(0,u.jsx)("option",{value:1e8,children:"No max"}),Ks.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(c.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]})]}):"Both"===Oe.channel?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Bedrooms"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Oe.bedrooms_min||"",onChange:e=>We((s=>({...s,bedrooms_min:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No min"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"})]}),(0,u.jsxs)("select",{className:"dropdown",value:Oe.bedrooms_max||"",onChange:e=>We((s=>({...s,bedrooms_max:""===e.target.value?null:e.target.value}))),children:[(0,u.jsx)("option",{value:"",children:"No max"}),(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"}),(0,u.jsx)("option",{value:"6",children:"6"}),(0,u.jsx)("option",{value:"7",children:"7"})]})]})]}),(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Rental price"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Oe.rental_price_min||"",onChange:e=>We((s=>({...s,rental_price_min:e.target.value}))),children:[(0,u.jsx)("option",{value:0,children:"No min"}),Qs.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(c.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,u.jsxs)("select",{className:"dropdown",value:Oe.rental_price_max||"",onChange:e=>We((s=>({...s,rental_price_max:e.target.value}))),children:[(0,u.jsx)("option",{value:1e7,children:"No max"}),Qs.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(c.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]}),(0,u.jsx)("div",{className:"single-input-block",children:(0,u.jsxs)("div",{className:"input-block large",children:[(0,u.jsx)("h3",{children:"Rental furnishing status"}),(0,u.jsxs)("select",{className:"dropdown",value:Oe.rental_additional||"Either furnished or unfurnished",onChange:e=>We((s=>({...s,rental_additional:e.target.value}))),children:[(0,u.jsx)("option",{children:"Either furnished or unfurnished"}),(0,u.jsx)("option",{children:"Furnished"}),(0,u.jsx)("option",{children:"Unfurnished"})]})]})}),(0,u.jsxs)("div",{className:"single-title-double",children:[(0,u.jsx)("h3",{children:"Sales price"}),(0,u.jsxs)("div",{className:"double-dropdowns",children:[(0,u.jsxs)("select",{className:"dropdown",value:Oe.sales_price_min||"",onChange:e=>We((s=>({...s,sales_price_min:e.target.value}))),children:[(0,u.jsx)("option",{value:0,children:"No min"}),Ks.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(c.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]}),(0,u.jsxs)("select",{className:"dropdown",value:Oe.sales_price_max||"",onChange:e=>We((s=>({...s,sales_price_max:e.target.value}))),children:[(0,u.jsx)("option",{value:1e8,children:"No max"}),Ks.map(((e,s)=>(0,u.jsx)("option",{value:e,children:(0,u.jsx)(c.h3,{value:e,displayType:"text",thousandSeparator:!0,prefix:"\xa3"})},s)))]})]})]})]}):""}):""]}),(0,u.jsx)("div",{className:"lead-gen-save",children:(0,u.jsx)("button",{className:"save-details",onClick:async()=>{let e;g&&g.lead_gen_details&&g.lead_gen_details.length>0?(e=await t.Z.put(`/api/lead_gen_details/${g.id}/`,Oe,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}}),"Lettings"===g.lead_gen_details.channel?B(!0):"Sales"===g.lead_gen_details.channel?F(!0):"Both"===g.lead_gen_details.channel&&(B(!0),F(!0)),ke("Explore")):(e=await t.Z.post("/api/lead_gen_details/",Oe,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}}),"Lettings"===g.lead_gen_details.channel?B(!0):"Sales"===g.lead_gen_details.channel?F(!0):"Both"===g.lead_gen_details.channel&&(B(!0),F(!0)),ke("Explore")),Os()},children:"Save details"})})]})}):"Explore"!==Ce||k?"Explore"===Ce&&k?(0,u.jsx)("div",{className:"property-table-loading",children:(0,u.jsx)(h.Z,{})}):"Tracking"===Ce?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(b,{savedProperties:re,userData:g,csvData:as,setCsvData:ls,getCurrentDate:()=>{const e=new Date,s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}-${a}-${s}`},handleVisitUrl:qs,loadUserData:Os,setSavedProperties:oe,latestFavourites:Ls,setLatestFavourites:$s,setLeadGenSection:ke})}):"Letter campaigns"===Ce?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(P,{letterProperties:je,setLetterProperties:je,userData:g,loadUserData:Os,setLeadGenSection:ke,signature:Ge,setSignature:Ye,letterTemplates:Ve,setLetterTemplates:Je,setLetterCampaigns:Xe,letterCampaigns:qe,campaignLoading:D,setCampaignLoading:T,availableCredits:He,setAvailableCredits:Re})}):"Archived"===Ce?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(w,{handleVisitUrl:qs,archivedProperties:me,loadUserData:Os,setLeadGenSection:ke,latestFavourites:Ls,setLatestFavourites:$s})}):"Manual matcher"===Ce?(0,u.jsx)(j,{increaseUsageCount:ma,setErrors:a,userData:g,loadUserData:Os,savedProperties:re,archivedProperties:me,handleVisitUrl:qs,savedActionShow:na,setSavedActionShow:ca,handleSavedActionClose:ra,setLeadGenSection:ke,latestFavourites:Ls,handleSavedActionShow:e=>{ca(!0),Qe([])},setLatestFavourites:$s}):"Hidden properties"===Ce?(0,u.jsx)(C,{hiddenProperties:ue,handleVisitUrl:qs,loadUserData:Os,setLeadGenSection:ke,latestFavourites:Ls,setLatestFavourites:$s}):"":(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"results-block",children:[(0,u.jsxs)("div",{className:"property-insight-nav",children:[(0,u.jsxs)("div",{className:"property-insight-buttons",children:[(0,u.jsx)("h3",{className:"insight-button "+("Lettings"===Ie?"active":"inactive"),id:"left",onClick:()=>Ue("Lettings"),children:"Lettings"}),(0,u.jsx)("h3",{className:"insight-button "+("Sales"===Ie?"active":"inactive"),id:"right",onClick:()=>Ue("Sales"),children:"Sales"})]}),(0,u.jsxs)("div",{className:"action-section",children:[(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"bin-icon"}),(0,u.jsx)("h3",{onClick:e=>{da(!0)},children:"Hide selection"})]}),(0,u.jsxs)("div",{className:"save-section",children:[(0,u.jsx)("div",{className:"print-icon"}),(0,u.jsx)("h3",{onClick:async()=>{if((0,n.Hb)()){const e=new Set(g.company_favourites.map((e=>e.rightmove_id))),a=[...Ke,...es].filter((s=>!e.has(s.rightmove_id)));if(console.log(a),0===a.length)return void console.log("No new favourites to add");try{const e=await t.Z.post("/api/epc_favourite/",a,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",e.data),$s(a.length),Os(),y().fire({title:"\ud83d\ude0e action complete",text:`${a.length} properties added to your saved properties`,confirmButtonText:"Go to saved",confirmButtonColor:"#ED6B86",cancelButtonText:"Stay here",backdrop:!0,background:"#FDF7F0",customClass:{title:"popup-swal-title",popup:"popup-swal-body",confirmButton:"popup-swal-confirm",cancelButton:"popup-swal-cancel"}}).then((e=>{e.isConfirmed&&ke("Tracking")})),Qe([]),ss([]),os(Be.map((()=>!1))),hs(Le.map((()=>!1)))}catch(s){console.error("Error saving favourite:",s)}}else e("/access-denied"),console.log("logged out")},children:"Track selection"})]})]})]}),"Lettings"===Ie?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"filter-section",children:[(0,u.jsx)("h3",{children:"Filter properties"}),(0,u.jsxs)("select",{className:"dropdown",value:ms,onChange:e=>ps(e.target.value),children:[(0,u.jsx)("option",{value:"1day",children:"Updated in the last 24 hours"}),(0,u.jsx)("option",{value:"2days",children:"Updated in the last 48 hours"}),(0,u.jsx)("option",{value:"3days",children:"Updated in the last 72 hours"}),(0,u.jsx)("option",{value:"7days",children:"Updated in the last week"}),(0,u.jsx)("option",{value:"4weeks",children:"Updated in the last 4 weeks"}),(0,u.jsx)("option",{value:"8weeks",children:"Updated in the last 8 weeks"}),(0,u.jsx)("option",{value:"12weeks",children:"Updated in the last 12 weeks"}),(0,u.jsx)("option",{value:"16weeks",children:"Updated in the last 16 weeks"}),(0,u.jsx)("option",{value:"all",children:"All properties"}),(0,u.jsx)("option",{value:">8weeks",children:"Added over 8 weeks ago"}),(0,u.jsx)("option",{value:">12weeks",children:"Added over 12 weeks ago"}),(0,u.jsx)("option",{value:">16weeks",children:"Added over 16 weeks ago"})]})]}),(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Ms("Matching"),style:{color:"Matching"===Ps?"white":"#1A276C",backgroundColor:"Matching"===Ps?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Matching"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Ms("Multiple matches"),style:{color:"Multiple matches"===Ps?"white":"#1A276C",backgroundColor:"Multiple matches"===Ps?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Multiple matches"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Ms("No matches"),style:{color:"No matches"===Ps?"white":"#1A276C",backgroundColor:"No matches"===Ps?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"No matches"})]}),"Matching"===Ps?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",gs.length," rental properties that match your criteria"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:rs.length>0&&rs.every(Boolean),onChange:e=>{e.target.checked?(()=>{const e=new Set(g.company_favourites.map((e=>e.rightmove_id))),s=gs.map((e=>({...e.property_data,address:e.epc_data_list[0].address}))).filter((s=>!e.has(s.rightmove_id)));os(gs.map((()=>!0))),Qe(s)})():Ws()}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",onClick:ia,children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:ta,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Bathrooms"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:gs?gs.map(((e,s)=>{const a=Ke.some((s=>s.rightmove_id===e.property_data.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(a?"highlighted-row":""),children:[(0,u.jsx)("div",{className:"column",id:"column11",children:re.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2764\ufe0f"})}):me.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2b50\ufe0f"})}):(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:rs[s],onChange:e=>((e,s)=>{const a=[...rs];a[s]=e.target.checked,os(a);const l={...gs[s].property_data,address:gs[s].epc_data_list[0].address};console.log("selected property->",l),e.target.checked?(console.log("checked"),Qe((e=>[...e,l]))):Qe((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id))))})(e,s)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>qs(e.property_data.url),children:_&&"Free"===_?(0,u.jsx)("h5",{children:e.property_data.displayAddress}):(0,u.jsx)("h5",{children:e.epc_data_list[0].address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bathrooms})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]})})):" "})]})]}):"Multiple matches"===Ps?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",bs.length," rental properties that we do not have an exact match for"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("div",{id:"column1",className:"column",children:(0,u.jsx)("h5",{children:"#"})}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Listed address"})}),(0,u.jsx)("div",{id:"column3",className:"column",onClick:ia,children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Size (sq. m)"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:ta,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Bathrooms"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsx)("h5",{children:"Action"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:bs?bs.map(((e,s)=>{const a=Zs.has(s);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.displayAddress})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised&&e.property_data.reduced_revised?`Reduced ${e.property_data.reduced_revised}`:e.property_data.added_revised&&null===e.property_data.reduced_revised?e.property_data.added_revised:"N/a"})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:"nan"===e.property_data.size?"":(.092903*e.property_data.size).toFixed(1)})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bathrooms})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})}),(0,u.jsx)("div",{className:"column",id:"column11",children:re.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2764\ufe0f"})}):me.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2b50\ufe0f"})}):(0,u.jsx)("h3",{className:"expansion",onClick:()=>pa(s),children:Zs.has(s)?"^":"v"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),a&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"matching-title",children:"Matching properties"}),(0,u.jsxs)("div",{className:"expanded-section-titles",children:[(0,u.jsx)("p",{className:"column",id:"column1",children:"#"}),(0,u.jsx)("p",{className:"column",id:"column2",children:"Address"}),(0,u.jsx)("p",{className:"column",id:"column3",children:"Postcode"}),(0,u.jsx)("p",{className:"column",id:"column4",children:"Current EPC"}),(0,u.jsx)("p",{className:"column",id:"column5",children:"Potential EPC"}),(0,u.jsx)("p",{className:"column",id:"column6",children:"Floor"}),(0,u.jsx)("p",{className:"column",id:"column7",children:"Size"}),(0,u.jsx)("p",{className:"column",id:"column8"})]}),e.epc_data_list.map(((a,l)=>(0,u.jsxs)("div",{className:"expanded-content",children:[(0,u.jsxs)("p",{className:"column",id:"column1",onClick:()=>qs(a.url),children:[l+1," "]}),(0,u.jsx)("p",{className:"column",id:"column2",onClick:()=>qs(a.url),children:a.address}),(0,u.jsx)("p",{className:"column",id:"column3",onClick:()=>qs(a.url),children:a.postcode}),(0,u.jsx)("p",{className:"column",id:"column4",onClick:()=>qs(a.url),children:a.current_energy_efficiency}),(0,u.jsx)("p",{className:"column",id:"column5",onClick:()=>qs(a.url),children:a.potential_energy_efficiency}),(0,u.jsx)("p",{className:"column",id:"column6",onClick:()=>qs(a.url),children:a.final_floor_level}),(0,u.jsx)("p",{className:"column",id:"column7",onClick:()=>qs(a.url),children:a.floor_area}),(0,u.jsx)("div",{className:"column",id:"column8",children:(0,u.jsx)("button",{className:"add-property",onClick:()=>xa(e,a,s),children:"+"})})]},l)))]})]})})):" "})]})]}):"No matches"===Ps?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",ws.length," rental properties that we do not have any match for"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Listed address"})}),(0,u.jsx)("div",{id:"column3",className:"column",onClick:ia,children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:ta,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:ws?ws.map(((e,s)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.displayAddress})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):""]}):"Sales"===Ie?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"filter-section",children:[(0,u.jsx)("h3",{children:"Filter properties"}),(0,u.jsxs)("select",{className:"dropdown",value:ms,onChange:e=>ps(e.target.value),children:[(0,u.jsx)("option",{value:"1day",children:"Updated in the last 24 hours"}),(0,u.jsx)("option",{value:"2days",children:"Updated in the last 48 hours"}),(0,u.jsx)("option",{value:"3days",children:"Updated in the last 72 hours"}),(0,u.jsx)("option",{value:"7days",children:"Updated in the last week"}),(0,u.jsx)("option",{value:"4weeks",children:"Updated in the last 4 weeks"}),(0,u.jsx)("option",{value:"8weeks",children:"Updated in the last 8 weeks"}),(0,u.jsx)("option",{value:"12weeks",children:"Updated in the last 12 weeks"}),(0,u.jsx)("option",{value:"16weeks",children:"Updated in the last 16 weeks"}),(0,u.jsx)("option",{value:"all",children:"All properties"}),(0,u.jsx)("option",{value:">8weeks",children:"Added over 8 weeks ago"}),(0,u.jsx)("option",{value:">12weeks",children:"Added over 12 weeks ago"}),(0,u.jsx)("option",{value:">16weeks",children:"Added over 16 weeks ago"})]})]}),(0,u.jsxs)("div",{className:"matching-status",children:[(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Us("Matching"),style:{color:"Matching"===Is?"white":"#1A276C",backgroundColor:"Matching"===Is?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Matching"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Us("Multiple matches"),style:{color:"Multiple matches"===Is?"white":"#1A276C",backgroundColor:"Multiple matches"===Is?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"Multiple matches"}),(0,u.jsx)("h3",{className:"matching-pill",onClick:()=>Us("No matches"),style:{color:"No matches"===Is?"white":"#1A276C",backgroundColor:"No matches"===Is?"#ED6B86":"rgba(26, 39, 108, 0.15)"},children:"No matches"})]}),A?(0,u.jsx)("div",{className:"property-table-loading",children:(0,u.jsx)(h.Z,{})}):A?"":(0,u.jsx)(u.Fragment,{children:"Matching"===Is?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",_s.length," properties for sale that match your criteria"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:ds.length>0&&ds.every(Boolean),onChange:e=>{e.target.checked?(()=>{const e=new Set(g.company_favourites.map((e=>e.rightmove_id))),s=_s.map((e=>({...e.property_data,address:e.epc_data_list[0].address}))).filter((s=>!e.has(s.rightmove_id)));hs(_s.map((()=>!0))),ss(s)})():Gs()}}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Address"})}),(0,u.jsx)("div",{id:"column3",className:"column",onClick:ia,children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:ta,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Bathrooms"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:_s?_s.map(((e,s)=>{const a=es.some((s=>s.rightmove_id===e.property_data.rightmove_id));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content "+(a?"highlighted-row":""),children:[(0,u.jsx)("div",{className:"column",id:"column11",children:re.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2764\ufe0f"})}):me.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"\u2b50\ufe0f"})}):(0,u.jsxs)("div",{className:"custom-checkbox",children:[(0,u.jsx)("input",{className:"checkbox",type:"checkbox",checked:ds[s],onChange:e=>((e,s)=>{const a=[...ds];a[s]=e.target.checked,hs(a);const l={..._s[s].property_data,address:_s[s].epc_data_list[0].address};console.log(l),e.target.checked?ss((e=>[...e,l])):ss((e=>e.filter((e=>e.rightmove_id!==l.rightmove_id))))})(e,s)}),(0,u.jsx)("label",{className:"label"})]})}),(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>qs(e.property_data.url),children:_&&"Free"===_?(0,u.jsx)("h5",{children:e.property_data.displayAddress}):(0,u.jsx)("h5",{children:e.epc_data_list[0].address})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bathrooms})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]})})):" "})]})]}):"Multiple matches"===Is?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",Cs.length," properties for sale that we do not have an exact match for"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Listed address"})}),(0,u.jsx)("div",{id:"column3",className:"column",onClick:ia,children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Size (sq. m)"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:ta,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Bathrooms"})}),(0,u.jsx)("div",{id:"column10",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})}),(0,u.jsx)("div",{id:"column11",className:"column",children:(0,u.jsx)("h5",{children:"Action"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:Cs?Cs.map(((e,s)=>{const a=Hs.has(s);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.displayAddress})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised&&e.property_data.reduced_revised?`Reduced ${e.property_data.reduced_revised}`:e.property_data.added_revised&&null===e.property_data.reduced_revised?e.property_data.added_revised:"N/a"})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:"nan"===e.property_data.size?"":(.092903*e.property_data.size).toFixed(1)})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bathrooms})}),(0,u.jsx)("div",{className:"column",id:"column10",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})}),(0,u.jsx)("div",{className:"column",id:"column11",children:re.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Saved"})}):me.some((s=>s.rightmove_id===e.property_data.rightmove_id))?(0,u.jsx)("div",{className:"saved-message",children:(0,u.jsx)("h3",{children:"Archived"})}):(0,u.jsx)("h3",{className:"expansion",onClick:()=>ua(s),children:Hs.has(s)?"^":"v"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),a&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h3",{className:"matching-title",children:"Matching properties"}),(0,u.jsxs)("div",{className:"expanded-section-titles",children:[(0,u.jsx)("p",{className:"column",id:"column1",children:"#"}),(0,u.jsx)("p",{className:"column",id:"column2",children:"Address"}),(0,u.jsx)("p",{className:"column",id:"column3",children:"Postcode"}),(0,u.jsx)("p",{className:"column",id:"column4",children:"Current EPC"}),(0,u.jsx)("p",{className:"column",id:"column5",children:"Potential EPC"}),(0,u.jsx)("p",{className:"column",id:"column6",children:"Floor"}),(0,u.jsx)("p",{className:"column",id:"column7",children:"Size"}),(0,u.jsx)("p",{className:"column",id:"column8"})]}),e.epc_data_list.map(((a,l)=>(0,u.jsxs)("div",{className:"expanded-content",children:[(0,u.jsxs)("p",{className:"column",id:"column1",onClick:()=>qs(a.url),children:[l+1," "]}),(0,u.jsx)("p",{className:"column",id:"column2",onClick:()=>qs(a.url),children:a.address}),(0,u.jsx)("p",{className:"column",id:"column3",onClick:()=>qs(a.url),children:a.postcode}),(0,u.jsx)("p",{className:"column",id:"column4",onClick:()=>qs(a.url),children:a.current_energy_efficiency}),(0,u.jsx)("p",{className:"column",id:"column5",onClick:()=>qs(a.url),children:a.potential_energy_efficiency}),(0,u.jsx)("p",{className:"column",id:"column6",onClick:()=>qs(a.url),children:a.final_floor_level}),(0,u.jsx)("p",{className:"column",id:"column7",onClick:()=>qs(a.url),children:a.floor_area}),(0,u.jsx)("div",{className:"column",id:"column8",children:(0,u.jsx)("button",{className:"add-property",onClick:()=>xa(e,a,s),children:"+"})})]},l)))]})]})})):" "})]})]}):"No matches"===Is?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"title-section",children:(0,u.jsxs)("h3",{className:"sub-title",children:["There are ",Bs.length," properties for sale that we do not have any match for"]})}),(0,u.jsxs)("div",{className:"results-table",children:[(0,u.jsxs)("div",{className:"results-headers",children:[(0,u.jsx)("h5",{id:"column1",className:"column",children:"#"}),(0,u.jsx)("div",{id:"column2",className:"column",children:(0,u.jsx)("h5",{children:"Listed address"})}),(0,u.jsx)("div",{id:"column3",className:"column",onClick:ia,children:(0,u.jsx)("h5",{children:"Postcode"})}),(0,u.jsx)("div",{id:"column4",className:"column",children:(0,u.jsx)("h5",{children:"Added"})}),(0,u.jsx)("div",{id:"column5",className:"column",children:(0,u.jsx)("h5",{children:"Reduced"})}),(0,u.jsx)("div",{id:"column6",className:"column",children:(0,u.jsx)("h5",{children:"Property type"})}),(0,u.jsx)("div",{id:"column7",className:"column",onClick:ta,children:(0,u.jsx)("h5",{children:"Price"})}),(0,u.jsx)("div",{id:"column8",className:"column",children:(0,u.jsx)("h5",{children:"Bedrooms"})}),(0,u.jsx)("div",{id:"column9",className:"column",children:(0,u.jsx)("h5",{children:"Agent"})})]}),(0,u.jsx)("hr",{className:"property-divider"}),(0,u.jsx)("div",{className:"results-details explore",children:Bs?Bs.map(((e,s)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"results-content",children:[(0,u.jsx)("div",{className:"column",id:"column1",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:s+1})}),(0,u.jsx)("div",{className:"column",id:"column2",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.displayAddress})}),(0,u.jsx)("div",{className:"column",id:"column3",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.postcode})}),(0,u.jsx)("div",{className:"column",id:"column4",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.added_revised?"N/a":e.property_data.added_revised})}),(0,u.jsx)("div",{className:"column",id:"column5",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:null===e.property_data.reduced_revised?"N/a":e.property_data.reduced_revised})}),(0,u.jsx)("div",{className:"column",id:"column6",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.propertyType})}),(0,u.jsx)("div",{className:"column",id:"column7",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.price})}),(0,u.jsx)("div",{className:"column",id:"column8",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.bedrooms})}),(0,u.jsx)("div",{className:"column",id:"column9",onClick:()=>qs(e.property_data.url),children:(0,u.jsx)("h5",{children:e.property_data.agent})})]}),(0,u.jsx)("hr",{className:"property-divider"})]}))):" "})]})]}):""})]}):""]})})})})]})})})})]}),(0,u.jsx)(x,{savedActionShow:na,handleSavedActionClose:ra,setLeadGenSection:ke,latestFavourites:Ls}),(0,u.jsx)(v,{propertyRemoveShow:oa,handleRemovePropertyClose:ha,removeProperty:async()=>{if((0,n.Hb)()){const e=new Set(g.company_favourites.map((e=>e.rightmove_id))),a=[...Ke,...es].filter((s=>!e.has(s.rightmove_id)));if(console.log(a),0===a.length)return void console.log("No properties to remove");try{const e=await t.Z.post("/api/epc_favourite/remove_property/",a,{headers:{Authorization:`Bearer ${(0,n.hP)()}`}});console.log("Response:",e.data),$s(a.length),Os(),Ms("Matching"),Qe([]),ss([]),os(Be.map((()=>!1))),hs(Le.map((()=>!1))),ha()}catch(s){console.error("Error saving favourite:",s)}}else e("/access-denied"),console.log("logged out")}})]})}},69584:function(e,s,a){a.r(s);a(72791);var l=a(80184);s.default=e=>{let{signature:s,selectedTemplate:a,ownerData:t,address:i,handleBasicTemplateClose:n,processTemplateShow:c}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("section",{className:"basic-template",style:{},children:(0,l.jsxs)("div",{className:"template-section",style:{},children:[(0,l.jsxs)("div",{className:"template-content",children:[(0,l.jsx)("div",{className:"logo-section",style:{position:"relative",textAlign:"Left"===a.logo_position?"left":"Centre"===a.logo_position?"center":"right",height:`${a.logo_height}px`},children:(0,l.jsx)("div",{className:"logo-box",style:{display:"inline-block",width:`${a.logo_width}px`,height:`${a.logo_height}px`},children:s&&(0,l.jsx)("img",{src:s.logo,alt:"Logo",style:{maxWidth:`${a.logo_width}px`,maxHeight:`${a.logo_height}px`,width:"auto",height:"auto"}})})}),(0,l.jsx)("div",{className:"address-section",style:{position:"absolute",top:"100px"},children:(0,l.jsxs)("h3",{className:"address-details",style:{fontSize:"16px",fontWeight:"500",marginTop:"2px",padding:"0",lineHeight:"1.2"},children:[t.owner_name||"The Owner",(0,l.jsx)("br",{}),i?i[0]:"",(0,l.jsx)("br",{}),i?i[1]:"",(0,l.jsx)("br",{}),i?i[2]:"",(0,l.jsx)("br",{}),i?i[3]:"",(0,l.jsx)("br",{}),i?i[4]:"",(0,l.jsx)("br",{})]})}),(0,l.jsxs)("div",{className:"body-section",style:{position:"absolute",top:"200px"},children:[(0,l.jsxs)("div",{className:"letter-intro",style:{display:"flex",flexDirection:"row",marginTop:"30px"},children:[(0,l.jsxs)("h3",{className:"intro",style:{fontSize:"16px",fontWeight:"500",marginRight:"3px"},children:[a.opening," "]}),(0,l.jsx)("h3",{className:"intro",style:{fontSize:"16px",fontWeight:"500"},children:t.owner_name?`${t.owner_name}, `:"Homeowner,"})]}),(0,l.jsx)("h3",{className:"letter-paragraph",style:{marginTop:"15px",fontSize:"16px",fontWeight:"500"},children:a.template_body_1}),(0,l.jsx)("h3",{className:"letter-paragraph",style:{marginTop:"15px",fontSize:"16px",fontWeight:"500"},children:a.template_body_2}),(0,l.jsx)("h3",{className:"letter-paragraph",style:{marginTop:"15px",fontSize:"16px",fontWeight:"500"},children:a.template_body_3}),(0,l.jsx)("h3",{className:"letter-paragraph",style:{marginTop:"15px",fontSize:"16px",fontWeight:"500"},children:a.template_body_4}),(0,l.jsxs)("h3",{className:"sign-off-line",style:{fontSize:"16px",fontWeight:"500",marginTop:"5px",padding:"0",lineHeight:"1.2"},children:[a.closing&&(0,l.jsxs)(l.Fragment,{children:[a.closing,(0,l.jsx)("br",{})]}),a.sender_name&&(0,l.jsxs)(l.Fragment,{children:[s.first_name," ",s.last_name,(0,l.jsx)("br",{})]}),a.sender_role&&(0,l.jsxs)(l.Fragment,{children:[s.role,a.sender_company&&`, ${s.company_name}`,(0,l.jsx)("br",{})]}),a.sender_mobile&&(0,l.jsxs)(l.Fragment,{children:[s.mobile,(0,l.jsx)("br",{})]}),a.sender_landline&&(0,l.jsxs)(l.Fragment,{children:[s.landline,(0,l.jsx)("br",{})]}),a.sender_email&&(0,l.jsxs)(l.Fragment,{children:[s.email,(0,l.jsx)("br",{})]})]})]})]}),s&&(0,l.jsx)("h3",{className:"letter-footer",style:{position:"absolute",bottom:"-10px",textAlign:"center",fontSize:"16px",fontWeight:"500",left:"0",right:"0",width:"100%"},children:s.letter_footer})]})})})}},29193:function(e,s,a){e.exports=a.p+"static/media/transparent-spinner.f3eb62caffaa8568ecbe.gif"}}]);
//# sourceMappingURL=480.a4c2d9fd.chunk.js.map